{"version":3,"sources":["components/Account/Login/Login.actions.js","components/FixedGrid/Row/Row.module.css","components/FixedGrid/DraggableItem/DraggableItem.module.css","components/FixedGrid/GridBase.module.css","../node_modules/react-intl/locale-data sync /^/.*$","translations lazy /^/.*/.json$/ groupOptions: {} namespace object","i18n.js","cordova-util.js","components/Notifications/Notifications.constants.js","translations/moreLanguages sync /^/.*/.md$","translations/moreLanguages/ar-SA.md","translations/moreLanguages/be-BY.md","translations/moreLanguages/bg-BG.md","translations/moreLanguages/bn-BD.md","translations/moreLanguages/cs-CZ.md","translations/moreLanguages/da-DK.md","translations/moreLanguages/de-DE.md","translations/moreLanguages/el-GR.md","translations/moreLanguages/en-GB.md","translations/moreLanguages/es-ES.md","translations/moreLanguages/fi-FI.md","translations/moreLanguages/fr-FR.md","translations/moreLanguages/he-IL.md","translations/moreLanguages/hi-IN.md","translations/moreLanguages/hr-HR.md","translations/moreLanguages/hu-HU.md","components/Settings/Scanning/Scanning.constants.js","translations/moreLanguages/id-ID.md","translations/moreLanguages/it-IT.md","translations/moreLanguages/ja-JP.md","translations/moreLanguages/km-KH.md","translations/moreLanguages/ko-KR.md","translations/moreLanguages/me-ME.md","translations/moreLanguages/mk-MK.md","translations/moreLanguages/ne-NP.md","translations/moreLanguages/nl-NL.md","translations/moreLanguages/no-NO.md","providers/ScannerProvider/ScannerProvider.constants.js","translations/moreLanguages/pl-PL.md","translations/moreLanguages/pt-BR.md","translations/moreLanguages/pt-PT.md","translations/moreLanguages/ro-RO.md","translations/moreLanguages/ru-MD.md","translations/moreLanguages/ru-RU.md","translations/moreLanguages/sh-HR.md","translations/moreLanguages/si-LK.md","translations/moreLanguages/sk-SK.md","translations/moreLanguages/sr-CS.md","translations/moreLanguages/sr-SP.md","translations/moreLanguages/sv-SE.md","translations/moreLanguages/th-TH.md","translations/moreLanguages/tr-TR.md","translations/moreLanguages/tu-TI.md","translations/moreLanguages/uk-UA.md","translations/moreLanguages/ur-PK.md","translations/moreLanguages/vi-VN.md","translations/moreLanguages/zh-CN.md","translations/moreLanguages/zu-ZA.md","translations/help sync /^/.*/.md$","translations/help/ar-SA.md","components/Board/Board.constants.js","translations/help/be-BY.md","translations/help/bg-BG.md","translations/help/bn-BD.md","translations/help/cs-CZ.md","translations/help/da-DK.md","translations/help/de-DE.md","translations/help/el-GR.md","translations/help/en-GB.md","translations/help/es-ES.md","translations/help/fi-FI.md","translations/help/fr-FR.md","translations/help/he-IL.md","translations/help/hi-IN.md","translations/help/hr-HR.md","translations/help/hu-HU.md","translations/help/id-ID.md","translations/help/it-IT.md","translations/help/ja-JP.md","translations/help/km-KH.md","translations/help/ko-KR.md","translations/help/me-ME.md","translations/help/mk-MK.md","translations/help/ne-NP.md","translations/help/nl-NL.md","translations/help/no-NO.md","translations/help/pl-PL.md","translations/help/pt-BR.md","translations/help/pt-PT.md","translations/help/pt-TL.md","translations/help/ro-RO.md","translations/help/ru-MD.md","translations/help/ru-RU.md","translations/help/sh-HR.md","translations/help/si-LK.md","translations/help/sk-SK.md","translations/help/sr-CS.md","translations/help/sr-ME.md","translations/help/sr-RS.md","translations/help/sr-SP.md","translations/help/sv-SE.md","translations/help/th-TH.md","translations/help/tr-TR.md","translations/help/tu-TI.md","translations/help/uk-UA.md","translations/help/ur-PK.md","translations/help/vi-VN.md","translations/help/zh-CN.md","translations/help/zu-ZA.md","components/Board/Board.analytics.js","providers/SpeechProvider/SpeechProvider.analytics.js","analytics.js","components/App/App.reducer.js","providers/LanguageProvider/LanguageProvider.reducer.js","providers/ScannerProvider/ScannerProvider.reducer.js","providers/SpeechProvider/SpeechProvider.reducer.js","components/Board/Board.reducer.js","components/Communicator/Communicator.reducer.js","components/Notifications/Notifications.reducer.js","store.js","reducers.js","providers/SpeechProvider/tts.js","providers/LanguageProvider/LanguageProvider.constants.js","registerServiceWorker.js","components/Notifications/Notifications.actions.js","components/App/App.selectors.js","components/App/App.messages.js","components/Account/Activate/Activate.container.js","components/Account/Activate/Activate.actions.js","components/UI/FormItems/TextField.js","components/UI/LoadingIcon/LoadingIcon.js","components/Account/ChangePassword/validationSchema.js","components/Account/ChangePassword/ChangePassword.messages.js","components/Account/ChangePassword/ChangePassword.component.js","components/Account/ChangePassword/ChangePassword.actions.js","components/Account/ChangePassword/ChangePassword.constants.js","components/Account/OAuthLogin/OAuthLogin.messages.js","components/Account/OAuthLogin/OAuthLogin.container.js","components/UI/IconButton/IconButton.js","components/WelcomeScreen/WelcomeScreen.messages.js","components/WelcomeScreen/Information/Information.messages.js","components/WelcomeScreen/Information/Information.js","components/Account/Login/validationSchema.js","components/Account/Login/Login.messages.js","components/Account/Login/Login.component.js","components/Account/SignUp/validationSchema.js","components/Account/SignUp/SignUp.actions.js","components/Account/SignUp/SignUp.messages.js","components/Account/SignUp/SignUp.component.js","components/Account/ResetPassword/validationSchema.js","components/Account/ResetPassword/ResetPassword.actions.js","components/Account/ResetPassword/ResetPassword.constants.js","components/Account/ResetPassword/ResetPassword.messages.js","components/Account/ResetPassword/ResetPassword.component.js","components/WelcomeScreen/CboardLogo/CboardLogo.component.js","components/WelcomeScreen/WelcomeScreen.container.js","components/AuthScreen/AuthScreen.messages.js","components/AuthScreen/AuthScreen.component.js","components/AuthScreen/Auth.helpers.js","components/FixedGrid/utils.ts","components/Board/TileEditor/TileEditor.messages.js","components/UI/BackButton/BackButton.messages.js","components/UI/BackButton/BackButton.js","components/UI/FullScreenDialog/FullScreenDialog.js","components/UI/FullScreenDialog/FullScreenDialogContent.js","components/UI/FilterBar/FilterBar.js","components/Board/Symbol/Symbol.js","components/Board/SymbolSearch/SymbolSearch.messages.js","components/Board/SymbolSearch/SymbolSearch.component.js","components/Board/Tile/Tile.component.js","components/UI/InputImage/InputImage.messages.js","components/UI/InputImage/InputImage.component.js","components/UI/InputImage/InputImage.container.js","components/UI/ColorSelect/Circle/Circle.js","components/UI/ColorSelect/ColorSelect.messages.js","components/UI/ColorSelect/ColorSelect.js","components/VoiceRecorder/VoiceRecorder.messages.js","components/VoiceRecorder/VoiceRecorder.component.js","components/VoiceRecorder/VoiceRecorder.container.js","components/Board/TileEditor/TileEditor.component.js","components/Board/Board.messages.js","components/FixedGrid/Row/Row.js","components/FixedGrid/DroppableCell/DroppableCell.js","components/FixedGrid/DraggableItem/DraggableItem.js","components/FixedGrid/GridBase.js","components/FixedGrid/Grid.js","components/Grid/Grid.container.js","components/Grid/Grid.constants.js","components/Board/Output/SymbolOutput/BackspaceButton/BackspaceButton.js","components/Board/Output/SymbolOutput/ClearButton/ClearButton.js","components/Board/Output/SymbolOutput/ShareButton/ShareButton.js","components/Board/Output/PhraseShare/PhraseShare.messages.js","components/Board/Output/PhraseShare/PhraseShare.component.js","components/Board/Output/PhraseShare/index.js","components/Board/Output/SymbolOutput/Scroll/Scroll.js","components/Board/Output/SymbolOutput/SymbolOutput.js","components/Board/Output/Output.container.js","components/Board/BoardShare/BoardShare.messages.js","components/Board/BoardShare/BoardShare.component.js","components/Board/BoardShare/index.js","components/UI/FullScreenButton/FullScreenButton.messages.js","components/UI/FullScreenButton/FullScreenButton.js","components/UI/PrintBoardButton/PrintBoardButton.component.js","components/UI/PrintBoardButton/PrintBoardButton.messages.js","components/UI/PrintBoardButton/PrintBoardDialog.component.js","components/UI/PrintBoardButton/PrintBoardButton.container.js","components/UI/UserIcon/UserIcon.messages.js","components/UI/UserIcon/UserIcon.component.js","components/UI/UserIcon/UserIcon.container.js","components/UI/LockToggle/childProof.js","components/UI/LockToggle/LockToggle.messages.js","components/UI/LockToggle/LockToggle.js","components/Analytics/Analytics.messages.js","components/UI/AnalyticsButton/AnalyticsButton.js","components/Settings/Settings.messages.js","components/UI/HelpButton/HelpButton.js","components/UI/SettingsButton/SettingsButton.messages.js","components/UI/SettingsButton/SettingsButton.js","components/Board/Navbar/Navbar.js","components/UI/SelectedCounter/SelectedCounter.messages.js","components/UI/SelectedCounter/SelectedCounter.component.js","components/Board/EditToolbar/EditToolbar.messages.js","components/Board/EditToolbar/EditToolbar.component.js","components/Board/EmptyBoard/EmptyBoard.messages.js","components/Board/EmptyBoard/EmptyBoard.component.js","components/UI/FormDialog/FormDialog.messages.js","components/UI/FormDialog/FormDialog.js","components/Communicator/CommunicatorToolbar/CommunicatorToolbar.messages.js","components/Communicator/CommunicatorToolbar/CommunicatorToolbar.component.js","components/Communicator/CommunicatorDialog/CommunicatorDialog.constants.js","components/Communicator/CommunicatorDialog/CommunicatorDialog.messages.js","components/Communicator/CommunicatorDialog/CommunicatorDialogBoardItem.component.js","components/Communicator/CommunicatorDialog/CommunicatorDialogButtons.component.js","components/Communicator/CommunicatorDialog/CommunicatorDialogTour.component.js","components/Communicator/CommunicatorDialog/CommunicatorDialog.component.js","components/Communicator/CommunicatorDialog/CommunicatorDialog.container.js","components/Communicator/CommunicatorDialog/index.js","components/Communicator/CommunicatorToolbar/CommunicatorToolbar.container.js","components/NavigationButtons/NavigationButtons.component.js","components/NavigationButtons/index.js","components/EditGridButtons/index.js","components/EditGridButtons/EditGridButtons.component.js","components/Board/Board.component.js","components/Board/Board.container.js","providers/ScannerProvider/ScannerProvider.actions.js","components/Notifications/Notifications.messages.js","components/Notifications/Notifications.component.js","components/Notifications/Notifications.container.js","components/NotFound/NotFound.js","components/Settings/SettingsSection.component.js","components/Settings/SettingsTour.component.js","components/Settings/Settings.component.js","components/Settings/Settings.container.js","components/Settings/People/People.messages.js","components/Settings/People/People.component.js","components/Settings/People/People.container.js","components/Settings/Language/Language.messages.js","components/Settings/Language/Language.component.js","components/Settings/Language/Language.container.js","components/Settings/Speech/Speech.messages.js","components/Settings/Speech/Speech.component.js","components/Settings/Speech/Speech.constants.js","components/Settings/Speech/Speech.container.js","components/Settings/Export/Export.messages.js","components/Settings/Export/Export.component.js","components/Settings/Export/Export.container.js","components/Settings/Import/Import.messages.js","components/Settings/Import/Import.component.js","components/Settings/Import/Import.container.js","components/Settings/Display/Display.messages.js","components/Settings/Display/Display.component.js","components/Settings/Display/Display.container.js","components/Settings/About/About.messages.js","components/Settings/About/About.component.js","components/Settings/Scanning/Scanning.messages.js","components/Settings/Scanning/Scanning.component.js","components/Settings/Scanning/Scanning.container.js","components/Settings/Navigation/Navigation.messages.js","components/UI/ResetToursItem/ResetToursItem.messages.js","components/UI/ResetToursItem/ResetToursItem.component.js","components/UI/ResetToursItem/ResetToursItem.container.js","components/Settings/Navigation/Navigation.component.js","components/Settings/Navigation/Navigation.container.js","components/Settings/Help/Help.component.js","components/Settings/Settings.wrapper.js","components/UI/ModifiedAreaChart/ModifiedAreaChart.component.js","components/UI/StatCards/StatCards.component.js","components/UI/StatCards2/StatCards2.component.js","components/UI/StyledTable/StyledTable.component.js","components/UI/TableCard/TableCard.component.js","components/UI/Doughnut/Doughnut.component.js","components/UI/Barchart/Barchart.component.js","components/Analytics/Analytics.component.js","components/Analytics/Analytics.container.js","components/App/App.component.js","components/App/App.container.js","polyfills.js","env.js","providers/LanguageProvider/LanguageProvider.container.js","providers/SpeechProvider/SpeechProvider.container.js","providers/ThemeProvider/RTLSupport.js","providers/ThemeProvider/ThemeProvider.container.js","index.js","providers/LanguageProvider/LanguageProvider.actions.js","history.js","helpers.js","api/api.js","api/index.js","components/Board/Board.actions.js","providers/SpeechProvider/SpeechProvider.constants.js","components/Communicator/Communicator.constants.js","components/App/App.constants.js","components/Settings/Display/Display.constants.js","components/Communicator/Communicator.actions.js","providers/SpeechProvider/SpeechProvider.actions.js","components/FixedGrid/DroppableCell/DroppableCell.module.css","components/FixedGrid/Grid.module.css","components/Settings/Export/Export.constants.js","constants.js","components/App/App.actions.js","components/Account/Login/Login.constants.js","translations/moreLanguages/en-US.md","translations/help/en-US.md"],"names":["loginSuccess","payload","type","LOGIN_SUCCESS","logout","LOGOUT","login","email","password","dispatch","getState","a","apiMethod","API","loginData","communicator","board","activeCommunicatorId","currentCommunicator","communicators","find","id","length","localBoardsIds","boards","forEach","indexOf","push","apiBoardsIds","filter","Promise","all","map","getBoard","b","apiBoards","addBoards","disableTour","isRootBoardTourEnabled","isUnlockedTourEnabled","isSettingsTourEnabled","isAnalyticsTourEnabled","settings","speech","pitch","changePitch","rate","changeRate","voices","uris","v","voiceURI","language","lang","includes","changeVoice","response","reject","data","disonnected","message","module","exports","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","webpackAsyncContext","then","ids","t","splitLangRgx","importTranslation","normalizeLanguageCode","splittedLang","split","toLowerCase","toUpperCase","standardizeLanguageCode","standardLang","alpha3TToAlpha2","standardCountry","alpha3ToAlpha2","getDefaultLang","langs","i","window","navigator","slice","DEFAULT_LANG","getSupportedLangs","supportedLangs","sLanguages","Set","voice","sort","APP_LANGS","getVoicesLangs","undefined","filterLocalLangs","localLangs","voiceSource","getVoiceURI","nVoices","name","nVoice","substring","EMPTY_VOICES","locale","localeData","require","err","console","log","addLocaleData","isCordova","cordova","isAndroid","platformId","isElectron","onCordovaReady","onReady","document","addEventListener","initCordovaPlugins","ga","startTrackerWithId","StatusBar","hide","AndroidFullScreen","immersiveMode","error","cvaTrackEvent","category","action","label","trackEvent","writeCvaFile","blob","requestFileSystem","LocalFileSystem","PERSISTENT","fs","root","getFile","create","exclusive","fileEntry","writeFile","dataObj","createWriter","fileWriter","onwriteend","onerror","toString","Blob","write","requestCvaWritePermissions","permissions","plugins","checkPermission","WRITE_EXTERNAL_STORAGE","status","hasPermission","requestPermission","warn","requestCvaPermissions","READ_EXTERNAL_STORAGE","RECORD_AUDIO","CAMERA","SHOW_NOTIFICATION","HIDE_NOTIFICATION","NOTIFICATION_DELAY","SCANNING_METHOD_AUTOMATIC","SCANNING_METHOD_MANUAL","ACTIVATE_SCANNER","DEACTIVATE_SCANNER","TOGGLE_SCANNER","UPDATE_SCANNER_SETTINGS","IMPORT_BOARDS","ADD_BOARDS","CREATE_BOARD","UPDATE_BOARD","DELETE_BOARD","CHANGE_BOARD","REPLACE_BOARD","SWITCH_BOARD","PREVIOUS_BOARD","TO_ROOT_BOARD","CREATE_TILE","DELETE_TILES","EDIT_TILES","FOCUS_TILE","CLICK_SYMBOL","CLICK_OUTPUT","CHANGE_OUTPUT","HISTORY_REMOVE_BOARD","UNMARK_BOARD","CREATE_API_BOARD_SUCCESS","CREATE_API_BOARD_FAILURE","CREATE_API_BOARD_STARTED","DELETE_API_BOARD_SUCCESS","DELETE_API_BOARD_FAILURE","DELETE_API_BOARD_STARTED","UPDATE_API_BOARD_SUCCESS","UPDATE_API_BOARD_FAILURE","UPDATE_API_BOARD_STARTED","GET_API_MY_BOARDS_SUCCESS","GET_API_MY_BOARDS_FAILURE","GET_API_MY_BOARDS_STARTED","DOWNLOAD_IMAGES_SUCCESS","DOWNLOAD_IMAGES_FAILURE","DOWNLOAD_IMAGES_STARTED","DOWNLOAD_IMAGE_SUCCESS","DOWNLOAD_IMAGE_FAILURE","DEFAULT_ROWS_NUMBER","DEFAULT_COLUMNS_NUMBER","importBoards","prevState","nextState","gaEvent","changeBoard","boardId","boardName","nameKey","createBoard","createTile","tile","deleteTiles","tilesId","tiles","reduce","acc","getTiles","editTiles","clickSymbol","symbolLabel","clickOutput","outputPhrase","eventsMap","startSpeech","text","CHANGE_VOICE","CHANGE_PITCH","CHANGE_RATE","START_SPEECH","offlineStorage","offlineWeb","state","app","isConnected","boardEventsMap","speechEventsMap","GoogleAnalyticsGtag","gaMiddleware","createMiddleware","initialState","isFirstVisit","liveHelp","communicatorTour","isCommBoardsEnabled","isPublicBoardsEnabled","isAllMyBoardsEnabled","displaySettings","uiSize","DISPLAY_SIZE_STANDARD","fontSize","hideOutputActive","labelPosition","LABEL_POSITION_BELOW","darkThemeActive","navigationSettings","active","shareShowActive","caBackButtonActive","quickUnlockActive","removeOutputActive","vocalizeFolders","userData","appReducer","UPDATE_DISPLAY_SETTINGS","UPDATE_NAVIGATION_SETTINGS","UPDATE_CONNECTIVITY","FINISH_FIRST_VISIT","DISABLE_TOUR","ENABLE_ALL_TOURS","display","navigation","UPDATE_USER_DATA","getDir","dir","languageProviderReducer","CHANGE_LANG","SET_LANGS","delay","strategy","scannerProviderReducer","scanning","ttsEngines","ttsDefaultEngine","ttsEngine","options","volume","isSpeaking","speechProviderReducer","RECEIVE_VOICES","RECEIVE_TTS_ENGINES","RECEIVE_TTS_DEFAULT_ENGINE","RECEIVE_TTS_ENGINE","newTtsEngine","engine","ttsEngineName","CHANGE_VOLUME","END_SPEECH","CANCEL_SPEECH","defaultBoards","advanced","output","activeBoardId","navHistory","isFetching","images","isFixed","reconcileBoards","localBoard","remoteBoard","lastEdited","moment","isSameOrAfter","isBefore","tileReducer","s","boardReducer","userCommunicators","activeCommunicator","rootBoard","concat","taBoards","taBoard","item","fixed","Array","from","updateBoards","oldBoard","boardData","index","nextBoard","format","splice","nH","prev","current","boardIndex","findIndex","nhIndex","bId","pop","navigationHistory","dnavHistory","removedBoardId","nextBoards","focusedTileId","tileId","markToUpdate","creadBoards","j","loadBoard","isPublic","hasOwnProperty","flag","myBoards","isArray","imgs","element","defaultCommunicators","communicatorReducer","IMPORT_COMMUNICATOR","CREATE_COMMUNICATOR","EDIT_COMMUNICATOR","communicatorIndex","c","newState","DELETE_COMMUNICATOR","CHANGE_COMMUNICATOR","ADD_BOARD_COMMUNICATOR","updatedCommunicators","DELETE_BOARD_COMMUNICATOR","dupdatedCommunicators","bindex","REPLACE_BOARD_COMMUNICATOR","prevBoardId","nextBoardId","CREATE_API_COMMUNICATOR_SUCCESS","communicatorId","CREATE_API_COMMUNICATOR_FAILURE","CREATE_API_COMMUNICATOR_STARTED","UPDATE_API_COMMUNICATOR_SUCCESS","UPDATE_API_COMMUNICATOR_FAILURE","UPDATE_API_COMMUNICATOR_STARTED","GET_API_MY_COMMUNICATORS_SUCCESS","myCommunicators","GET_API_MY_COMMUNICATORS_FAILURE","GET_API_MY_COMMUNICATORS_STARTED","open","kind","notificationsReducer","store","config","key","storage","createReducer","persistCombineReducers","scanner","notification","configureStore","middlewares","thunk","googleAnalytics","enhancers","applyMiddleware","composeEnhancers","compose","createStore","persistor","persistStore","getStore","azureSynthesizer","synth","speechSynthesis","audioElement","Audio","speakQueue","platformVoices","initAzureSynthesizer","azureSpeechConfig","azureSdk","fromSubscription","AZURE_SPEECH_SUBSCR_KEY","AZURE_SPEECH_SERVICE_REGION","playQueue","audioData","src","URL","createObjectURL","play","onended","revokeObjectURL","endCallback","shift","tts","isSupported","getVoiceByVoiceURI","VoiceURI","getLocalVoiceByVoiceURI","_getPlatformVoices","getVoices","_list","cloudVoices","getAzureVoices","voiceslst","removeEventListener","setTtsEngine","prom","time","timer","race","_r","rej","setTimeout","finally","clearTimeout","timeout","setEngine","event","getTtsEngines","getEngines","getTtsDefaultEngine","getDefaultEngine","cancel","pause","speak","onend","properties","setProperty","speakTextAsync","result","reason","SynthesizingAudioCompleted","paused","Canceled","errorDetails","close","localVoice","msg","SpeechSynthesisUtterance","isLocalhost","Boolean","location","hostname","match","register","onNewContentAvailable","onContentCached","process","href","origin","swUrl","fetch","headers","get","serviceWorker","ready","registration","unregister","reload","registerValidSW","catch","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","controller","showNotification","hideNotification","getUser","isLogged","isEmpty","defineMessages","save","defaultMessage","newContentAvailable","contentIsCached","ActivateContainer","isActivating","activationStatus","url","this","props","params","setState","axios","post","API_URL","activate","className","to","PureComponent","TextField","FormControl","FormHelperText","defaultProps","LoadingIcon","CircularProgress","size","validationSchema","yup","shape","min","required","passwordRepeat","oneOf","send","changePassword","changePasswordText","changePasswordSuccess","redirect","ChangePassword","isSending","storePasswordState","redirectMessage","sleep","milliseconds","handleSubmit","values","userid","intl","history","storePassword","res","formatMessage","messages","replace","isButtonDisabled","success","Dialog","aria-labelledby","DialogTitle","DialogContent","DialogContentText","classNames","Typography","color","onSubmit","errors","handleChange","onChange","DialogActions","Button","disabled","variant","Component","mapDispatchToProps","connect","injectIntl","loading","errorMessage","OAuthLoginContainer","query","search","hasErrors","checkUser","user","React","IconButton","children","component","onClick","child","Children","only","iconButtonProps","style","Tooltip","placement","title","signUp","facebook","google","skipForNow","googleLoginErrorAndroid","privacy","terms","heading","Information","align","forgotPassword","Login","isLogging","loginStatus","isDialogOpen","onClose","onResetPasswordClick","passwordConfirm","isTermsAccepted","formValues","endpoint","createYourPassword","confirmYourPassword","signMeUp","agreement","termsAndConditions","SignUp","isSigningUp","signUpStatus","initialValues","FormControlLabel","control","Checkbox","target","rel","forgotApiFailure","forgotApiSuccess","resetPassword","resetPasswordText","resetPasswordSuccess","ResetPassword","forgotState","forgot","image","CboardLogo","useState","showLogo","setShowLogo","useEffect","CSSTransition","in","appear","alt","WelcomeScreen","activeView","handleActiveView","resetActiveView","handleGoogleLoginClick","googleplus","offline","obj","accessToken","alert","finishFirstVisit","margin","Link","AuthScreen","goBack","RedirectIfLogged","rest","render","createMatrix","rows","columns","moveOrderItem","itemId","position","order","mappedOrder","row","cell","oldItem","column","itemIndex","sortGrid","items","grid","itemsToSort","callback","rowIndex","columnIndex","iterateGridItems","itemQueue","fillEmptyGridCells","editTile","vocalization","voiceRecorder","button","folder","back","next","symbolSearch","existingBoards","none","symbols","withStyles","withTheme","theme","direction","FullScreenDialog","transitions","TransitionUp","forwardRef","ref","Slide","TransitionFade","Fade","getTransition","transition","classes","buttons","disableSubmit","fullWidth","dark","useTheme","palette","fullScreen","TransitionComponent","AppBar","appBar","Toolbar","disableGutters","containerDark","container","contentFullWidth","content","flexShrink","flex","whiteSpace","textOverflow","overflow","background","height","overflowY","WebkitOverflowScrolling","maxWidth","FullScreenDialogContent","fullScreenDialogContentClassName","FilterBar","FormGroup","opt","Switch","checked","enabled","value","labelPlacement","Symbol","other","labelpos","symbolClassName","searchSymbolLibrary","uploadAnImage","SymbolSets","symbolSetsOptions","SymbolSearch","fetchArasaacSuggestions","searchText","skin","hair","arasaacPictogramsSearch","suggestions","suggestion","fromArasaac","arasaacSuggestions","idPictogram","_id","keyword","keywords","ARASAAC_BASE_PATH_API","queryString","stringify","translatedId","fetchTawasolSuggestions","tawasolPictogramsSearch","fromTawasol","tawasolSuggestions","pictogram","source_id","description","image_uri","TAWASOL_BASE_IMAGE_URL","fetchGlobalsymbolsSuggestions","globalsymbolsPictogramsSearch","fromGlobalsymbols","globalsymbolsSuggestions","picto","image_url","debouncedGetSuggestions","debounce","getSuggestions","handleSuggestionsFetchRequested","handleSuggestionsClearRequested","handleSuggestionSelected","labelKey","newValue","handleChangeOption","newSymbolSets","symbolSets","option","mulberrySymbols","default","translateSymbols","symbol","maxSuggestions","inputValue","trim","inputLength","count","keep","words","getMulberrySuggestions","isHighlighted","suggestionClassName","containerProps","autoSuggest","aria-label","alwaysRenderSuggestions","focusInputOnSuggestionClick","isMobile","any","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","renderSuggestionsContainer","getSuggestionValue","renderSuggestion","highlightFirstSuggestion","inputProps","autoFocus","placeholder","Tile","backgroundColor","borderColor","classNameProp","tileShapeClassName","tileShapeStyles","onSelect","scannable","reset","uploadImage","InputImage","file","files","resizeImage","resizedImage","uploadFile","imageUrl","saveLocalImage","fileName","filePath","fEntry","nativeURL","imageBase64","blobToBase64","reader","FileReader","onload","readAsDataURL","quality","maxHeight","autoRotate","debug","mimeType","readAndCompressImage","thickness","accept","ownProps","Circle","fill","width","cx","cy","r","stroke","strokeWidth","clearSelection","colorScheme","colorSchemes","colors","ColorSelect","handleColorSchemeChange","colorMenu","selectedColor","colorLabel","radioItemStyle","padding","InputLabel","Select","labelId","MenuItem","RadioGroup","flexDirection","Radio","icon","checkedIcon","clear","record","VoiceRecorder","isRecording","isPlaying","startRecording","mediaDevices","getUserMedia","audio","stream","mediaRecorder","MediaRecorder","start","stopRecording","stop","ondataavailable","chunks","onstop","readAsArrayBuffer","onloadend","playAudio","handleRecordClick","handlePlayClick","handleClear","recordStyle","playStyle","LinearProgress","TileEditor","onEditSubmit","onAddSubmit","activeStep","selectedBackgroundColor","defaultTile","editingTile","editingTiles","tileToAdd","handleCancel","handleInputImageChange","updateTileProperty","handleSymbolSearchChange","handleSymbolSearchClose","isSymbolSearchOpen","handleLabelChange","handleVocalizationChange","handleSoundChange","sound","handleTypeChange","shortid","generate","defaultTileColors","linkedBoard","handleBack","handleNext","handleSearchClick","handleColorChange","getDefaultColor","currentTileProp","handleBoardsChange","prop","currentTile","property","updateEditingTile","updateNewTile","currentLabel","selectBoardElement","autoWidth","hidden","tileInView","Paper","startIcon","multiline","FormLabel","MobileStepper","steps","nextButton","backButton","tilesDeleted","rootBoardNotDeleted","tilesCreated","boardSavedNotification","boardNotSavedNotification","editTitle","boardTitle","boardEditTitleCancel","boardEditTitleAccept","share","copyMessage","clicksToUnlock","scannerHowToDeactivate","scannerManualStrategy","scannerAutomaticStrategy","userProfileLocked","boardMissed","copyPublicBoardTitle","copyPublicBoardDesc","blockedPrivateBoardTitle","blockedPrivateBoardDesc","boardCopyCancel","boardCopyAccept","boardCopiedSuccessfully","boardCopyError","emptyVoiceAlert","offlineVoiceAlert","myBoardTitle","noTitle","failedToCopy","walkthroughWelcome","walkthroughUnlock","walkthroughStart","walkthroughSignInUp","walkthroughEditBoard","walkthroughBoardName","walkthroughAddTile","walkthroughChangeBoard","walkthroughBuildCommunicator","walkthroughEndTour","walkthroughCloseTour","walkthroughBack","walkthroughNext","Row","rowClassName","styles","DroppableCell","onDrop","useDrop","drop","collect","monitor","isOver","canDrop","isActive","cellClassName","DraggableItem","useDrag","canDrag","opacity","isDragging","drag","cellStyle","GridBase","dragAndDropEnabled","onItemDrop","renderEmptyCell","renderItem","gridClassName","utils","Grid","pages","array","newArray","results","pageItems","GridContainer","dragging","handleDragStart","layout","newItem","handleDragStop","rowHeight","breakpoints","breakpoint","matchMedia","matches","gap","spaceBetween","cols","x","y","Math","floor","w","h","layouts","bp","generateLayout","edit","onLayoutChange","generateLayouts","calcRowHeight","containerPadding","isDraggable","isResizable","onDragStart","onDragStop","lg","md","sm","xs","xxs","sizeMe","monitorHeight","BackspaceButton","backspaceIconStyle","transform","alignSelf","ClearButton","ShareButton","shareIconStyle","copyLink","twitter","subject","whatsapp","reddit","PhraseShare","phrase","onShareClick","onShareClose","onCopyPhrase","Fragment","EmailShareButton","body","EmailIcon","round","FacebookShareButton","quote","onShareWindowClose","FacebookIcon","TwitterShareButton","hashtags","via","TwitterIcon","WhatsappShareButton","WhatsappIcon","RedditShareButton","RedditIcon","withMobileDialog","Scroll","scrollStyle","SymbolOutput","openPhraseShareDialog","onBackspaceClick","onClearClick","onCopyClick","getPhraseToShare","onRemoveClick","clearButtonStyle","visibility","copyButtonStyle","removeButtonStyle","backspaceButtonStyle","publishBoard","OutputContainer","translatedOutput","handleBackspaceClick","cancelSpeech","popOutput","handleClearClick","clearOutput","handlePhraseToShare","join","handleCopyClick","labels","clipboard","copy","writeText","handleRemoveClick","spliceOutput","handleOutputClick","tagName","handleOutputKeyDown","keyCode","keycode","accumulator","currentValue","actionValue","startsWith","symbolValue","changeOutput","outputFrames","arr","frame","prevValue","groupOutputByType","asyncForEach","outputReducer","speakOutput","tabIndex","onKeyDown","translatedValue","unregisteredWarning","unpublishBoard","loginSignUp","BoardShare","isOwnBoard","onCopyLink","Alert","severity","fullscreen","exitFullscreen","FullScreenButton","handleClick","toggleFullscreen","requestFullscreen","mozRequestFullScreen","webkitRequestFullScreen","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozCancelFullScreen","webkitExitFullscreen","documentElement","fullScreenLabel","PrintBoardButton","printBoard","printBoardSecondary","printCurrentBoard","printFullBoardSet","boardDownloaded","PrintBoardDialog","onPrintCurrentBoard","List","ListItem","ListItemText","primary","secondary","ListItemSecondaryAction","PrintBoardButtonContainer","openDialog","exportHelpers","currentBoard","pdfExportAdapter","openPrintBoardDialog","bind","closePrintBoardDialog","greenAvatar","green","avatar","hasPhotos","fPhotos","photos","gPhotos","first","second","Avatar","withChildProof","WrappedComponent","lockActivated","debouncedResetCount","resetCount","onLockTick","tickLock","onToggle","onTick","locked","activateLock","incrementCount","deactivateLock","lock","unlock","ChildProofLockToggle","lockButtonLabel","analytics","mostUsedBoards","topUsedButtons","symbolSources","tenDaysUsage","twentyDaysUsage","thirtyDaysUsage","sixtyDaysUsage","loadingError","totalWords","totalPhrases","boardsUsed","tilesEdited","editingEvents","speechEvents","navigationEvents","timesClicked","people","guest","export","import","system","about","feedback","donate","username","loginSignup","help","userHelp","walkthroughSettings","walkthroughSettingsDesc","walkthroughLanguage","walkthroughSpeech","walkthroughExport","walkthroughImport","uiSizeTitle","uiSizeDescrip","fontSizeTitle","fontSizeDescrip","hideOutputBarTitle","hideOutputBarDescrip","labelPositionTitle","labelPositionDescrip","enableDarkThemeTitle","enableDarkThemeDescrip","enableScanningTitle","enableScanningDescrip","enableContextAwareBackButtonTitle","enableContextAwareBackButtonDescrip","showSharePhraseButtonTitle","showSharePhraseButtonDescrip","removeSymbolsFromTheOutputBarTitle","removeSymbolsFromTheOutputBarDescrip","folderVocalizationTitle","folderVocalizationDescrip","enableTour","Navbar","openShareDialog","handleCopyLink","getBoardToShare","onScannableFocus","onScannableBlur","onUserIconClick","isLocked","userLock","deactivateScannerButton","isScannerActive","onBackClick","onDeactivateScannerClick","onLockClick","onLockNotify","onFocus","onBlur","withRouter","SelectedCounter","select","createTiles","editTilesButton","addTileButton","fixedBoard","isSelectAll","isSelecting","isFixedBoard","isSaving","isLoggedIn","selectedItemsCount","onSelectClick","onDeleteClick","onEditClick","onSelectAllToggle","onBoardTitleClick","onAddClick","onBoardTypeChange","isItemsSelected","boardIsEmpty","FormDialog","communicatorTitle","editCommunicator","addBoardButton","CommunicatorToolbar","handleCommunicatorTitleClick","isCommunicatorTitleClicked","openTitleDialog","titleDialogValue","handleCommunicatorTitleChange","handleCommunicatorTitleSubmit","editCommunicatorTitle","handleCommunicatorTitleClose","handleNewBoardClick","boardCaption","caption","boardsMenu","currentTarget","closeMenu","switchBoard","openCommunicatorDialog","openMenu","Menu","anchorEl","ListItemAvatar","inset","qty","TAB_INDEXES","menu","menuRootBoardOption","menuPublishOption","menuUnpublishOption","emptyBoardsList","loadNextPage","author","addBoard","removeBoard","communicatorBoards","allBoards","boardsQty","helpAndSupport","termsOfService","tilesQty","boardInfo","boardAddedToCommunicator","boardRemovedFromCommunicator","boardInfoName","boardInfoAuthor","boardInfoTiles","boardInfoId","boardInfoUrl","boardInfoDate","boardDescription","boardPublished","boardUnpublished","boardDeleted","publicBoard","privateBoard","activeBoard","copyBoard","copyBoardDescription","deleteBoard","deleteBoardDescription","publishBoardDescription","imageBoard","imageBoardDescription","imageSearch","editBoardTitle","editBoardTitleDescription","walkthroughCommunicatorTitle","walkthroughCommunicator","walkthroughSearch","walkthroughBoards","walkthroughPublicBoards","walkthroughAllMyBoards","walkthroughBoardProperties","walkthroughBoardActionButton","walkthroughBoardActionsRemove","walkthroughBoardActionsSetBoardAsRoot","walkthroughPublicBoardsCopy","walkthroughPublicBoardsDetail","walkthroughAllMyBoardsRemoveBoard","walkthroughAllMyBoardsEditBoardImage","walkthroughAllMyBoardsEditBoardName","walkthroughAllMyBoardsAddBoard","walkthroughAllMyBoardsPublishBoard","walkthroughAllMyBoardsUnpublishBoard","walkthroughAllMyBoardsDeleteBoard","Transition","CommunicatorDialogBoardItem","handleBoardDescriptionChange","editBoardDescriptionDialogValue","handleBoardTitleChange","editBoardTitleDialogValue","handleSymbolSearchClick","openBoardInfo","openDeleteBoard","openPublishBoard","openCopyBoard","openImageBoard","openEditBoardTitle","deleteMyBoard","newBoard","updateMyBoard","setRootBoard","selectedTab","addOrRemoveBoard","boardUrl","pathname","displayActions","authToken","disableElevation","handleDialogClose","aria-describedby","handleBoardImageChange","handleBoardImage","rowsMax","handleBoardTitleDesc","handleBoardCopyOpen","handleBoardInfoOpen","gutterBottom","handleBoardCopy","handleBoardPublishOpen","handleBoardPublish","handleBoardDeleteOpen","handleBoardDelete","CommunicatorDialogButtons","prevProps","isSearchOpen","getElementById","focus","searchValue","onSearch","openSearchBar","joyrideStyles","arrowColor","primaryColor","textColor","zIndex","CommunicatorDialogTour","commBoardsHelpSteps","hideCloseButton","spacing","alignItems","justify","ListItemIcon","publicBoardsHelpSteps","allMyBoardsHelpSteps","STATUS","FINISHED","SKIPPED","continuous","showSkipButton","disableScrollParentFix","disableScrolling","showProgress","disableOverlayClose","run","last","skip","scrollOffset","CommunicatorDialog","nextPageLoading","total","limit","page","totalPages","communicatorBoardsIds","onTabChange","Tabs","scrollButtons","Tab","selectedIds","INITIAL_STATE","findBoards","criteria","entries","re","RegExp","test","offset","CommunicatorDialogContainer","ceil","doSearch","tabData","commState","externalState","getPublicBoards","availableBoards","myBoardsResponse","getMyBoards","searchTimeout","cb","updateCommunicatorBoards","createBoardsRecursively","records","addBoardCommunicator","upsertCommunicator","changeCommunicator","updateApiObjectsNoChild","entry","createCommunicator","communicatorData","updateBoardReferences","updateBoard","prevBoardsRecords","el","updatedCommunicatorData","updateCommunicator","replaceBoard","sBoards","boardResponse","deleteApiBoard","comm","updateApiBoard","dialogProps","deleteBoardCommunicator","cboardBoards","CommunicatorContainer","toolbarProps","closeCommunicatorDialog","importCommunicator","deleteCommunicator","NavigationButtons","previousBoard","toRootBoard","PropTypes","arrayOf","string","func","EditGridButtons","renderButtons","isVertical","isLeftOrTop","ButtonGroup","orientation","onAddRemoveColumn","onAddRemoveRow","isAdd","Board","unlockedHelpSteps","lockedHelpSteps","handleTileClick","onTileClick","scrollTop","handleTileFocus","onFocusTile","handleBoardKeyUp","onRequestPreviousBoard","handleBoardTitleClick","handleBoardTitleSubmit","handleBoardTitleClose","scannerSettings","onScannerActive","selectedTileIds","isSelected","disableBackButton","onSaveBoardClick","onRequestToRootBoard","deactivateScanner","onTileDrop","renderTiles","DISPLAY_SIZE_GRID_COLS","joyRideStyles","iterationInterval","onDeactivation","onKeyUp","renderTileFixedBoard","BoardContainer","tileEditorOpen","translatedBoard","isGettingApiObjects","copyPublicBoard","blockedPrivateBoard","handleEditBoardTitle","titledBoard","processedBoard","updateIfFeaturedBoard","saveApiBoardOperation","handleEditClick","handleBoardTypeChange","defaultGrid","getDefaultOrdering","tilesIndex","handleTileEditorCancel","handleEditTileEditorSubmit","handleApiUpdates","toggleSelectMode","handleAddTileEditorSubmit","nameFromKey","nameKeyArray","handleAddClick","handleAddRemoveRow","newOrder","newRows","resize","handleAddRemoveColumn","newColumns","handleLayoutChange","currentLayout","gridTile","Number","isEqual","handleTileDrop","handleLockClick","handleSelectClick","handleSelectAllToggle","selectAllTiles","toggleTileSelect","hasAction","say","toSpeak","handleAddTile","handleDeleteClick","handleLockNotify","countdown","handleScannerStrategyNotification","messagesKeyMap","deletedTilesiIds","editedTiles","updateApiObjects","uploadTileSound","_editedTiles","_tile","createParentBoard","createChildBoard","childBoardData","uTiles","cTile","parentBoardData","parentBoardId","handleCopyRemoteBoard","handleCloseDialog","getApiObjects","downloadImages","onLine","gtag","user_id","boardExists","tryRemoteBoard","goTo","translateBoard","nextProps","historyRemoveBoard","allTileIds","tileIndex","deselectTile","selectTile","node","firstChild","dataURL","domtoimage","toPng","captureBoardScreenshot","filename","uploadFromDataURL","convertDataURIToBinary","audioUrl","dataURI","base64Index","base64","raw","atob","rawLength","Uint8Array","ArrayBuffer","charCodeAt","focusTile","selectedTileId","keepMounted","currentVoice","refreshPage","onRefreshPage","Notifications","handleNotificationDismissal","Snackbar","ContentProps","autoHideDuration","elevation","NotificationsContainer","queuedNotifications","showQueuedNotificationIfAny","anchorOrigin","vertical","horizontal","NotFound","SettingsSection","subheader","settingsLength","ListSubheader","listItemProps","rightContent","Divider","SwiperCore","use","Navigation","Pagination","Autoplay","tooltipContent","imgFolderPath","settingsTourImages","SettingsTour","tooltipSwiperText","setTooltipSwiperText","handleOnSlideChange","sectionEnabled","section","settingsTourSteps","pagination","autoplay","disableOnInteraction","onSlideChange","swiper","realIndex","onInit","imgData","inx","watchOverflow","img","indx","indexOfFirst","tableOfContents","srcCva","formatImgForCordova","spotlightPadding","scrollDuration","disableBeacon","Settings","handleFeedbackClick","handleDonateClick","handleGoBack","link","accountIcon","PersonIcon","disconnect","isSettingsLocation","getSettingsSections","SettingsContainer","nameSecondary","emailSecondary","languageSecondary","birthdate","birthdateSecondary","People","onChangePeople","onSubmitPeople","InputLabelProps","shrink","PeopleContainer","updateUser","updateUserData","handleLogout","moreLanguages","ar","be","bg","bn","cs","da","de","en","es","fi","fr","he","hi","hr","hu","it","ja","km","ko","me","mk","ne","nl","no","pl","pt","ro","ru","si","sk","sr","sv","th","tr","tu","uk","vi","zh","ttsEngineError","Language","moreLangDialog","openTtsEngineError","markdown","markdownPath","XMLHttpRequest","responseText","utext","formatTextForCordova","onSetTtsEngine","selectedLang","onLangClick","onSubmitLang","langItems","langCode","nativeName","ISO6391","getNativeName","divider","Chip","handleTtsEngineChange","ttsEng","handleTtsErrorDialogClose","handleMoreLangClick","handleMoreLangClose","source","escapeHtml","LanguageContainer","onLangChange","updateSettings","handleLangClick","handleSetTtsEngine","engineName","updateLangSpeechStatus","sortedLangs","activeLang","cloudLangs","activeLangIndex","unshift","sortLangs","changeLang","higher","lower","faster","slower","pitchDescription","rateDescription","sampleSentence","getVoiceLabel","justifyContent","handleChangePitch","handleChangeRate","handleClickListItem","onMenuItemClick","handleVoiceClose","langVoices","selectedVoiceIndex","isVoiceOpen","aria-haspopup","aria-controls","Slider","max","step","selected","SpeechContainer","speakSample","handleMenuItemClick","updateSettingsTimeout","lenght","EnhancedSpeechContainer","exportSingle","exportSingleSecondary","exportAll","exportAllSecondary","boardDownloadedCva","Export","handleBoardChange","boardError","singleBoard","handleAllBoardChange","doneCallback","loadingAll","exportAllBoard","onExportClick","handleSingleBoardChange","loadingSingle","exportSingleBoard","exportMenu","cboardLink","ExportContainer","handleExportClick","exportConfig","EXPORT_CONFIG_BY_TYPE","EXPORT_HELPERS","openboardExportAdapter","cboardExportAdapter","importSecondary","emptyImport","errorImport","invalidImport","noImport","Import","persist","onImportClick","htmlFor","ImportContainer","shouldUpdate","boardsToBeLoaded","tilesToBeReplaced","tempBoards","prevId","updated","boardToBeLoaded","tb","boardToBeUpdated","updatedBoards","boardsResponse","boardToCreate","updateLoadBoardsIds","addBoardsToCommunicator","communicatorModified","File","FileList","ext","importConstants","importCallback","IMPORT_CONFIG_BY_EXTENSION","jsonFile","importHelpers","requestQuota","syncBoardsWithAPI","handleImportClick","DISPLAY_SIZE_LARGE","DISPLAY_SIZE_EXTRALARGE","LABEL_POSITION_ABOVE","LABEL_POSITION_HIDDEN","uiSizeSecondary","fontSizeSecondary","labelPositionSecondary","outputHide","outputHideSecondary","darkTheme","darkThemeSecondary","Display","toggleHideOutput","toggleDarkTheme","displaySetting","onDisplaySettingsChange","updateDisplaySettings","renderSelect","DisplayContainer","updateDisplaySettingsAction","intlShape","isRequired","object","intro","contributors","license","resources","About","role","enable","enableSecondary","delaySecondary","method","methodSecondary","seconds","automatic","manual","SCANNER_MESSAGES_KEYMAP","DELAY_OPTIONS","Scanning","toggleScanner","changeSelect","updateScannerSettings","scanningSettings","ScanningContainer","quickUnlock","quickUnlockSecondary","shareShow","shareShowSecondary","outputRemove","outputRemoveSecondary","vocalizeFoldersSecondary","resetTours","resetToursSecondary","confirmDialog","ok","openDialogToursState","setOpenDialogToursState","handleClose","enableAllTours","toggleCABackButton","toggleQuickUnlock","toggleShareShow","toggleRemoveOutput","toggleVocalizeFolders","updateNavigationSettings","NavigationContainer","updateNavigationSettingsAction","Help","hash","getElementsByName","scrollIntoView","SettingsWrapper","exact","path","Speech","defaultOption","top","left","right","bottom","legend","tooltip","show","trigger","axisPointer","lineStyle","crossStyle","series","areaStyle","smooth","xAxis","showGrid","boundaryGap","axisLabel","axisLine","axisTick","yAxis","fontFamily","splitLine","x2","y2","colorStops","global","ModifiedAreaChart","merge","main","onDetailsClick","Card","phrases","editions","StatCards2","categoryTotals","Fab","StyledTableCell","head","common","white","paddingRight","overflowWrap","wordWrap","TableCell","StyledTableRow","hover","TableRow","useStyles","makeStyles","table","minWidth","tableHead","isDense","imageView","setImageView","getTileFromLabel","Table","TableHead","colSpan","TableBody","scope","toFixed","handleRowAction","TableCard","itemGap","textStyle","formatter","radius","center","avoidLabelOverlap","hoverOffset","stillShowZeroSum","normal","emphasis","fontWeight","labelLine","itemStyle","shadowBlur","shadowOffsetX","shadowColor","Barchart","Analytics","handleUserHelpClick","handleDaysChange","onDaysChange","handleDetailsDialogOpen","detailsData","totals","openDetailsDialog","getDates","range","days","dateEnd","dateStart","subtract","diff","add","usage","topUsed","tablesHead","light","AnalyticsContainer","clientId","timerId","getGaClientIdFromCookie","ca","cookie","charAt","getGaClientId","getAll","getTotals","getUsage","getCategoryTotals","getTopUsed","sources","summary","request","mobileView","startDate","endDate","metric","dimension","template","analyticsReport","report","reports","parseInt","dimensions","metrics","maximums","baseData","fullRequest","getReportTotal","getReportRows","getSymbolSources","App","Helmet","Activate","OAuthLogin","AppContainer","handleNewContentAvailable","handleContentCached","registerServiceWorker","getElementsByTagName","basename","Intl","Function","call","prototype","isEnumerable","propertyIsEnumerable","Reflect","ownKeys","O","k","dotenv","silent","LanguageProvider","fetchMessages","platformLangs","setLangs","SpeechProvider","jss","jssPreset","rtl","generateClassName","createGenerateClassName","RTLSupport","StylesProvider","ThemeProvider","lightTheme","createTheme","typography","amber","AZURE_INST_KEY","appInsights","ApplicationInsights","instrumentationKey","enableAutoRouteTracking","loggingLevelTelemetry","loadAppInsights","trackPageView","dndOptions","enableTouchEvents","enableMouseEvents","enableKeyboardEvents","PlatformRouter","HashRouter","BrowserRouter","renderApp","ReactDOM","DndProvider","backend","TouchBackend","createBrowserHistory","dataURLtoFile","dataurl","checkExtension","bstr","n","u8arr","extension","BASE_URL","getUserData","getAuthToken","getQueryParameters","encodeURIComponent","API_INSTANCE","axiosInstance","baseURL","interceptors","azureVoicesListPath","AZURE_VOICES_BASE_PATH_API","pictogSearchTextPath","TAWASOL_BASE_PATH_API","alpha2ToAlpha3T","GLOBALSYMBOLS_BASE_PATH_API","token","Authorization","newSettings","put","delete","formData","FormData","append","communicatorToPost","downloadImageSuccess","getApiMyBoards","createApiBoard","createApiBoardSuccess","getApiMyCommunicators","isUrl","storeImage","getFileNameFromUrl","parsed","lastIndexOf","parentBoard","updatedParentBoardId","replaceBoardCommunicator","caction","createApiCommunicator","updateApiCommunicator","updateApiMarkedBoards","childBoard","updatedChildBoardId","REQUEST_VOICES","REQUEST_TTS_ENGINE","getCommunicators","createApiCommunicatorSuccess","receiveVoices","receiveTtsEngine","pvoices","regex","fvoices","Locale","ShortName","DisplayName","Gender","endSpeech","CBOARD_OBF_CONSTANTS","DATA_URL","LICENSE","copyright_notice_url","source_url","author_name","author_url","author_email","CBOARD_ZIP_OPTIONS","compression","platform","CBOARD_COLUMNS","CBOARD_ROWS","CBOARD_EXT_PREFIX","CBOARD_EXT_PROPERTIES","NOT_FOUND_IMAGE","EMPTY_IMAGE","cboard","openboard","pdf","host","REACT_APP_AZURE_INST_KEY","REACT_APP_AZURE_SPEECH_KEY","REACT_APP_AZURE_SPEECH_SERVICE_REGION"],"mappings":"+PAUO,SAASA,EAAaC,GAC3B,MAAO,CACLC,KAAMC,IACNF,WAIG,SAASG,IACd,MAAO,CACLF,KAAMG,KAIH,SAASC,EAAT,GAAqD,IAApCC,EAAmC,EAAnCA,MAAOC,EAA4B,EAA5BA,SAAYN,EAAgB,uDAAT,QAChD,8CAAO,WAAOO,EAAUC,GAAjB,yCAAAC,EAAA,sEAEGC,EAAqB,UAATV,EAAmB,QAAU,aAF5C,SAGqBW,IAAID,GAAWL,EAAOC,GAH3C,cAGGM,EAHH,SAI6BJ,IAAxBK,EAJL,EAIKA,aAAcC,EAJnB,EAImBA,MAEhBC,EAAuBF,EAAaE,qBACtCC,EAAsBH,EAAaI,cAAcC,MACnD,SAAAL,GAAY,OAAIA,EAAaM,KAAOJ,KAGlCH,EAAUK,eAAiBL,EAAUK,cAAcG,SACrDJ,EAAsBJ,EAAUK,cAAc,IAG1CI,EAAiB,GACvBP,EAAMQ,OAAOC,SAAQ,SAAAT,GACfE,EAAoBM,OAAOE,QAAQV,EAAMK,KAAO,GAClDE,EAAeI,KAAKX,EAAMK,OAIxBO,EAAeV,EAAoBM,OAAOK,QAC9C,SAAAR,GAAE,OAAIE,EAAeG,QAAQL,GAAM,KAvBlC,UA0BqBS,QAAQC,IAC9BH,EACGI,IADH,+BAAArB,EAAA,MACO,WAAMU,GAAN,eAAAV,EAAA,6DACCK,EAAQ,KADT,kBAGaH,IAAIoB,SAASZ,GAH1B,OAGDL,EAHC,sFAKIA,GALJ,yDADP,uDAQGa,QAAO,SAAAK,GAAC,OAAU,OAANA,MAnCd,QA0BGC,EA1BH,OAsCH1B,EAAS2B,YAAUD,IACN,UAATjC,GACFO,EACE4B,YAAY,CACVC,wBAAwB,EACxBC,uBAAuB,EACvBC,uBAAuB,EACvBC,wBAAwB,KAI9BhC,EAAST,EAAac,IAClBA,EAAU4B,SAASC,SACjB7B,EAAU4B,SAASC,OAAOC,OAC5BnC,EAASoC,YAAY/B,EAAU4B,SAASC,OAAOC,QAE7C9B,EAAU4B,SAASC,OAAOG,MAC5BrC,EAASsC,YAAWjC,EAAU4B,SAASC,OAAOG,OALnB,EASzBpC,KADQsC,EARiB,EAQ3BL,OAAUK,UAGJC,EAAOD,EAAOhB,KAAI,SAAAkB,GACtB,OAAOA,EAAEC,YAGTrC,EAAU4B,SAASC,OAAOQ,UAC1BrC,EAAU4B,SAASU,SAASC,MAC5BJ,EAAKK,SAASxC,EAAU4B,SAASC,OAAOQ,WAExC1C,EACE8C,YACEzC,EAAU4B,SAASC,OAAOQ,SAC1BrC,EAAU4B,SAASU,SAASC,SAxEnC,qDA+Ee,MAAd,KAAEG,SA/EH,0CAgFM1B,QAAQ2B,OAAO,KAAED,SAASE,OAhFhC,eAkFCC,EAAc,CAChBC,QAAS,6CAnFR,kBAqFI9B,QAAQ2B,OAAOE,IArFnB,0DAAP,0D,6siICvBFE,EAAOC,QAAU,CAAC,KAAO,oB,qBCAzBD,EAAOC,QAAU,CAAC,KAAO,8B,qBCAzBD,EAAOC,QAAU,CAAC,KAAO,yB,qJCDzB,IAAI9B,EAAM,CACT,KAAM,KACN,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,UAAW,KACX,aAAc,KACd,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,IACX,QAAS,IACT,WAAY,IACZ,QAAS,IACT,WAAY,IACZ,OAAQ,IACR,UAAW,IACX,OAAQ,IACR,UAAW,KAIZ,SAAS+B,EAAeC,GACvB,IAAI3C,EAAK4C,EAAsBD,GAC/B,OAAOE,EAAoB7C,GAE5B,SAAS4C,EAAsBD,GAC9B,IAAIE,EAAoBC,EAAEnC,EAAKgC,GAAM,CACpC,IAAII,EAAI,IAAIC,MAAM,uBAAyBL,EAAM,KAEjD,MADAI,EAAEE,KAAO,mBACHF,EAEP,OAAOpC,EAAIgC,GAEZD,EAAeQ,KAAO,WACrB,OAAOC,OAAOD,KAAKvC,IAEpB+B,EAAeU,QAAUR,EACzBJ,EAAOC,QAAUC,EACjBA,EAAe1C,GAAK,M,oFClgBpB,IAAIW,EAAM,CACT,eAAgB,CACf,KACA,GAED,YAAa,CACZ,KACA,GAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,eAAgB,CACf,KACA,IAED,oBAAqB,CACpB,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,eAAgB,CACf,KACA,IAED,YAAa,CACZ,KACA,IAED,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CWC,EACX,uDACWE,EACX,uDACWC,EACX,wD,gCC5BF,kTACO,IAAMxH,EAAqB,gCACrBC,EAAe,0BACfC,EAAmB,8BACnBH,EAAsB,iCACtBF,EAA0B,qCAC1BC,EACX,wCACWO,EAAmB,8BAEnBvM,EAAe,QACfO,EAAY,CACvB,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,QACA,U,gCCxDF,8OAAO,IAAMyK,EAAwB,WACxBysD,EAAqB,QACrBC,EAA0B,aAG1BC,EAAuB,QACvBvsD,EAAuB,QACvBwsD,EAAwB,SAExB7W,EAAyB,CACpC,CAAC/1C,GAAwB,CACvBm1B,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,IAAK,GAEP,CAACk3B,GAAqB,CACpBt3B,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,IAAK,GAEP,CAACm3B,GAA0B,CACzBv3B,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,GAAI,EACJC,IAAK,K,mdCPF,SAAS+d,EAAmBvjD,GACjC,MAAO,CACLb,KAAM8X,IACN/X,QAASc,GAIN,SAASmiD,EAAmBniD,GACjC,MAAO,CACLb,KAAM+X,IACNhY,QAASc,GAIN,SAAS+hD,EAAmB/hD,GACjC,OAAO,SAACN,EAAUC,GAShBD,GANIC,IADFK,aAAgBI,cAGFsV,WAAU,SAAA2B,GAAC,OAAIA,EAAE/W,KAAON,EAAaM,OAAO,EACtDs1C,EACAuM,GAEUniD,KAIb,SAAS41C,EAAiB51C,GAC/B,MAAO,CACLb,KAAMgY,IACNjY,QAASc,GAIN,SAASwjD,EAAmBljD,GACjC,MAAO,CACLnB,KAAMoY,IACNrY,QAASoB,GAIN,SAAS0hD,EAAmB1hD,GACjC,MAAO,CACLnB,KAAMqY,IACNtY,QAASoB,GAIN,SAASwhD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","file":"static/js/main.104b3d5e.chunk.js","sourcesContent":["import API from '../../../api';\r\nimport { LOGIN_SUCCESS, LOGOUT } from './Login.constants';\r\nimport { addBoards } from '../../Board/Board.actions';\r\nimport {\r\n  changeVoice,\r\n  changePitch,\r\n  changeRate\r\n} from '../../../providers/SpeechProvider/SpeechProvider.actions';\r\nimport { disableTour } from '../../App/App.actions';\r\n\r\nexport function loginSuccess(payload) {\r\n  return {\r\n    type: LOGIN_SUCCESS,\r\n    payload\r\n  };\r\n}\r\n\r\nexport function logout() {\r\n  return {\r\n    type: LOGOUT\r\n  };\r\n}\r\n\r\nexport function login({ email, password }, type = 'local') {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      const apiMethod = type === 'local' ? 'login' : 'oAuthLogin';\r\n      const loginData = await API[apiMethod](email, password);\r\n      const { communicator, board } = getState();\r\n\r\n      const activeCommunicatorId = communicator.activeCommunicatorId;\r\n      let currentCommunicator = communicator.communicators.find(\r\n        communicator => communicator.id === activeCommunicatorId\r\n      );\r\n\r\n      if (loginData.communicators && loginData.communicators.length) {\r\n        currentCommunicator = loginData.communicators[0];\r\n      }\r\n\r\n      const localBoardsIds = [];\r\n      board.boards.forEach(board => {\r\n        if (currentCommunicator.boards.indexOf(board.id) >= 0) {\r\n          localBoardsIds.push(board.id);\r\n        }\r\n      });\r\n\r\n      const apiBoardsIds = currentCommunicator.boards.filter(\r\n        id => localBoardsIds.indexOf(id) < 0\r\n      );\r\n\r\n      const apiBoards = await Promise.all(\r\n        apiBoardsIds\r\n          .map(async id => {\r\n            let board = null;\r\n            try {\r\n              board = await API.getBoard(id);\r\n            } catch (e) {}\r\n            return board;\r\n          })\r\n          .filter(b => b !== null)\r\n      );\r\n\r\n      dispatch(addBoards(apiBoards));\r\n      if (type === 'local') {\r\n        dispatch(\r\n          disableTour({\r\n            isRootBoardTourEnabled: false,\r\n            isUnlockedTourEnabled: false,\r\n            isSettingsTourEnabled: false,\r\n            isAnalyticsTourEnabled: false\r\n          })\r\n        );\r\n      }\r\n      dispatch(loginSuccess(loginData));\r\n      if (loginData.settings.speech) {\r\n        if (loginData.settings.speech.pitch) {\r\n          dispatch(changePitch(loginData.settings.speech.pitch));\r\n        }\r\n        if (loginData.settings.speech.rate) {\r\n          dispatch(changeRate(loginData.settings.speech.rate));\r\n        }\r\n        const {\r\n          speech: { voices }\r\n        } = getState();\r\n        if (voices) {\r\n          const uris = voices.map(v => {\r\n            return v.voiceURI;\r\n          });\r\n          if (\r\n            loginData.settings.speech.voiceURI &&\r\n            loginData.settings.language.lang &&\r\n            uris.includes(loginData.settings.speech.voiceURI)\r\n          ) {\r\n            dispatch(\r\n              changeVoice(\r\n                loginData.settings.speech.voiceURI,\r\n                loginData.settings.language.lang\r\n              )\r\n            );\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      if (e.response != null) {\r\n        return Promise.reject(e.response.data);\r\n      }\r\n      var disonnected = {\r\n        message: 'Unable to contact server. Try in a moment'\r\n      };\r\n      return Promise.reject(disonnected);\r\n    }\r\n  };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Row_root__1dQSJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DraggableItem_root__3n1hd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"GridBase_root__bYlvE\"};","var map = {\n\t\"./\": 1415,\n\t\"./af\": 650,\n\t\"./af.js\": 650,\n\t\"./agq\": 651,\n\t\"./agq.js\": 651,\n\t\"./ak\": 652,\n\t\"./ak.js\": 652,\n\t\"./am\": 653,\n\t\"./am.js\": 653,\n\t\"./ar\": 654,\n\t\"./ar.js\": 654,\n\t\"./ars\": 655,\n\t\"./ars.js\": 655,\n\t\"./as\": 656,\n\t\"./as.js\": 656,\n\t\"./asa\": 657,\n\t\"./asa.js\": 657,\n\t\"./ast\": 658,\n\t\"./ast.js\": 658,\n\t\"./az\": 659,\n\t\"./az.js\": 659,\n\t\"./bas\": 660,\n\t\"./bas.js\": 660,\n\t\"./be\": 661,\n\t\"./be.js\": 661,\n\t\"./bem\": 662,\n\t\"./bem.js\": 662,\n\t\"./bez\": 663,\n\t\"./bez.js\": 663,\n\t\"./bg\": 664,\n\t\"./bg.js\": 664,\n\t\"./bh\": 665,\n\t\"./bh.js\": 665,\n\t\"./bm\": 666,\n\t\"./bm.js\": 666,\n\t\"./bn\": 667,\n\t\"./bn.js\": 667,\n\t\"./bo\": 668,\n\t\"./bo.js\": 668,\n\t\"./br\": 669,\n\t\"./br.js\": 669,\n\t\"./brx\": 670,\n\t\"./brx.js\": 670,\n\t\"./bs\": 671,\n\t\"./bs.js\": 671,\n\t\"./ca\": 672,\n\t\"./ca.js\": 672,\n\t\"./ccp\": 673,\n\t\"./ccp.js\": 673,\n\t\"./ce\": 674,\n\t\"./ce.js\": 674,\n\t\"./cgg\": 675,\n\t\"./cgg.js\": 675,\n\t\"./chr\": 676,\n\t\"./chr.js\": 676,\n\t\"./ckb\": 677,\n\t\"./ckb.js\": 677,\n\t\"./cs\": 678,\n\t\"./cs.js\": 678,\n\t\"./cu\": 679,\n\t\"./cu.js\": 679,\n\t\"./cy\": 680,\n\t\"./cy.js\": 680,\n\t\"./da\": 681,\n\t\"./da.js\": 681,\n\t\"./dav\": 682,\n\t\"./dav.js\": 682,\n\t\"./de\": 683,\n\t\"./de.js\": 683,\n\t\"./dje\": 684,\n\t\"./dje.js\": 684,\n\t\"./dsb\": 685,\n\t\"./dsb.js\": 685,\n\t\"./dua\": 686,\n\t\"./dua.js\": 686,\n\t\"./dv\": 687,\n\t\"./dv.js\": 687,\n\t\"./dyo\": 688,\n\t\"./dyo.js\": 688,\n\t\"./dz\": 689,\n\t\"./dz.js\": 689,\n\t\"./ebu\": 690,\n\t\"./ebu.js\": 690,\n\t\"./ee\": 691,\n\t\"./ee.js\": 691,\n\t\"./el\": 692,\n\t\"./el.js\": 692,\n\t\"./en\": 693,\n\t\"./en.js\": 693,\n\t\"./eo\": 694,\n\t\"./eo.js\": 694,\n\t\"./es\": 695,\n\t\"./es.js\": 695,\n\t\"./et\": 696,\n\t\"./et.js\": 696,\n\t\"./eu\": 697,\n\t\"./eu.js\": 697,\n\t\"./ewo\": 698,\n\t\"./ewo.js\": 698,\n\t\"./fa\": 699,\n\t\"./fa.js\": 699,\n\t\"./ff\": 700,\n\t\"./ff.js\": 700,\n\t\"./fi\": 701,\n\t\"./fi.js\": 701,\n\t\"./fil\": 702,\n\t\"./fil.js\": 702,\n\t\"./fo\": 703,\n\t\"./fo.js\": 703,\n\t\"./fr\": 704,\n\t\"./fr.js\": 704,\n\t\"./fur\": 705,\n\t\"./fur.js\": 705,\n\t\"./fy\": 706,\n\t\"./fy.js\": 706,\n\t\"./ga\": 707,\n\t\"./ga.js\": 707,\n\t\"./gd\": 708,\n\t\"./gd.js\": 708,\n\t\"./gl\": 709,\n\t\"./gl.js\": 709,\n\t\"./gsw\": 710,\n\t\"./gsw.js\": 710,\n\t\"./gu\": 711,\n\t\"./gu.js\": 711,\n\t\"./guw\": 712,\n\t\"./guw.js\": 712,\n\t\"./guz\": 713,\n\t\"./guz.js\": 713,\n\t\"./gv\": 714,\n\t\"./gv.js\": 714,\n\t\"./ha\": 715,\n\t\"./ha.js\": 715,\n\t\"./haw\": 716,\n\t\"./haw.js\": 716,\n\t\"./he\": 717,\n\t\"./he.js\": 717,\n\t\"./hi\": 718,\n\t\"./hi.js\": 718,\n\t\"./hr\": 719,\n\t\"./hr.js\": 719,\n\t\"./hsb\": 720,\n\t\"./hsb.js\": 720,\n\t\"./hu\": 721,\n\t\"./hu.js\": 721,\n\t\"./hy\": 722,\n\t\"./hy.js\": 722,\n\t\"./ia\": 723,\n\t\"./ia.js\": 723,\n\t\"./id\": 724,\n\t\"./id.js\": 724,\n\t\"./ig\": 725,\n\t\"./ig.js\": 725,\n\t\"./ii\": 726,\n\t\"./ii.js\": 726,\n\t\"./in\": 727,\n\t\"./in.js\": 727,\n\t\"./index\": 1416,\n\t\"./index.js\": 1417,\n\t\"./io\": 728,\n\t\"./io.js\": 728,\n\t\"./is\": 729,\n\t\"./is.js\": 729,\n\t\"./it\": 730,\n\t\"./it.js\": 730,\n\t\"./iu\": 731,\n\t\"./iu.js\": 731,\n\t\"./iw\": 732,\n\t\"./iw.js\": 732,\n\t\"./ja\": 733,\n\t\"./ja.js\": 733,\n\t\"./jbo\": 734,\n\t\"./jbo.js\": 734,\n\t\"./jgo\": 735,\n\t\"./jgo.js\": 735,\n\t\"./ji\": 736,\n\t\"./ji.js\": 736,\n\t\"./jmc\": 737,\n\t\"./jmc.js\": 737,\n\t\"./jv\": 738,\n\t\"./jv.js\": 738,\n\t\"./jw\": 739,\n\t\"./jw.js\": 739,\n\t\"./ka\": 740,\n\t\"./ka.js\": 740,\n\t\"./kab\": 741,\n\t\"./kab.js\": 741,\n\t\"./kaj\": 742,\n\t\"./kaj.js\": 742,\n\t\"./kam\": 743,\n\t\"./kam.js\": 743,\n\t\"./kcg\": 744,\n\t\"./kcg.js\": 744,\n\t\"./kde\": 745,\n\t\"./kde.js\": 745,\n\t\"./kea\": 746,\n\t\"./kea.js\": 746,\n\t\"./khq\": 747,\n\t\"./khq.js\": 747,\n\t\"./ki\": 748,\n\t\"./ki.js\": 748,\n\t\"./kk\": 749,\n\t\"./kk.js\": 749,\n\t\"./kkj\": 750,\n\t\"./kkj.js\": 750,\n\t\"./kl\": 751,\n\t\"./kl.js\": 751,\n\t\"./kln\": 752,\n\t\"./kln.js\": 752,\n\t\"./km\": 753,\n\t\"./km.js\": 753,\n\t\"./kn\": 754,\n\t\"./kn.js\": 754,\n\t\"./ko\": 755,\n\t\"./ko.js\": 755,\n\t\"./kok\": 756,\n\t\"./kok.js\": 756,\n\t\"./ks\": 757,\n\t\"./ks.js\": 757,\n\t\"./ksb\": 758,\n\t\"./ksb.js\": 758,\n\t\"./ksf\": 759,\n\t\"./ksf.js\": 759,\n\t\"./ksh\": 760,\n\t\"./ksh.js\": 760,\n\t\"./ku\": 761,\n\t\"./ku.js\": 761,\n\t\"./kw\": 762,\n\t\"./kw.js\": 762,\n\t\"./ky\": 763,\n\t\"./ky.js\": 763,\n\t\"./lag\": 764,\n\t\"./lag.js\": 764,\n\t\"./lb\": 765,\n\t\"./lb.js\": 765,\n\t\"./lg\": 766,\n\t\"./lg.js\": 766,\n\t\"./lkt\": 767,\n\t\"./lkt.js\": 767,\n\t\"./ln\": 768,\n\t\"./ln.js\": 768,\n\t\"./lo\": 769,\n\t\"./lo.js\": 769,\n\t\"./lrc\": 770,\n\t\"./lrc.js\": 770,\n\t\"./lt\": 771,\n\t\"./lt.js\": 771,\n\t\"./lu\": 772,\n\t\"./lu.js\": 772,\n\t\"./luo\": 773,\n\t\"./luo.js\": 773,\n\t\"./luy\": 774,\n\t\"./luy.js\": 774,\n\t\"./lv\": 775,\n\t\"./lv.js\": 775,\n\t\"./mas\": 776,\n\t\"./mas.js\": 776,\n\t\"./mer\": 777,\n\t\"./mer.js\": 777,\n\t\"./mfe\": 778,\n\t\"./mfe.js\": 778,\n\t\"./mg\": 779,\n\t\"./mg.js\": 779,\n\t\"./mgh\": 780,\n\t\"./mgh.js\": 780,\n\t\"./mgo\": 781,\n\t\"./mgo.js\": 781,\n\t\"./mi\": 782,\n\t\"./mi.js\": 782,\n\t\"./mk\": 783,\n\t\"./mk.js\": 783,\n\t\"./ml\": 784,\n\t\"./ml.js\": 784,\n\t\"./mn\": 785,\n\t\"./mn.js\": 785,\n\t\"./mo\": 786,\n\t\"./mo.js\": 786,\n\t\"./mr\": 787,\n\t\"./mr.js\": 787,\n\t\"./ms\": 788,\n\t\"./ms.js\": 788,\n\t\"./mt\": 789,\n\t\"./mt.js\": 789,\n\t\"./mua\": 790,\n\t\"./mua.js\": 790,\n\t\"./my\": 791,\n\t\"./my.js\": 791,\n\t\"./mzn\": 792,\n\t\"./mzn.js\": 792,\n\t\"./nah\": 793,\n\t\"./nah.js\": 793,\n\t\"./naq\": 794,\n\t\"./naq.js\": 794,\n\t\"./nb\": 795,\n\t\"./nb.js\": 795,\n\t\"./nd\": 796,\n\t\"./nd.js\": 796,\n\t\"./nds\": 797,\n\t\"./nds.js\": 797,\n\t\"./ne\": 798,\n\t\"./ne.js\": 798,\n\t\"./nl\": 799,\n\t\"./nl.js\": 799,\n\t\"./nmg\": 800,\n\t\"./nmg.js\": 800,\n\t\"./nn\": 801,\n\t\"./nn.js\": 801,\n\t\"./nnh\": 802,\n\t\"./nnh.js\": 802,\n\t\"./no\": 803,\n\t\"./no.js\": 803,\n\t\"./nqo\": 804,\n\t\"./nqo.js\": 804,\n\t\"./nr\": 805,\n\t\"./nr.js\": 805,\n\t\"./nso\": 806,\n\t\"./nso.js\": 806,\n\t\"./nus\": 807,\n\t\"./nus.js\": 807,\n\t\"./ny\": 808,\n\t\"./ny.js\": 808,\n\t\"./nyn\": 809,\n\t\"./nyn.js\": 809,\n\t\"./om\": 810,\n\t\"./om.js\": 810,\n\t\"./or\": 811,\n\t\"./or.js\": 811,\n\t\"./os\": 812,\n\t\"./os.js\": 812,\n\t\"./pa\": 813,\n\t\"./pa.js\": 813,\n\t\"./pap\": 814,\n\t\"./pap.js\": 814,\n\t\"./pl\": 815,\n\t\"./pl.js\": 815,\n\t\"./prg\": 816,\n\t\"./prg.js\": 816,\n\t\"./ps\": 817,\n\t\"./ps.js\": 817,\n\t\"./pt\": 818,\n\t\"./pt.js\": 818,\n\t\"./qu\": 819,\n\t\"./qu.js\": 819,\n\t\"./rm\": 820,\n\t\"./rm.js\": 820,\n\t\"./rn\": 821,\n\t\"./rn.js\": 821,\n\t\"./ro\": 822,\n\t\"./ro.js\": 822,\n\t\"./rof\": 823,\n\t\"./rof.js\": 823,\n\t\"./ru\": 824,\n\t\"./ru.js\": 824,\n\t\"./rw\": 825,\n\t\"./rw.js\": 825,\n\t\"./rwk\": 826,\n\t\"./rwk.js\": 826,\n\t\"./sah\": 827,\n\t\"./sah.js\": 827,\n\t\"./saq\": 828,\n\t\"./saq.js\": 828,\n\t\"./sbp\": 829,\n\t\"./sbp.js\": 829,\n\t\"./sc\": 830,\n\t\"./sc.js\": 830,\n\t\"./scn\": 831,\n\t\"./scn.js\": 831,\n\t\"./sd\": 832,\n\t\"./sd.js\": 832,\n\t\"./sdh\": 833,\n\t\"./sdh.js\": 833,\n\t\"./se\": 834,\n\t\"./se.js\": 834,\n\t\"./seh\": 835,\n\t\"./seh.js\": 835,\n\t\"./ses\": 836,\n\t\"./ses.js\": 836,\n\t\"./sg\": 837,\n\t\"./sg.js\": 837,\n\t\"./sh\": 838,\n\t\"./sh.js\": 838,\n\t\"./shi\": 839,\n\t\"./shi.js\": 839,\n\t\"./si\": 840,\n\t\"./si.js\": 840,\n\t\"./sk\": 841,\n\t\"./sk.js\": 841,\n\t\"./sl\": 842,\n\t\"./sl.js\": 842,\n\t\"./sma\": 843,\n\t\"./sma.js\": 843,\n\t\"./smi\": 844,\n\t\"./smi.js\": 844,\n\t\"./smj\": 845,\n\t\"./smj.js\": 845,\n\t\"./smn\": 846,\n\t\"./smn.js\": 846,\n\t\"./sms\": 847,\n\t\"./sms.js\": 847,\n\t\"./sn\": 848,\n\t\"./sn.js\": 848,\n\t\"./so\": 849,\n\t\"./so.js\": 849,\n\t\"./sq\": 850,\n\t\"./sq.js\": 850,\n\t\"./sr\": 851,\n\t\"./sr.js\": 851,\n\t\"./ss\": 852,\n\t\"./ss.js\": 852,\n\t\"./ssy\": 853,\n\t\"./ssy.js\": 853,\n\t\"./st\": 854,\n\t\"./st.js\": 854,\n\t\"./sv\": 855,\n\t\"./sv.js\": 855,\n\t\"./sw\": 856,\n\t\"./sw.js\": 856,\n\t\"./syr\": 857,\n\t\"./syr.js\": 857,\n\t\"./ta\": 858,\n\t\"./ta.js\": 858,\n\t\"./te\": 859,\n\t\"./te.js\": 859,\n\t\"./teo\": 860,\n\t\"./teo.js\": 860,\n\t\"./tg\": 861,\n\t\"./tg.js\": 861,\n\t\"./th\": 862,\n\t\"./th.js\": 862,\n\t\"./ti\": 863,\n\t\"./ti.js\": 863,\n\t\"./tig\": 864,\n\t\"./tig.js\": 864,\n\t\"./tk\": 865,\n\t\"./tk.js\": 865,\n\t\"./tl\": 866,\n\t\"./tl.js\": 866,\n\t\"./tn\": 867,\n\t\"./tn.js\": 867,\n\t\"./to\": 868,\n\t\"./to.js\": 868,\n\t\"./tr\": 869,\n\t\"./tr.js\": 869,\n\t\"./ts\": 870,\n\t\"./ts.js\": 870,\n\t\"./tt\": 871,\n\t\"./tt.js\": 871,\n\t\"./twq\": 872,\n\t\"./twq.js\": 872,\n\t\"./tzm\": 873,\n\t\"./tzm.js\": 873,\n\t\"./ug\": 874,\n\t\"./ug.js\": 874,\n\t\"./uk\": 875,\n\t\"./uk.js\": 875,\n\t\"./ur\": 876,\n\t\"./ur.js\": 876,\n\t\"./uz\": 877,\n\t\"./uz.js\": 877,\n\t\"./vai\": 878,\n\t\"./vai.js\": 878,\n\t\"./ve\": 879,\n\t\"./ve.js\": 879,\n\t\"./vi\": 880,\n\t\"./vi.js\": 880,\n\t\"./vo\": 881,\n\t\"./vo.js\": 881,\n\t\"./vun\": 882,\n\t\"./vun.js\": 882,\n\t\"./wa\": 883,\n\t\"./wa.js\": 883,\n\t\"./wae\": 884,\n\t\"./wae.js\": 884,\n\t\"./wo\": 885,\n\t\"./wo.js\": 885,\n\t\"./xh\": 886,\n\t\"./xh.js\": 886,\n\t\"./xog\": 887,\n\t\"./xog.js\": 887,\n\t\"./yav\": 888,\n\t\"./yav.js\": 888,\n\t\"./yi\": 889,\n\t\"./yi.js\": 889,\n\t\"./yo\": 890,\n\t\"./yo.js\": 890,\n\t\"./yue\": 891,\n\t\"./yue.js\": 891,\n\t\"./zgh\": 892,\n\t\"./zgh.js\": 892,\n\t\"./zh\": 893,\n\t\"./zh.js\": 893,\n\t\"./zu\": 894,\n\t\"./zu.js\": 894\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1414;","var map = {\n\t\"./ar-SA.json\": [\n\t\t2186,\n\t\t8\n\t],\n\t\"./ar.json\": [\n\t\t2187,\n\t\t9\n\t],\n\t\"./be-BY.json\": [\n\t\t2188,\n\t\t10\n\t],\n\t\"./bg-BG.json\": [\n\t\t2189,\n\t\t11\n\t],\n\t\"./bn-BD.json\": [\n\t\t2190,\n\t\t12\n\t],\n\t\"./bn.json\": [\n\t\t2191,\n\t\t13\n\t],\n\t\"./cs-CZ.json\": [\n\t\t2192,\n\t\t14\n\t],\n\t\"./cs.json\": [\n\t\t2193,\n\t\t15\n\t],\n\t\"./da-DK.json\": [\n\t\t2194,\n\t\t16\n\t],\n\t\"./da.json\": [\n\t\t2195,\n\t\t17\n\t],\n\t\"./de-DE.json\": [\n\t\t2196,\n\t\t18\n\t],\n\t\"./de.json\": [\n\t\t2197,\n\t\t19\n\t],\n\t\"./el-GR.json\": [\n\t\t2198,\n\t\t20\n\t],\n\t\"./el.json\": [\n\t\t2199,\n\t\t21\n\t],\n\t\"./en-GB.json\": [\n\t\t2200,\n\t\t22\n\t],\n\t\"./en-US.json\": [\n\t\t2201,\n\t\t23\n\t],\n\t\"./en.json\": [\n\t\t2202,\n\t\t24\n\t],\n\t\"./es-ES.json\": [\n\t\t2203,\n\t\t25\n\t],\n\t\"./es.json\": [\n\t\t2204,\n\t\t26\n\t],\n\t\"./fi-FI.json\": [\n\t\t2205,\n\t\t27\n\t],\n\t\"./fi.json\": [\n\t\t2206,\n\t\t28\n\t],\n\t\"./fr-FR.json\": [\n\t\t2207,\n\t\t29\n\t],\n\t\"./fr.json\": [\n\t\t2208,\n\t\t30\n\t],\n\t\"./he-IL.json\": [\n\t\t2209,\n\t\t31\n\t],\n\t\"./he.json\": [\n\t\t2210,\n\t\t32\n\t],\n\t\"./hi-IN.json\": [\n\t\t2211,\n\t\t33\n\t],\n\t\"./hi.json\": [\n\t\t2212,\n\t\t34\n\t],\n\t\"./hr-HR.json\": [\n\t\t2213,\n\t\t35\n\t],\n\t\"./hu-HU.json\": [\n\t\t2214,\n\t\t36\n\t],\n\t\"./hu.json\": [\n\t\t2215,\n\t\t37\n\t],\n\t\"./id-ID.json\": [\n\t\t2216,\n\t\t38\n\t],\n\t\"./id.json\": [\n\t\t2217,\n\t\t39\n\t],\n\t\"./it-IT.json\": [\n\t\t2218,\n\t\t40\n\t],\n\t\"./it.json\": [\n\t\t2219,\n\t\t41\n\t],\n\t\"./ja-JP.json\": [\n\t\t2220,\n\t\t42\n\t],\n\t\"./ja.json\": [\n\t\t2221,\n\t\t43\n\t],\n\t\"./km-KH.json\": [\n\t\t2222,\n\t\t44\n\t],\n\t\"./km.json\": [\n\t\t2223,\n\t\t45\n\t],\n\t\"./ko-KR.json\": [\n\t\t2224,\n\t\t46\n\t],\n\t\"./ko.json\": [\n\t\t2225,\n\t\t47\n\t],\n\t\"./me-ME.json\": [\n\t\t2226,\n\t\t48\n\t],\n\t\"./mk-MK.json\": [\n\t\t2227,\n\t\t49\n\t],\n\t\"./ne-NP.json\": [\n\t\t2228,\n\t\t50\n\t],\n\t\"./ne.json\": [\n\t\t2229,\n\t\t51\n\t],\n\t\"./nl-NL.json\": [\n\t\t2230,\n\t\t52\n\t],\n\t\"./nl.json\": [\n\t\t2231,\n\t\t53\n\t],\n\t\"./no-NO.json\": [\n\t\t2232,\n\t\t54\n\t],\n\t\"./no.json\": [\n\t\t2233,\n\t\t55\n\t],\n\t\"./pl-PL.json\": [\n\t\t2234,\n\t\t56\n\t],\n\t\"./pl.json\": [\n\t\t2235,\n\t\t57\n\t],\n\t\"./pt-BR.json\": [\n\t\t2236,\n\t\t58\n\t],\n\t\"./pt-PT.json\": [\n\t\t2237,\n\t\t59\n\t],\n\t\"./pt-TL.json\": [\n\t\t2238,\n\t\t60\n\t],\n\t\"./pt.json\": [\n\t\t2239,\n\t\t61\n\t],\n\t\"./ro-RO.json\": [\n\t\t2240,\n\t\t62\n\t],\n\t\"./ro.json\": [\n\t\t2241,\n\t\t63\n\t],\n\t\"./ru-MD.json\": [\n\t\t2242,\n\t\t64\n\t],\n\t\"./ru-RU.json\": [\n\t\t2243,\n\t\t65\n\t],\n\t\"./ru.json\": [\n\t\t2244,\n\t\t66\n\t],\n\t\"./sh-HR.json\": [\n\t\t2245,\n\t\t67\n\t],\n\t\"./si-LK.json\": [\n\t\t2246,\n\t\t68\n\t],\n\t\"./si.json\": [\n\t\t2247,\n\t\t69\n\t],\n\t\"./sk-SK.json\": [\n\t\t2248,\n\t\t70\n\t],\n\t\"./sk.json\": [\n\t\t2249,\n\t\t71\n\t],\n\t\"./sr-CS.json\": [\n\t\t2250,\n\t\t72\n\t],\n\t\"./sr-ME.json\": [\n\t\t2251,\n\t\t73\n\t],\n\t\"./sr-RS.json\": [\n\t\t2252,\n\t\t74\n\t],\n\t\"./sr-SP.json\": [\n\t\t2253,\n\t\t75\n\t],\n\t\"./src/cboard.json\": [\n\t\t2254,\n\t\t76\n\t],\n\t\"./sv-SE.json\": [\n\t\t2255,\n\t\t77\n\t],\n\t\"./sv.json\": [\n\t\t2256,\n\t\t78\n\t],\n\t\"./th-TH.json\": [\n\t\t2257,\n\t\t79\n\t],\n\t\"./th.json\": [\n\t\t2258,\n\t\t80\n\t],\n\t\"./tr-TR.json\": [\n\t\t2259,\n\t\t81\n\t],\n\t\"./tr.json\": [\n\t\t2260,\n\t\t82\n\t],\n\t\"./tu-TI.json\": [\n\t\t2261,\n\t\t83\n\t],\n\t\"./uk-UA.json\": [\n\t\t2262,\n\t\t84\n\t],\n\t\"./uk.json\": [\n\t\t2263,\n\t\t85\n\t],\n\t\"./ur-PK.json\": [\n\t\t2264,\n\t\t86\n\t],\n\t\"./vi-VN.json\": [\n\t\t2265,\n\t\t87\n\t],\n\t\"./vi.json\": [\n\t\t2266,\n\t\t88\n\t],\n\t\"./zh-CN.json\": [\n\t\t2267,\n\t\t89\n\t],\n\t\"./zh.json\": [\n\t\t2268,\n\t\t90\n\t],\n\t\"./zu-ZA.json\": [\n\t\t2269,\n\t\t91\n\t],\n\t\"./zu.json\": [\n\t\t2270,\n\t\t92\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 3);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 1418;\nmodule.exports = webpackAsyncContext;","import { addLocaleData } from 'react-intl';\r\nimport { alpha3TToAlpha2 } from '@cospired/i18n-iso-languages';\r\nimport { alpha3ToAlpha2 } from 'i18n-iso-countries';\r\n\r\nimport { APP_LANGS, DEFAULT_LANG } from './components/App/App.constants';\r\nimport { EMPTY_VOICES } from './providers/SpeechProvider/SpeechProvider.constants';\r\n\r\nconst splitLangRgx = /[_-]+/;\r\n\r\nAPP_LANGS.forEach(lang => {\r\n  const locale = lang.slice(0, 2);\r\n  var localeData = null;\r\n  try {\r\n    localeData = require(`react-intl/locale-data/${locale}`);\r\n  } catch (err) {\r\n    console.log(err.message);\r\n    console.log(locale);\r\n  }\r\n  if (localeData) {\r\n    addLocaleData(localeData);\r\n  }\r\n});\r\n\r\nexport function importTranslation(lang) {\r\n  return import(`./translations/${lang}.json`);\r\n}\r\n\r\nexport function stripRegionCode(lang) {\r\n  return lang.split(splitLangRgx)[0].toLowerCase();\r\n}\r\n\r\nexport function normalizeLanguageCode(lang) {\r\n  const splittedLang = lang.split(splitLangRgx);\r\n  let normalizedLang =\r\n    splittedLang.length === 1\r\n      ? splittedLang[0].toLowerCase()\r\n      : `${splittedLang[0].toLowerCase()}-${splittedLang[1].toUpperCase()}`;\r\n  return normalizedLang;\r\n}\r\n\r\nexport function standardizeLanguageCode(lang) {\r\n  const splittedLang = lang.split(splitLangRgx);\r\n  if (splittedLang.length < 1) {\r\n    return lang;\r\n  }\r\n  let standardLang =\r\n    splittedLang[0].length === 3\r\n      ? alpha3TToAlpha2(splittedLang[0]) || splittedLang[0]\r\n      : splittedLang[0];\r\n\r\n  if (splittedLang.length === 1) {\r\n    return standardLang;\r\n  }\r\n\r\n  let standardCountry =\r\n    splittedLang[1].length === 3\r\n      ? alpha3ToAlpha2(splittedLang[1]) || splittedLang[1]\r\n      : splittedLang[1];\r\n\r\n  return `${standardLang}-${standardCountry}`;\r\n}\r\n\r\nexport function getDefaultLang(langs) {\r\n  for (let i = 0; i < langs.length; i++) {\r\n    if (window.navigator.language.slice(0, 2) === langs[i].slice(0, 2)) {\r\n      return langs[i];\r\n    }\r\n  }\r\n  return langs.includes(DEFAULT_LANG) ? DEFAULT_LANG : langs[0];\r\n}\r\n\r\nexport function getVoicesLangs(voices) {\r\n  let langs = [...new Set(voices.map(voice => voice.lang))].sort();\r\n  langs = langs.map(lang => standardizeLanguageCode(lang));\r\n  langs = langs.map(lang => normalizeLanguageCode(lang));\r\n  langs = [...new Set(langs)].sort();\r\n  return langs.filter(lang => APP_LANGS.includes(lang));\r\n}\r\n\r\nexport function getSupportedLangs(voices) {\r\n  let supportedLangs = [];\r\n  if (voices.length) {\r\n    const sLanguages = getVoicesLangs(voices);\r\n    if (sLanguages !== undefined && sLanguages.length) {\r\n      supportedLangs = sLanguages;\r\n      //hack just for Alfanum Serbian voices\r\n      //https://github.com/cboard-org/cboard/issues/715\r\n      if (supportedLangs.includes('sr-RS')) {\r\n        supportedLangs.push('sr-SP');\r\n      }\r\n      //hack just for Tetum language\r\n      //https://github.com/cboard-org/cboard/issues/848\r\n      if (\r\n        supportedLangs.includes('pt-BR') ||\r\n        supportedLangs.includes('pt-PT')\r\n      ) {\r\n        supportedLangs.push('pt-TL');\r\n      }\r\n    }\r\n  }\r\n  return supportedLangs;\r\n}\r\n\r\nexport function filterLocalLangs(voices) {\r\n  let localVoices = [\r\n    ...new Set(voices.filter(voice => voice.voiceSource === 'local'))\r\n  ].sort();\r\n  let localLangs = localVoices.map(voice => voice.lang);\r\n  localLangs = localLangs.map(lang => standardizeLanguageCode(lang));\r\n  localLangs = localLangs.map(lang => normalizeLanguageCode(lang));\r\n  localLangs = [...new Set(localLangs)].sort();\r\n  return localLangs.filter(lang => APP_LANGS.includes(lang));\r\n}\r\n\r\nexport function getVoiceURI(language, voices) {\r\n  let nVoices = voices.map(({ voiceURI, name, lang }) => ({\r\n    voiceURI,\r\n    name,\r\n    lang: normalizeLanguageCode(standardizeLanguageCode(lang))\r\n  }));\r\n\r\n  // special case for tetum-language\r\n  if (language === 'pt-TL') {\r\n    const langs = voices.map(voice => voice.lang);\r\n    if (langs.includes('pt-PT')) {\r\n      language = 'pt-PT';\r\n    } else if (langs.includes('pt-BR')) {\r\n      language = 'pt-BR';\r\n    }\r\n  }\r\n\r\n  const nVoice = nVoices.find(\r\n    voice => voice.lang.substring(0, 2) === language.substring(0, 2)\r\n  );\r\n  return typeof nVoice !== 'undefined' ? nVoice.voiceURI : EMPTY_VOICES;\r\n}\r\n","export const isCordova = () => !!window.cordova;\r\n\r\nexport const isAndroid = () =>\r\n  isCordova() && window.cordova.platformId === 'android';\r\n\r\nexport const isElectron = () =>\r\n  isCordova() && window.cordova.platformId === 'electron';\r\n\r\nexport const onCordovaReady = onReady =>\r\n  document.addEventListener('deviceready', onReady, false);\r\n\r\nexport const initCordovaPlugins = () => {\r\n  console.log('now cordova is ready ');\r\n  if (isCordova()) {\r\n    try {\r\n      window.ga.startTrackerWithId('UA-152065055-1', 20);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n    try {\r\n      window.StatusBar.hide();\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n    try {\r\n      window.AndroidFullScreen.immersiveMode(\r\n        function successFunction() {},\r\n        function errorFunction(error) {\r\n          console.error(error);\r\n        }\r\n      );\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n  }\r\n};\r\n\r\nexport const cvaTrackEvent = (category, action, label) => {\r\n  try {\r\n    window.ga.trackEvent(category, action, label);\r\n  } catch (err) {\r\n    console.log(err.message);\r\n  }\r\n};\r\n\r\nexport const readCvaFile = async name => {\r\n  if (isCordova()) {\r\n    return new Promise(function(resolve, reject) {\r\n      window.requestFileSystem(\r\n        window.LocalFileSystem.PERSISTENT,\r\n        0,\r\n        function(fs) {\r\n          fs.root.getFile(\r\n            name,\r\n            { create: false, exclusive: false },\r\n            function(fileEntry) {\r\n              fileEntry.file(\r\n                function(file) {\r\n                  var reader = new FileReader();\r\n                  reader.onloadend = function() {\r\n                    console.log('Successful file read: ' + this.result);\r\n                    resolve(this.result);\r\n                  };\r\n                  reader.readAsText(file);\r\n                },\r\n                function(err) {\r\n                  console.log(err);\r\n                  reject(err);\r\n                }\r\n              );\r\n            },\r\n            function(err) {\r\n              console.log(err);\r\n              reject(err);\r\n            }\r\n          );\r\n        },\r\n        function(err) {\r\n          console.log(err);\r\n          reject(err);\r\n        }\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nexport const writeCvaFile = async (name, blob) => {\r\n  if (isCordova()) {\r\n    return new Promise(function(resolve, reject) {\r\n      window.requestFileSystem(\r\n        window.LocalFileSystem.PERSISTENT,\r\n        0,\r\n        function(fs) {\r\n          fs.root.getFile(\r\n            name,\r\n            { create: true, exclusive: false },\r\n            async function(fileEntry) {\r\n              //console.log('file entry: ' + fileEntry.nativeURL);\r\n              await writeFile(fileEntry, blob);\r\n              resolve(fileEntry);\r\n            },\r\n            function(err) {\r\n              console.log(err);\r\n              reject(err);\r\n            }\r\n          );\r\n        },\r\n        function(err) {\r\n          console.log(err);\r\n          reject(err);\r\n        }\r\n      );\r\n    });\r\n  }\r\n};\r\n\r\nconst writeFile = (fileEntry, dataObj) => {\r\n  return new Promise(function(resolve, reject) {\r\n    fileEntry.createWriter(function(fileWriter) {\r\n      fileWriter.onwriteend = function() {\r\n        console.log('File write success');\r\n        resolve();\r\n      };\r\n      fileWriter.onerror = function(e) {\r\n        console.log('Failed file write: ' + e.toString());\r\n        reject(e);\r\n      };\r\n      // If data object is not passed in, create a new Blob instead.\r\n      if (!dataObj) {\r\n        dataObj = new Blob(['some file data'], { type: 'text/plain' });\r\n      }\r\n      fileWriter.write(dataObj);\r\n    });\r\n  });\r\n};\r\n\r\nexport const fileCvaOpen = (filePath, type) => {\r\n  if (isCordova()) {\r\n    window.cordova.plugins.fileOpener2.open(filePath, type, {\r\n      error: function(e) {\r\n        console.log(\r\n          'Error status: ' + e.status + ' - Error message: ' + e.message\r\n        );\r\n      },\r\n      success: function() {\r\n        console.log('file opened successfully');\r\n      }\r\n    });\r\n  }\r\n};\r\n\r\nexport const requestCvaWritePermissions = () => {\r\n  if (isCordova()) {\r\n    var permissions = window.cordova.plugins.permissions;\r\n    permissions.checkPermission(\r\n      permissions.WRITE_EXTERNAL_STORAGE,\r\n      function(status) {\r\n        console.log('Has WRITE_EXTERNAL_STORAGE:', status.hasPermission);\r\n        if (!status.hasPermission) {\r\n          permissions.requestPermission(\r\n            permissions.WRITE_EXTERNAL_STORAGE,\r\n            function(status) {\r\n              console.log(\r\n                'success requesting WRITE_EXTERNAL_STORAGE permission'\r\n              );\r\n            },\r\n            function(err) {\r\n              console.warn('No permissions granted for WRITE_EXTERNAL_STORAGE');\r\n            }\r\n          );\r\n        }\r\n      },\r\n      function(err) {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n};\r\n\r\nexport const requestCvaPermissions = () => {\r\n  if (isCordova()) {\r\n    var permissions = window.cordova.plugins.permissions;\r\n    permissions.checkPermission(\r\n      permissions.READ_EXTERNAL_STORAGE,\r\n      function(status) {\r\n        console.log('Has READ_EXTERNAL_STORAGE:', status.hasPermission);\r\n        if (!status.hasPermission) {\r\n          permissions.requestPermission(\r\n            permissions.READ_EXTERNAL_STORAGE,\r\n            function(status) {\r\n              console.log(\r\n                'success requesting READ_EXTERNAL_STORAGE permission'\r\n              );\r\n            },\r\n            function(err) {\r\n              console.warn('No permissions granted for READ_EXTERNAL_STORAGE');\r\n            }\r\n          );\r\n        }\r\n      },\r\n      function(err) {\r\n        console.log(err);\r\n      }\r\n    );\r\n\r\n    permissions.checkPermission(\r\n      permissions.RECORD_AUDIO,\r\n      function(status) {\r\n        console.log('Has RECORD_AUDIO:', status.hasPermission);\r\n        if (!status.hasPermission) {\r\n          permissions.requestPermission(\r\n            permissions.RECORD_AUDIO,\r\n            function(status) {\r\n              console.log('success requesting RECORD_AUDIO permission');\r\n            },\r\n            function(err) {\r\n              console.warn('No permissions granted for RECORD_AUDIO');\r\n            }\r\n          );\r\n        }\r\n      },\r\n      function(err) {\r\n        console.log(err);\r\n      }\r\n    );\r\n\r\n    permissions.checkPermission(\r\n      permissions.CAMERA,\r\n      function(status) {\r\n        console.log('Has CAMERA:', status.hasPermission);\r\n        if (!status.hasPermission) {\r\n          permissions.requestPermission(\r\n            permissions.CAMERA,\r\n            function(status) {\r\n              console.log('success requesting CAMERA permission');\r\n            },\r\n            function(err) {\r\n              console.warn('No permissions granted for CAMERA');\r\n            }\r\n          );\r\n        }\r\n      },\r\n      function(err) {\r\n        console.log(err);\r\n      }\r\n    );\r\n  }\r\n};\r\n","export const SHOW_NOTIFICATION = 'SHOW_NOTIFICATION';\r\nexport const HIDE_NOTIFICATION = 'HIDE_NOTIFICATION';\r\nexport const NOTIFICATION_DELAY = 5000;\r\n","var map = {\n\t\"./ar-SA.md\": 1744,\n\t\"./be-BY.md\": 1745,\n\t\"./bg-BG.md\": 1746,\n\t\"./bn-BD.md\": 1747,\n\t\"./cs-CZ.md\": 1748,\n\t\"./da-DK.md\": 1749,\n\t\"./de-DE.md\": 1750,\n\t\"./el-GR.md\": 1751,\n\t\"./en-GB.md\": 1752,\n\t\"./en-US.md\": 986,\n\t\"./es-ES.md\": 1753,\n\t\"./fi-FI.md\": 1754,\n\t\"./fr-FR.md\": 1755,\n\t\"./he-IL.md\": 1756,\n\t\"./hi-IN.md\": 1757,\n\t\"./hr-HR.md\": 1758,\n\t\"./hu-HU.md\": 1759,\n\t\"./id-ID.md\": 1760,\n\t\"./it-IT.md\": 1761,\n\t\"./ja-JP.md\": 1762,\n\t\"./km-KH.md\": 1763,\n\t\"./ko-KR.md\": 1764,\n\t\"./me-ME.md\": 1765,\n\t\"./mk-MK.md\": 1766,\n\t\"./ne-NP.md\": 1767,\n\t\"./nl-NL.md\": 1768,\n\t\"./no-NO.md\": 1769,\n\t\"./pl-PL.md\": 1770,\n\t\"./pt-BR.md\": 1771,\n\t\"./pt-PT.md\": 1772,\n\t\"./ro-RO.md\": 1773,\n\t\"./ru-MD.md\": 1774,\n\t\"./ru-RU.md\": 1775,\n\t\"./sh-HR.md\": 1776,\n\t\"./si-LK.md\": 1777,\n\t\"./sk-SK.md\": 1778,\n\t\"./sr-CS.md\": 1779,\n\t\"./sr-SP.md\": 1780,\n\t\"./sv-SE.md\": 1781,\n\t\"./th-TH.md\": 1782,\n\t\"./tr-TR.md\": 1783,\n\t\"./tu-TI.md\": 1784,\n\t\"./uk-UA.md\": 1785,\n\t\"./ur-PK.md\": 1786,\n\t\"./vi-VN.md\": 1787,\n\t\"./zh-CN.md\": 1788,\n\t\"./zu-ZA.md\": 1789\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1743;","module.exports = __webpack_public_path__ + \"static/media/ar-SA.55d818d3.md\";","module.exports = __webpack_public_path__ + \"static/media/be-BY.205b1e2a.md\";","module.exports = __webpack_public_path__ + \"static/media/bg-BG.cf99cbd3.md\";","module.exports = __webpack_public_path__ + \"static/media/bn-BD.c6d0dcdf.md\";","module.exports = __webpack_public_path__ + \"static/media/cs-CZ.7fa62c45.md\";","module.exports = __webpack_public_path__ + \"static/media/da-DK.03197df3.md\";","module.exports = __webpack_public_path__ + \"static/media/de-DE.5d1cad75.md\";","module.exports = __webpack_public_path__ + \"static/media/el-GR.9762f13a.md\";","module.exports = __webpack_public_path__ + \"static/media/en-GB.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/es-ES.7ecfca21.md\";","module.exports = __webpack_public_path__ + \"static/media/fi-FI.3d6e7381.md\";","module.exports = __webpack_public_path__ + \"static/media/fr-FR.f50d8f27.md\";","module.exports = __webpack_public_path__ + \"static/media/he-IL.78de33e1.md\";","module.exports = __webpack_public_path__ + \"static/media/hi-IN.008cc6c6.md\";","module.exports = __webpack_public_path__ + \"static/media/hr-HR.b4e5b92d.md\";","module.exports = __webpack_public_path__ + \"static/media/hu-HU.a7616273.md\";","export const SCANNING_METHOD_AUTOMATIC = 'automatic';\r\nexport const SCANNING_METHOD_MANUAL = 'manual';\r\n","module.exports = __webpack_public_path__ + \"static/media/id-ID.9561f624.md\";","module.exports = __webpack_public_path__ + \"static/media/it-IT.713759c0.md\";","module.exports = __webpack_public_path__ + \"static/media/ja-JP.e0dde3f2.md\";","module.exports = __webpack_public_path__ + \"static/media/km-KH.52a88ebf.md\";","module.exports = __webpack_public_path__ + \"static/media/ko-KR.c6b5135a.md\";","module.exports = __webpack_public_path__ + \"static/media/me-ME.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/mk-MK.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/ne-NP.795a6f82.md\";","module.exports = __webpack_public_path__ + \"static/media/nl-NL.23d06909.md\";","module.exports = __webpack_public_path__ + \"static/media/no-NO.0154fde4.md\";","export const ACTIVATE_SCANNER = 'cboard/ScannerProvider/ACTIVATE_SCANNER';\r\nexport const DEACTIVATE_SCANNER = 'cboard/ScannerProvider/DEACTIVATE_SCANNER';\r\nexport const TOGGLE_SCANNER = 'cboard/ScannerProvider/TOGGLE_SCANNER';\r\nexport const UPDATE_SCANNER_SETTINGS =\r\n  'cboard/ScannerProvider/UPDATE_SCANNER_SETTINGS';\r\n","module.exports = __webpack_public_path__ + \"static/media/pl-PL.92565605.md\";","module.exports = __webpack_public_path__ + \"static/media/pt-BR.1afddef5.md\";","module.exports = __webpack_public_path__ + \"static/media/pt-PT.1afddef5.md\";","module.exports = __webpack_public_path__ + \"static/media/ro-RO.132d0c4d.md\";","module.exports = __webpack_public_path__ + \"static/media/ru-MD.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/ru-RU.b08abd13.md\";","module.exports = __webpack_public_path__ + \"static/media/sh-HR.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/si-LK.eb7839f1.md\";","module.exports = __webpack_public_path__ + \"static/media/sk-SK.2d8da30e.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-CS.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-SP.ef50d973.md\";","module.exports = __webpack_public_path__ + \"static/media/sv-SE.f42f4819.md\";","module.exports = __webpack_public_path__ + \"static/media/th-TH.26abfac5.md\";","module.exports = __webpack_public_path__ + \"static/media/tr-TR.924562ff.md\";","module.exports = __webpack_public_path__ + \"static/media/tu-TI.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/uk-UA.ad207aca.md\";","module.exports = __webpack_public_path__ + \"static/media/ur-PK.c2d11f56.md\";","module.exports = __webpack_public_path__ + \"static/media/vi-VN.2618bc0f.md\";","module.exports = __webpack_public_path__ + \"static/media/zh-CN.e0c7dbd4.md\";","module.exports = __webpack_public_path__ + \"static/media/zu-ZA.382e77d7.md\";","var map = {\n\t\"./ar-SA.md\": 1799,\n\t\"./be-BY.md\": 1800,\n\t\"./bg-BG.md\": 1801,\n\t\"./bn-BD.md\": 1802,\n\t\"./cs-CZ.md\": 1803,\n\t\"./da-DK.md\": 1804,\n\t\"./de-DE.md\": 1805,\n\t\"./el-GR.md\": 1806,\n\t\"./en-GB.md\": 1807,\n\t\"./en-US.md\": 987,\n\t\"./es-ES.md\": 1808,\n\t\"./fi-FI.md\": 1809,\n\t\"./fr-FR.md\": 1810,\n\t\"./he-IL.md\": 1811,\n\t\"./hi-IN.md\": 1812,\n\t\"./hr-HR.md\": 1813,\n\t\"./hu-HU.md\": 1814,\n\t\"./id-ID.md\": 1815,\n\t\"./it-IT.md\": 1816,\n\t\"./ja-JP.md\": 1817,\n\t\"./km-KH.md\": 1818,\n\t\"./ko-KR.md\": 1819,\n\t\"./me-ME.md\": 1820,\n\t\"./mk-MK.md\": 1821,\n\t\"./ne-NP.md\": 1822,\n\t\"./nl-NL.md\": 1823,\n\t\"./no-NO.md\": 1824,\n\t\"./pl-PL.md\": 1825,\n\t\"./pt-BR.md\": 1826,\n\t\"./pt-PT.md\": 1827,\n\t\"./pt-TL.md\": 1828,\n\t\"./ro-RO.md\": 1829,\n\t\"./ru-MD.md\": 1830,\n\t\"./ru-RU.md\": 1831,\n\t\"./sh-HR.md\": 1832,\n\t\"./si-LK.md\": 1833,\n\t\"./sk-SK.md\": 1834,\n\t\"./sr-CS.md\": 1835,\n\t\"./sr-ME.md\": 1836,\n\t\"./sr-RS.md\": 1837,\n\t\"./sr-SP.md\": 1838,\n\t\"./sv-SE.md\": 1839,\n\t\"./th-TH.md\": 1840,\n\t\"./tr-TR.md\": 1841,\n\t\"./tu-TI.md\": 1842,\n\t\"./uk-UA.md\": 1843,\n\t\"./ur-PK.md\": 1844,\n\t\"./vi-VN.md\": 1845,\n\t\"./zh-CN.md\": 1846,\n\t\"./zu-ZA.md\": 1847\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 1798;","module.exports = __webpack_public_path__ + \"static/media/ar-SA.de2fc643.md\";","export const IMPORT_BOARDS = 'cboard/Board/IMPORT_BOARDS';\r\nexport const ADD_BOARDS = 'cboard/Board/ADD_BOARDS';\r\nexport const CREATE_BOARD = 'cboard/Board/CREATE_BOARD';\r\nexport const UPDATE_BOARD = 'cboard/Board/UPDATE_BOARD';\r\nexport const DELETE_BOARD = 'cboard/Board/DELETE_BOARD';\r\nexport const CHANGE_BOARD = 'cboard/Board/CHANGE_BOARD';\r\nexport const REPLACE_BOARD = 'cboard/Board/REPLACE_BOARD';\r\nexport const SWITCH_BOARD = 'cboard/Board/SWITCH_BOARD';\r\nexport const PREVIOUS_BOARD = 'cboard/Board/PREVIOUS_BOARD';\r\nexport const TO_ROOT_BOARD = 'cboard/Board/TO_ROOT_BOARD';\r\nexport const CREATE_TILE = 'cboard/Board/CREATE_TILE';\r\nexport const DELETE_TILES = 'cboard/Board/DELETE_TILES';\r\nexport const EDIT_TILES = 'cboard/Board/EDIT_TILES';\r\nexport const FOCUS_TILE = 'cboard/Board/FOCUS_TILE';\r\nexport const CLICK_SYMBOL = 'cboard/Board/CLICK_SYMBOL';\r\nexport const CLICK_OUTPUT = 'cboard/Board/CLICK_OUTPUT';\r\nexport const CHANGE_OUTPUT = 'cboard/Board/CHANGE_OUTPUT';\r\nexport const HISTORY_REMOVE_BOARD = 'cboard/Board/HISTORY_REMOVE_BOARD';\r\nexport const UNMARK_BOARD = 'cboard/Board/UNMARK_BOARD';\r\nexport const CREATE_API_BOARD_SUCCESS = 'cboard/Board/CREATE_API_BOARD_SUCCESS';\r\nexport const CREATE_API_BOARD_FAILURE = 'cboard/Board/CREATE_API_BOARD_FAILURE';\r\nexport const CREATE_API_BOARD_STARTED = 'cboard/Board/CREATE_API_BOARD_STARTED';\r\nexport const DELETE_API_BOARD_SUCCESS = 'cboard/Board/DELETE_API_BOARD_SUCCESS';\r\nexport const DELETE_API_BOARD_FAILURE = 'cboard/Board/DELETE_API_BOARD_FAILURE';\r\nexport const DELETE_API_BOARD_STARTED = 'cboard/Board/DELETE_API_BOARD_STARTED';\r\nexport const UPDATE_API_BOARD_SUCCESS = 'cboard/Board/UPDATE_API_BOARD_SUCCESS';\r\nexport const UPDATE_API_BOARD_FAILURE = 'cboard/Board/UPDATE_API_BOARD_FAILURE';\r\nexport const UPDATE_API_BOARD_STARTED = 'cboard/Board/UPDATE_API_BOARD_STARTED';\r\nexport const GET_API_MY_BOARDS_SUCCESS =\r\n  'cboard/Board/GET_API_MY_BOARDS_SUCCESS';\r\nexport const GET_API_MY_BOARDS_FAILURE =\r\n  'cboard/Board/GET_API_MY_BOARDS_FAILURE';\r\nexport const GET_API_MY_BOARDS_STARTED =\r\n  'cboard/Board/GET_API_MY_BOARDS_STARTED';\r\nexport const DOWNLOAD_IMAGES_SUCCESS = 'cboard/Board/DOWNLOAD_IMAGES_SUCCESS';\r\nexport const DOWNLOAD_IMAGES_FAILURE = 'cboard/Board/DOWNLOAD_IMAGES_FAILURE';\r\nexport const DOWNLOAD_IMAGES_STARTED = 'cboard/Board/DOWNLOAD_IMAGES_STARTED';\r\nexport const DOWNLOAD_IMAGE_SUCCESS = 'cboard/Board/DOWNLOAD_IMAGE_SUCCESS';\r\nexport const DOWNLOAD_IMAGE_FAILURE = 'cboard/Board/DOWNLOAD_IMAGE_FAILURE';\r\nexport const DEFAULT_ROWS_NUMBER = 5;\r\nexport const DEFAULT_COLUMNS_NUMBER = 5;\r\n","module.exports = __webpack_public_path__ + \"static/media/be-BY.d07dd6e0.md\";","module.exports = __webpack_public_path__ + \"static/media/bg-BG.d597b658.md\";","module.exports = __webpack_public_path__ + \"static/media/bn-BD.79349cb4.md\";","module.exports = __webpack_public_path__ + \"static/media/cs-CZ.fcded2e8.md\";","module.exports = __webpack_public_path__ + \"static/media/da-DK.b1a3d0f5.md\";","module.exports = __webpack_public_path__ + \"static/media/de-DE.1b9d184a.md\";","module.exports = __webpack_public_path__ + \"static/media/el-GR.bfbda506.md\";","module.exports = __webpack_public_path__ + \"static/media/en-GB.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/es-ES.1bd2d68b.md\";","module.exports = __webpack_public_path__ + \"static/media/fi-FI.d39c468f.md\";","module.exports = __webpack_public_path__ + \"static/media/fr-FR.59df8570.md\";","module.exports = __webpack_public_path__ + \"static/media/he-IL.6b660d47.md\";","module.exports = __webpack_public_path__ + \"static/media/hi-IN.6f272976.md\";","module.exports = __webpack_public_path__ + \"static/media/hr-HR.8cbea2df.md\";","module.exports = __webpack_public_path__ + \"static/media/hu-HU.70bff226.md\";","module.exports = __webpack_public_path__ + \"static/media/id-ID.9df3063e.md\";","module.exports = __webpack_public_path__ + \"static/media/it-IT.a6a629cf.md\";","module.exports = __webpack_public_path__ + \"static/media/ja-JP.86aad40a.md\";","module.exports = __webpack_public_path__ + \"static/media/km-KH.a0fd6dd2.md\";","module.exports = __webpack_public_path__ + \"static/media/ko-KR.e9bb78fe.md\";","module.exports = __webpack_public_path__ + \"static/media/me-ME.f9d4feb7.md\";","module.exports = __webpack_public_path__ + \"static/media/mk-MK.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/ne-NP.065e841a.md\";","module.exports = __webpack_public_path__ + \"static/media/nl-NL.9990ba33.md\";","module.exports = __webpack_public_path__ + \"static/media/no-NO.3ed1d5ab.md\";","module.exports = __webpack_public_path__ + \"static/media/pl-PL.047f06ac.md\";","module.exports = __webpack_public_path__ + \"static/media/pt-BR.d6925231.md\";","module.exports = __webpack_public_path__ + \"static/media/pt-PT.d851afdc.md\";","module.exports = __webpack_public_path__ + \"static/media/pt-TL.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/ro-RO.b3115e65.md\";","module.exports = __webpack_public_path__ + \"static/media/ru-MD.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/ru-RU.d040b68b.md\";","module.exports = __webpack_public_path__ + \"static/media/sh-HR.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/si-LK.d3ff7d0d.md\";","module.exports = __webpack_public_path__ + \"static/media/sk-SK.2fc05b29.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-CS.a203597c.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-ME.f9d4feb7.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-RS.a203597c.md\";","module.exports = __webpack_public_path__ + \"static/media/sr-SP.67db4f39.md\";","module.exports = __webpack_public_path__ + \"static/media/sv-SE.605b171b.md\";","module.exports = __webpack_public_path__ + \"static/media/th-TH.7fe7a7ea.md\";","module.exports = __webpack_public_path__ + \"static/media/tr-TR.23e7aeec.md\";","module.exports = __webpack_public_path__ + \"static/media/tu-TI.b293d647.md\";","module.exports = __webpack_public_path__ + \"static/media/uk-UA.404b1251.md\";","module.exports = __webpack_public_path__ + \"static/media/ur-PK.27432783.md\";","module.exports = __webpack_public_path__ + \"static/media/vi-VN.6b2f35a4.md\";","module.exports = __webpack_public_path__ + \"static/media/zh-CN.5d5d82ce.md\";","module.exports = __webpack_public_path__ + \"static/media/zu-ZA.cfbec006.md\";","import { trackEvent } from '@redux-beacon/google-analytics-gtag';\r\nimport { isCordova, cvaTrackEvent } from '../../cordova-util';\r\n\r\nimport {\r\n  IMPORT_BOARDS,\r\n  CREATE_BOARD,\r\n  CHANGE_BOARD,\r\n  CREATE_TILE,\r\n  DELETE_TILES,\r\n  EDIT_TILES,\r\n  CLICK_SYMBOL,\r\n  CLICK_OUTPUT\r\n} from './Board.constants';\r\n\r\nconst getTiles = (boards, boardId, tilesId) => {\r\n  const board = boards.find(board => board.id === boardId);\r\n\r\n  const tiles = board.tiles\r\n    .filter(tile => tilesId.includes(tile.id))\r\n    .reduce((acc, tile) => (acc ? `${acc}, ${tile.label}` : tile.label), '');\r\n  return tiles;\r\n};\r\n\r\nconst importBoards = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Backup',\r\n    action: 'Import Boards'\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst changeBoard = trackEvent((action, prevState, nextState) => {\r\n  const board = nextState.board.boards.find(\r\n    board => board.id === action.boardId\r\n  );\r\n  let boardName = 'root';\r\n  if (typeof board !== 'undefined') {\r\n    boardName = board.nameKey || board.name || board.id;\r\n  }\r\n  const gaEvent = {\r\n    category: 'Navigation',\r\n    action: 'Change Board',\r\n    label: boardName\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst createBoard = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Editing',\r\n    action: 'Create Board',\r\n    label: action.boardName\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst createTile = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Editing',\r\n    action: 'Create Tile',\r\n    label: action.tile.label\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst deleteTiles = trackEvent((action, prevState, nextState) => {\r\n  const deletedTiles = getTiles(\r\n    prevState.board.boards,\r\n    action.boardId,\r\n    action.tiles\r\n  );\r\n  const gaEvent = {\r\n    category: 'Editing',\r\n    action: 'Delete Tiles',\r\n    label: deletedTiles\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst editTiles = trackEvent((action, prevState, nextState) => {\r\n  const editedTiles = action.tiles.reduce(\r\n    (acc, tile) => (acc ? `${acc}, ${tile.label}` : tile.label),\r\n    ''\r\n  );\r\n  const gaEvent = {\r\n    category: 'Editing',\r\n    action: 'Edit Tiles',\r\n    label: editedTiles\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst clickSymbol = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Navigation',\r\n    action: 'Click Symbol',\r\n    label: action.symbolLabel\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst clickOutput = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Speech',\r\n    action: 'Click Output',\r\n    label: action.outputPhrase\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst eventsMap = {\r\n  [IMPORT_BOARDS]: importBoards,\r\n  [CREATE_BOARD]: createBoard,\r\n  [CHANGE_BOARD]: changeBoard,\r\n  [CREATE_TILE]: createTile,\r\n  [DELETE_TILES]: deleteTiles,\r\n  [EDIT_TILES]: editTiles,\r\n  [CLICK_SYMBOL]: clickSymbol,\r\n  [CLICK_OUTPUT]: clickOutput\r\n};\r\n\r\nexport default eventsMap;\r\n","import { trackEvent } from '@redux-beacon/google-analytics-gtag';\r\n\r\nimport {\r\n  CHANGE_VOICE,\r\n  CHANGE_PITCH,\r\n  CHANGE_RATE,\r\n  START_SPEECH,\r\n  EMPTY_VOICES\r\n} from './SpeechProvider.constants';\r\nimport { isCordova, cvaTrackEvent } from '../../cordova-util';\r\n\r\nconst changeVoice = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Speech',\r\n    action: 'Changed Voice',\r\n    label: action ? action.voiceURI : EMPTY_VOICES\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst changePitch = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Speech',\r\n    action: 'Changed Pitch',\r\n    label: action.pitch\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst changeRate = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Speech',\r\n    action: 'Changed Rate',\r\n    label: action.rate\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst startSpeech = trackEvent((action, prevState, nextState) => {\r\n  const gaEvent = {\r\n    category: 'Speech',\r\n    action: 'Start Speech',\r\n    label: action.text\r\n  };\r\n  if (isCordova()) {\r\n    cvaTrackEvent(gaEvent.category, gaEvent.action, gaEvent.label);\r\n  }\r\n  return gaEvent;\r\n});\r\n\r\nconst eventsMap = {\r\n  [CHANGE_VOICE]: changeVoice,\r\n  [CHANGE_PITCH]: changePitch,\r\n  [CHANGE_RATE]: changeRate,\r\n  [START_SPEECH]: startSpeech\r\n};\r\n\r\nexport default eventsMap;\r\n","import { createMiddleware } from 'redux-beacon';\r\nimport GoogleAnalyticsGtag from '@redux-beacon/google-analytics-gtag';\r\nimport offlineWeb from '@redux-beacon/offline-web';\r\n// import logger from '@redux-beacon/logger';\r\n\r\nimport boardEventsMap from './components/Board/Board.analytics';\r\nimport speechEventsMap from './providers/SpeechProvider/SpeechProvider.analytics';\r\n\r\nconst isConnected = state => state.app.isConnected;\r\nconst offlineStorage = offlineWeb(isConnected);\r\n\r\nconst eventsMap = {\r\n  ...boardEventsMap,\r\n  ...speechEventsMap\r\n};\r\n\r\nconst trackingId = 'UA-108091601-1';\r\nconst ga = GoogleAnalyticsGtag(trackingId);\r\n\r\nconst gaMiddleware = createMiddleware(eventsMap, ga, {\r\n  offlineStorage\r\n});\r\n\r\nexport default gaMiddleware;\r\n","import {\r\n  FINISH_FIRST_VISIT,\r\n  UPDATE_CONNECTIVITY,\r\n  UPDATE_DISPLAY_SETTINGS,\r\n  UPDATE_NAVIGATION_SETTINGS,\r\n  UPDATE_USER_DATA,\r\n  DISABLE_TOUR,\r\n  ENABLE_ALL_TOURS\r\n} from './App.constants';\r\nimport { LOGIN_SUCCESS, LOGOUT } from '../Account/Login/Login.constants';\r\nimport {\r\n  DISPLAY_SIZE_STANDARD,\r\n  LABEL_POSITION_BELOW\r\n} from '../Settings/Display/Display.constants';\r\n\r\nconst initialState = {\r\n  isConnected: true,\r\n  isFirstVisit: true,\r\n  liveHelp: {\r\n    isRootBoardTourEnabled: true,\r\n    isUnlockedTourEnabled: true,\r\n    isSettingsTourEnabled: true,\r\n    communicatorTour: {\r\n      isCommBoardsEnabled: true,\r\n      isPublicBoardsEnabled: true,\r\n      isAllMyBoardsEnabled: true\r\n    },\r\n    isAnalyticsTourEnabled: true\r\n  },\r\n  displaySettings: {\r\n    uiSize: DISPLAY_SIZE_STANDARD,\r\n    fontSize: DISPLAY_SIZE_STANDARD,\r\n    hideOutputActive: false,\r\n    labelPosition: LABEL_POSITION_BELOW,\r\n    darkThemeActive: false\r\n  },\r\n  navigationSettings: {\r\n    active: false,\r\n    shareShowActive: false,\r\n    caBackButtonActive: false,\r\n    quickUnlockActive: false,\r\n    removeOutputActive: false,\r\n    vocalizeFolders: false\r\n  },\r\n  userData: {}\r\n};\r\n\r\nfunction appReducer(state = initialState, action) {\r\n  let displaySettings = { ...state.displaySettings };\r\n  let navigationSettings = { ...state.navigationSettings };\r\n\r\n  switch (action.type) {\r\n    case UPDATE_DISPLAY_SETTINGS:\r\n      displaySettings = { ...state.displaySettings, ...action.payload };\r\n      return {\r\n        ...state,\r\n        displaySettings\r\n      };\r\n    case UPDATE_NAVIGATION_SETTINGS:\r\n      navigationSettings = {\r\n        ...state.navigationSettings,\r\n        ...action.payload\r\n      };\r\n      return {\r\n        ...state,\r\n        navigationSettings\r\n      };\r\n    case UPDATE_CONNECTIVITY:\r\n      return {\r\n        ...state,\r\n        isConnected: action.payload\r\n      };\r\n    case FINISH_FIRST_VISIT:\r\n      return {\r\n        ...state,\r\n        isFirstVisit: false\r\n      };\r\n    case DISABLE_TOUR:\r\n      return {\r\n        ...state,\r\n        liveHelp: {\r\n          ...state.liveHelp,\r\n          ...action.payload\r\n        }\r\n      };\r\n    case ENABLE_ALL_TOURS:\r\n      return {\r\n        ...state,\r\n        liveHelp: {\r\n          isRootBoardTourEnabled: true,\r\n          isUnlockedTourEnabled: true,\r\n          isSettingsTourEnabled: true,\r\n          communicatorTour: {\r\n            isCommBoardsEnabled: true,\r\n            isPublicBoardsEnabled: true,\r\n            isAllMyBoardsEnabled: true\r\n          },\r\n          isAnalyticsTourEnabled: true\r\n        }\r\n      };\r\n\r\n    case LOGIN_SUCCESS:\r\n      const settings = action.payload.settings || {};\r\n      const { display, navigation } = settings;\r\n\r\n      displaySettings = { ...state.displaySettings };\r\n      navigationSettings = { ...state.navigationSettings };\r\n\r\n      if (display) {\r\n        displaySettings = { ...displaySettings, ...display };\r\n      }\r\n\r\n      if (navigation) {\r\n        navigationSettings = { ...navigationSettings, ...navigation };\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        isFirstVisit: false,\r\n        displaySettings,\r\n        navigationSettings,\r\n        userData: action.payload || {}\r\n      };\r\n    case LOGOUT:\r\n      return {\r\n        ...state,\r\n        userData: {}\r\n      };\r\n    case UPDATE_USER_DATA:\r\n      return {\r\n        ...state,\r\n        userData: action.userData\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default appReducer;\r\n","import { CHANGE_LANG, SET_LANGS } from './LanguageProvider.constants';\r\nimport { LOGIN_SUCCESS } from '../../components/Account/Login/Login.constants';\r\nimport { DEFAULT_LANG } from '../../components/App/App.constants';\r\n\r\nfunction getDir(lang) {\r\n  const locale = lang.slice(0, 2);\r\n  return locale === 'ar' || locale === 'he' ? 'rtl' : 'ltr';\r\n}\r\n\r\nconst initialState = {\r\n  lang: DEFAULT_LANG,\r\n  dir: 'ltr',\r\n  langs: [],\r\n  localLangs: []\r\n};\r\n\r\nfunction languageProviderReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      const settings = action.payload.settings || {};\r\n      const { language } = settings;\r\n\r\n      const lang =\r\n        language && language.lang && state.langs.indexOf(language.lang) >= 0\r\n          ? language.lang\r\n          : state.lang;\r\n      return {\r\n        ...state,\r\n        lang,\r\n        dir: getDir(lang)\r\n      };\r\n    case CHANGE_LANG:\r\n      return {\r\n        ...state,\r\n        lang: action.lang ? action.lang : state.lang,\r\n        dir: action.lang ? getDir(action.lang) : state.dir\r\n      };\r\n    case SET_LANGS:\r\n      return {\r\n        ...state,\r\n        langs: action.langs.sort(),\r\n        localLangs: action.localLangs || []\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default languageProviderReducer;\r\n","import {\r\n  ACTIVATE_SCANNER,\r\n  TOGGLE_SCANNER,\r\n  DEACTIVATE_SCANNER,\r\n  UPDATE_SCANNER_SETTINGS\r\n} from './ScannerProvider.constants';\r\nimport { SCANNING_METHOD_AUTOMATIC } from '../../components/Settings/Scanning/Scanning.constants';\r\nimport { LOGIN_SUCCESS } from '../../components/Account/Login/Login.constants';\r\n\r\nconst initialState = {\r\n  active: false,\r\n  delay: 2000,\r\n  strategy: SCANNING_METHOD_AUTOMATIC\r\n};\r\n\r\nfunction scannerProviderReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      const settings = action.payload.settings || {};\r\n      const { scanning } = settings || {};\r\n\r\n      const active = scanning && scanning.active ? scanning.active : state.active;\r\n      const delay = scanning && scanning.delay ? scanning.delay : state.delay;\r\n      const strategy = scanning && scanning.strategy ? scanning.strategy : state.strategy;\r\n\r\n      return {\r\n        ...state,\r\n        active,\r\n        delay,\r\n        strategy\r\n      };\r\n    case ACTIVATE_SCANNER:\r\n      return {\r\n        ...state,\r\n        active: true\r\n      };\r\n    case DEACTIVATE_SCANNER:\r\n      return {\r\n        ...state,\r\n        active: false\r\n      };\r\n    case TOGGLE_SCANNER:\r\n      return {\r\n        ...state,\r\n        active: !state.active\r\n      };\r\n    case UPDATE_SCANNER_SETTINGS:\r\n      return {\r\n        ...state,\r\n        ...action.payload\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default scannerProviderReducer;\r\n","import {\r\n  RECEIVE_VOICES,\r\n  CHANGE_VOICE,\r\n  CHANGE_PITCH,\r\n  CHANGE_RATE,\r\n  CHANGE_VOLUME,\r\n  START_SPEECH,\r\n  END_SPEECH,\r\n  CANCEL_SPEECH,\r\n  EMPTY_VOICES,\r\n  RECEIVE_TTS_ENGINES,\r\n  RECEIVE_TTS_DEFAULT_ENGINE,\r\n  RECEIVE_TTS_ENGINE\r\n} from './SpeechProvider.constants';\r\nimport {\r\n  getVoiceURI,\r\n  normalizeLanguageCode,\r\n  standardizeLanguageCode\r\n} from '../../i18n';\r\nimport { CHANGE_LANG } from '../LanguageProvider/LanguageProvider.constants';\r\nimport { LOGIN_SUCCESS } from '../../components/Account/Login/Login.constants';\r\nimport { DEFAULT_LANG } from '../../components/App/App.constants';\r\n\r\nconst initialState = {\r\n  voices: [],\r\n  ttsEngines: [],\r\n  ttsDefaultEngine: {},\r\n  ttsEngine: {},\r\n  langs: [],\r\n  options: {\r\n    lang: '',\r\n    voiceURI: null,\r\n    pitch: 1.0,\r\n    rate: 1.0,\r\n    volume: 1\r\n  },\r\n  isSpeaking: false\r\n};\r\n\r\nfunction speechProviderReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      const settings = action.payload.settings || {};\r\n      const { speech } = settings || {};\r\n\r\n      const pitch = speech && speech.pitch ? speech.pitch : state.options.pitch;\r\n      const rate = speech && speech.rate ? speech.rate : state.options.rate;\r\n\r\n      const options = { ...state.options, pitch, rate };\r\n\r\n      return {\r\n        ...state,\r\n        options\r\n      };\r\n    case RECEIVE_VOICES:\r\n      const langs = action.voices.map(voice =>\r\n        normalizeLanguageCode(standardizeLanguageCode(voice.lang))\r\n      );\r\n      //hack just for Alfanum Serbian voices\r\n      //https://github.com/cboard-org/cboard/issues/715\r\n      if (langs.includes('sr-RS')) {\r\n        langs.push('sr-SP');\r\n      }\r\n      //hack just for Tetum language\r\n      //https://github.com/cboard-org/cboard/issues/848\r\n      if (langs.includes('pt-BR') || langs.includes('pt-PT')) {\r\n        langs.push('pt-TL');\r\n      }\r\n      return {\r\n        ...state,\r\n        voices: action.voices,\r\n        langs: [...new Set(langs)].sort()\r\n      };\r\n    case CHANGE_VOICE:\r\n      return {\r\n        ...state,\r\n        options: {\r\n          ...state.options,\r\n          voiceURI: action ? action.voiceURI : EMPTY_VOICES,\r\n          lang: action ? action.lang : DEFAULT_LANG\r\n        }\r\n      };\r\n    case RECEIVE_TTS_ENGINES:\r\n      return {\r\n        ...state,\r\n        ttsEngines: action.ttsEngines\r\n      };\r\n    case RECEIVE_TTS_DEFAULT_ENGINE:\r\n      return {\r\n        ...state,\r\n        ttsDefaultEngine: action.ttsDefaultEngine,\r\n        ttsEngine: state.ttsEngine ? state.ttsEngine : action.ttsDefaultEngine\r\n      };\r\n    case RECEIVE_TTS_ENGINE:\r\n      const newTtsEngine = state.ttsEngines.find(\r\n        engine => engine.name === action.ttsEngineName\r\n      );\r\n      return {\r\n        ...state,\r\n        ttsEngine: newTtsEngine ? newTtsEngine : state.ttsEngine\r\n      };\r\n    case CHANGE_LANG:\r\n      //hack just for Alfanum Serbian voices\r\n      //https://github.com/cboard-org/cboard/issues/715\r\n      if (action.lang === 'sr-SP' || action.lang === 'sr-RS') {\r\n        const language = 'sr-RS';\r\n        return {\r\n          ...state,\r\n          options: {\r\n            ...state.options,\r\n            voiceURI:\r\n              state.options.lang !== language\r\n                ? getVoiceURI(language, state.voices)\r\n                : state.options.voiceURI,\r\n            lang: language\r\n          },\r\n          langs: ['sr-SP', 'sr-RS']\r\n        };\r\n      } else {\r\n        return {\r\n          ...state,\r\n          options: {\r\n            ...state.options,\r\n            voiceURI:\r\n              state.options.lang.substring(0, 2) !== action.lang.substring(0, 2)\r\n                ? getVoiceURI(action.lang, state.voices)\r\n                : state.options.voiceURI,\r\n            lang:\r\n              state.options.lang.substring(0, 2) !== action.lang.substring(0, 2)\r\n                ? action.lang\r\n                : state.options.lang\r\n          }\r\n        };\r\n      }\r\n    case CHANGE_PITCH:\r\n      return { ...state, options: { ...state.options, pitch: action.pitch } };\r\n    case CHANGE_RATE:\r\n      return { ...state, options: { ...state.options, rate: action.rate } };\r\n    case CHANGE_VOLUME:\r\n      return { ...state, options: { ...state.options, volume: action.volume } };\r\n    case START_SPEECH:\r\n      return { ...state, isSpeaking: action.isSpeaking };\r\n    case END_SPEECH:\r\n      return { ...state, isSpeaking: action.isSpeaking };\r\n    case CANCEL_SPEECH:\r\n      return { ...state, isSpeaking: action.isSpeaking };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default speechProviderReducer;\r\n","import moment from 'moment';\r\n\r\nimport defaultBoards from '../../api/boards.json';\r\n\r\nimport {\r\n  IMPORT_BOARDS,\r\n  ADD_BOARDS,\r\n  CHANGE_BOARD,\r\n  SWITCH_BOARD,\r\n  PREVIOUS_BOARD,\r\n  TO_ROOT_BOARD,\r\n  CREATE_BOARD,\r\n  UPDATE_BOARD,\r\n  DELETE_BOARD,\r\n  CREATE_TILE,\r\n  DELETE_TILES,\r\n  EDIT_TILES,\r\n  FOCUS_TILE,\r\n  CHANGE_OUTPUT,\r\n  REPLACE_BOARD,\r\n  HISTORY_REMOVE_BOARD,\r\n  UNMARK_BOARD,\r\n  CREATE_API_BOARD_SUCCESS,\r\n  CREATE_API_BOARD_FAILURE,\r\n  CREATE_API_BOARD_STARTED,\r\n  UPDATE_API_BOARD_SUCCESS,\r\n  UPDATE_API_BOARD_FAILURE,\r\n  UPDATE_API_BOARD_STARTED,\r\n  DELETE_API_BOARD_SUCCESS,\r\n  DELETE_API_BOARD_FAILURE,\r\n  DELETE_API_BOARD_STARTED,\r\n  GET_API_MY_BOARDS_SUCCESS,\r\n  GET_API_MY_BOARDS_FAILURE,\r\n  GET_API_MY_BOARDS_STARTED,\r\n  DOWNLOAD_IMAGES_STARTED,\r\n  DOWNLOAD_IMAGE_SUCCESS,\r\n  DOWNLOAD_IMAGE_FAILURE\r\n} from './Board.constants';\r\nimport { LOGOUT, LOGIN_SUCCESS } from '../Account/Login/Login.constants';\r\n\r\nconst [...boards] = defaultBoards.advanced;\r\nconst initialState = {\r\n  boards,\r\n  output: [],\r\n  activeBoardId: null,\r\n  navHistory: [],\r\n  isFetching: false,\r\n  images: [],\r\n  isFixed: false\r\n};\r\n\r\nfunction reconcileBoards(localBoard, remoteBoard) {\r\n  if (localBoard.lastEdited && remoteBoard.lastEdited) {\r\n    if (moment(localBoard.lastEdited).isSameOrAfter(remoteBoard.lastEdited)) {\r\n      return localBoard;\r\n    }\r\n    if (moment(localBoard.lastEdited).isBefore(remoteBoard.lastEdited)) {\r\n      return remoteBoard;\r\n    }\r\n  }\r\n  return localBoard;\r\n}\r\n\r\nfunction tileReducer(board, action) {\r\n  switch (action.type) {\r\n    case CREATE_TILE:\r\n      return {\r\n        ...board,\r\n        tiles: [...board.tiles, { ...action.tile }]\r\n      };\r\n    case DELETE_TILES:\r\n      return {\r\n        ...board,\r\n        tiles: board.tiles.filter(tile => action.tiles.indexOf(tile.id) === -1)\r\n      };\r\n    case EDIT_TILES:\r\n      return {\r\n        ...board,\r\n        tiles: board.tiles.map(\r\n          tile => action.tiles.find(s => s.id === tile.id) || tile\r\n        )\r\n      };\r\n    default:\r\n      return board;\r\n  }\r\n}\r\n\r\nfunction boardReducer(state = initialState, action) {\r\n  //fix to prevent for null board\r\n  state.boards = state.boards.filter(board => board !== null);\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      let activeBoardId = state.activeBoardId;\r\n      const userCommunicators = action.payload.communicators || [];\r\n      const activeCommunicator = userCommunicators.length\r\n        ? userCommunicators[userCommunicators.length - 1]\r\n        : null;\r\n\r\n      if (activeCommunicator) {\r\n        activeBoardId =\r\n          activeCommunicator.rootBoard || initialState.activeBoardId;\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        activeBoardId,\r\n        navHistory: [activeBoardId]\r\n      };\r\n\r\n    case LOGOUT:\r\n      return initialState;\r\n\r\n    case IMPORT_BOARDS:\r\n      return {\r\n        ...state,\r\n        boards: action.boards\r\n      };\r\n    case ADD_BOARDS:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.concat(action.boards)\r\n      };\r\n    case CHANGE_BOARD:\r\n      const taBoards = [...state.boards];\r\n      const taBoard = taBoards.find(item => item.id === action.boardId);\r\n      if (!taBoard) {\r\n        return { ...state };\r\n      }\r\n      const fixed = taBoard.isFixed || false;\r\n      return {\r\n        ...state,\r\n        navHistory: Array.from(new Set([...state.navHistory, action.boardId])),\r\n        activeBoardId: action.boardId,\r\n        isFixed: fixed\r\n      };\r\n    case UPDATE_BOARD:\r\n      const updateBoards = [...state.boards];\r\n      const oldBoard = updateBoards.find(\r\n        item => item.id === action.boardData.id\r\n      );\r\n      const index = updateBoards.indexOf(oldBoard);\r\n      if (index !== -1) {\r\n        const nextBoard = {\r\n          ...action.boardData,\r\n          lastEdited: moment().format()\r\n        };\r\n        updateBoards.splice(index, 1, nextBoard);\r\n        return {\r\n          ...state,\r\n          boards: updateBoards\r\n        };\r\n      }\r\n      return {\r\n        ...state\r\n      };\r\n\r\n    case REPLACE_BOARD:\r\n      const nH = [...state.navHistory];\r\n      const { prev, current } = action.payload;\r\n      let boards = [...state.boards];\r\n\r\n      if (prev.id !== current.id) {\r\n        const boardIndex = boards.findIndex(b => b.id === prev.id);\r\n        if (boardIndex >= 0) {\r\n          boards[boardIndex] = current;\r\n        }\r\n        const nhIndex = nH.findIndex(bId => bId === prev.id);\r\n        if (nhIndex >= 0) {\r\n          nH[nhIndex] = current.id;\r\n        }\r\n      } else {\r\n        const boardIndex = boards.findIndex(b => b.id === current.id);\r\n        if (boardIndex >= 0) {\r\n          boards[boardIndex] = current;\r\n        }\r\n      }\r\n\r\n      return {\r\n        ...state,\r\n        boards,\r\n        navHistory: nH,\r\n        activeBoardId:\r\n          state.activeBoardId === prev.id ? current.id : state.activeBoardId\r\n      };\r\n\r\n    case SWITCH_BOARD:\r\n      return {\r\n        ...state,\r\n        navHistory: [action.boardId],\r\n        activeBoardId: action.boardId\r\n      };\r\n    case PREVIOUS_BOARD:\r\n      const [...navHistory] = state.navHistory;\r\n      if (navHistory.length === 1) {\r\n        return state;\r\n      }\r\n      navHistory.pop();\r\n      return {\r\n        ...state,\r\n        navHistory,\r\n        activeBoardId: navHistory[navHistory.length - 1]\r\n      };\r\n    case TO_ROOT_BOARD:\r\n      const [...navigationHistory] = state.navHistory;\r\n      if (navigationHistory.length <= 1) {\r\n        return state;\r\n      }\r\n      return {\r\n        ...state,\r\n        navHistory: [navigationHistory[0]],\r\n        activeBoardId: navigationHistory[0]\r\n      };\r\n    case HISTORY_REMOVE_BOARD:\r\n      const dnavHistory = [...state.navHistory];\r\n      if (dnavHistory.length < 2) {\r\n        return state;\r\n      }\r\n      for (var i = 0; i < dnavHistory.length; i++) {\r\n        if (dnavHistory[i] === action.removedBoardId) {\r\n          dnavHistory.splice(i, 1);\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        navHistory: dnavHistory\r\n      };\r\n    case CREATE_BOARD:\r\n      const nextBoards = [...state.boards];\r\n      nextBoards.push({\r\n        ...action.boardData,\r\n        lastEdited: moment().format()\r\n      });\r\n      return {\r\n        ...state,\r\n        boards: nextBoards\r\n      };\r\n    case DELETE_BOARD:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.filter(\r\n          board => action.boardId.indexOf(board.id) === -1\r\n        )\r\n      };\r\n\r\n    case CREATE_TILE:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.map(board =>\r\n          board.id !== action.boardId ? board : tileReducer(board, action)\r\n        )\r\n      };\r\n    case DELETE_TILES:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.map(board =>\r\n          board.id !== action.boardId ? board : tileReducer(board, action)\r\n        )\r\n      };\r\n    case EDIT_TILES:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.map(board =>\r\n          board.id !== action.boardId ? board : tileReducer(board, action)\r\n        )\r\n      };\r\n    case FOCUS_TILE:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.map(board =>\r\n          board.id !== action.boardId\r\n            ? board\r\n            : { ...board, focusedTileId: action.tileId }\r\n        )\r\n      };\r\n    case UNMARK_BOARD:\r\n      return {\r\n        ...state,\r\n        boards: state.boards.map(board =>\r\n          board.id !== action.boardId\r\n            ? board\r\n            : { ...board, markToUpdate: false }\r\n        )\r\n      };\r\n    case CHANGE_OUTPUT:\r\n      return {\r\n        ...state,\r\n        output: [...action.output]\r\n      };\r\n    case CREATE_API_BOARD_SUCCESS:\r\n      const creadBoards = [...state.boards];\r\n      for (let i = 0; i < creadBoards.length; i++) {\r\n        let tiles = creadBoards[i].tiles;\r\n        for (let j = 0; j < tiles.length; j++) {\r\n          if (tiles[j] != null && tiles[j].loadBoard === action.boardId) {\r\n            tiles[j].loadBoard = action.board.id;\r\n            if (\r\n              !creadBoards[i].isPublic &&\r\n              creadBoards[i].id.length > 14 &&\r\n              creadBoards[i].hasOwnProperty('email')\r\n            ) {\r\n              creadBoards[i].markToUpdate = true;\r\n            }\r\n          }\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        boards: creadBoards.map(board =>\r\n          board.id === action.boardId\r\n            ? { ...board, id: action.board.id }\r\n            : board\r\n        )\r\n      };\r\n    case CREATE_API_BOARD_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case CREATE_API_BOARD_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case UPDATE_API_BOARD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case UPDATE_API_BOARD_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case UPDATE_API_BOARD_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case GET_API_MY_BOARDS_SUCCESS:\r\n      let flag = false;\r\n      const myBoards = [...state.boards];\r\n      for (let i = 0; i < action.boards.data.length; i++) {\r\n        for (let j = 0; j < myBoards.length; j++) {\r\n          if (myBoards[j].id === action.boards.data[i].id) {\r\n            myBoards[j] = reconcileBoards(myBoards[j], action.boards.data[i]);\r\n            flag = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!flag) {\r\n          myBoards.push(action.boards.data[i]);\r\n        }\r\n        flag = false;\r\n      }\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        boards: myBoards\r\n      };\r\n    case GET_API_MY_BOARDS_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case GET_API_MY_BOARDS_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case DELETE_API_BOARD_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        boards: state.boards.filter(board => board.id !== action.board.id)\r\n      };\r\n    case DELETE_API_BOARD_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case DELETE_API_BOARD_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case DOWNLOAD_IMAGES_STARTED:\r\n      if (!Array.isArray(state.images)) {\r\n        return {\r\n          ...state,\r\n          images: []\r\n        };\r\n      }\r\n      return state;\r\n    case DOWNLOAD_IMAGE_SUCCESS:\r\n      const imgs = [...state.images];\r\n      imgs.push(action.element);\r\n      return {\r\n        ...state,\r\n        images: imgs\r\n      };\r\n    case DOWNLOAD_IMAGE_FAILURE:\r\n      return {\r\n        ...state\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default boardReducer;\r\n","import defaultCommunicators from '../../api/communicators.json';\r\n\r\nimport {\r\n  IMPORT_COMMUNICATOR,\r\n  CREATE_COMMUNICATOR,\r\n  EDIT_COMMUNICATOR,\r\n  DELETE_COMMUNICATOR,\r\n  CHANGE_COMMUNICATOR,\r\n  ADD_BOARD_COMMUNICATOR,\r\n  DELETE_BOARD_COMMUNICATOR,\r\n  REPLACE_BOARD_COMMUNICATOR,\r\n  CREATE_API_COMMUNICATOR_SUCCESS,\r\n  CREATE_API_COMMUNICATOR_FAILURE,\r\n  CREATE_API_COMMUNICATOR_STARTED,\r\n  UPDATE_API_COMMUNICATOR_SUCCESS,\r\n  UPDATE_API_COMMUNICATOR_FAILURE,\r\n  UPDATE_API_COMMUNICATOR_STARTED,\r\n  GET_API_MY_COMMUNICATORS_SUCCESS,\r\n  GET_API_MY_COMMUNICATORS_FAILURE,\r\n  GET_API_MY_COMMUNICATORS_STARTED\r\n} from './Communicator.constants';\r\nimport { LOGIN_SUCCESS, LOGOUT } from '../Account/Login/Login.constants';\r\n\r\nconst defaultCommunicatorID = 'cboard_default';\r\nconst initialState = {\r\n  communicators: defaultCommunicators,\r\n  activeCommunicatorId: defaultCommunicatorID\r\n};\r\n\r\nfunction communicatorReducer(state = initialState, action) {\r\n  const activeCommunicator = state.communicators.find(\r\n    communicator => communicator.id === state.activeCommunicatorId\r\n  );\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n      const userCommunicators = action.payload.communicators || [];\r\n      const activeCommunicatorId = userCommunicators.length\r\n        ? userCommunicators[userCommunicators.length - 1].id\r\n        : state.activeCommunicatorId;\r\n      return {\r\n        ...state,\r\n        activeCommunicatorId,\r\n        communicators: state.communicators.concat(userCommunicators)\r\n      };\r\n\r\n    case LOGOUT:\r\n      return initialState;\r\n\r\n    case IMPORT_COMMUNICATOR:\r\n      return {\r\n        ...state,\r\n        communicators: state.communicators.concat(action.payload)\r\n      };\r\n\r\n    case CREATE_COMMUNICATOR:\r\n      return {\r\n        ...state,\r\n        communicators: state.communicators.concat(action.payload)\r\n      };\r\n\r\n    case EDIT_COMMUNICATOR:\r\n      const communicatorIndex = state.communicators.findIndex(\r\n        c => c.id === action.payload.id\r\n      );\r\n      let newState = { ...state };\r\n\r\n      if (communicatorIndex >= 0) {\r\n        newState.communicators[communicatorIndex] = action.payload;\r\n      }\r\n\r\n      return newState;\r\n\r\n    case DELETE_COMMUNICATOR:\r\n      return {\r\n        ...state,\r\n        communicators: state.communicators.filter(\r\n          ({ id }) => id !== action.payload\r\n        )\r\n      };\r\n\r\n    case CHANGE_COMMUNICATOR:\r\n      return {\r\n        ...state,\r\n        activeCommunicatorId: state.communicators.find(\r\n          ({ id }) => id === action.payload\r\n        )\r\n          ? action.payload\r\n          : state.activeCommunicatorId\r\n      };\r\n\r\n    case ADD_BOARD_COMMUNICATOR:\r\n      if (activeCommunicator) {\r\n        const index = state.communicators.indexOf(activeCommunicator);\r\n        if (index !== -1) {\r\n          const updatedCommunicators = [...state.communicators];\r\n          updatedCommunicators[index].boards.push(action.boardId);\r\n          return {\r\n            ...state,\r\n            communicators: updatedCommunicators\r\n          };\r\n        }\r\n      }\r\n      return { ...state };\r\n\r\n    case DELETE_BOARD_COMMUNICATOR:\r\n      if (activeCommunicator) {\r\n        const index = state.communicators.indexOf(activeCommunicator);\r\n        if (index !== -1) {\r\n          const dupdatedCommunicators = [...state.communicators];\r\n          const bindex = activeCommunicator.boards.indexOf(action.boardId);\r\n          if (bindex !== -1) {\r\n            dupdatedCommunicators[index].boards.splice(bindex, 1);\r\n            return {\r\n              ...state,\r\n              communicators: dupdatedCommunicators\r\n            };\r\n          }\r\n        }\r\n      }\r\n      return { ...state };\r\n\r\n    case REPLACE_BOARD_COMMUNICATOR:\r\n      if (activeCommunicator) {\r\n        const index = state.communicators.indexOf(activeCommunicator);\r\n        if (index !== -1) {\r\n          const updatedCommunicators = [...state.communicators];\r\n          const boardIndex = updatedCommunicators[index].boards.indexOf(\r\n            action.prevBoardId\r\n          );\r\n          if (boardIndex !== -1) {\r\n            updatedCommunicators[index].boards.splice(\r\n              boardIndex,\r\n              1,\r\n              action.nextBoardId\r\n            );\r\n            return {\r\n              ...state,\r\n              communicators: updatedCommunicators\r\n            };\r\n          }\r\n        }\r\n      }\r\n      return { ...state };\r\n\r\n    case CREATE_API_COMMUNICATOR_SUCCESS:\r\n      // need to check if it was the active communicator as well\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        activeCommunicatorId:\r\n          state.activeCommunicatorId === action.communicatorId\r\n            ? action.communicator.id\r\n            : state.activeCommunicatorId,\r\n        communicators: state.communicators.map(communicator =>\r\n          communicator.id === action.communicatorId\r\n            ? { ...communicator, id: action.communicator.id }\r\n            : communicator\r\n        )\r\n      };\r\n    case CREATE_API_COMMUNICATOR_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case CREATE_API_COMMUNICATOR_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case UPDATE_API_COMMUNICATOR_SUCCESS:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case UPDATE_API_COMMUNICATOR_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case UPDATE_API_COMMUNICATOR_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    case GET_API_MY_COMMUNICATORS_SUCCESS:\r\n      let flag = false;\r\n      const myCommunicators = [...state.communicators];\r\n      for (let i = 0; i < action.communicators.data.length; i++) {\r\n        for (let j = 0; j < myCommunicators.length; j++) {\r\n          if (myCommunicators[j].id === action.communicators.data[i].id) {\r\n            myCommunicators[j].boards = action.communicators.data[i].boards;\r\n            flag = true;\r\n            break;\r\n          }\r\n        }\r\n        if (!flag) {\r\n          myCommunicators.push(action.communicators.data[i]);\r\n          flag = false;\r\n        }\r\n      }\r\n      return {\r\n        ...state,\r\n        isFetching: false,\r\n        communicators: myCommunicators\r\n      };\r\n    case GET_API_MY_COMMUNICATORS_FAILURE:\r\n      return {\r\n        ...state,\r\n        isFetching: false\r\n      };\r\n    case GET_API_MY_COMMUNICATORS_STARTED:\r\n      return {\r\n        ...state,\r\n        isFetching: true\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default communicatorReducer;\r\n","import {\r\n  SHOW_NOTIFICATION,\r\n  HIDE_NOTIFICATION\r\n} from './Notifications.constants';\r\n\r\nconst initialState = { message: '', open: false , kind : undefined };\r\n\r\nfunction notificationsReducer(state = initialState, action) {\r\n  switch (action.type) {\r\n    case SHOW_NOTIFICATION:\r\n      return {\r\n        message: action.message,\r\n        open: action.open,\r\n        kind: action.kind\r\n      };\r\n    case HIDE_NOTIFICATION:\r\n      return {\r\n        message: '',\r\n        open: action.open\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default notificationsReducer;\r\n","import { createStore, applyMiddleware, compose } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { persistStore } from 'redux-persist';\r\nimport { UPDATE_CONNECTIVITY } from './components/App/App.constants';\r\nimport googleAnalytics from './analytics';\r\nimport createReducer from './reducers';\r\n\r\nlet store;\r\n\r\nexport default function configureStore(initialState = {}) {\r\n  const middlewares = [thunk, googleAnalytics];\r\n  const enhancers = [applyMiddleware(...middlewares)];\r\n\r\n  // If Redux DevTools Extension is installed use it, otherwise use Redux compose\r\n  /* eslint-disable no-underscore-dangle */\r\n  const composeEnhancers =\r\n    process.env.NODE_ENV !== 'production' &&\r\n    typeof window === 'object' &&\r\n    window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n      ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\r\n      : compose;\r\n\r\n  store = createStore(\r\n    createReducer(),\r\n    initialState,\r\n    composeEnhancers(...enhancers)\r\n  );\r\n\r\n  // TODO refactor not here\r\n  window.addEventListener('offline', () => {\r\n    store.dispatch({\r\n      type: UPDATE_CONNECTIVITY,\r\n      payload: false\r\n    });\r\n  });\r\n\r\n  window.addEventListener('online', () => {\r\n    store.dispatch({\r\n      type: UPDATE_CONNECTIVITY,\r\n      payload: true\r\n    });\r\n  });\r\n\r\n  const persistor = persistStore(store);\r\n\r\n  return { persistor, store };\r\n}\r\n\r\nexport const getStore = () => store;\r\n","import { persistCombineReducers } from 'redux-persist';\r\n\r\nimport appReducer from './components/App/App.reducer';\r\nimport languageProviderReducer from './providers/LanguageProvider/LanguageProvider.reducer';\r\nimport scannerProviderReducer from './providers/ScannerProvider/ScannerProvider.reducer';\r\nimport speechProviderReducer from './providers/SpeechProvider/SpeechProvider.reducer';\r\nimport boardReducer from './components/Board/Board.reducer';\r\nimport communicatorReducer from './components/Communicator/Communicator.reducer';\r\nimport notificationsReducer from './components/Notifications/Notifications.reducer';\r\nimport storage from 'redux-persist/lib/storage';\r\n\r\nconst config = {\r\n  key: 'root',\r\n  storage\r\n};\r\n\r\nexport default function createReducer() {\r\n  return persistCombineReducers(config, {\r\n    app: appReducer,\r\n    language: languageProviderReducer,\r\n    speech: speechProviderReducer,\r\n    board: boardReducer,\r\n    communicator: communicatorReducer,\r\n    scanner: scannerProviderReducer,\r\n    notification: notificationsReducer\r\n  });\r\n}\r\n","import * as azureSdk from 'microsoft-cognitiveservices-speech-sdk';\r\nimport { isAndroid, isCordova } from '../../cordova-util';\r\nimport API from '../../api';\r\nimport {\r\n  AZURE_SPEECH_SERVICE_REGION,\r\n  AZURE_SPEECH_SUBSCR_KEY\r\n} from '../../constants';\r\nimport { getStore } from '../../store';\r\n\r\n// this is the local synthesizer\r\nlet synth = window.speechSynthesis;\r\n\r\n// this is the cloud synthesizer\r\nvar azureSynthesizer;\r\n\r\nconst audioElement = new Audio();\r\nvar speakQueue = [];\r\nvar platformVoices = [];\r\n\r\nconst getStateVoices = () => {\r\n  const store = getStore();\r\n  const {\r\n    speech: { voices }\r\n  } = store.getState();\r\n  return voices;\r\n};\r\n\r\nconst getConnectionStatus = () => {\r\n  const store = getStore();\r\n  const {\r\n    app: { isConnected }\r\n  } = store.getState();\r\n  return isConnected;\r\n};\r\n\r\nconst initAzureSynthesizer = () => {\r\n  var azureSpeechConfig = azureSdk.SpeechConfig.fromSubscription(\r\n    AZURE_SPEECH_SUBSCR_KEY,\r\n    AZURE_SPEECH_SERVICE_REGION\r\n  );\r\n  var azureAudioConfig = null;\r\n  azureSynthesizer = new azureSdk.SpeechSynthesizer(\r\n    azureSpeechConfig,\r\n    azureAudioConfig\r\n  );\r\n};\r\n\r\nconst playQueue = () => {\r\n  if (speakQueue.length) {\r\n    const blob = new Blob([speakQueue[0].audioData], { type: 'audio/wav' });\r\n    audioElement.src = window.URL.createObjectURL(blob);\r\n    audioElement.play();\r\n    audioElement.onended = () => {\r\n      window.URL.revokeObjectURL(audioElement.src);\r\n      if (speakQueue.length) {\r\n        speakQueue[0].endCallback();\r\n        speakQueue.shift();\r\n        if (speakQueue.length) {\r\n          playQueue();\r\n        }\r\n      }\r\n    };\r\n  }\r\n};\r\n\r\ninitAzureSynthesizer();\r\n\r\nconst tts = {\r\n  isSupported() {\r\n    return 'speechSynthesis' in window;\r\n  },\r\n\r\n  getVoiceByVoiceURI(VoiceURI) {\r\n    const voices = getStateVoices();\r\n    return voices.find(voice => voice.voiceURI === VoiceURI);\r\n  },\r\n\r\n  isConnected() {\r\n    return getConnectionStatus();\r\n  },\r\n\r\n  getLocalVoiceByVoiceURI(VoiceURI) {\r\n    return platformVoices.find(voice => voice.voiceURI === VoiceURI);\r\n  },\r\n\r\n  // Get voices depending on platform (browser/cordova)\r\n  _getPlatformVoices() {\r\n    let voices = {};\r\n    try {\r\n      voices = synth.getVoices();\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      synth = window.speechSynthesis;\r\n    }\r\n    // On Cordova, voice results are under `._list`\r\n    return voices._list || voices;\r\n  },\r\n\r\n  async getVoices() {\r\n    let cloudVoices = [];\r\n    // first, request for cloud based voices\r\n    try {\r\n      cloudVoices = await API.getAzureVoices();\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n    return new Promise((resolve, reject) => {\r\n      platformVoices = this._getPlatformVoices() || [];\r\n      if (platformVoices.length) {\r\n        resolve(platformVoices.concat(cloudVoices));\r\n      }\r\n\r\n      // Android\r\n      if ('onvoiceschanged' in synth) {\r\n        synth.addEventListener('voiceschanged', function voiceslst() {\r\n          const voices = synth.getVoices();\r\n          if (!voices.length) {\r\n            return null;\r\n          } else {\r\n            synth.removeEventListener('voiceschanged', voiceslst);\r\n            // On Cordova, voice results are under `._list`\r\n            platformVoices = voices._list || voices;\r\n            resolve(platformVoices.concat(cloudVoices));\r\n          }\r\n        });\r\n      } else if (isCordova()) {\r\n        // Samsung devices on Cordova\r\n        platformVoices = this._getPlatformVoices();\r\n        resolve(platformVoices.concat(cloudVoices));\r\n      }\r\n    });\r\n  },\r\n\r\n  //Use setTTsEngine only in Android\r\n  setTtsEngine(ttsEngineName) {\r\n    if (!isAndroid()) {\r\n      return;\r\n    } else {\r\n      //define a race between two promises\r\n      const timeout = (prom, time) => {\r\n        let timer;\r\n        return Promise.race([\r\n          prom,\r\n          new Promise((_r, rej) => (timer = setTimeout(rej, time)))\r\n        ]).finally(() => clearTimeout(timer));\r\n      };\r\n      //promise when setting the TTS succeed\r\n      const ttsResponse = () => {\r\n        return new Promise((resolve, reject) => {\r\n          synth.setEngine(ttsEngineName, function(event) {\r\n            if (event.length) {\r\n              resolve(event);\r\n            }\r\n          });\r\n        });\r\n      };\r\n      // finishes before the timeout\r\n      return timeout(ttsResponse(), 4000);\r\n    }\r\n  },\r\n\r\n  //Use getTTsEngine only in Android\r\n  getTtsEngines() {\r\n    if (!isAndroid()) {\r\n      return [];\r\n    } else {\r\n      const ttsEngs = synth.getEngines();\r\n      return ttsEngs._list || [];\r\n    }\r\n  },\r\n  //Use getTTsDefaultEngine only in Android\r\n  getTtsDefaultEngine() {\r\n    if (!isAndroid()) {\r\n      return;\r\n    } else {\r\n      const ttsDefaultEng = synth.getDefaultEngine();\r\n      return ttsDefaultEng;\r\n    }\r\n  },\r\n\r\n  cancel() {\r\n    audioElement.pause();\r\n    speakQueue = [];\r\n    synth.cancel();\r\n  },\r\n\r\n  async speak(text, { voiceURI, pitch = 1, rate = 1, volume = 1, onend }) {\r\n    const voice = this.getVoiceByVoiceURI(voiceURI);\r\n    if (voice && voice.voiceSource === 'cloud') {\r\n      // set voice to speak\r\n      azureSynthesizer.properties.setProperty(\r\n        'SpeechServiceConnection_SynthVoice',\r\n        voiceURI\r\n      );\r\n      azureSynthesizer.speakTextAsync(\r\n        text,\r\n        function(result) {\r\n          result.endCallback = onend;\r\n          speakQueue.push(result);\r\n          if (\r\n            result.reason === azureSdk.ResultReason.SynthesizingAudioCompleted\r\n          ) {\r\n            // if not playing, play the queue\r\n            if (audioElement.paused) {\r\n              playQueue();\r\n            }\r\n          } else if (result.reason === azureSdk.ResultReason.Canceled) {\r\n            console.error(\r\n              'Speech synthesis canceled, ' +\r\n                result.errorDetails +\r\n                '\\nDid you update the subscription info?'\r\n            );\r\n            onend();\r\n            azureSynthesizer.close();\r\n            azureSynthesizer = undefined;\r\n            initAzureSynthesizer();\r\n          }\r\n        },\r\n        function(err) {\r\n          console.error(err);\r\n          onend();\r\n          azureSynthesizer.close();\r\n          azureSynthesizer = undefined;\r\n          initAzureSynthesizer();\r\n        }\r\n      );\r\n    } else {\r\n      if (!platformVoices.length) {\r\n        try {\r\n          await this.getVoices();\r\n        } catch (err) {\r\n          console.error(err.message);\r\n        }\r\n      }\r\n      if (platformVoices.length) {\r\n        const localVoice = this.getLocalVoiceByVoiceURI(voiceURI);\r\n        if (localVoice) {\r\n          const msg = new SpeechSynthesisUtterance(text);\r\n          msg.text = text;\r\n          msg.voice = localVoice;\r\n          msg.name = localVoice.name;\r\n          msg.lang = localVoice.lang;\r\n          msg.voiceURI = localVoice.voiceURI;\r\n          msg.pitch = pitch;\r\n          msg.rate = rate;\r\n          msg.volume = volume;\r\n          msg.onend = onend;\r\n          synth.speak(msg);\r\n        }\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport default tts;\r\n","export const CHANGE_LANG = 'cboard/LanguageProvider/CHANGE_LANG';\r\nexport const SET_LANGS = 'cboard/LanguageProvider/SET_LANGS';\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport default function register(onNewContentAvailable, onContentCached) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (!isLocalhost) {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl, onNewContentAvailable, onContentCached);\r\n      } else {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(\r\n  swUrl,\r\n  onNewContentAvailable = () => {},\r\n  onContentCached = () => {}\r\n) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              onNewContentAvailable();\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              onContentCached();\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import {\r\n  SHOW_NOTIFICATION,\r\n  HIDE_NOTIFICATION\r\n} from './Notifications.constants';\r\n\r\nexport function showNotification(message, kind) {\r\n  return {\r\n    type: SHOW_NOTIFICATION,\r\n    message,\r\n    open: true,\r\n    kind: kind\r\n  };\r\n}\r\n\r\nexport function hideNotification() {\r\n  return {\r\n    type: HIDE_NOTIFICATION,\r\n    open: false\r\n  };\r\n}\r\n","import isEmpty from 'lodash/isEmpty';\r\n\r\nexport const getUser = state => state.app.userData;\r\nexport const isLogged = state => !isEmpty(getUser(state));\r\nexport const isFirstVisit = state => state.app.isFirstVisit;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  save: {\r\n    id: 'cboard.components.App.save',\r\n    defaultMessage: 'Save'\r\n  },\r\n  newContentAvailable: {\r\n    id: 'cboard.components.App.newContentAvailable',\r\n    defaultMessage: 'New content is available; please refresh.'\r\n  },\r\n  contentIsCached: {\r\n    id: 'cboard.components.App.contentIsCached',\r\n    defaultMessage: 'Content is cached for offline use.'\r\n  }\r\n});\r\n","import React, { Fragment, PureComponent } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { activate } from './Activate.actions';\r\nimport './Activate.css';\r\n\r\nclass ActivateContainer extends PureComponent {\r\n  state = {\r\n    isActivating: false,\r\n    activationStatus: {}\r\n  };\r\n\r\n  componentDidMount() {\r\n    const {\r\n      match: {\r\n        params: { url }\r\n      }\r\n    } = this.props;\r\n\r\n    this.setState({ isActivating: true });\r\n\r\n    activate(url)\r\n      .then(activationStatus => this.setState({ activationStatus }))\r\n      .catch(activationStatus => this.setState({ activationStatus }))\r\n      .finally(() => this.setState({ isActivating: false }));\r\n  }\r\n\r\n  render() {\r\n    const { isActivating, activationStatus } = this.state;\r\n\r\n    return (\r\n      <div className=\"Activate\">\r\n        {isActivating ? (\r\n          'Activating your account...'\r\n        ) : (\r\n          <Fragment>\r\n            {activationStatus.message}\r\n            <br />\r\n            <Link to=\"/\" className=\"Activate_home\">\r\n              Home page\r\n            </Link>\r\n          </Fragment>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ActivateContainer;\r\n","import axios from 'axios';\r\nimport get from 'lodash/fp/get';\r\n\r\nimport { API_URL } from '../../../constants';\r\n\r\nexport function activate(url) {\r\n  return axios\r\n    .post(`${API_URL}/user/activate/${url}`)\r\n    .then(response => {\r\n      setTimeout(() => {\r\n        window.location.href = '/';\r\n      }, 1000);\r\n\r\n      return response.data;\r\n    })\r\n    .catch(get('response.data'));\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport MUITextField from '@material-ui/core/TextField';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormHelperText from '@material-ui/core/FormHelperText';\r\n\r\nconst propTypes = {\r\n  className: PropTypes.string,\r\n  error: PropTypes.oneOfType([\r\n    PropTypes.bool,\r\n    PropTypes.string,\r\n    PropTypes.number\r\n  ])\r\n};\r\n\r\nconst defaultProps = {\r\n  className: '',\r\n  error: false\r\n};\r\n\r\nconst TextField = ({ className, error, ...props }) => (\r\n  <FormControl className={className} error={!!error}>\r\n    <MUITextField error={!!error} {...props} />\r\n    {error && <FormHelperText>{error}</FormHelperText>}\r\n  </FormControl>\r\n);\r\n\r\nTextField.propTypes = propTypes;\r\nTextField.defaultProps = defaultProps;\r\n\r\nexport default TextField;\r\n","import React from 'react';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport './LoadingIcon.css';\r\n\r\nfunction LoadingIcon() {\r\n  return <CircularProgress className=\"LoadingIcon\" size={14} />;\r\n}\r\n\r\nexport default LoadingIcon;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  password: yup\r\n    .string()\r\n    .min(6, 'Password has to be longer than 6 characters!')\r\n    .required('New Password is required!'),\r\n  passwordRepeat: yup\r\n    .string()\r\n    .oneOf([yup.ref('password'), null], 'Passwords must match')\r\n    .required('Password repeat is required!')\r\n});\r\n\r\nexport default validationSchema;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  password: {\r\n    id: 'cboard.components.ChangePassword.password',\r\n    defaultMessage: 'New Password'\r\n  },\r\n  passwordRepeat: {\r\n    id: 'cboard.components.ChangePassword.passwordRepeat',\r\n    defaultMessage: 'Repeat New Password'\r\n  },\r\n  send: {\r\n    id: 'cboard.components.ChangePassword.send',\r\n    defaultMessage: 'Send'\r\n  },\r\n  changePassword: {\r\n    id: 'cboard.components.ChangePassword.changePassword',\r\n    defaultMessage: 'Save your new password'\r\n  },\r\n  changePasswordText: {\r\n    id: 'cboard.components.ChangePassword.changePasswordText',\r\n    defaultMessage: 'Enter two times your new password to access to Cboard.'\r\n  },\r\n  changePasswordSuccess: {\r\n    id: 'cboard.components.ChangePassword.changePasswordSuccess',\r\n    defaultMessage: 'Success!! Your password was updated.'\r\n  },\r\n  redirect: {\r\n    id: 'cboard.components.ChangePassword.redirect',\r\n    defaultMessage: 'Redirecting you to the login page...'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport { Formik } from 'formik';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\n\r\nimport { TextField } from '../../UI/FormItems';\r\nimport LoadingIcon from '../../UI/LoadingIcon';\r\nimport validationSchema from './validationSchema';\r\nimport { storePassword } from './ChangePassword.actions';\r\nimport messages from './ChangePassword.messages';\r\nimport './ChangePassword.css';\r\n\r\nexport class ChangePassword extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  state = {\r\n    isSending: false,\r\n    storePasswordState: {},\r\n    redirectMessage: ''\r\n  };\r\n\r\n  sleep = milliseconds => {\r\n    return new Promise(resolve => setTimeout(resolve, milliseconds));\r\n  };\r\n\r\n  handleSubmit = values => {\r\n    const {\r\n      match: {\r\n        params: { userid, url }\r\n      }\r\n    } = this.props;\r\n\r\n    const { intl, history, storePassword } = this.props;\r\n\r\n    this.setState({\r\n      isSending: true,\r\n      storePasswordState: {}\r\n    });\r\n\r\n    storePassword(userid, values.password, url)\r\n      .then(res => {\r\n        this.setState({\r\n          storePasswordState: res,\r\n          redirectMessage: intl.formatMessage(messages.redirect)\r\n        });\r\n        this.sleep(2000).then(() => {\r\n          history.replace('/login-signup');\r\n        });\r\n      })\r\n      .catch(err => this.setState({ storePasswordState: err }))\r\n      .finally(() => this.setState({ isSending: false }));\r\n  };\r\n\r\n  render() {\r\n    const { isSending, storePasswordState, redirectMessage } = this.state;\r\n    const { intl } = this.props;\r\n\r\n    const isButtonDisabled = isSending || !!storePasswordState.success;\r\n\r\n    return (\r\n      <div className=\"ChangePassword\">\r\n        <Dialog open={true} aria-labelledby=\"changePassword\">\r\n          <DialogTitle id=\"changePassword\">\r\n            <FormattedMessage {...messages.changePassword} />\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            {storePasswordState && !storePasswordState.success && (\r\n              <DialogContentText>\r\n                <FormattedMessage {...messages.changePasswordText} />\r\n              </DialogContentText>\r\n            )}\r\n            <div\r\n              className={classNames('ChangePassword__status', {\r\n                'ChangePassword__status--error': !storePasswordState.success,\r\n                'ChangePassword__status--success': storePasswordState.success\r\n              })}\r\n            >\r\n              {!!storePasswordState.success ? (\r\n                <Typography color=\"inherit\">\r\n                  {intl.formatMessage(messages.changePasswordSuccess)}\r\n                </Typography>\r\n              ) : (\r\n                <Typography color=\"inherit\">\r\n                  {storePasswordState.message}\r\n                </Typography>\r\n              )}\r\n            </div>\r\n            {redirectMessage && (\r\n              <div\r\n                className={classNames(\r\n                  'ChangePassword__status',\r\n                  'ChangePassword__status--success'\r\n                )}\r\n              >\r\n                <Typography color=\"inherit\">\r\n                  {intl.formatMessage(messages.redirect)}\r\n                </Typography>\r\n              </div>\r\n            )}\r\n            {storePasswordState && !storePasswordState.success && (\r\n              <Formik\r\n                onSubmit={this.handleSubmit}\r\n                validationSchema={validationSchema}\r\n              >\r\n                {({ errors, handleChange, handleSubmit }) => (\r\n                  <form\r\n                    className=\"ChangePassword__form\"\r\n                    onSubmit={handleSubmit}\r\n                  >\r\n                    <TextField\r\n                      error={errors.password}\r\n                      label={intl.formatMessage(messages.password)}\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      onChange={handleChange}\r\n                    />\r\n                    <TextField\r\n                      error={errors.passwordRepeat}\r\n                      label={intl.formatMessage(messages.passwordRepeat)}\r\n                      type=\"password\"\r\n                      name=\"passwordRepeat\"\r\n                      onChange={handleChange}\r\n                    />\r\n                    <DialogActions>\r\n                      <Button\r\n                        type=\"submit\"\r\n                        disabled={isButtonDisabled}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                      >\r\n                        {isSending && <LoadingIcon />}\r\n                        <FormattedMessage {...messages.send} />\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </form>\r\n                )}\r\n              </Formik>\r\n            )}\r\n          </DialogContent>\r\n        </Dialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  storePassword\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(injectIntl(ChangePassword));\r\n","import API from '../../../api';\r\nimport {\r\n  STORE_PASSWORD_API_FAILURE,\r\n  STORE_PASSWORD_API_STARTED,\r\n  STORE_PASSWORD_API_SUCCESS\r\n} from './ChangePassword.constants';\r\n\r\nexport function storePasswordApiStarted() {\r\n  return {\r\n    type: STORE_PASSWORD_API_STARTED\r\n  };\r\n}\r\n\r\nexport function storePasswordApiFailure(message) {\r\n  return {\r\n    type: STORE_PASSWORD_API_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function storePasswordApiSuccess(board) {\r\n  return {\r\n    type: STORE_PASSWORD_API_SUCCESS,\r\n    board\r\n  };\r\n}\r\n\r\nexport function storePassword(userid, password, url) {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(storePasswordApiStarted());\r\n      const res = await API.storePassword(userid, password, url);\r\n      dispatch(storePasswordApiSuccess(res));\r\n      return Promise.resolve(res);\r\n    } catch (err) {\r\n      dispatch(storePasswordApiFailure(err.message));\r\n      if (err.response != null) {\r\n        return Promise.reject(err.response.data);\r\n      }\r\n      var disonnected = {\r\n        message: 'Unable to contact server. Try in a moment'\r\n      };\r\n      return Promise.reject(disonnected);\r\n    }\r\n  };\r\n}\r\n","export const STORE_PASSWORD_API_STARTED =\r\n  'cboard/ResetPassword/STORE_PASSWORD_API_STARTED';\r\nexport const STORE_PASSWORD_API_SUCCESS =\r\n  'cboard/ResetPassword/STORE_PASSWORD_API_SUCCESS';\r\nexport const STORE_PASSWORD_API_FAILURE =\r\n  'cboard/ResetPassword/STORE_PASSWORD_API_FAILURE';\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  loading: {\r\n    id: 'cboard.components.OAuthLogin.loading',\r\n    defaultMessage: 'Loading...'\r\n  },\r\n  errorMessage: {\r\n    id: 'cboard.components.OAuthLogin.errorMessage',\r\n    defaultMessage: 'An error has occurred...'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport { login } from '../Login/Login.actions';\r\nimport messages from './OAuthLogin.messages';\r\nimport { getUser } from '../../App/App.selectors';\r\nimport './OAuthLogin.css';\r\n\r\nclass OAuthLoginContainer extends React.Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    user: PropTypes.object,\r\n    login: PropTypes.func\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    const {\r\n      match: {\r\n        params: { type }\r\n      },\r\n      location: { search: query },\r\n      history\r\n    } = this.props;\r\n\r\n    this.type = type;\r\n    this.query = query;\r\n    this.hasErrors = query.indexOf('error=') >= 0;\r\n\r\n    if (this.hasErrors) {\r\n      setTimeout(() => {\r\n        history.replace('/');\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (!this.checkUser()) {\r\n      this.props.login({ email: this.type, password: this.query }, this.type);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.checkUser();\r\n  }\r\n\r\n  checkUser() {\r\n    const { history, user } = this.props;\r\n    if (user.email) {\r\n      history.replace('/');\r\n    }\r\n\r\n    return !!user.email;\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"OAuthContainer\">\r\n        {!this.hasErrors && <FormattedMessage {...messages.loading} />}\r\n        {this.hasErrors && <FormattedMessage {...messages.errorMessage} />}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  user: getUser(state)\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  login\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(OAuthLoginContainer));\r\n","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport MUIIconButton from '@material-ui/core/IconButton';\r\n\r\nconst propTypes = {\r\n  /**\r\n   *\r\n   */\r\n  children: PropTypes.node.isRequired,\r\n  /**\r\n   *\r\n   */\r\n  component: PropTypes.oneOfType([\r\n    PropTypes.func,\r\n    PropTypes.object,\r\n    PropTypes.string\r\n  ]),\r\n  /**\r\n   *\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   *\r\n   */\r\n  label: PropTypes.string.isRequired,\r\n  /**\r\n   *\r\n   */\r\n  onClick: PropTypes.func,\r\n  /**\r\n   *\r\n   */\r\n  to: PropTypes.string\r\n};\r\n\r\nfunction IconButton({ children, component, to, label, disabled, onClick }) {\r\n  const child = React.Children.only(children);\r\n\r\n  const iconButtonProps = {\r\n    component,\r\n    disabled,\r\n    onClick,\r\n    to,\r\n    'aria-label': label,\r\n    color: 'inherit'\r\n  };\r\n\r\n  const disableIconButtondStyle = {\r\n    color: 'rgba(255, 255, 255, 0.26)'\r\n  };\r\n\r\n  return (\r\n    <Fragment>\r\n      {disabled ? (\r\n        <MUIIconButton {...iconButtonProps} style={disableIconButtondStyle}>\r\n          {child}\r\n        </MUIIconButton>\r\n      ) : (\r\n        <Tooltip placement=\"bottom\" title={label}>\r\n          <MUIIconButton {...iconButtonProps}>{child}</MUIIconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nIconButton.propTypes = propTypes;\r\n\r\nexport default IconButton;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  login: {\r\n    id: 'cboard.components.WelcomeScreen.login',\r\n    defaultMessage: 'Login'\r\n  },\r\n  signUp: {\r\n    id: 'cboard.components.WelcomeScreen.signUp',\r\n    defaultMessage: 'Sign Up'\r\n  },\r\n  facebook: {\r\n    id: 'cboard.components.WelcomeScreen.facebook',\r\n    defaultMessage: 'Sign in with Facebook'\r\n  },\r\n  google: {\r\n    id: 'cboard.components.WelcomeScreen.google',\r\n    defaultMessage: 'Sign in with Google'\r\n  },\r\n  skipForNow: {\r\n    id: 'cboard.components.WelcomeScreen.skipForNow',\r\n    defaultMessage: 'Skip for now'\r\n  },\r\n  googleLoginErrorAndroid: {\r\n    id: 'cboard.components.WelcomeScreen.googleLoginErrorAndroid',\r\n    defaultMessage:\r\n      'Sorry. An error occurred during authenticate process. Please try it again'\r\n  },\r\n  privacy: {\r\n    id: 'cboard.components.WelcomeScreen.privacy',\r\n    defaultMessage: 'Privacy Policy'\r\n  },\r\n  terms: {\r\n    id: 'cboard.components.WelcomeScreen.terms',\r\n    defaultMessage: 'Terms of service'\r\n  }\r\n});\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  heading: {\r\n    id: 'cboard.components.WelcomeScreenInformation.heading',\r\n    defaultMessage: 'Welcome to Cboard'\r\n  },\r\n  text: {\r\n    id: 'cboard.components.WelcomeScreenInformation.text',\r\n    defaultMessage:\r\n      'Cboard helps users with speech and language impairments to communicate with symbols and text-to-speech.'\r\n  }\r\n});\r\n","import React, { Fragment } from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport messages from './Information.messages';\r\n\r\nconst Information = ({heading, text}) => (\r\n  <Fragment>\r\n    <h2 align=\"center\" className=\"WelcomeScreen__heading\">\r\n      {heading ? heading : (<FormattedMessage {...messages.heading} />)}\r\n    </h2>\r\n    <p>\r\n      {text ? text : (<FormattedMessage {...messages.text} />)}\r\n    </p>\r\n  </Fragment>\r\n);\r\n\r\nexport default Information;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email('Invalid email')\r\n    .required('Required'),\r\n  password: yup.string().required('Required')\r\n});\r\n\r\nexport default validationSchema;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  login: {\r\n    id: 'cboard.components.Login.login',\r\n    defaultMessage: 'Login'\r\n  },\r\n  email: {\r\n    id: 'cboard.components.Login.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  password: {\r\n    id: 'cboard.components.Login.password',\r\n    defaultMessage: 'Password'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.Login.cancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  forgotPassword: {\r\n    id: 'cboard.components.Login.forgotPassword',\r\n    defaultMessage: 'Forgot password?'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport { Formik } from 'formik';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { TextField } from '../../UI/FormItems';\r\nimport LoadingIcon from '../../UI/LoadingIcon';\r\nimport validationSchema from './validationSchema';\r\nimport { login } from './Login.actions';\r\nimport messages from './Login.messages';\r\nimport './Login.css';\r\n\r\nexport class Login extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    isDialogOpen: PropTypes.bool.isRequired,\r\n    onClose: PropTypes.func.isRequired,\r\n    onResetPasswordClick: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    isLogging: false,\r\n    loginStatus: {}\r\n  };\r\n\r\n  handleSubmit = values => {\r\n    const { login } = this.props;\r\n\r\n    this.setState({\r\n      isLogging: true,\r\n      loginStatus: {}\r\n    });\r\n\r\n    login(values)\r\n      .catch(loginStatus => this.setState({ loginStatus }))\r\n      .finally(() => this.setState({ isLogging: false }));\r\n  };\r\n\r\n  render() {\r\n    const { isLogging, loginStatus } = this.state;\r\n    const { intl, isDialogOpen, onClose, onResetPasswordClick } = this.props;\r\n\r\n    const isButtonDisabled = isLogging || !!loginStatus.success;\r\n\r\n    return (\r\n      <Dialog open={isDialogOpen} onClose={onClose} aria-labelledby=\"login\">\r\n        <DialogTitle id=\"login\">\r\n          <FormattedMessage {...messages.login} />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div\r\n            className={classNames('Login__status', {\r\n              'Login__status--error': !loginStatus.success,\r\n              'Login__status--success': loginStatus.success\r\n            })}\r\n          >\r\n            <Typography color=\"inherit\">{loginStatus.message}</Typography>\r\n          </div>\r\n          <Formik\r\n            onSubmit={this.handleSubmit}\r\n            validationSchema={validationSchema}\r\n          >\r\n            {({ errors, handleChange, handleSubmit }) => (\r\n              <form className=\"Login__form\" onSubmit={handleSubmit}>\r\n                <TextField\r\n                  error={errors.email}\r\n                  label={intl.formatMessage(messages.email)}\r\n                  name=\"email\"\r\n                  onChange={handleChange}\r\n                />\r\n                <TextField\r\n                  error={errors.password}\r\n                  label={intl.formatMessage(messages.password)}\r\n                  type=\"password\"\r\n                  name=\"password\"\r\n                  onChange={handleChange}\r\n                />\r\n                <DialogActions>\r\n                  <Button\r\n                    color=\"primary\"\r\n                    disabled={isButtonDisabled}\r\n                    onClick={onClose}\r\n                  >\r\n                    <FormattedMessage {...messages.cancel} />\r\n                  </Button>\r\n                  <Button\r\n                    type=\"submit\"\r\n                    disabled={isButtonDisabled}\r\n                    variant=\"contained\"\r\n                    color=\"primary\"\r\n                  >\r\n                    {isLogging && <LoadingIcon />}\r\n                    <FormattedMessage {...messages.login} />\r\n                  </Button>\r\n                </DialogActions>\r\n              </form>\r\n            )}\r\n          </Formik>\r\n          <Button\r\n            size=\"small\"\r\n            color=\"primary\"\r\n            disabled={isButtonDisabled}\r\n            onClick={onResetPasswordClick}\r\n          >\r\n            <FormattedMessage {...messages.forgotPassword} />\r\n          </Button>\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  login\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(injectIntl(Login));\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  password: yup\r\n    .string()\r\n    .required('Required')\r\n    .oneOf([yup.ref('passwordConfirm'), null], \"Passwords don't match\"),\r\n  passwordConfirm: yup\r\n    .string()\r\n    .required('Required')\r\n    .oneOf([yup.ref('password'), null], \"Passwords don't match\"),\r\n  name: yup.string().required('Required'),\r\n  email: yup\r\n    .string()\r\n    .email('Invalid email')\r\n    .required('Required'),\r\n  isTermsAccepted: yup\r\n    .bool()\r\n    .oneOf([true], 'Accept Terms and Policy is required')\r\n});\r\n\r\nexport default validationSchema;\r\n","import axios from 'axios';\r\nimport get from 'lodash/fp/get';\r\n\r\nimport { API_URL } from '../../../constants';\r\n\r\nexport function signUp(formValues) {\r\n  const endpoint =\r\n    API_URL[API_URL.length - 1] === '/' ? `${API_URL}user` : `${API_URL}/user`;\r\n  return axios\r\n    .post(endpoint, formValues)\r\n    .then(get('data'))\r\n    .catch(get('response.data'));\r\n}\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  signUp: {\r\n    id: 'cboard.components.SignUp.signUp',\r\n    defaultMessage: 'Sign Up'\r\n  },\r\n  name: {\r\n    id: 'cboard.components.SignUp.name',\r\n    defaultMessage: 'Name'\r\n  },\r\n  email: {\r\n    id: 'cboard.components.SignUp.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  createYourPassword: {\r\n    id: 'cboard.components.SignUp.createYourPassword',\r\n    defaultMessage: 'Create your password'\r\n  },\r\n  confirmYourPassword: {\r\n    id: 'cboard.components.SignUp.confirmYourPassword',\r\n    defaultMessage: 'Confirm your password'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.SignUp.cancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  signMeUp: {\r\n    id: 'cboard.components.SignUp.signMeUp',\r\n    defaultMessage: 'Sign me up'\r\n  },\r\n  agreement: {\r\n    id: 'cboard.components.SignUp.agreement',\r\n    defaultMessage: 'I agree with the {terms} and the {privacy}'\r\n  },\r\n  termsAndConditions: {\r\n    id: 'cboard.components.SignUp.termsAndConditions',\r\n    defaultMessage: 'Terms'\r\n  },\r\n  privacy: {\r\n    id: 'cboard.components.SignUp.privacy',\r\n    defaultMessage: 'Privacy Policy'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport { Formik, ErrorMessage } from 'formik';\r\nimport classNames from 'classnames';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { TextField } from '../../UI/FormItems';\r\nimport LoadingIcon from '../../UI/LoadingIcon';\r\nimport validationSchema from './validationSchema';\r\nimport { signUp } from './SignUp.actions';\r\nimport messages from './SignUp.messages';\r\nimport './SignUp.css';\r\n\r\nexport class SignUp extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    isDialogOpen: PropTypes.bool.isRequired,\r\n    onClose: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    isSigningUp: false,\r\n    signUpStatus: {}\r\n  };\r\n\r\n  componentDidUpdate({ isDialogOpen }) {\r\n    if (this.props.isDialogOpen && this.props.isDialogOpen !== isDialogOpen) {\r\n      this.setState({ signUpStatus: {} });\r\n    }\r\n  }\r\n\r\n  handleSubmit = values => {\r\n    const { passwordConfirm, ...formValues } = values;\r\n\r\n    this.setState({\r\n      isSigningUp: true,\r\n      signUpStatus: {}\r\n    });\r\n\r\n    signUp(formValues)\r\n      .then(signUpStatus => this.setState({ signUpStatus }))\r\n      .catch(signUpStatus => this.setState({ signUpStatus }))\r\n      .finally(() => this.setState({ isSigningUp: false }));\r\n  };\r\n\r\n  render() {\r\n    const { signUpStatus, isSigningUp } = this.state;\r\n    const { isDialogOpen, onClose, intl } = this.props;\r\n\r\n    const isButtonDisabled = isSigningUp || !!signUpStatus.success;\r\n\r\n    return (\r\n      <Dialog open={isDialogOpen} onClose={onClose} aria-labelledby=\"sign-up\">\r\n        <DialogTitle id=\"sign-up\">\r\n          <FormattedMessage {...messages.signUp} />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <div\r\n            className={classNames('SignUp__status', {\r\n              'SignUp__status--error': !signUpStatus.success,\r\n              'SignUp__status--success': signUpStatus.success\r\n            })}\r\n          >\r\n            <Typography color=\"inherit\">{signUpStatus.message}</Typography>\r\n          </div>\r\n          {signUpStatus && !signUpStatus.success && (\r\n            <Formik\r\n              onSubmit={this.handleSubmit}\r\n              validationSchema={validationSchema}\r\n              initialValues={{\r\n                isTermsAccepted: false\r\n              }}\r\n            >\r\n              {({ errors, handleChange, handleSubmit }) => (\r\n                <form className=\"SignUp__form\" onSubmit={handleSubmit}>\r\n                  <TextField\r\n                    name=\"name\"\r\n                    label={intl.formatMessage(messages.name)}\r\n                    error={errors.name}\r\n                    onChange={handleChange}\r\n                  />\r\n                  <TextField\r\n                    name=\"email\"\r\n                    label={intl.formatMessage(messages.email)}\r\n                    error={errors.email}\r\n                    onChange={handleChange}\r\n                  />\r\n                  <TextField\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    label={intl.formatMessage(messages.createYourPassword)}\r\n                    error={errors.password}\r\n                    onChange={handleChange}\r\n                  />\r\n                  <TextField\r\n                    type=\"password\"\r\n                    name=\"passwordConfirm\"\r\n                    label={intl.formatMessage(messages.confirmYourPassword)}\r\n                    error={errors.passwordConfirm}\r\n                    onChange={handleChange}\r\n                  />\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        type=\"checkbox\"\r\n                        name=\"isTermsAccepted\"\r\n                        onChange={handleChange}\r\n                        color=\"primary\"\r\n                      />\r\n                    }\r\n                    label={\r\n                      <FormattedMessage\r\n                        {...messages.agreement}\r\n                        values={{\r\n                          terms: (\r\n                            <a\r\n                              href=\"https://www.cboard.io/terms-of-use/\"\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                            >\r\n                              {intl.formatMessage(messages.termsAndConditions)}\r\n                            </a>\r\n                          ),\r\n                          privacy: (\r\n                            <a\r\n                              href=\"https://www.cboard.io/privacy/\"\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                            >\r\n                              {intl.formatMessage(messages.privacy)}\r\n                            </a>\r\n                          )\r\n                        }}\r\n                      />\r\n                    }\r\n                  />\r\n                  <ErrorMessage\r\n                    name=\"isTermsAccepted\"\r\n                    component=\"p\"\r\n                    className=\"SignUp__status--error SignUp__termsError\"\r\n                  />\r\n\r\n                  <DialogActions>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      disabled={isButtonDisabled}\r\n                      onClick={onClose}\r\n                    >\r\n                      <FormattedMessage {...messages.cancel} />\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={isButtonDisabled}\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      {isSigningUp && <LoadingIcon />}\r\n                      <FormattedMessage {...messages.signMeUp} />\r\n                    </Button>\r\n                  </DialogActions>\r\n                </form>\r\n              )}\r\n            </Formik>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(SignUp);\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email('Invalid email')\r\n    .required('Required')\r\n});\r\n\r\nexport default validationSchema;\r\n","import API from '../../../api';\r\nimport {\r\n  FORGOT_API_FAILURE,\r\n  FORGOT_API_STARTED,\r\n  FORGOT_API_SUCCESS\r\n} from './ResetPassword.constants';\r\n\r\nexport function forgotApiStarted() {\r\n  return {\r\n    type: FORGOT_API_STARTED\r\n  };\r\n}\r\n\r\nexport function forgotApiFailure(message) {\r\n  return {\r\n    type: FORGOT_API_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function forgotApiSuccess(board) {\r\n  return {\r\n    type: FORGOT_API_SUCCESS,\r\n    board\r\n  };\r\n}\r\n\r\nexport function forgot({ email }, type = 'local') {\r\n  return async dispatch => {\r\n    try {\r\n      dispatch(forgotApiStarted());\r\n      const res = await API.forgot(email);\r\n      dispatch(forgotApiSuccess(res));\r\n      return Promise.resolve(res);\r\n    } catch (err) {\r\n      dispatch(forgotApiFailure(err.message));\r\n      if (err.response != null) {\r\n        return Promise.reject(err.response.data);\r\n      }\r\n      var disonnected = {\r\n        message: 'Unable to contact server. Try in a moment'\r\n      };\r\n      return Promise.reject(disonnected);\r\n    }\r\n  };\r\n}\r\n","export const FORGOT_API_STARTED = 'cboard/ResetPassword/FORGOT_API_STARTED';\r\nexport const FORGOT_API_SUCCESS = 'cboard/ResetPassword/FORGOT_API_SUCCESS';\r\nexport const FORGOT_API_FAILURE = 'cboard/ResetPassword/FORGOT_API_FAILURE';\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  email: {\r\n    id: 'cboard.components.ResetPassword.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.ResetPassword.cancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  send: {\r\n    id: 'cboard.components.ResetPassword.send',\r\n    defaultMessage: 'Send'\r\n  },\r\n  resetPassword: {\r\n    id: 'cboard.components.ResetPassword.resetPassword',\r\n    defaultMessage: 'Reset Your Password'\r\n  },\r\n  resetPasswordText: {\r\n    id: 'cboard.components.ResetPassword.resetPasswordText',\r\n    defaultMessage:\r\n      'Enter your email address and we will send you a link to reset your password.'\r\n  },\r\n  resetPasswordSuccess: {\r\n    id: 'cboard.components.ResetPassword.resetPasswordSuccess',\r\n    defaultMessage: 'Success!! Check your mail to reset your password.'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport { Formik } from 'formik';\r\nimport classNames from 'classnames';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport { TextField } from '../../UI/FormItems';\r\nimport LoadingIcon from '../../UI/LoadingIcon';\r\nimport validationSchema from './validationSchema';\r\nimport { forgot } from './ResetPassword.actions';\r\nimport messages from './ResetPassword.messages';\r\nimport './ResetPassword.css';\r\n\r\nexport class ResetPassword extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    isDialogOpen: PropTypes.bool.isRequired,\r\n    onClose: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    isSending: false,\r\n    forgotState: {}\r\n  };\r\n\r\n  handleSubmit = values => {\r\n    const { forgot } = this.props;\r\n\r\n    this.setState({\r\n      isSending: true,\r\n      forgotState: {}\r\n    });\r\n\r\n    forgot(values)\r\n      .then(res => this.setState({ forgotState: res }))\r\n      .catch(err => this.setState({ forgotState: err }))\r\n      .finally(() => this.setState({ isSending: false }));\r\n  };\r\n\r\n  render() {\r\n    const { isSending, forgotState } = this.state;\r\n    const { intl, isDialogOpen, onClose } = this.props;\r\n\r\n    const isButtonDisabled = isSending || !!forgotState.success;\r\n\r\n    return (\r\n      <Dialog open={isDialogOpen} onClose={onClose} aria-labelledby=\"forgot\">\r\n        <DialogTitle id=\"forgot\">\r\n          <FormattedMessage {...messages.resetPassword} />\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <DialogContentText>\r\n            <FormattedMessage {...messages.resetPasswordText} />\r\n          </DialogContentText>\r\n\r\n          <div\r\n            className={classNames('Forgot__status', {\r\n              'Forgot__status--error': !forgotState.success,\r\n              'Forgot__status--success': forgotState.success\r\n            })}\r\n          >\r\n            {!!forgotState.success ? (\r\n              <Typography color=\"inherit\">\r\n                {intl.formatMessage(messages.resetPasswordSuccess)}\r\n              </Typography>\r\n            ) : (\r\n              <Typography color=\"inherit\">{forgotState.message}</Typography>\r\n            )}\r\n          </div>\r\n          {forgotState && !forgotState.success && (\r\n            <Formik\r\n              onSubmit={this.handleSubmit}\r\n              validationSchema={validationSchema}\r\n            >\r\n              {({ errors, handleChange, handleSubmit }) => (\r\n                <form className=\"Forgot__form\" onSubmit={handleSubmit}>\r\n                  <TextField\r\n                    error={errors.email}\r\n                    label={intl.formatMessage(messages.email)}\r\n                    name=\"email\"\r\n                    onChange={handleChange}\r\n                  />\r\n                  <DialogActions>\r\n                    <Button\r\n                      color=\"primary\"\r\n                      disabled={isButtonDisabled}\r\n                      onClick={onClose}\r\n                    >\r\n                      <FormattedMessage {...messages.cancel} />\r\n                    </Button>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      disabled={isButtonDisabled}\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                    >\r\n                      {isSending && <LoadingIcon />}\r\n                      <FormattedMessage {...messages.send} />\r\n                    </Button>\r\n                  </DialogActions>\r\n                </form>\r\n              )}\r\n            </Formik>\r\n          )}\r\n        </DialogContent>\r\n      </Dialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  forgot\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(injectIntl(ResetPassword));\r\n","import React, { useState, useEffect } from 'react';\r\nimport { CSSTransition } from 'react-transition-group';\r\n\r\nimport { isCordova } from '../../../cordova-util';\r\n\r\nimport './CboardLogo.css';\r\n\r\n// Cordova path cannot be absolute\r\nconst image = isCordova()\r\n  ? './images/logo_no_words.svg'\r\n  : '/images/logo_no_words.svg';\r\n\r\nconst CboardLogo = () => {\r\n\r\n  const [showLogo, setShowLogo] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setShowLogo(true);\r\n  }, []);\r\n\r\n  return (\r\n    <CSSTransition\r\n      in={showLogo}\r\n      timeout={5000}\r\n      classNames=\"transition\"\r\n      appear={true}\r\n    >\r\n      <img className=\"CboardLogo\" src={image} alt=\"Cboard Logo\" />\r\n    </CSSTransition>\r\n  );\r\n}\r\n\r\nexport default CboardLogo;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, injectIntl } from 'react-intl';\r\nimport Button from '@material-ui/core/Button';\r\nimport Link from '@material-ui/core/Link';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport IconButton from '../UI/IconButton';\r\nimport {\r\n  FacebookLoginButton,\r\n  GoogleLoginButton\r\n} from 'react-social-login-buttons';\r\n\r\nimport messages from './WelcomeScreen.messages';\r\nimport { finishFirstVisit } from '../App/App.actions';\r\nimport Information from './Information';\r\nimport Login from '../Account/Login';\r\nimport SignUp from '../Account/SignUp';\r\nimport ResetPassword from '../Account/ResetPassword';\r\nimport CboardLogo from './CboardLogo/CboardLogo.component';\r\nimport './WelcomeScreen.css';\r\nimport { API_URL } from '../../constants';\r\nimport { isCordova, isAndroid, isElectron } from '../../cordova-util';\r\nimport { login } from '../Account/Login/Login.actions';\r\n\r\nexport class WelcomeScreen extends Component {\r\n  state = {\r\n    activeView: ''\r\n  };\r\n\r\n  static propTypes = {\r\n    finishFirstVisit: PropTypes.func.isRequired,\r\n    heading: PropTypes.string,\r\n    text: PropTypes.string,\r\n    onClose: PropTypes.func\r\n  };\r\n\r\n  handleActiveView = activeView => {\r\n    this.setState({\r\n      activeView\r\n    });\r\n  };\r\n\r\n  onResetPasswordClick = () => {\r\n    this.resetActiveView();\r\n    this.handleActiveView('forgot');\r\n  };\r\n\r\n  resetActiveView = () => {\r\n    this.setState({\r\n      activeView: ''\r\n    });\r\n  };\r\n\r\n  handleGoogleLoginClick = () => {\r\n    const { intl, login } = this.props;\r\n    if (isAndroid()) {\r\n      window.plugins.googleplus.login(\r\n        {\r\n          // 'scopes': '... ', // optional, space-separated list of scopes, If not included or empty, defaults to `profile` and `email`.\r\n          offline: true // optional, but requires the webClientId - if set to true the plugin will also return a serverAuthCode, which can be used to grant offline access to a non-Google server\r\n        },\r\n        function(obj) {\r\n          login(\r\n            {\r\n              email: 'googletoken',\r\n              password: `?access_token=${obj.accessToken}`\r\n            },\r\n            'oAuth'\r\n          );\r\n        },\r\n        function(msg) {\r\n          alert(intl.formatMessage(messages.googleLoginErrorAndroid));\r\n          console.log('error: ' + msg);\r\n        }\r\n      );\r\n    } else {\r\n      window.location = `${API_URL}/login/google`;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { finishFirstVisit, heading, text, onClose } = this.props;\r\n    const { activeView } = this.state;\r\n\r\n    return (\r\n      <div className=\"WelcomeScreen\">\r\n        <div className=\"WelcomeScreen__container\">\r\n          {onClose && (\r\n            <IconButton label=\"close\" onClick={onClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n          )}\r\n          <div className=\"WelcomeScreen__content\">\r\n            <Information heading={heading} text={text} />\r\n          </div>\r\n          <div className=\"WelcomeScreen__logo\">\r\n            <CboardLogo />\r\n          </div>\r\n          <footer className=\"WelcomeScreen__footer\">\r\n            <Button\r\n              className=\"WelcomeScreen__button WelcomeScreen__button--login\"\r\n              variant=\"contained\"\r\n              onClick={() => this.handleActiveView('login')}\r\n            >\r\n              <FormattedMessage {...messages.login} />\r\n            </Button>\r\n            <Button\r\n              className=\"WelcomeScreen__button WelcomeScreen__button--signup\"\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={() => this.handleActiveView('signup')}\r\n            >\r\n              <FormattedMessage {...messages.signUp} />\r\n            </Button>\r\n\r\n            <div className=\"WelcomeScreen__button WelcomeScreen__button\">\r\n              {!isElectron() && (\r\n                <GoogleLoginButton\r\n                  className=\"WelcomeScreen__button WelcomeScreen__button--google\"\r\n                  onClick={this.handleGoogleLoginClick}\r\n                >\r\n                  <FormattedMessage {...messages.google} />\r\n                </GoogleLoginButton>\r\n              )}\r\n\r\n              {!isCordova() && (\r\n                <FacebookLoginButton\r\n                  className=\"WelcomeScreen__button WelcomeScreen__button--facebook\"\r\n                  onClick={() => {\r\n                    window.location = `${API_URL}/login/facebook`;\r\n                  }}\r\n                >\r\n                  <FormattedMessage {...messages.facebook} />\r\n                </FacebookLoginButton>\r\n              )}\r\n            </div>\r\n\r\n            {!onClose && (\r\n              <Button\r\n                className=\"WelcomeScreen__button WelcomeScreen__button--skip\"\r\n                onClick={finishFirstVisit}\r\n                style={{ color: '#fff', margin: '1em auto 0 auto' }}\r\n              >\r\n                <FormattedMessage {...messages.skipForNow} />\r\n              </Button>\r\n            )}\r\n          </footer>\r\n          <div className=\"WelcomeScreen__links\">\r\n            <Link\r\n              href=\"https://www.cboard.io/privacy/\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              color=\"inherit\"\r\n            >\r\n              <FormattedMessage {...messages.privacy} />\r\n            </Link>\r\n            <Link\r\n              href=\"https://www.cboard.io/terms-of-use/\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              color=\"inherit\"\r\n            >\r\n              <FormattedMessage {...messages.terms} />\r\n            </Link>\r\n          </div>\r\n        </div>\r\n        <Login\r\n          isDialogOpen={activeView === 'login'}\r\n          onResetPasswordClick={this.onResetPasswordClick}\r\n          onClose={this.resetActiveView}\r\n        />\r\n        <ResetPassword\r\n          isDialogOpen={activeView === 'forgot'}\r\n          onClose={this.resetActiveView}\r\n        />\r\n        <SignUp\r\n          isDialogOpen={activeView === 'signup'}\r\n          onClose={this.resetActiveView}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = {\r\n  finishFirstVisit,\r\n  login\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  mapDispatchToProps\r\n)(injectIntl(WelcomeScreen));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  heading: {\r\n    id: 'cboard.components.AuthScreenInformation.heading',\r\n    defaultMessage: 'Cboard'\r\n  },\r\n  text: {\r\n    id: 'cboard.components.AuthScreenInformation.text',\r\n    defaultMessage: 'Sign up to sync your settings!'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport WelcomeScreen from '../WelcomeScreen';\r\nimport messages from './AuthScreen.messages';\r\nimport './AuthScreen.css';\r\n\r\nclass AuthScreen extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  render() {\r\n    const { history, intl } = this.props;\r\n\r\n    return (\r\n      <div className=\"AuthScreen__content\">\r\n        <WelcomeScreen\r\n          heading={intl.formatMessage(messages.heading)}\r\n          text={intl.formatMessage(messages.text)}\r\n          onClose={history.goBack}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(AuthScreen);\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\nexport const PrivateRoute = ({\r\n  component: Component,\r\n  isLogged,\r\n  to = '/login-signup',\r\n  ...rest\r\n}) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isLogged ? <Component {...props} /> : <Redirect to={to} />\r\n    }\r\n  />\r\n);\r\n\r\nexport const RedirectIfLogged = ({\r\n  component: Component,\r\n  isLogged,\r\n  to = '/',\r\n  ...rest\r\n}) => (\r\n  <Route\r\n    {...rest}\r\n    render={props =>\r\n      isLogged ? <Redirect to={to} /> : <Component {...props} />\r\n    }\r\n  />\r\n);\r\n","export interface Grid {\r\n  rows: number;\r\n  columns: number;\r\n  order: GridOrder;\r\n}\r\n\r\nexport type GridOrder = (string | null)[][];\r\n\r\nexport function createGrid(rows: number = 2, columns: number = 2): Grid {\r\n  const order = createMatrix(rows, columns);\r\n\r\n  const grid = {\r\n    order,\r\n    rows,\r\n    columns\r\n  };\r\n\r\n  return grid;\r\n}\r\n\r\nfunction createMatrix(rows: number, columns: number): any[][] {\r\n  const matrix = [...Array(rows)].map(() => [...Array(columns)]);\r\n\r\n  return matrix;\r\n}\r\n\r\n// TODO: refactor below??\r\n\r\nexport function moveOrderItem(\r\n  itemId: string,\r\n  position: { row: number; column: number },\r\n  order: GridOrder\r\n) {\r\n  const mappedOrder = order.map(row => {\r\n    return row.map(cell => {\r\n      return cell;\r\n    });\r\n  });\r\n\r\n  const oldItem = mappedOrder[position.row][position.column];\r\n\r\n  for (let i = 0; i < mappedOrder.length; i++) {\r\n    const itemIndex = mappedOrder[i].indexOf(itemId);\r\n\r\n    if (itemIndex !== -1) {\r\n      mappedOrder[i][itemIndex] = oldItem;\r\n      break;\r\n    }\r\n  }\r\n\r\n  mappedOrder[position.row][position.column] = itemId;\r\n\r\n  return mappedOrder;\r\n}\r\n\r\nexport function sortGrid({\r\n  columns,\r\n  rows,\r\n  order,\r\n  items\r\n}: {\r\n  columns: number;\r\n  rows: number;\r\n  order: GridOrder;\r\n  items: { id: string; [key: string]: any }[];\r\n}) {\r\n  const grid = createMatrix(rows, columns);\r\n  const itemsToSort = [...items];\r\n\r\n  iterateGridItems(order, (id, rowIndex, columnIndex) => {\r\n    const itemIndex = itemsToSort.findIndex(item => item.id === id);\r\n    const itemExists = itemIndex > -1;\r\n\r\n    const exceedsBoundaries = rowIndex >= rows || columnIndex >= columns;\r\n\r\n    if (itemExists && !exceedsBoundaries) {\r\n      const item = itemsToSort.splice(itemIndex, 1)[0];\r\n      grid[rowIndex][columnIndex] = item;\r\n    }\r\n  });\r\n\r\n  return fillEmptyGridCells(grid, itemsToSort);\r\n}\r\n\r\nfunction iterateGridItems(\r\n  grid: any[][],\r\n  callback: (item: any, rowIndex: number, columnIndex: number) => void\r\n) {\r\n  grid.forEach((row, rowIndex) => {\r\n    row.forEach((item, columnIndex) => {\r\n      callback(item, rowIndex, columnIndex);\r\n    });\r\n  });\r\n}\r\n\r\nfunction fillEmptyGridCells(grid: any[][], items: any[]) {\r\n  const itemQueue = [...items];\r\n\r\n  return grid.map(row =>\r\n    row.map(item => {\r\n      return item || itemQueue.shift();\r\n    })\r\n  );\r\n}\r\n\r\nexport function removeOrderItems(ids: string, order: GridOrder): GridOrder {\r\n  return order.map(row => row.map(id => (id && ids.includes(id) ? null : id)));\r\n}\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  createTile: {\r\n    id: 'cboard.components.Board.TileEditor.createTile',\r\n    defaultMessage: 'Create tile'\r\n  },\r\n  editTile: {\r\n    id: 'cboard.components.Board.TileEditor.editTile',\r\n    defaultMessage: 'Edit Tile'\r\n  },\r\n  label: {\r\n    id: 'cboard.components.Board.TileEditor.label',\r\n    defaultMessage: 'Label'\r\n  },\r\n  boardName: {\r\n    id: 'cboard.components.Board.TileEditor.boardName',\r\n    defaultMessage: 'Board Name'\r\n  },\r\n  vocalization: {\r\n    id: 'cboard.components.Board.TileEditor.vocalization',\r\n    defaultMessage: 'Vocalization'\r\n  },\r\n  voiceRecorder: {\r\n    id: 'cboard.components.Board.TileEditor.voiceRecorder',\r\n    defaultMessage: 'Voice Recorder'\r\n  },\r\n  board: {\r\n    id: 'cboard.components.Board.TileEditor.board',\r\n    defaultMessage: 'Empty Board'\r\n  },\r\n  button: {\r\n    id: 'cboard.components.Board.TileEditor.button',\r\n    defaultMessage: 'Button'\r\n  },\r\n  folder: {\r\n    id: 'cboard.components.Board.TileEditor.folder',\r\n    defaultMessage: 'Folder'\r\n  },\r\n  type: {\r\n    id: 'cboard.components.Board.TileEditor.type',\r\n    defaultMessage: 'Type'\r\n  },\r\n  back: {\r\n    id: 'cboard.components.Board.TileEditor.back',\r\n    defaultMessage: 'Back'\r\n  },\r\n  next: {\r\n    id: 'cboard.components.Board.TileEditor.next',\r\n    defaultMessage: 'Next'\r\n  },\r\n  symbolSearch: {\r\n    id: 'cboard.components.Board.TileEditor.symbolSearch',\r\n    defaultMessage: 'Symbol search'\r\n  },\r\n  existingBoards: {\r\n    id: 'cboard.components.Board.TileEditor.existingBoards',\r\n    defaultMessage: 'Link to an existing board'\r\n  },\r\n  none: {\r\n    id: 'cboard.components.Board.TileEditor.none',\r\n    defaultMessage: 'None'\r\n  },\r\n  symbols: {\r\n    id: 'cboard.components.Board.TileEditor.symbols',\r\n    defaultMessage: 'Symbols'\r\n  }\r\n});\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  back: {\r\n    id: 'cboard.components.BackButton.back',\r\n    defaultMessage: 'Go back'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\r\nimport ArrowForwardIcon from '@material-ui/icons/ArrowForward';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from './BackButton.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * If true, back button is disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * @ignore\r\n   */\r\n  theme: PropTypes.object.isRequired,\r\n  /**\r\n   * Callback fired when back button is clicked\r\n   */\r\n  onClick: PropTypes.func.isRequired\r\n};\r\n\r\nfunction BackButton(props) {\r\n  const { intl, theme, ...rest } = props;\r\n  const label = intl.formatMessage(messages.back);\r\n\r\n  return (\r\n    <IconButton id=\"back-button\" label={label} {...rest}>\r\n      {theme.direction === 'ltr' ? <ArrowBackIcon /> : <ArrowForwardIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nBackButton.propTypes = propTypes;\r\n\r\nexport default withStyles(null, { withTheme: true })(injectIntl(BackButton));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { withStyles, useTheme } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Fade from '@material-ui/core/Fade';\r\n\r\nimport messages from '../../App/App.messages';\r\nimport BackButton from '../BackButton';\r\nimport './FullScreenDialog.css';\r\n\r\nFullScreenDialog.propTypes = {\r\n  disableSubmit: PropTypes.bool,\r\n  open: PropTypes.bool,\r\n  fullWidth: PropTypes.bool,\r\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n  onClose: PropTypes.func,\r\n  onSubmit: PropTypes.func,\r\n  classes: PropTypes.object.isRequired,\r\n  className: PropTypes.string,\r\n  children: PropTypes.node\r\n};\r\n\r\nFullScreenDialog.defaultProps = {\r\n  onClose: () => {}\r\n};\r\n\r\nconst styles = {\r\n  appBar: {\r\n    position: 'static',\r\n    flexShrink: 0\r\n  },\r\n  title: {\r\n    flex: 1,\r\n    whiteSpace: 'nowrap',\r\n    textOverflow: 'ellipsis',\r\n    overflow: 'hidden'\r\n  },\r\n  container: {\r\n    background: '#f1f1f1',\r\n    height: '100%',\r\n    overflowY: 'auto',\r\n    WebkitOverflowScrolling: 'touch'\r\n  },\r\n  containerDark: {\r\n    background: '#1111',\r\n    height: '100%',\r\n    overflowY: 'auto',\r\n    WebkitOverflowScrolling: 'touch'\r\n  },\r\n  content: {\r\n    maxWidth: '680px',\r\n    margin: '0 auto'\r\n  },\r\n  contentFullWidth: {\r\n    margin: '0 auto'\r\n  }\r\n};\r\n\r\nconst transitions = {\r\n  UP: 'up',\r\n  FADE: 'fade'\r\n};\r\n\r\nconst TransitionUp = React.forwardRef((props, ref) => (\r\n  <Slide direction=\"up\" {...props} ref={ref} />\r\n));\r\nconst TransitionFade = React.forwardRef((props, ref) => (\r\n  <Fade {...props} ref={ref} />\r\n));\r\n\r\nfunction getTransition(transition) {\r\n  switch (transition) {\r\n    case transitions.UP:\r\n      return TransitionUp;\r\n    case transitions.FADE:\r\n      return TransitionFade;\r\n    default:\r\n    // no default\r\n  }\r\n}\r\n\r\nfunction FullScreenDialog(props) {\r\n  const {\r\n    classes,\r\n    children,\r\n    open,\r\n    title,\r\n    buttons,\r\n    disableSubmit,\r\n    onClose,\r\n    onSubmit,\r\n    transition = transitions.UP,\r\n    fullWidth\r\n  } = props;\r\n\r\n  const theme = useTheme();\r\n  const dark = theme.palette.type === 'dark' ? true : false;\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen\r\n      open={open}\r\n      TransitionComponent={getTransition(transition)}\r\n      onClose={onClose}\r\n    >\r\n      <AppBar className={classes.appBar}>\r\n        <Toolbar disableGutters>\r\n          <BackButton onClick={onClose} />\r\n\r\n          {title && (\r\n            <div className=\"FullScreenDialog__title\">\r\n              <Typography\r\n                variant=\"h6\"\r\n                color=\"inherit\"\r\n                className={classes.title}\r\n              >\r\n                {title}\r\n              </Typography>\r\n            </div>\r\n          )}\r\n          {buttons && (\r\n            <div className=\"FullScreenDialog__buttons\">{buttons}</div>\r\n          )}\r\n          {onSubmit && (\r\n            <Button\r\n              id=\"save-button\"\r\n              disabled={disableSubmit}\r\n              color=\"inherit\"\r\n              style={{ color: disableSubmit && 'rgba(255, 255, 255, 0.26)' }}\r\n              onClick={() => {\r\n                onSubmit();\r\n                onClose();\r\n              }}\r\n            >\r\n              <FormattedMessage {...messages.save} />\r\n            </Button>\r\n          )}\r\n        </Toolbar>\r\n      </AppBar>\r\n      <div className={dark ? classes.containerDark : classes.container}>\r\n        <div className={fullWidth ? classes.contentFullWidth : classes.content}>\r\n          {children}\r\n        </div>\r\n      </div>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withStyles(styles, { name: 'FullScreenDialog' })(\r\n  FullScreenDialog\r\n);\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nfunction FullScreenDialogContent({ className, children }) {\r\n  const fullScreenDialogContentClassName = classNames(\r\n    'FullScreenDialogContent',\r\n    className\r\n  );\r\n  return <div className={fullScreenDialogContentClassName}>{children}</div>;\r\n}\r\n\r\nexport { FullScreenDialogContent };\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FormGroup from '@material-ui/core/FormGroup';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport Switch from '@material-ui/core/Switch';\r\n\r\nimport './FilterBar.css';\r\n\r\nfunction FilterBar(props) {\r\n  const { onChange, options } = props;\r\n\r\n  return (\r\n    <div className=\"FilterBar\">\r\n      <FormGroup className=\"FilterBar__FormGroup\" row>\r\n        {options.map(opt => {\r\n          return (\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={opt.enabled}\r\n                  onChange={() => {\r\n                    onChange(opt);\r\n                  }}\r\n                  key={opt.id}\r\n                  value={opt.id}\r\n                  color=\"secondary\"\r\n                />\r\n              }\r\n              key={opt.id}\r\n              label={opt.text}\r\n              labelPlacement=\"bottom\"\r\n            />\r\n          );\r\n        })}\r\n      </FormGroup>\r\n    </div>\r\n  );\r\n}\r\n\r\nFilterBar.propTypes = {\r\n  onChange: PropTypes.func.isRequired,\r\n  options: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      id: PropTypes.string,\r\n      text: PropTypes.string,\r\n      enabled: PropTypes.bool\r\n    })\r\n  ).isRequired\r\n};\r\n\r\nFilterBar.defaultProps = {\r\n  buttons: []\r\n};\r\n\r\nexport default FilterBar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { isCordova } from '../../../cordova-util';\r\n\r\nimport { LABEL_POSITION_BELOW } from '../../Settings/Display/Display.constants';\r\nimport './Symbol.css';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Image to display\r\n   */\r\n  image: PropTypes.string,\r\n  /**\r\n   * Label to display\r\n   */\r\n  label: PropTypes.oneOfType([PropTypes.string, PropTypes.node]).isRequired,\r\n  labelpos: PropTypes.string\r\n};\r\n\r\nfunction Symbol(props) {\r\n  const { className, label, labelpos, ...other } = props;\r\n\r\n  // Cordova path cannot be absolute\r\n  const image =\r\n    isCordova() && props.image && props.image.search('/') === 0\r\n      ? `.${props.image}`\r\n      : props.image;\r\n\r\n  const symbolClassName = classNames('Symbol', className);\r\n\r\n  return (\r\n    <div className={symbolClassName} {...other}>\r\n      {props.labelpos === 'Above' && props.labelpos !== 'Hidden' && (\r\n        <div className=\"Symbol__label\">{label}</div>\r\n      )}\r\n      {image && (\r\n        <div className=\"Symbol__image-container\">\r\n          <img className=\"Symbol__image\" src={image} alt=\"\" />\r\n        </div>\r\n      )}\r\n      {props.labelpos === 'Below' && props.labelpos !== 'Hidden' && (\r\n        <div className=\"Symbol__label\">{label}</div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\nSymbol.propTypes = propTypes;\r\nSymbol.defaultProps = {\r\n  labelpos: LABEL_POSITION_BELOW\r\n};\r\n\r\nexport default Symbol;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  searchSymbolLibrary: {\r\n    id: 'cboard.components.SymbolSearch.searchSymbolLibrary',\r\n    defaultMessage: 'Search symbol library'\r\n  },\r\n  uploadAnImage: {\r\n    id: 'cboard.components.InputImage.uploadImage',\r\n    defaultMessage: 'Upload an image'\r\n  }\r\n});\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport Autosuggest from 'react-autosuggest';\r\nimport classNames from 'classnames';\r\nimport isMobile from 'ismobilejs';\r\nimport queryString from 'query-string';\r\nimport debounce from 'lodash/debounce';\r\n\r\nimport API from '../../../api';\r\nimport {\r\n  ARASAAC_BASE_PATH_API,\r\n  TAWASOL_BASE_IMAGE_URL\r\n} from '../../../constants';\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport FilterBar from '../../UI/FilterBar';\r\nimport Symbol from '../Symbol';\r\nimport { LABEL_POSITION_BELOW } from '../../Settings/Display/Display.constants';\r\nimport messages from './SymbolSearch.messages';\r\nimport './SymbolSearch.css';\r\n\r\nconst SymbolSets = {\r\n  mulberry: '0',\r\n  global: '1',\r\n  arasaac: '2'\r\n};\r\n\r\nconst symbolSetsOptions = [\r\n  {\r\n    id: SymbolSets.mulberry,\r\n    text: 'Mulberry',\r\n    enabled: true\r\n  },\r\n  {\r\n    id: SymbolSets.global,\r\n    text: 'Global Symbols',\r\n    enabled: true\r\n  },\r\n  {\r\n    id: SymbolSets.arasaac,\r\n    text: 'ARASAAC',\r\n    enabled: true\r\n  }\r\n];\r\n\r\nexport class SymbolSearch extends PureComponent {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    open: PropTypes.bool,\r\n    maxSuggestions: PropTypes.number,\r\n    onChange: PropTypes.func.isRequired,\r\n    onClose: PropTypes.func.isRequired\r\n  };\r\n\r\n  static defaultProps = {\r\n    open: false,\r\n    maxSuggestions: 16\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: '',\r\n      suggestions: [],\r\n      skin: 'white',\r\n      hair: 'brown',\r\n      symbolSets: symbolSetsOptions\r\n    };\r\n\r\n    this.symbols = [];\r\n  }\r\n\r\n  async componentDidMount() {\r\n    import('../../../api/mulberry-symbols.json').then(\r\n      ({ default: mulberrySymbols }) => {\r\n        this.symbols = this.translateSymbols(mulberrySymbols);\r\n      }\r\n    );\r\n  }\r\n\r\n  translateSymbols(symbols = []) {\r\n    return symbols.map(symbol => {\r\n      const translatedId = this.props.intl\r\n        .formatMessage({ id: symbol.id })\r\n        .replace(/[\\u0591-\\u05C7]/g, '') // todo: not on every locale - strip hebrew niqqud\r\n        .toLowerCase();\r\n\r\n      return { ...symbol, translatedId };\r\n    });\r\n  }\r\n\r\n  getSuggestionValue(suggestion) {\r\n    return suggestion.id;\r\n  }\r\n\r\n  getMulberrySuggestions(value) {\r\n    const { maxSuggestions } = this.props;\r\n    const inputValue = value.trim().toLowerCase();\r\n    const inputLength = inputValue.length;\r\n    let count = 0;\r\n\r\n    return this.symbols.filter(symbol => {\r\n      if (count >= maxSuggestions) {\r\n        return false;\r\n      }\r\n      const translatedId = symbol.translatedId;\r\n      let keep = translatedId.slice(0, inputLength) === inputValue;\r\n\r\n      if (!keep) {\r\n        const words = translatedId.split(' ');\r\n\r\n        for (let i = 1; i < words.length; i += 1) {\r\n          keep = words[i].slice(0, inputLength) === inputValue;\r\n\r\n          if (keep) {\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n      if (keep) {\r\n        count += 1;\r\n      }\r\n      return keep;\r\n    });\r\n  }\r\n\r\n  fetchArasaacSuggestions = async searchText => {\r\n    const {\r\n      intl: { locale }\r\n    } = this.props;\r\n    const { skin, hair } = this.state;\r\n    try {\r\n      const data = await API.arasaacPictogramsSearch(locale, searchText);\r\n      if (data.length) {\r\n        const suggestions = [\r\n          ...this.state.suggestions.filter(\r\n            suggestion => !suggestion.fromArasaac\r\n          )\r\n        ];\r\n        const arasaacSuggestions = data.map(\r\n          ({ _id: idPictogram, keywords: [keyword] }) => {\r\n            return {\r\n              id: keyword.keyword,\r\n              src: `${ARASAAC_BASE_PATH_API}pictograms/${idPictogram}?${queryString.stringify(\r\n                { skin, hair }\r\n              )}`,\r\n              translatedId: keyword.keyword,\r\n              fromArasaac: true\r\n            };\r\n          }\r\n        );\r\n        this.setState({ suggestions: [...suggestions, ...arasaacSuggestions] });\r\n      }\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  fetchTawasolSuggestions = async searchText => {\r\n    const {\r\n      intl: { locale }\r\n    } = this.props;\r\n\r\n    try {\r\n      const data = await API.tawasolPictogramsSearch(locale, searchText);\r\n      if (data.length) {\r\n        const suggestions = [\r\n          ...this.state.suggestions.filter(\r\n            suggestion => !suggestion.fromTawasol\r\n          )\r\n        ];\r\n        const tawasolSuggestions = data\r\n          .filter(pictogram => pictogram.source_id === '1')\r\n          .map(({ description, image_uri }) => {\r\n            return {\r\n              id: description,\r\n              src: `${TAWASOL_BASE_IMAGE_URL}${image_uri}`,\r\n              translatedId: description,\r\n              fromTawasol: true\r\n            };\r\n          });\r\n        this.setState({ suggestions: [...suggestions, ...tawasolSuggestions] });\r\n      }\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  fetchGlobalsymbolsSuggestions = async searchText => {\r\n    const {\r\n      intl: { locale }\r\n    } = this.props;\r\n    try {\r\n      let language = locale !== 'me' ? locale : 'cnr';\r\n      const data = await API.globalsymbolsPictogramsSearch(\r\n        language,\r\n        searchText\r\n      );\r\n      if (data.length) {\r\n        const suggestions = [\r\n          ...this.state.suggestions.filter(\r\n            suggestion => !suggestion.fromGlobalsymbols\r\n          )\r\n        ];\r\n        let globalsymbolsSuggestions = [];\r\n        data.forEach(function(element) {\r\n          globalsymbolsSuggestions.push({\r\n            id: element.text,\r\n            src: element.picto.image_url,\r\n            translatedId: element.text,\r\n            fromGlobalsymbols: true\r\n          });\r\n        });\r\n        this.setState({\r\n          suggestions: [...suggestions, ...globalsymbolsSuggestions]\r\n        });\r\n      }\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  };\r\n\r\n  getSuggestions(value) {\r\n    this.setState({\r\n      suggestions: []\r\n    });\r\n    if (this.state.symbolSets[SymbolSets.global].enabled) {\r\n      this.fetchGlobalsymbolsSuggestions(value);\r\n    }\r\n    if (this.state.symbolSets[SymbolSets.arasaac].enabled) {\r\n      this.fetchArasaacSuggestions(value);\r\n    }\r\n    this.fetchTawasolSuggestions(value);\r\n\r\n    if (this.state.symbolSets[SymbolSets.mulberry].enabled) {\r\n      this.setState({\r\n        suggestions: this.getMulberrySuggestions(value)\r\n      });\r\n    }\r\n  }\r\n\r\n  debouncedGetSuggestions = debounce(this.getSuggestions, 300);\r\n\r\n  handleSuggestionsFetchRequested = async ({ value }) => {\r\n    this.debouncedGetSuggestions(value);\r\n  };\r\n\r\n  handleSuggestionsClearRequested = () => {};\r\n\r\n  handleSuggestionSelected = (event, { suggestion }) => {\r\n    const { onChange, onClose } = this.props;\r\n    this.setState({ value: '' });\r\n\r\n    onChange({\r\n      image: suggestion.src,\r\n      label: suggestion.translatedId,\r\n      labelKey: undefined\r\n    });\r\n    onClose();\r\n  };\r\n\r\n  handleChange = (event, { newValue }) => {\r\n    this.setState({\r\n      value: newValue\r\n    });\r\n  };\r\n\r\n  renderSuggestion(suggestion, { query, isHighlighted }) {\r\n    const suggestionClassName = classNames('SymbolSearch__Suggestion', {\r\n      'SymbolSearch__Suggestion--highlighted': isHighlighted\r\n    });\r\n\r\n    return (\r\n      <div className={suggestionClassName}>\r\n        <Symbol\r\n          label={suggestion.translatedId}\r\n          image={suggestion.src}\r\n          labelpos={LABEL_POSITION_BELOW}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  renderSuggestionsContainer(options) {\r\n    const { containerProps, children } = options;\r\n    return <div {...containerProps}>{children}</div>;\r\n  }\r\n\r\n  handleChangeOption = opt => {\r\n    const newSymbolSets = this.state.symbolSets.map(option => {\r\n      if (option.id === opt.id) {\r\n        option.enabled = !option.enabled;\r\n      }\r\n      return option;\r\n    });\r\n    this.setState({\r\n      symbolSets: newSymbolSets\r\n    });\r\n    this.getSuggestions(this.state.value);\r\n  };\r\n\r\n  render() {\r\n    const { intl, open, onClose } = this.props;\r\n\r\n    const autoSuggest = (\r\n      <Autosuggest\r\n        aria-label=\"Search auto-suggest\"\r\n        alwaysRenderSuggestions={true}\r\n        suggestions={this.state.suggestions}\r\n        focusInputOnSuggestionClick={!isMobile.any}\r\n        onSuggestionsFetchRequested={this.handleSuggestionsFetchRequested}\r\n        onSuggestionsClearRequested={this.handleSuggestionsClearRequested}\r\n        onSuggestionSelected={this.handleSuggestionSelected}\r\n        renderSuggestionsContainer={this.renderSuggestionsContainer}\r\n        getSuggestionValue={this.getSuggestionValue}\r\n        renderSuggestion={this.renderSuggestion}\r\n        highlightFirstSuggestion={true}\r\n        inputProps={{\r\n          autoFocus: true,\r\n          placeholder: intl.formatMessage(messages.searchSymbolLibrary),\r\n          label: intl.formatMessage(messages.searchSymbolLibrary),\r\n          value: this.state.value,\r\n          onChange: this.handleChange\r\n        }}\r\n      />\r\n    );\r\n\r\n    return (\r\n      <div>\r\n        <FullScreenDialog\r\n          open={open}\r\n          buttons={autoSuggest}\r\n          transition=\"fade\"\r\n          onClose={onClose}\r\n        >\r\n          <FilterBar\r\n            options={this.state.symbolSets}\r\n            onChange={this.handleChangeOption}\r\n          />\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(SymbolSearch);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { Scannable } from 'react-scannable';\r\n\r\nimport './Tile.css';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Background color\r\n   */\r\n  backgroundColor: PropTypes.string,\r\n  /**\r\n   * Border color\r\n   */\r\n  borderColor: PropTypes.string,\r\n  /**\r\n   * Content of tile\r\n   */\r\n  children: PropTypes.node,\r\n  /**\r\n   * @ignore\r\n   */\r\n  className: PropTypes.string,\r\n  /**\r\n   * Type of tile\r\n   */\r\n  variant: PropTypes.oneOf(['button', 'folder', 'board'])\r\n};\r\n\r\nconst defaultProps = {};\r\n\r\nconst Tile = props => {\r\n  const {\r\n    backgroundColor,\r\n    borderColor,\r\n    children,\r\n    className: classNameProp,\r\n    variant,\r\n    ...other\r\n  } = props;\r\n\r\n  const folder = variant === 'folder';\r\n  const className = classNames('Tile', classNameProp, {\r\n    'Tile--folder': folder\r\n  });\r\n\r\n  const tileShapeClassName = classNames('TileShape', {\r\n    'TileShape--folder': folder\r\n  });\r\n\r\n  const tileShapeStyles = {};\r\n\r\n  if (borderColor) {\r\n    tileShapeStyles.borderColor = borderColor;\r\n  }\r\n\r\n  if (backgroundColor) {\r\n    tileShapeStyles.backgroundColor = backgroundColor;\r\n  }\r\n\r\n  const onSelect = (event, scannable, scanner) => {\r\n    if (folder) {\r\n      scanner.reset();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Scannable onSelect={onSelect} id={'scannable'}>\r\n      <button className={className} type=\"button\" {...other}>\r\n        <div className={tileShapeClassName} style={tileShapeStyles} />\r\n        {children}\r\n      </button>\r\n    </Scannable>\r\n  );\r\n};\r\n\r\nTile.propTypes = propTypes;\r\nTile.defaultProps = defaultProps;\r\n\r\nexport default Tile;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  uploadImage: {\r\n    id: 'cboard.components.InputImage.uploadImage',\r\n    defaultMessage: 'Upload image'\r\n  }\r\n});\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport {\r\n  requestCvaPermissions,\r\n  isAndroid,\r\n  isCordova,\r\n  writeCvaFile\r\n} from '../../../cordova-util';\r\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera';\r\nimport readAndCompressImage from 'browser-image-resizer';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\n\r\nimport API from '../../../api';\r\nimport messages from './InputImage.messages';\r\nimport './InputImage.css';\r\n\r\nclass InputImage extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    intl: intlShape.isRequired,\r\n    user: PropTypes.object,\r\n    /**\r\n     * Callback fired when input changes\r\n     */\r\n    onChange: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = {\r\n    loading: false\r\n  };\r\n\r\n  blobToBase64(blob) {\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = () => {\r\n      this.props.onChange(reader.result);\r\n    };\r\n\r\n    reader.readAsDataURL(blob);\r\n  }\r\n\r\n  async resizeImage(\r\n    file,\r\n    config = {\r\n      quality: 7,\r\n      maxWidth: 200,\r\n      maxHeight: 200,\r\n      autoRotate: true,\r\n      debug: false,\r\n      mimeType: 'image/png'\r\n    }\r\n  ) {\r\n    const resizedImage = await readAndCompressImage(file, config);\r\n    return resizedImage;\r\n  }\r\n\r\n  handleChange = async event => {\r\n    const { onChange, user } = this.props;\r\n    const file = event.target.files[0];\r\n    const resizedImage = await this.resizeImage(file);\r\n    // Loggedin user?\r\n    if (user) {\r\n      this.setState({\r\n        loading: true\r\n      });\r\n      try {\r\n        const imageUrl = await API.uploadFile(resizedImage, file.name);\r\n        onChange(imageUrl);\r\n      } catch (error) {\r\n        this.saveLocalImage(file.name, resizedImage);\r\n      } finally {\r\n        this.setState({\r\n          loading: false\r\n        });\r\n      }\r\n    } else {\r\n      this.saveLocalImage(file.name, resizedImage);\r\n    }\r\n  };\r\n\r\n  saveLocalImage = async (fileName, data) => {\r\n    const { onChange } = this.props;\r\n    if (isAndroid()) {\r\n      const filePath = '/Android/data/com.unicef.cboard/files/' + fileName;\r\n      const fEntry = await writeCvaFile(filePath, data);\r\n      onChange(fEntry.nativeURL);\r\n    } else {\r\n      const imageBase64 = this.blobToBase64(data);\r\n      onChange(imageBase64);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    if (isCordova()) {\r\n      requestCvaPermissions();\r\n    }\r\n    return (\r\n      <div className=\"InputImage\">\r\n        <PhotoCameraIcon />\r\n        {this.state.loading ? (\r\n          <CircularProgress size={24} thickness={7} />\r\n        ) : (\r\n          <label className=\"InputImage__label\">\r\n            {intl.formatMessage(messages.uploadImage)}\r\n            <input\r\n              className=\"InputImage__input\"\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={this.handleChange}\r\n            />\r\n          </label>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(InputImage);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport InputImage from './InputImage.component';\r\n\r\nconst InputImageContainer = props => <InputImage {...props} />;\r\n\r\nconst mapStateToProps = ({ app: { userData } }, ownProps) => ({\r\n  ...ownProps,\r\n  user: userData.email ? userData : null\r\n});\r\n\r\nexport default connect(mapStateToProps)(InputImageContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Stroke width\r\n   */\r\n  strokeWidth: PropTypes.number,\r\n  /**\r\n   * Fill color\r\n   */\r\n  fill: PropTypes.string\r\n};\r\n\r\nconst defaultProps = {\r\n  fill: 'transparent'\r\n};\r\n\r\nfunction Circle(props) {\r\n  const { fill } = props;\r\n\r\n  return (\r\n    <svg height=\"48\" width=\"48\">\r\n      <circle\r\n        cx=\"24\"\r\n        cy=\"24\"\r\n        r=\"15\"\r\n        fill={fill}\r\n        stroke=\"grey\"\r\n        strokeWidth=\"1\"\r\n      />\r\n    </svg>\r\n  );\r\n}\r\n\r\nCircle.propTypes = propTypes;\r\nCircle.defaultProps = defaultProps;\r\n\r\nexport default Circle;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  color: {\r\n    id: 'cboard.components.ColorSelect.color',\r\n    defaultMessage: 'Color'\r\n  },\r\n  clearSelection: {\r\n    id: 'cboard.components.ColorSelect.clearSelection',\r\n    defaultMessage: 'Clear selection'\r\n  },\r\n  colorScheme: {\r\n    id: 'cboard.components.ColorSelect.colorScheme',\r\n    defaultMessage: 'Color Scheme'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { InputLabel, Select } from '@material-ui/core';\r\n\r\nimport IconButton from '../IconButton';\r\nimport Circle from './Circle';\r\nimport messages from './ColorSelect.messages';\r\n\r\nconst colorSchemes = [\r\n  {\r\n    name: 'Cboard',\r\n    colors: ['#bbdefb', '#fff176', '#CE93D8', '#2196F3', '#4CAF50', '#E57373']\r\n  },\r\n  {\r\n    name: 'Fitzgerald',\r\n    colors: [\r\n      '#2196F3',\r\n      '#4CAF50',\r\n      '#fff176',\r\n      '#ff6600',\r\n      '#ffffff',\r\n      '#ffc0cb',\r\n      '#800080',\r\n      '#a52a2a',\r\n      '#ff0000',\r\n      '#808080'\r\n    ]\r\n  },\r\n  {\r\n    name: 'Goossens',\r\n    colors: ['#ffc0cb', '#2196F3', '#4CAF50', '#fff176', '#ff6600']\r\n  }\r\n];\r\n\r\nconst propTypes = {\r\n  intl: intlShape.isRequired,\r\n  onChange: PropTypes.func.isRequired,\r\n  selectedColor: PropTypes.string.isRequired\r\n};\r\n\r\nclass ColorSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      colorMenu: colorSchemes[0]\r\n    };\r\n  }\r\n\r\n  handleColorSchemeChange = event => {\r\n    this.setState({ colorMenu: event.target.value });\r\n  };\r\n\r\n  render() {\r\n    const { intl, onChange, selectedColor } = this.props;\r\n    const colorLabel = intl.formatMessage(messages.color);\r\n    const radioGroupStyle = { flexDirection: 'row' };\r\n    const radioItemStyle = { padding: '2px' };\r\n\r\n    return (\r\n      <FormControl className=\"ColorSelect\">\r\n        <div>\r\n          <FormControl fullWidth id=\"color-scheme-menu\">\r\n            <InputLabel id=\"color-scheme-menu-label\">\r\n              {intl.formatMessage(messages.colorScheme)}\r\n            </InputLabel>\r\n            <Select\r\n              id=\"color-scheme\"\r\n              labelId=\"color-scheme-menu-label\"\r\n              value={this.state.colorMenu}\r\n              onChange={this.handleColorSchemeChange}\r\n            >\r\n              <MenuItem value={colorSchemes[0]}>\r\n                {colorSchemes[0].name}\r\n              </MenuItem>\r\n              <MenuItem value={colorSchemes[1]}>\r\n                {colorSchemes[1].name}\r\n              </MenuItem>\r\n              <MenuItem value={colorSchemes[2]}>\r\n                {colorSchemes[2].name}\r\n              </MenuItem>\r\n            </Select>\r\n          </FormControl>\r\n        </div>\r\n        <RadioGroup\r\n          aria-label={colorLabel}\r\n          name=\"color\"\r\n          value={selectedColor}\r\n          style={radioGroupStyle}\r\n          onChange={onChange}\r\n        >\r\n          {this.state.colorMenu.colors.map(color => (\r\n            <Radio\r\n              key={color}\r\n              value={color}\r\n              style={radioItemStyle}\r\n              icon={<Circle fill={color} />}\r\n              checkedIcon={<Circle fill={color} />}\r\n            />\r\n          ))}\r\n          {selectedColor && (\r\n            <IconButton\r\n              label={intl.formatMessage(messages.clearSelection)}\r\n              onClick={() => {\r\n                onChange();\r\n              }}\r\n            >\r\n              <CloseIcon />\r\n            </IconButton>\r\n          )}\r\n        </RadioGroup>\r\n      </FormControl>\r\n    );\r\n  }\r\n}\r\n\r\nColorSelect.propTypes = propTypes;\r\nexport default injectIntl(ColorSelect);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  play: {\r\n    id: 'cboard.components.VoiceRecorder.play',\r\n    defaultMessage: 'Play recording'\r\n  },\r\n  clear: {\r\n    id: 'cboard.components.VoiceRecorder.clear',\r\n    defaultMessage: 'Clear recording'\r\n  },\r\n  record: {\r\n    id: 'cboard.components.VoiceRecorder.record',\r\n    defaultMessage: 'Record'\r\n  }\r\n});\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport MicIcon from '@material-ui/icons/Mic';\r\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nimport IconButton from '../UI/IconButton';\r\nimport { isCordova, requestCvaPermissions } from '../../cordova-util';\r\nimport messages from './VoiceRecorder.messages';\r\nimport './VoiceRecorder.css';\r\n\r\nclass VoiceRecorder extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * Audio source\r\n     */\r\n    src: PropTypes.string,\r\n    /**\r\n     * Callback, fired when audio recording changes\r\n     */\r\n    onChange: PropTypes.func.isRequired,\r\n    /**\r\n     * User info\r\n     */\r\n    user: PropTypes.object,\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  state = {\r\n    isRecording: false,\r\n    isPlaying: false\r\n  };\r\n  componentDidMount() {\r\n    if (isCordova()) {\r\n      requestCvaPermissions();\r\n    }\r\n  }\r\n\r\n  startRecording = () => {\r\n    navigator.mediaDevices\r\n      .getUserMedia({ audio: true })\r\n      .then(stream => {\r\n        this.mediaRecorder = new window.MediaRecorder(stream);\r\n        this.mediaRecorder.start();\r\n        this.setState({ isRecording: true });\r\n      })\r\n      .catch(function(err) {\r\n        console.log(err.message);\r\n      });\r\n  };\r\n\r\n  stopRecording = () => {\r\n    this.mediaRecorder.stop();\r\n\r\n    this.mediaRecorder.ondataavailable = event => {\r\n      this.chunks = event.data;\r\n      this.setState({ isRecording: false });\r\n    };\r\n\r\n    this.mediaRecorder.onstop = () => {\r\n      const { onChange } = this.props;\r\n      let audio;\r\n\r\n      const reader = new window.FileReader();\r\n      reader.readAsDataURL(this.chunks);\r\n      const mediaReader = new window.FileReader();\r\n      mediaReader.readAsArrayBuffer(this.chunks);\r\n\r\n      reader.onloadend = async () => {\r\n        audio = reader.result;\r\n        if (onChange) {\r\n          onChange(audio);\r\n        }\r\n      };\r\n      this.chunks = '';\r\n    };\r\n  };\r\n\r\n  playAudio = src => {\r\n    const audio = new Audio();\r\n    audio.src = src;\r\n    audio.addEventListener('ended', () => {\r\n      this.setState({ isPlaying: false });\r\n    });\r\n    audio.play();\r\n  };\r\n\r\n  handleRecordClick = () => {\r\n    if (this.state.isRecording) {\r\n      this.stopRecording();\r\n    } else {\r\n      this.startRecording();\r\n    }\r\n  };\r\n\r\n  handlePlayClick = () => {\r\n    const { src } = this.props;\r\n    this.setState({ isPlaying: true });\r\n    this.playAudio(src);\r\n  };\r\n\r\n  handleClear = () => {\r\n    const { onChange } = this.props;\r\n    onChange('');\r\n  };\r\n\r\n  render() {\r\n    const { src, intl } = this.props;\r\n    const recordStyle = {\r\n      color: this.state.isRecording ? 'red' : 'grey'\r\n    };\r\n    const playStyle = {\r\n      color: this.state.isPlaying ? 'green' : 'grey'\r\n    };\r\n\r\n    return (\r\n      <div className=\"VoiceRecorder\">\r\n        <IconButton\r\n          onClick={this.handleRecordClick}\r\n          label={intl.formatMessage(messages.record)}\r\n        >\r\n          <MicIcon fontSize=\"large\" style={recordStyle} />\r\n        </IconButton>\r\n        {this.state.isRecording && (\r\n          <div className=\"VoiceRecorder__progress\">\r\n            <LinearProgress color=\"secondary\" />\r\n          </div>\r\n        )}\r\n        {src && !this.state.isRecording && (\r\n          <>\r\n            <IconButton\r\n              onClick={this.handlePlayClick}\r\n              label={intl.formatMessage(messages.play)}\r\n            >\r\n              <PlayArrowIcon fontSize=\"large\" style={playStyle} />\r\n            </IconButton>\r\n            <IconButton\r\n              onClick={this.handleClear}\r\n              label={intl.formatMessage(messages.clear)}\r\n            >\r\n              <ClearIcon fontSize=\"large\" style={{ color: 'grey' }} />\r\n            </IconButton>\r\n          </>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(VoiceRecorder);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport VoiceRecorder from './VoiceRecorder.component';\r\n\r\nconst VoiceRecorderContainer = props => <VoiceRecorder {...props} />;\r\n\r\nconst mapStateToProps = ({ app: { userData } }, ownProps) => ({\r\n  ...ownProps,\r\n  user: userData.email ? userData : null\r\n});\r\n\r\nexport default connect(mapStateToProps)(VoiceRecorderContainer);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport shortid from 'shortid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport FormLabel from '@material-ui/core/FormLabel';\r\nimport Radio from '@material-ui/core/Radio';\r\nimport RadioGroup from '@material-ui/core/RadioGroup';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport MobileStepper from '@material-ui/core/MobileStepper';\r\nimport Button from '@material-ui/core/Button';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\n\r\nimport messages from './TileEditor.messages';\r\nimport SymbolSearch from '../SymbolSearch';\r\nimport Symbol from '../Symbol';\r\nimport Tile from '../Tile';\r\nimport FullScreenDialog, {\r\n  FullScreenDialogContent\r\n} from '../../UI/FullScreenDialog';\r\nimport InputImage from '../../UI/InputImage';\r\nimport IconButton from '../../UI/IconButton';\r\nimport ColorSelect from '../../UI/ColorSelect';\r\nimport VoiceRecorder from '../../VoiceRecorder';\r\nimport './TileEditor.css';\r\n\r\nexport class TileEditor extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    intl: intlShape.isRequired,\r\n    /**\r\n     * If true, TileEditor will be visibile\r\n     */\r\n    open: PropTypes.bool,\r\n    /**\r\n     * Callback fired on TileEditor request to be hidden\r\n     */\r\n    onClose: PropTypes.func.isRequired,\r\n    /**\r\n     * Tiles array to work on\r\n     */\r\n    editingTiles: PropTypes.array,\r\n    /**\r\n     * Callback fired when submitting edited board tiles\r\n     */\r\n    onEditSubmit: PropTypes.func.isRequired,\r\n    /**\r\n     * Callback fired when submitting a new board tile\r\n     */\r\n    onAddSubmit: PropTypes.func.isRequired,\r\n    boards: PropTypes.array\r\n  };\r\n\r\n  static defaultProps = {\r\n    editingTiles: []\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.defaultTileColors = {\r\n      folder: '#bbdefb',\r\n      button: '#fff176',\r\n      board: '#999999'\r\n    };\r\n\r\n    this.defaultTile = {\r\n      label: '',\r\n      labelKey: '',\r\n      vocalization: '',\r\n      image: '',\r\n      loadBoard: '',\r\n      sound: '',\r\n      type: 'button',\r\n      backgroundColor: this.defaultTileColors.button,\r\n      linkedBoard: false\r\n    };\r\n\r\n    this.state = {\r\n      activeStep: 0,\r\n      editingTiles: props.editingTiles,\r\n      isSymbolSearchOpen: false,\r\n      selectedBackgroundColor: '',\r\n      tile: this.defaultTile,\r\n      linkedBoard: ''\r\n    };\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(props) {\r\n    this.updateTileProperty('id', shortid.generate()); // todo not here\r\n    this.setState({ editingTiles: props.editingTiles });\r\n  }\r\n\r\n  editingTile() {\r\n    return this.state.editingTiles[this.state.activeStep];\r\n  }\r\n\r\n  currentTileProp(prop) {\r\n    const currentTile = this.editingTile();\r\n    return currentTile ? currentTile[prop] : this.state.tile[prop];\r\n  }\r\n\r\n  updateEditingTile(id, property, value) {\r\n    return state => {\r\n      const editingTiles = state.editingTiles.map(b =>\r\n        b.id === id ? { ...b, ...{ [property]: value } } : b\r\n      );\r\n      return { ...state, editingTiles };\r\n    };\r\n  }\r\n\r\n  updateNewTile(property, value) {\r\n    return state => {\r\n      const tile = { ...state.tile, [property]: value };\r\n      return { ...state, tile };\r\n    };\r\n  }\r\n\r\n  updateTileProperty(property, value) {\r\n    if (this.editingTile()) {\r\n      this.setState(\r\n        this.updateEditingTile(this.editingTile().id, property, value)\r\n      );\r\n    } else {\r\n      this.setState(this.updateNewTile(property, value));\r\n    }\r\n  }\r\n\r\n  handleSubmit = () => {\r\n    const { onEditSubmit, onAddSubmit } = this.props;\r\n\r\n    this.setState({\r\n      activeStep: 0,\r\n      selectedBackgroundColor: '',\r\n      tile: this.defaultTile\r\n    });\r\n\r\n    if (this.editingTile()) {\r\n      onEditSubmit(this.state.editingTiles);\r\n    } else {\r\n      const tileToAdd = this.state.tile;\r\n      const selectedBackgroundColor = this.state.selectedBackgroundColor;\r\n\r\n      if (selectedBackgroundColor) {\r\n        tileToAdd.backgroundColor = selectedBackgroundColor;\r\n      }\r\n      onAddSubmit(tileToAdd);\r\n    }\r\n  };\r\n\r\n  handleCancel = () => {\r\n    const { onClose } = this.props;\r\n\r\n    this.setState({\r\n      activeStep: 0,\r\n      selectedBackgroundColor: '',\r\n      tile: this.defaultTile\r\n    });\r\n    onClose();\r\n  };\r\n\r\n  handleInputImageChange = image => {\r\n    this.updateTileProperty('image', image);\r\n  };\r\n\r\n  handleSymbolSearchChange = ({ image, labelKey, label }) => {\r\n    this.updateTileProperty('labelKey', labelKey);\r\n    this.updateTileProperty('label', label);\r\n    this.updateTileProperty('image', image);\r\n  };\r\n\r\n  handleSymbolSearchClose = event => {\r\n    this.setState({ isSymbolSearchOpen: false });\r\n  };\r\n\r\n  handleLabelChange = event => {\r\n    this.updateTileProperty('label', event.target.value);\r\n    this.updateTileProperty('labelKey', '');\r\n  };\r\n\r\n  handleVocalizationChange = event => {\r\n    this.updateTileProperty('vocalization', event.target.value);\r\n  };\r\n  handleSoundChange = sound => {\r\n    this.updateTileProperty('sound', sound);\r\n  };\r\n  handleTypeChange = (event, type) => {\r\n    let loadBoard = '';\r\n    if (type === 'folder' || type === 'board') {\r\n      loadBoard = shortid.generate();\r\n    }\r\n    let backgroundColor = this.defaultTileColors.button;\r\n    if (type === 'board') {\r\n      backgroundColor = this.defaultTileColors.board;\r\n    }\r\n    if (type === 'folder') {\r\n      backgroundColor = this.defaultTileColors.folder;\r\n    }\r\n    const tile = {\r\n      ...this.state.tile,\r\n      linkedBoard: false,\r\n      backgroundColor,\r\n      loadBoard,\r\n      type\r\n    };\r\n    this.setState({ tile, linkedBoard: '' });\r\n  };\r\n\r\n  handleBack = event => {\r\n    this.setState({ activeStep: this.state.activeStep - 1 });\r\n    this.setState({ selectedBackgroundColor: '', linkedBoard: '' });\r\n  };\r\n\r\n  handleNext = event => {\r\n    this.setState({ activeStep: this.state.activeStep + 1 });\r\n    this.setState({ selectedBackgroundColor: '', linkedBoard: '' });\r\n  };\r\n\r\n  handleSearchClick = event => {\r\n    this.setState({ isSymbolSearchOpen: true });\r\n  };\r\n\r\n  handleColorChange = event => {\r\n    const color = event ? event.target.value : '';\r\n    this.setState({ selectedBackgroundColor: color });\r\n    if (event) {\r\n      this.updateTileProperty('backgroundColor', event.target.value);\r\n    } else {\r\n      this.updateTileProperty('backgroundColor', this.getDefaultColor());\r\n    }\r\n  };\r\n\r\n  getDefaultColor = () => {\r\n    if (this.currentTileProp('type') === 'folder') {\r\n      return this.defaultTileColors.folder;\r\n    }\r\n    if (this.currentTileProp('type') === 'button') {\r\n      return this.defaultTileColors.button;\r\n    }\r\n    if (this.currentTileProp('type') === 'board') {\r\n      return this.defaultTileColors.board;\r\n    }\r\n  };\r\n\r\n  handleBoardsChange = event => {\r\n    const board = event ? event.target.value : '';\r\n    this.setState({ linkedBoard: board });\r\n    if (board && board !== 'none') {\r\n      this.updateTileProperty('linkedBoard', true);\r\n      this.updateTileProperty('loadBoard', board.id);\r\n    } else {\r\n      this.updateTileProperty('linkedBoard', false);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { open, intl, boards } = this.props;\r\n\r\n    const currentLabel = this.currentTileProp('labelKey')\r\n      ? intl.formatMessage({ id: this.currentTileProp('labelKey') })\r\n      : this.currentTileProp('label');\r\n\r\n    const buttons = (\r\n      <IconButton\r\n        label={intl.formatMessage(messages.symbolSearch)}\r\n        onClick={this.handleSearchClick}\r\n      >\r\n        <SearchIcon />\r\n      </IconButton>\r\n    );\r\n    const selectBoardElement = (\r\n      <div>\r\n        <FormControl fullWidth>\r\n          <InputLabel id=\"boards-input-label\">\r\n            {intl.formatMessage(messages.existingBoards)}\r\n          </InputLabel>\r\n          <Select\r\n            labelId=\"boards-select-label\"\r\n            id=\"boards-select\"\r\n            autoWidth={true}\r\n            value={this.state.linkedBoard}\r\n            onChange={this.handleBoardsChange}\r\n          >\r\n            <MenuItem value=\"none\">\r\n              <em>{intl.formatMessage(messages.none)}</em>\r\n            </MenuItem>\r\n            {boards.map(\r\n              board =>\r\n                !board.hidden && (\r\n                  <MenuItem key={board.id} value={board}>\r\n                    {board.name}\r\n                  </MenuItem>\r\n                )\r\n            )}\r\n          </Select>\r\n        </FormControl>\r\n      </div>\r\n    );\r\n    const tileInView = this.editingTile()\r\n      ? this.editingTile()\r\n      : this.state.tile;\r\n\r\n    return (\r\n      <div className=\"TileEditor\">\r\n        <FullScreenDialog\r\n          disableSubmit={!currentLabel}\r\n          buttons={buttons}\r\n          open={open}\r\n          title={\r\n            <FormattedMessage\r\n              {...(this.editingTile()\r\n                ? messages.editTile\r\n                : messages.createTile)}\r\n            />\r\n          }\r\n          onClose={this.handleCancel}\r\n          onSubmit={this.handleSubmit}\r\n        >\r\n          <Paper>\r\n            <FullScreenDialogContent className=\"TileEditor__container\">\r\n              <div className=\"TileEditor__row\">\r\n                <div className=\"TileEditor__main-info\">\r\n                  <div className=\"TileEditor__picto-fields\">\r\n                    <div className=\"TileEditor__preview\">\r\n                      <Tile\r\n                        backgroundColor={\r\n                          this.state.selectedBackgroundColor ||\r\n                          tileInView.backgroundColor\r\n                        }\r\n                        variant={\r\n                          Boolean(tileInView.loadBoard) ? 'folder' : 'button'\r\n                        }\r\n                      >\r\n                        <Symbol image={tileInView.image} label={currentLabel} />\r\n                      </Tile>\r\n                    </div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      startIcon={<SearchIcon />}\r\n                      onClick={this.handleSearchClick}\r\n                    >\r\n                      {intl.formatMessage(messages.symbols)}\r\n                    </Button>\r\n                    <div className=\"TileEditor__input-image\">\r\n                      <InputImage onChange={this.handleInputImageChange} />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"TileEditor__form-fields\">\r\n                    <TextField\r\n                      id=\"label\"\r\n                      label={\r\n                        this.currentTileProp('type') === 'board'\r\n                          ? intl.formatMessage(messages.boardName)\r\n                          : intl.formatMessage(messages.label)\r\n                      }\r\n                      value={currentLabel}\r\n                      onChange={this.handleLabelChange}\r\n                      fullWidth\r\n                      required\r\n                    />\r\n\r\n                    <TextField\r\n                      multiline\r\n                      id=\"vocalization\"\r\n                      disabled={this.currentTileProp('type') === 'board'}\r\n                      label={intl.formatMessage(messages.vocalization)}\r\n                      value={this.currentTileProp('vocalization') || ''}\r\n                      onChange={this.handleVocalizationChange}\r\n                      fullWidth\r\n                    />\r\n                    <div>\r\n                      {this.editingTile() &&\r\n                        tileInView.loadBoard &&\r\n                        selectBoardElement}\r\n                    </div>\r\n                    {!this.editingTile() && (\r\n                      <div className=\"TileEditor__radiogroup\">\r\n                        <FormControl fullWidth>\r\n                          <FormLabel>\r\n                            {intl.formatMessage(messages.type)}\r\n                          </FormLabel>\r\n                          <RadioGroup\r\n                            row={true}\r\n                            aria-label={intl.formatMessage(messages.type)}\r\n                            name=\"type\"\r\n                            value={this.currentTileProp('type')}\r\n                            onChange={this.handleTypeChange}\r\n                          >\r\n                            <FormControlLabel\r\n                              value=\"button\"\r\n                              control={<Radio />}\r\n                              label={intl.formatMessage(messages.button)}\r\n                            />\r\n                            <FormControlLabel\r\n                              className=\"TileEditor__radiogroup__formcontrollabel\"\r\n                              value=\"folder\"\r\n                              control={<Radio />}\r\n                              label={intl.formatMessage(messages.folder)}\r\n                            />\r\n                            <FormControlLabel\r\n                              className=\"TileEditor__radiogroup__formcontrollabel\"\r\n                              value=\"board\"\r\n                              control={<Radio />}\r\n                              label={intl.formatMessage(messages.board)}\r\n                            />\r\n                          </RadioGroup>\r\n                        </FormControl>\r\n                      </div>\r\n                    )}\r\n                    {this.currentTileProp('type') === 'folder' &&\r\n                      selectBoardElement}\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"TileEditor__row\">\r\n                <div className=\"TileEditor__form-fields\">\r\n                  <div className=\"TileEditor__colorselect\">\r\n                    <ColorSelect\r\n                      selectedColor={this.state.selectedBackgroundColor}\r\n                      onChange={this.handleColorChange}\r\n                    />\r\n                  </div>\r\n                  {this.currentTileProp('type') !== 'board' && (\r\n                    <div className=\"TileEditor__voicerecorder\">\r\n                      <FormLabel>\r\n                        {intl.formatMessage(messages.voiceRecorder)}\r\n                      </FormLabel>\r\n                      <VoiceRecorder\r\n                        src={this.currentTileProp('sound')}\r\n                        onChange={this.handleSoundChange}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            </FullScreenDialogContent>\r\n\r\n            {this.state.editingTiles.length > 1 && (\r\n              <MobileStepper\r\n                variant=\"progress\"\r\n                steps={this.state.editingTiles.length}\r\n                position=\"static\"\r\n                activeStep={this.state.activeStep}\r\n                nextButton={\r\n                  <Button\r\n                    onClick={this.handleNext}\r\n                    disabled={\r\n                      this.state.activeStep ===\r\n                      this.state.editingTiles.length - 1\r\n                    }\r\n                  >\r\n                    {intl.formatMessage(messages.next)}{' '}\r\n                    <KeyboardArrowRightIcon />\r\n                  </Button>\r\n                }\r\n                backButton={\r\n                  <Button\r\n                    onClick={this.handleBack}\r\n                    disabled={this.state.activeStep === 0}\r\n                  >\r\n                    <KeyboardArrowLeftIcon />\r\n                    {intl.formatMessage(messages.back)}\r\n                  </Button>\r\n                }\r\n              />\r\n            )}\r\n          </Paper>\r\n\r\n          <SymbolSearch\r\n            open={this.state.isSymbolSearchOpen}\r\n            onChange={this.handleSymbolSearchChange}\r\n            onClose={this.handleSymbolSearchClose}\r\n          />\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(TileEditor);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  tilesDeleted: {\r\n    id: 'cboard.components.Board.tilesDeleted',\r\n    defaultMessage: 'Tiles deleted'\r\n  },\r\n  rootBoardNotDeleted: {\r\n    id: 'cboard.components.Board.rootBoardNotDeleted',\r\n    defaultMessage: 'Root Board cannot be deleted'\r\n  },\r\n  tilesCreated: {\r\n    id: 'cboard.components.Board.tilesCreated',\r\n    defaultMessage: 'Tiles created'\r\n  },\r\n  boardSavedNotification: {\r\n    id: 'cboard.components.Board.boardSavedNotification',\r\n    defaultMessage: 'Board changes were saved'\r\n  },\r\n  boardNotSavedNotification: {\r\n    id: 'cboard.components.Board.boardNotSavedNotification',\r\n    defaultMessage:\r\n      'There was an error updating your board on the cloud. Check your connection'\r\n  },\r\n  editTitle: {\r\n    id: 'cboard.components.Board.editTitle',\r\n    defaultMessage: 'Edit Board Title'\r\n  },\r\n  boardTitle: {\r\n    id: 'cboard.components.Board.boardTitle',\r\n    defaultMessage: 'Board Title'\r\n  },\r\n  boardEditTitleCancel: {\r\n    id: 'cboard.components.Board.boardEditTitleCancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  boardEditTitleAccept: {\r\n    id: 'cboard.components.Board.boardEditTitleAccept',\r\n    defaultMessage: 'Accept'\r\n  },\r\n  share: {\r\n    id: 'cboard.components.Board.share',\r\n    defaultMessage: 'Share'\r\n  },\r\n  copyMessage: {\r\n    id: 'cboard.components.Board.copyMessage',\r\n    defaultMessage: 'Copied to clipboard!'\r\n  },\r\n  clicksToUnlock: {\r\n    id: 'cboard.components.Board.clicksToUnlock',\r\n    defaultMessage: 'clicks to unlock'\r\n  },\r\n  scannerHowToDeactivate: {\r\n    id: 'cboard.components.Board.scannerHowToDeactivate',\r\n    defaultMessage: 'Press Escape 4 times to deactivate Scanner.'\r\n  },\r\n  scannerManualStrategy: {\r\n    id: 'cboard.components.Board.scannerManualStrategy',\r\n    defaultMessage:\r\n      'Scanner advances with space bar key, press enter to select an item.'\r\n  },\r\n  scannerAutomaticStrategy: {\r\n    id: 'cboard.components.Board.scannerAutomaticStrategy',\r\n    defaultMessage:\r\n      'Scanner will iterate over elements, press any key to select them.'\r\n  },\r\n  userProfileLocked: {\r\n    id: 'cboard.components.Board.userProfileLocked',\r\n    defaultMessage:\r\n      'User Profile is locked, please unlock settings to see your user profile.'\r\n  },\r\n  boardMissed: {\r\n    id: 'cboard.components.Board.boardMissed',\r\n    defaultMessage:\r\n      'We are sorry but we have missed this folder / board. We recommend you to create it again.'\r\n  },\r\n  copyPublicBoardTitle: {\r\n    id: 'cboard.components.Board.copyPublicBoardTitle',\r\n    defaultMessage: 'Do you want to copy a public board?'\r\n  },\r\n  copyPublicBoardDesc: {\r\n    id: 'cboard.components.Board.copyPublicBoardDesc',\r\n    defaultMessage:\r\n      'You are trying to open a public shared board. In order to use and edit this board you have to copy it into your communicator boards.'\r\n  },\r\n  blockedPrivateBoardTitle: {\r\n    id: 'cboard.components.Board.blockedPrivateBoardTitle',\r\n    defaultMessage: 'Private board!'\r\n  },\r\n  blockedPrivateBoardDesc: {\r\n    id: 'cboard.components.Board.blockedPrivateBoardDesc',\r\n    defaultMessage:\r\n      'You are trying to open a private board. In order to use and edit this board you have to ask author to publish the board.'\r\n  },\r\n  boardCopyCancel: {\r\n    id: 'cboard.components.Board.boardCopyCancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  boardCopyAccept: {\r\n    id: 'cboard.components.Board.boardCopyAccept',\r\n    defaultMessage: 'Accept'\r\n  },\r\n  boardCopiedSuccessfully: {\r\n    id: 'cboard.components.Board.boardCopiedSuccessfully',\r\n    defaultMessage: 'Board successfully added to your Communicator.'\r\n  },\r\n  boardCopyError: {\r\n    id: 'cboard.components.Board.boardCopyError',\r\n    defaultMessage: 'ERROR: There was an error trying to get the board.'\r\n  },\r\n  emptyVoiceAlert: {\r\n    id: 'cboard.components.Board.emptyVoiceAlert',\r\n    defaultMessage:\r\n      'WARNING: we did not detect an available Text to Speech voice! Cboard cannot work properly.'\r\n  },\r\n  offlineVoiceAlert: {\r\n    id: 'cboard.components.Board.offlineVoiceAlert',\r\n    defaultMessage:\r\n      'WARNING: you are using an online voice, but it looks you are offline! Cboard might not work properly.'\r\n  },\r\n  myBoardTitle: {\r\n    id: 'cboard.components.Board.myBoardTitle',\r\n    defaultMessage: 'My Board'\r\n  },\r\n  noTitle: {\r\n    id: 'cboard.components.CommunicatorDialog.noTitle',\r\n    defaultMessage: 'No title'\r\n  },\r\n  failedToCopy: {\r\n    id: 'cboard.components.Board.failedToCopy',\r\n    defaultMessage: 'Failed to copy to clipboard'\r\n  },\r\n  walkthroughWelcome: {\r\n    id: 'cboard.components.Board.walkthroughWelcome',\r\n    defaultMessage: 'Welcome to Cboard!'\r\n  },\r\n  walkthroughUnlock: {\r\n    id: 'cboard.components.Board.walkthroughUnlock',\r\n    defaultMessage:\r\n      'Press the lock button four times to unlock your options and settings.'\r\n  },\r\n  walkthroughStart: {\r\n    id: 'cboard.components.Board.walkthroughStart',\r\n    defaultMessage:\r\n      'Are you ready for a tour across Cboard app and its awesome features?'\r\n  },\r\n  walkthroughSignInUp: {\r\n    id: 'cboard.components.Board.walkthroughSignInUp',\r\n    defaultMessage: 'Sign in to personalise your communicator.'\r\n  },\r\n  walkthroughEditBoard: {\r\n    id: 'cboard.components.Board.walkthroughEditBoard',\r\n    defaultMessage: 'Use this to edit the current board.'\r\n  },\r\n  walkthroughBoardName: {\r\n    id: 'cboard.components.Board.walkthroughBoardName',\r\n    defaultMessage: 'Here you can change the name of the current board.'\r\n  },\r\n  walkthroughAddTile: {\r\n    id: 'cboard.components.Board.walkthroughAddTile',\r\n    defaultMessage:\r\n      'Here you can add a tile to the board. This tile can be a button, a folder or an empty board.'\r\n  },\r\n  walkthroughChangeBoard: {\r\n    id: 'cboard.components.Board.walkthroughChangeBoard',\r\n    defaultMessage:\r\n      'This is a dropdown menu from where you can go to another board in your communicator.'\r\n  },\r\n  walkthroughBuildCommunicator: {\r\n    id: 'cboard.components.Board.walkthroughBuildCommunicator',\r\n    defaultMessage:\r\n      'Here you can access your communicator, edit it and enrich it with more boards.'\r\n  },\r\n  walkthroughEndTour: {\r\n    id: 'cboard.components.Board.walkthroughEndTour',\r\n    defaultMessage: 'End Tour'\r\n  },\r\n  walkthroughCloseTour: {\r\n    id: 'cboard.components.Board.walkthroughCloseTour',\r\n    defaultMessage: 'Close Tour'\r\n  },\r\n  walkthroughBack: {\r\n    id: 'cboard.components.Board.walkthroughBack',\r\n    defaultMessage: 'Back'\r\n  },\r\n  walkthroughNext: {\r\n    id: 'cboard.components.Board.walkthroughNext',\r\n    defaultMessage: 'Next'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport styles from './Row.module.css';\r\n\r\nfunction Row(props) {\r\n  const { className, ...other } = props;\r\n\r\n  const rowClassName = classNames(styles.root, className);\r\n\r\n  return <div className={rowClassName} {...other} />;\r\n}\r\n\r\nRow.propTypes = {\r\n  /**\r\n   * Row content.\r\n   */\r\n  children: PropTypes.node\r\n};\r\n\r\nexport default Row;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { useDrop } from 'react-dnd';\r\n\r\nimport styles from './DroppableCell.module.css';\r\n\r\nfunction DroppableCell(props) {\r\n  const { accept, className, onDrop, ...other } = props;\r\n\r\n  const [{ isOver, canDrop }, drop] = useDrop({\r\n    accept,\r\n    drop: onDrop,\r\n    collect: monitor => ({\r\n      isOver: monitor.isOver(),\r\n      canDrop: monitor.canDrop()\r\n    })\r\n  });\r\n\r\n  const isActive = isOver && canDrop;\r\n\r\n  const cellClassName = classNames(styles.root, className, {\r\n    [styles.isActive]: isActive\r\n  });\r\n\r\n  return <div {...other} className={cellClassName} ref={drop} />;\r\n}\r\n\r\nDroppableCell.propTypes = {\r\n  /**\r\n   * This drop target will only react to the items produced by the drag sources of the specified type or types.\r\n   *\r\n   * https://react-dnd.github.io/react-dnd/docs/api/use-drop\r\n   */\r\n  accept: PropTypes.string.isRequired,\r\n  /**\r\n   * Callback, fired when item is dropped.\r\n   */\r\n  onDrop: PropTypes.func.isRequired\r\n};\r\n\r\nexport default DroppableCell;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport { useDrag } from 'react-dnd';\r\n\r\nimport styles from './DraggableItem.module.css';\r\n\r\nfunction DraggableItem(props) {\r\n  const { className, disabled, id, style, type, ...other } = props;\r\n\r\n  const [{ opacity }, drag] = useDrag({\r\n    item: { id, type },\r\n    canDrag: () => !disabled,\r\n    collect: monitor => ({\r\n      opacity: monitor.isDragging() ? 0.4 : 1\r\n    })\r\n  });\r\n\r\n  const cellStyle = { ...style, opacity };\r\n  const cellClassName = classNames(styles.root, className);\r\n\r\n  return (\r\n    <div {...other} className={cellClassName} style={cellStyle} ref={drag} />\r\n  );\r\n}\r\n\r\nDraggableItem.propTypes = {\r\n  disabled: PropTypes.bool,\r\n  id: PropTypes.string,\r\n  type: PropTypes.string\r\n};\r\n\r\nexport default DraggableItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport * as utils from './utils.ts';\r\nimport Row from './Row/Row';\r\nimport DroppableCell from './DroppableCell/DroppableCell';\r\nimport DraggableItem from './DraggableItem/DraggableItem';\r\nimport styles from './GridBase.module.css';\r\n\r\nfunction GridBase(props) {\r\n  const {\r\n    className,\r\n    columns,\r\n    dragAndDropEnabled,\r\n    items,\r\n    onItemDrop,\r\n    order,\r\n    renderEmptyCell,\r\n    renderItem,\r\n    rows,\r\n    ...other\r\n  } = props;\r\n\r\n  const gridClassName = classNames(styles.root, className);\r\n\r\n  const grid = utils.sortGrid({ columns, rows, order, items });\r\n\r\n  let itemIndex = 0;\r\n\r\n  return (\r\n    <div className={gridClassName} {...other}>\r\n      {grid.map((row, rowIndex) => (\r\n        <Row key={rowIndex}>\r\n          {row.map((item, columnIndex) => {\r\n            return (\r\n              <DroppableCell\r\n                key={columnIndex}\r\n                accept={'grid-item'}\r\n                onDrop={item => {\r\n                  const position = { row: rowIndex, column: columnIndex };\r\n\r\n                  onItemDrop(item, position);\r\n                }}\r\n              >\r\n                {item ? (\r\n                  <DraggableItem\r\n                    type={'grid-item'}\r\n                    id={item.id}\r\n                    disabled={!dragAndDropEnabled}\r\n                  >\r\n                    {renderItem(item, itemIndex++)}\r\n                  </DraggableItem>\r\n                ) : (\r\n                  renderEmptyCell && renderEmptyCell()\r\n                )}\r\n              </DroppableCell>\r\n            );\r\n          })}\r\n        </Row>\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nGridBase.propTypes = {\r\n  /**\r\n   * Number of columns.\r\n   */\r\n  columns: PropTypes.number.isRequired,\r\n  /**\r\n   * If `true`, items can be dragged and dropped.\r\n   */\r\n  dragAndDropEnabled: PropTypes.bool,\r\n  /**\r\n   * Items to render.\r\n   */\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      /**\r\n       * Item ID.\r\n       */\r\n      id: PropTypes.string.isRequired\r\n    })\r\n  ),\r\n  /**\r\n   * Items order by ID.\r\n   */\r\n  order: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\r\n  /**\r\n   * Item renderer.\r\n   */\r\n  renderItem: PropTypes.func.isRequired,\r\n  /**\r\n   * Number of rows.\r\n   */\r\n  rows: PropTypes.number.isRequired\r\n};\r\n\r\nGridBase.defaultProps = {\r\n  items: [],\r\n  order: []\r\n};\r\n\r\nexport default GridBase;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\n\r\nimport GridBase from './GridBase';\r\nimport styles from './Grid.module.css';\r\n\r\nfunction chunks(array, size) {\r\n  const newArray = [...array];\r\n  const results = [];\r\n\r\n  while (newArray.length) {\r\n    results.push(newArray.splice(0, size));\r\n  }\r\n\r\n  return results;\r\n}\r\n\r\nfunction Grid(props) {\r\n  const { className, items, style, ...other } = props;\r\n\r\n  const itemsPerPage = other.rows * other.columns;\r\n  const pages = chunks(items, itemsPerPage);\r\n\r\n  const gridClassName = classNames(styles.grid, className);\r\n\r\n  return (\r\n    <div className={styles.root} style={style}>\r\n      {pages.length > 0 ? (\r\n        pages.map((pageItems, i) => (\r\n          <GridBase\r\n            {...other}\r\n            className={gridClassName}\r\n            items={pageItems}\r\n            key={i}\r\n          />\r\n        ))\r\n      ) : (\r\n        <GridBase {...other} className={gridClassName} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nGrid.propTypes = {\r\n  /**\r\n   * Number of columns.\r\n   */\r\n  columns: PropTypes.number.isRequired,\r\n  /**\r\n   * If `true`, items can be dragged and dropped.\r\n   */\r\n  dragAndDropEnabled: PropTypes.bool,\r\n  /**\r\n   * Items to render.\r\n   */\r\n  items: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      /**\r\n       * Item ID.\r\n       */\r\n      id: PropTypes.string.isRequired\r\n    })\r\n  ),\r\n  onItemDrop: PropTypes.func,\r\n  /**\r\n   * Items order by ID.\r\n   */\r\n  order: PropTypes.arrayOf(PropTypes.arrayOf(PropTypes.string)),\r\n  /**\r\n   * Item empty cell.\r\n   */\r\n  renderEmptyCell: PropTypes.func,\r\n  /**\r\n   * Item renderer.\r\n   */\r\n  renderItem: PropTypes.func.isRequired,\r\n  /**\r\n   * Number of rows.\r\n   */\r\n  rows: PropTypes.number.isRequired\r\n};\r\n\r\nexport default Grid;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport classNames from 'classnames';\r\nimport sizeMe from 'react-sizeme';\r\nimport { Responsive as ResponsiveReactGridLayout } from 'react-grid-layout';\r\nimport 'react-grid-layout/css/styles.css';\r\n\r\nimport './Grid.css';\r\nimport { GRID_BREAKPOINTS } from './Grid.constants';\r\n\r\nconst colsRowsShape = PropTypes.shape({\r\n  lg: PropTypes.number,\r\n  md: PropTypes.number,\r\n  sm: PropTypes.number,\r\n  xs: PropTypes.number,\r\n  xxs: PropTypes.number\r\n});\r\n\r\nexport class GridContainer extends PureComponent {\r\n  static propTypes = {\r\n    cols: colsRowsShape,\r\n    rows: colsRowsShape,\r\n    breakpoints: colsRowsShape,\r\n    gap: PropTypes.number,\r\n    children: PropTypes.node,\r\n    edit: PropTypes.bool, \r\n    onLayoutChange: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    cols: { lg: 6, md: 6, sm: 5, xs: 4, xxs: 3 },\r\n    rows: { lg: 3, md: 3, sm: 3, xs: 3, xxs: 3 },\r\n    breakpoints: GRID_BREAKPOINTS,\r\n    gap: 10,\r\n    edit: false\r\n  };\r\n\r\n  state = {\r\n    dragging: false\r\n  };\r\n\r\n  grid = null;\r\n\r\n  calcRowHeight(height) {\r\n    // todo: rewrite this with variable caching\r\n    const breakpoints = ['lg', 'md', 'sm', 'xs', 'xxs'];\r\n    let rowHeight;\r\n\r\n    for (let i = 0; i < breakpoints.length; i += 1) {\r\n      const breakpoint = breakpoints[i];\r\n\r\n      if (\r\n        window.matchMedia(\r\n          `(min-width: ${this.props.breakpoints[breakpoint]}px)`\r\n        ).matches\r\n      ) {\r\n        const rows = this.props.rows[breakpoint];\r\n        const padding = this.props.gap * (rows - 1);\r\n        const margin = this.props.gap * 2;\r\n        const spaceBetween = margin + padding;\r\n        const gridHeight = this.props.size.height;\r\n        rowHeight = (gridHeight - spaceBetween) / rows;\r\n        break;\r\n      }\r\n    }\r\n    return rowHeight < 80 ? 80 : rowHeight;\r\n  }\r\n\r\n  generateLayout(cols) {\r\n    const layout = React.Children.map(this.props.children, (child, index) => {\r\n      return {\r\n        x: index % cols,\r\n        y: Math.floor(index / cols),\r\n        w: 1,\r\n        h: 1,\r\n        i: child.key\r\n      };\r\n    });\r\n    return layout;\r\n  }\r\n\r\n  generateLayouts() {\r\n    const { breakpoints, cols } = this.props;\r\n    const layouts = {};\r\n\r\n    Object.keys(breakpoints).forEach(bp => {\r\n      layouts[bp] = this.generateLayout(cols[bp]);\r\n    });\r\n    return layouts;\r\n  }\r\n\r\n  handleDragStart = (layout, oldItem, newItem, placeholder, event, element) => {\r\n    this.setState({ dragging: true });\r\n  };\r\n\r\n  handleDragStop = (layout, oldItem, newItem, placeholder, event, element) => {\r\n    this.setState({ dragging: false });\r\n  };\r\n\r\n  render() {\r\n    const { size, cols, gap, edit, breakpoints, children, onLayoutChange } = this.props;\r\n\r\n    return (\r\n      <div className={classNames('Grid', { dragging: this.state.dragging })}>\r\n        <ResponsiveReactGridLayout\r\n          breakpoints={breakpoints}\r\n          cols={cols}\r\n          layouts={this.generateLayouts()}\r\n          width={size.width}\r\n          rowHeight={this.calcRowHeight(size.height)}\r\n          containerPadding={[gap, gap]}\r\n          margin={[gap, gap]}\r\n          isDraggable={edit}\r\n          isResizable={false}\r\n          onLayoutChange={onLayoutChange}\r\n          onDragStart={this.handleDragStart}\r\n          onDragStop={this.handleDragStop}\r\n        >\r\n          {children}\r\n        </ResponsiveReactGridLayout>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default sizeMe({ monitorHeight: true })(GridContainer);\r\n","export const GRID_BREAKPOINTS = { lg: 1200, md: 996, sm: 768, xs: 567, xxs: 0 };\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport BackspaceIcon from '@material-ui/icons/Backspace';\r\nimport { Scannable } from 'react-scannable';\r\n\r\nconst styles = {\r\n  button: {\r\n    alignSelf: 'center',\r\n    height: '64px',\r\n    width: '64px'\r\n  },\r\n  icon: {\r\n    height: '32px',\r\n    width: '32px'\r\n  }\r\n};\r\n\r\nexport class BackspaceButton extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    classes: PropTypes.object,\r\n    /**\r\n     * @ignore\r\n     */\r\n    theme: PropTypes.object,\r\n\r\n    hidden: PropTypes.bool\r\n  };\r\n\r\n  render() {\r\n    const { classes, theme, hidden, ...other } = this.props;\r\n\r\n    const backspaceIconStyle =\r\n      theme.direction === 'ltr' ? null : { transform: 'scaleX(-1)' };\r\n\r\n    return (\r\n      <Scannable disabled={hidden}>\r\n        <IconButton\r\n          aria-label=\"Backspace\"\r\n          className={classes.button}\r\n          {...other}\r\n        >\r\n          <BackspaceIcon className={classes.icon} style={backspaceIconStyle} />\r\n        </IconButton>\r\n      </Scannable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(BackspaceButton);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport { Scannable } from 'react-scannable';\r\n\r\nconst styles = {\r\n  button: {\r\n    alignSelf: 'center',\r\n    height: '64px',\r\n    width: '64px'\r\n  },\r\n  icon: {\r\n    height: '32px',\r\n    width: '32px'\r\n  }\r\n};\r\n\r\nexport class ClearButton extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    classes: PropTypes.object,\r\n    hidden: PropTypes.bool\r\n  };\r\n\r\n  render() {\r\n    const { classes, hidden, ...other } = this.props;\r\n\r\n    return (\r\n      <Scannable disabled={hidden}>\r\n        <IconButton aria-label=\"Clear\" className={classes.button} {...other}>\r\n          <ClearIcon className={classes.icon} />\r\n        </IconButton>\r\n      </Scannable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles)(ClearButton);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport { Scannable } from 'react-scannable';\r\n\r\nconst styles = {\r\n  button: {\r\n    alignSelf: 'center',\r\n    height: '64px',\r\n    width: '64px'\r\n  },\r\n  icon: {\r\n    height: '32px',\r\n    width: '32px'\r\n  }\r\n};\r\n\r\nexport class ShareButton extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    classes: PropTypes.object,\r\n    /**\r\n     * @ignore\r\n     */\r\n    theme: PropTypes.object,\r\n\r\n    hidden: PropTypes.bool\r\n  };\r\n\r\n  render() {\r\n    const { classes, theme, hidden, ...other } = this.props;\r\n\r\n    const shareIconStyle =\r\n      theme.direction === 'ltr' ? null : { transform: 'scaleX(-1)' };\r\n\r\n    return (\r\n      <Scannable disabled={hidden}>\r\n        <IconButton aria-label=\"share\" className={classes.button} {...other}>\r\n          <ShareIcon className={classes.icon} style={shareIconStyle} />\r\n        </IconButton>\r\n      </Scannable>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(styles, { withTheme: true })(ShareButton);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  title: {\r\n    id: 'cboard.components.PhraseShare.title',\r\n    defaultMessage: 'Share or copy your Phrase'\r\n  },\r\n  close: {\r\n    id: 'cboard.components.PhraseShare.close',\r\n    defaultMessage: 'Close'\r\n  },\r\n  copyLink: {\r\n    id: 'cboard.components.PhraseShare.copyPhrase',\r\n    defaultMessage: 'Copy phrase'\r\n  },\r\n  facebook: {\r\n    id: 'cboard.components.PhraseShare.facebook',\r\n    defaultMessage: 'Facebook'\r\n  },\r\n  twitter: {\r\n    id: 'cboard.components.PhraseShare.twitter',\r\n    defaultMessage: 'Twitter'\r\n  },\r\n  email: {\r\n    id: 'cboard.components.PhraseShare.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  subject: {\r\n    id: 'cboard.components.PhraseShare.subject',\r\n    defaultMessage: 'Check out this email from Cboard user!'\r\n  },\r\n  whatsapp: {\r\n    id: 'cboard.components.PhraseShare.whatsapp',\r\n    defaultMessage: 'Whatsapp'\r\n  },\r\n  reddit: {\r\n    id: 'cboard.components.PhraseShare.reddit',\r\n    defaultMessage: 'Reddit'\r\n  }\r\n  // subject: {\r\n  //   id: 'cboard.components.PhraseShare.subject',\r\n  //   defaultMessage: 'Check out this board from Cboard!'\r\n  // },\r\n  // body: {\r\n  //   id: 'cboard.components.PhraseShare.body',\r\n  //   defaultMessage:\r\n  //     'Hello! I want to share a communication board from the Cboard tool. Please find it at: {url}'\r\n  // }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n//import { Link } from 'react-router-dom';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport CopyIcon from '@material-ui/icons/FilterNone';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ShareButton from '../SymbolOutput/ShareButton';\r\nimport IconButton from '../../../UI/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n  FacebookShareButton,\r\n  FacebookIcon,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailShareButton,\r\n  EmailIcon,\r\n  WhatsappShareButton,\r\n  WhatsappIcon,\r\n  RedditShareButton,\r\n  RedditIcon\r\n} from 'react-share';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport messages from './PhraseShare.messages';\r\n\r\nimport './PhraseShare.css';\r\n\r\nconst PhraseShare = ({\r\n  label,\r\n  phrase,\r\n  intl,\r\n  open,\r\n  fullScreen,\r\n  onShareClick,\r\n  onShareClose,\r\n  onCopyPhrase,\r\n  style,\r\n  hidden\r\n}) => (\r\n  <React.Fragment>\r\n    <ShareButton\r\n      label={label}\r\n      color=\"inherit\"\r\n      onClick={onShareClick}\r\n      style={style}\r\n      hidden={hidden}\r\n    />\r\n    <Dialog\r\n      open={open}\r\n      onClose={onShareClose}\r\n      fullScreen={fullScreen}\r\n      className=\"SharePhraseDialog__container\"\r\n    >\r\n      <DialogTitle className=\"SharePhraseDialog__title\">\r\n        <FormattedMessage {...messages.title} />\r\n\r\n        <IconButton\r\n          label={intl.formatMessage(messages.close)}\r\n          onClick={onShareClose}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <DialogContent className=\"SharePhraseDialog__content\">\r\n        <div className=\"SharePhraseDialog__socialIcons\">\r\n          <Button onClick={onCopyPhrase} color=\"primary\">\r\n            <div className=\"SharePhraseDialog__socialIcons__copyAction\">\r\n              <div>\r\n                <CopyIcon />\r\n              </div>\r\n              <FormattedMessage {...messages.copyLink} />\r\n            </div>\r\n          </Button>\r\n          <Button>\r\n            <EmailShareButton\r\n              subject={intl.formatMessage(messages.subject)}\r\n              body={phrase}\r\n            >\r\n              <EmailIcon round />\r\n              <FormattedMessage id=\"email\" {...messages.email} />\r\n            </EmailShareButton>\r\n          </Button>\r\n          <Button>\r\n            <FacebookShareButton\r\n              url={'https://app.cboard.io'}\r\n              quote={phrase}\r\n              onShareWindowClose={onShareClose}\r\n            >\r\n              <FacebookIcon round />\r\n              <FormattedMessage id=\"facebook\" {...messages.facebook} />\r\n            </FacebookShareButton>\r\n          </Button>\r\n          <Button>\r\n            <TwitterShareButton\r\n              hashtags={['cboard', 'AAC']}\r\n              via={'cboard_io'}\r\n              url={phrase}\r\n              onShareWindowClose={onShareClose}\r\n            >\r\n              <TwitterIcon round />\r\n              <FormattedMessage id=\"twitter\" {...messages.twitter} />\r\n            </TwitterShareButton>\r\n          </Button>\r\n          <Button>\r\n            <WhatsappShareButton url={phrase} onShareWindowClose={onShareClose}>\r\n              <WhatsappIcon round />\r\n              <FormattedMessage id=\"whatsapp\" {...messages.whatsapp} />\r\n            </WhatsappShareButton>\r\n          </Button>\r\n          <Button>\r\n            <RedditShareButton\r\n              title={phrase}\r\n              url={'https://app.cboard.io'}\r\n              onShareWindowClose={onShareClose}\r\n            >\r\n              <RedditIcon round />\r\n              <FormattedMessage id=\"reddit\" {...messages.reddit} />\r\n            </RedditShareButton>\r\n          </Button>\r\n        </div>\r\n      </DialogContent>\r\n    </Dialog>\r\n  </React.Fragment>\r\n);\r\n\r\nPhraseShare.defaultProps = {\r\n  open: false,\r\n  disabled: false,\r\n  onShareClose: () => {},\r\n  onCopyPhrase: () => {}\r\n};\r\n\r\nPhraseShare.propTypes = {\r\n  open: PropTypes.bool,\r\n  phrase: PropTypes.string.isRequired,\r\n  onShareClose: PropTypes.func,\r\n  onShareClick: PropTypes.func.isRequired,\r\n  onCopyPhrase: PropTypes.func\r\n};\r\n\r\nexport default withMobileDialog()(PhraseShare);\r\n","import PhraseShare from './PhraseShare.component';\r\n\r\nexport default PhraseShare;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport { Scannable } from 'react-scannable';\r\n\r\nimport './Scroll.css';\r\n\r\nconst invertDir = dir => (dir === 'rtl' ? 'ltr' : 'rtl');\r\n\r\nexport class Scroll extends PureComponent {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    theme: PropTypes.object\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      children,\r\n      style,\r\n      theme: { direction },\r\n      ...other\r\n    } = this.props;\r\n\r\n    const scrollStyle = { direction: invertDir(direction) };\r\n\r\n    return (\r\n      <div className=\"Scroll\" style={scrollStyle}>\r\n        <Scannable>\r\n          <div\r\n            className=\"Scroll__container\"\r\n            style={{ ...style, direction }}\r\n            {...other}\r\n          >\r\n            {children}\r\n          </div>\r\n        </Scannable>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withStyles(null, { withTheme: true })(Scroll);\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport Symbol from '../../Symbol';\r\nimport BackspaceButton from './BackspaceButton';\r\nimport ClearButton from './ClearButton';\r\nimport messages from '../../Board.messages';\r\nimport PhraseShare from '../PhraseShare';\r\nimport Scroll from './Scroll';\r\nimport './SymbolOutput.css';\r\nimport { injectIntl } from 'react-intl';\r\n\r\nclass SymbolOutput extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openPhraseShareDialog: false\r\n    };\r\n  }\r\n\r\n  onShareClick = () => {\r\n    this.setState({ openPhraseShareDialog: true });\r\n  };\r\n\r\n  onShareClose = () => {\r\n    this.setState({ openPhraseShareDialog: false });\r\n  };\r\n\r\n  static propTypes = {\r\n    /**\r\n     * Symbols to output\r\n     */\r\n    symbols: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        /**\r\n         * Image to display\r\n         */\r\n        image: PropTypes.string,\r\n        /**\r\n         * Label to display\r\n         */\r\n        label: PropTypes.oneOfType([PropTypes.string, PropTypes.node])\r\n      })\r\n    )\r\n  };\r\n\r\n  static defaultProps = {\r\n    symbols: []\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      intl,\r\n      onBackspaceClick,\r\n      onClearClick,\r\n      getPhraseToShare,\r\n      onCopyClick,\r\n      onRemoveClick,\r\n      symbols,\r\n      navigationSettings,\r\n      phrase,\r\n      ...other\r\n    } = this.props;\r\n\r\n    const clearButtonStyle = {\r\n      visibility: symbols.length ? 'visible' : 'hidden'\r\n    };\r\n\r\n    const copyButtonStyle = {\r\n      visibility: symbols.length ? 'visible' : 'hidden'\r\n    };\r\n\r\n    const removeButtonStyle = {\r\n      visibility: navigationSettings.removeOutputActive ? 'visible' : 'hidden'\r\n    };\r\n\r\n    const backspaceButtonStyle = {\r\n      visibility: navigationSettings.removeOutputActive ? 'hidden' : 'visible'\r\n    };\r\n\r\n    return (\r\n      <div className=\"SymbolOutput\">\r\n        <Scroll {...other}>\r\n          {symbols.map(({ image, label }, index) => (\r\n            <div className=\"SymbolOutput__value\" key={index}>\r\n              <Symbol\r\n                className=\"SymbolOutput__symbol\"\r\n                image={image}\r\n                label={label}\r\n                labelpos=\"Below\"\r\n              />\r\n              <div className=\"SymbolOutput__value__IconButton\">\r\n                <IconButton\r\n                  color=\"inherit\"\r\n                  size={'small'}\r\n                  onClick={onRemoveClick(index)}\r\n                  disabled={!navigationSettings.removeOutputActive}\r\n                  style={removeButtonStyle}\r\n                >\r\n                  <ClearIcon />\r\n                </IconButton>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </Scroll>\r\n        {navigationSettings.shareShowActive && (\r\n          <PhraseShare\r\n            label={intl.formatMessage(messages.share)}\r\n            intl={this.props.intl}\r\n            onShareClick={this.onShareClick}\r\n            onShareClose={this.onShareClose}\r\n            publishBoard={this.publishBoard}\r\n            onCopyPhrase={onCopyClick}\r\n            open={this.state.openPhraseShareDialog}\r\n            phrase={this.props.phrase}\r\n            style={copyButtonStyle}\r\n            hidden={!symbols.length}\r\n          />\r\n        )}\r\n        <ClearButton\r\n          color=\"inherit\"\r\n          onClick={onClearClick}\r\n          style={clearButtonStyle}\r\n          hidden={!symbols.length}\r\n        />\r\n        {!navigationSettings.removeOutputActive && (\r\n          <BackspaceButton\r\n            color=\"inherit\"\r\n            onClick={onBackspaceClick}\r\n            style={backspaceButtonStyle}\r\n            hidden={navigationSettings.removeOutputActive}\r\n          />\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default injectIntl(SymbolOutput);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { connect } from 'react-redux';\r\nimport keycode from 'keycode';\r\nimport messages from '../Board.messages';\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\nimport { isAndroid } from '../../../cordova-util';\r\n\r\nimport {\r\n  cancelSpeech,\r\n  speak\r\n} from '../../../providers/SpeechProvider/SpeechProvider.actions';\r\n\r\nimport { changeOutput, clickOutput } from '../Board.actions';\r\nimport SymbolOutput from './SymbolOutput';\r\n\r\nfunction translateOutput(output, intl) {\r\n  const translatedOutput = output.map(value => {\r\n    let translatedValue = { ...value };\r\n\r\n    if (value.labelKey && intl.messages[value.labelKey]) {\r\n      translatedValue.label = intl.formatMessage({ id: value.labelKey });\r\n    }\r\n    return translatedValue;\r\n  });\r\n  return translatedOutput;\r\n}\r\n\r\nexport class OutputContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    intl: intlShape,\r\n    clickOutput: PropTypes.func.isRequired,\r\n    /**\r\n     * Array of symbols\r\n     */\r\n    output: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        /**\r\n         * Image to display\r\n         */\r\n        image: PropTypes.string,\r\n        /**\r\n         * Label to display\r\n         */\r\n        label: PropTypes.oneOfType([PropTypes.string, PropTypes.node])\r\n      })\r\n    )\r\n  };\r\n\r\n  static getDerivedStateFromProps(props, state) {\r\n    if (props.output.length !== state.translatedOutput.length) {\r\n      const translatedOutput = translateOutput(props.output, props.intl);\r\n      return { translatedOutput };\r\n    }\r\n    return null;\r\n  }\r\n\r\n  state = {\r\n    translatedOutput: []\r\n  };\r\n\r\n  outputReducer(accumulator, currentValue) {\r\n    const actionValue =\r\n      currentValue.action &&\r\n      currentValue.action.startsWith('+') &&\r\n      currentValue.action.slice(1);\r\n\r\n    const symbolValue = currentValue.vocalization || currentValue.label;\r\n    const value = actionValue || ` ${symbolValue}`;\r\n\r\n    return ` ${accumulator}${value}`;\r\n  }\r\n\r\n  clearOutput() {\r\n    const { changeOutput } = this.props;\r\n    const output = [];\r\n\r\n    changeOutput(output);\r\n  }\r\n\r\n  popOutput() {\r\n    const { changeOutput } = this.props;\r\n    const output = [...this.props.output];\r\n    output.pop();\r\n\r\n    changeOutput(output);\r\n  }\r\n\r\n  spliceOutput(index) {\r\n    const { changeOutput } = this.props;\r\n    const output = [...this.props.output];\r\n    output.splice(index, 1);\r\n    changeOutput(output);\r\n  }\r\n  async speakOutput(text) {\r\n    this.props.clickOutput(text.trim());\r\n    return new Promise(resolve => {\r\n      const { cancelSpeech, speak } = this.props;\r\n\r\n      const onend = () => {\r\n        resolve();\r\n      };\r\n\r\n      cancelSpeech();\r\n      speak(text, onend);\r\n    });\r\n  }\r\n\r\n  groupOutputByType() {\r\n    const outputFrames = [[]];\r\n\r\n    this.state.translatedOutput.forEach((value, index, arr) => {\r\n      const prevValue = index ? arr[index - 1] : arr[0];\r\n      let frame;\r\n\r\n      if (Boolean(value.sound) !== Boolean(prevValue.sound)) {\r\n        frame = [];\r\n        outputFrames.push(frame);\r\n      } else {\r\n        frame = outputFrames[outputFrames.length - 1];\r\n      }\r\n\r\n      frame.push(value);\r\n    });\r\n\r\n    return outputFrames;\r\n  }\r\n\r\n  playAudio(src) {\r\n    return new Promise((resolve, reject) => {\r\n      let audio = new Audio();\r\n\r\n      audio.onended = () => {\r\n        resolve();\r\n      };\r\n\r\n      audio.src = src;\r\n      audio.play();\r\n    });\r\n  }\r\n\r\n  async asyncForEach(array, callback) {\r\n    for (let index = 0; index < array.length; index++) {\r\n      await callback(array[index], index, array);\r\n    }\r\n  }\r\n\r\n  async play() {\r\n    const outputFrames = this.groupOutputByType();\r\n\r\n    await this.asyncForEach(outputFrames, async frame => {\r\n      if (!frame[0].sound) {\r\n        const text = frame.reduce(this.outputReducer, '');\r\n        await this.speakOutput(text);\r\n      } else {\r\n        await new Promise(resolve => {\r\n          this.asyncForEach(frame, async ({ sound }, index) => {\r\n            await this.playAudio(sound);\r\n\r\n            if (frame.length - 1 === index) {\r\n              resolve();\r\n            }\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  handleBackspaceClick = () => {\r\n    const { cancelSpeech } = this.props;\r\n    cancelSpeech();\r\n    this.popOutput();\r\n  };\r\n\r\n  handleClearClick = () => {\r\n    const { cancelSpeech } = this.props;\r\n    cancelSpeech();\r\n    this.clearOutput();\r\n  };\r\n\r\n  handlePhraseToShare = () => {\r\n    if (this.props.output.length) {\r\n      const labels = this.props.output.map(symbol => symbol.label);\r\n      return labels.join(' ');\r\n    }\r\n    return '';\r\n  };\r\n\r\n  handleCopyClick = async () => {\r\n    const { intl, showNotification } = this.props;\r\n    const labels = this.props.output.map(symbol => symbol.label);\r\n    try {\r\n      if (isAndroid()) {\r\n        await window.cordova.plugins.clipboard.copy(labels.join(' '));\r\n      } else {\r\n        await navigator.clipboard.writeText(labels.join(' '));\r\n      }\r\n      showNotification(intl.formatMessage(messages.copyMessage));\r\n    } catch (err) {\r\n      showNotification(intl.formatMessage(messages.failedToCopy));\r\n      console.log(err.message);\r\n    }\r\n  };\r\n\r\n  handleRemoveClick = index => event => {\r\n    const { cancelSpeech } = this.props;\r\n    cancelSpeech();\r\n    this.spliceOutput(index);\r\n  };\r\n\r\n  handleOutputClick = event => {\r\n    const targetEl = event.target;\r\n    if (targetEl.tagName.toLowerCase() === 'div') {\r\n      this.play();\r\n    }\r\n  };\r\n\r\n  handleOutputKeyDown = event => {\r\n    if (event.keyCode === keycode('enter')) {\r\n      this.play();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { output, navigationSettings } = this.props;\r\n\r\n    const tabIndex = output.length ? '0' : '-1';\r\n\r\n    return (\r\n      <SymbolOutput\r\n        onBackspaceClick={this.handleBackspaceClick}\r\n        onClearClick={this.handleClearClick}\r\n        onCopyClick={this.handleCopyClick}\r\n        onRemoveClick={this.handleRemoveClick}\r\n        onClick={this.handleOutputClick}\r\n        onKeyDown={this.handleOutputKeyDown}\r\n        symbols={this.state.translatedOutput}\r\n        tabIndex={tabIndex}\r\n        navigationSettings={navigationSettings}\r\n        phrase={this.handlePhraseToShare()}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ board, app }) => {\r\n  return {\r\n    output: board.output,\r\n    navigationSettings: app.navigationSettings\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  cancelSpeech,\r\n  changeOutput,\r\n  clickOutput,\r\n  speak,\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(OutputContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  title: {\r\n    id: 'cboard.components.BoardShare.title',\r\n    defaultMessage: 'Share your board'\r\n  },\r\n  close: {\r\n    id: 'cboard.components.BoardShare.close',\r\n    defaultMessage: 'Close'\r\n  },\r\n  unregisteredWarning: {\r\n    id: 'cboard.components.BoardShare.unregisteredWarning',\r\n    defaultMessage: 'You need to be registered to share a board!'\r\n  },\r\n  publishBoard: {\r\n    id: 'cboard.components.BoardShare.publishBoard',\r\n    defaultMessage: 'Publish Board'\r\n  },\r\n  unpublishBoard: {\r\n    id: 'cboard.components.BoardShare.unpublishBoard',\r\n    defaultMessage: 'Unpublish Board'\r\n  },\r\n  loginSignUp: {\r\n    id: 'cboard.components.boardshare.loginSignUp',\r\n    defaultMessage: 'Login or Sign up'\r\n  },\r\n  copyLink: {\r\n    id: 'cboard.components.BoardShare.copyLink',\r\n    defaultMessage: 'Copy Link'\r\n  },\r\n  facebook: {\r\n    id: 'cboard.components.BoardShare.facebook',\r\n    defaultMessage: 'Facebook'\r\n  },\r\n  twitter: {\r\n    id: 'cboard.components.BoardShare.twitter',\r\n    defaultMessage: 'Twitter'\r\n  },\r\n  email: {\r\n    id: 'cboard.components.BoardShare.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  whatsapp: {\r\n    id: 'cboard.components.BoardShare.whatsapp',\r\n    defaultMessage: 'Whatsapp'\r\n  },\r\n  reddit: {\r\n    id: 'cboard.components.BoardShare.reddit',\r\n    defaultMessage: 'Reddit'\r\n  },\r\n  subject: {\r\n    id: 'cboard.components.BoardShare.subject',\r\n    defaultMessage: 'Check out this board from Cboard!'\r\n  },\r\n  body: {\r\n    id: 'cboard.components.BoardShare.body',\r\n    defaultMessage:\r\n      'Hello! I want to share a communication board from the Cboard tool. Please find it at: {url}'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport CopyIcon from '@material-ui/icons/FilterNone';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport IconButton from '../../UI/IconButton';\r\nimport Button from '@material-ui/core/Button';\r\nimport {\r\n  FacebookShareButton,\r\n  FacebookIcon,\r\n  TwitterShareButton,\r\n  TwitterIcon,\r\n  EmailShareButton,\r\n  EmailIcon,\r\n  WhatsappShareButton,\r\n  WhatsappIcon,\r\n  RedditShareButton,\r\n  RedditIcon\r\n} from 'react-share';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport messages from './BoardShare.messages';\r\n\r\nimport './BoardShare.css';\r\n\r\nconst BoardShare = ({\r\n  label,\r\n  url,\r\n  intl,\r\n  disabled,\r\n  open,\r\n  isOwnBoard,\r\n  isPublic,\r\n  isLogged,\r\n  fullScreen,\r\n  onShareClick,\r\n  onShareClose,\r\n  publishBoard,\r\n  onCopyLink\r\n}) => (\r\n  <React.Fragment>\r\n    <IconButton\r\n      label={label}\r\n      disabled={disabled || open}\r\n      onClick={onShareClick}\r\n    >\r\n      <ShareIcon />\r\n    </IconButton>\r\n\r\n    <Dialog\r\n      open={open}\r\n      onClose={onShareClose}\r\n      fullScreen={fullScreen}\r\n      className=\"ShareDialog__container\"\r\n    >\r\n      <DialogTitle className=\"ShareDialog__title\">\r\n        <FormattedMessage {...messages.title} />\r\n\r\n        <IconButton\r\n          label={intl.formatMessage(messages.close)}\r\n          onClick={onShareClose}\r\n        >\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n      <DialogContent className=\"ShareDialog__content\">\r\n        <div className=\"ShareDialog__content__publish\">\r\n          {isLogged ? (\r\n            <Button\r\n              color=\"primary\"\r\n              variant={isPublic ? 'outlined' : 'contained'}\r\n              onClick={publishBoard}\r\n            >\r\n              {!isPublic ? (\r\n                <FormattedMessage {...messages.publishBoard} />\r\n              ) : (\r\n                <FormattedMessage {...messages.unpublishBoard} />\r\n              )}\r\n            </Button>\r\n          ) : (\r\n            <React.Fragment>\r\n              <Alert severity=\"warning\">\r\n                <FormattedMessage {...messages.unregisteredWarning} />\r\n              </Alert>\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                component={Link}\r\n                to=\"/login-signup\"\r\n              >\r\n                <FormattedMessage {...messages.loginSignUp} />\r\n              </Button>\r\n            </React.Fragment>\r\n          )}\r\n        </div>\r\n        {isLogged && (\r\n          <div className=\"ShareDialog__socialIcons\">\r\n            <Button disabled={!isPublic} onClick={onCopyLink} color=\"primary\">\r\n              <div className=\"ShareDialog__socialIcons__copyAction\">\r\n                <div>\r\n                  <CopyIcon />\r\n                </div>\r\n                <FormattedMessage {...messages.copyLink} />\r\n              </div>\r\n            </Button>\r\n            <Button disabled={!isPublic}>\r\n              <EmailShareButton\r\n                subject={intl.formatMessage(messages.subject)}\r\n                body={intl.formatMessage(messages.body, { url: url })}\r\n                url={url}\r\n              >\r\n                <EmailIcon round />\r\n                <FormattedMessage id=\"email\" {...messages.email} />\r\n              </EmailShareButton>\r\n            </Button>\r\n            <Button disabled={!isPublic}>\r\n              <FacebookShareButton\r\n                quote={intl.formatMessage(messages.subject)}\r\n                url={url}\r\n              >\r\n                <FacebookIcon round />\r\n                <FormattedMessage id=\"facebook\" {...messages.facebook} />\r\n              </FacebookShareButton>\r\n            </Button>\r\n            <Button disabled={!isPublic}>\r\n              <TwitterShareButton\r\n                title={intl.formatMessage(messages.subject)}\r\n                hashtags={['cboard', 'AAC']}\r\n                url={url}\r\n              >\r\n                <TwitterIcon round />\r\n                <FormattedMessage id=\"twitter\" {...messages.twitter} />\r\n              </TwitterShareButton>\r\n            </Button>\r\n            <Button disabled={!isPublic}>\r\n              <WhatsappShareButton\r\n                title={intl.formatMessage(messages.subject)}\r\n                url={url}\r\n              >\r\n                <WhatsappIcon round />\r\n                <FormattedMessage id=\"whatsapp\" {...messages.whatsapp} />\r\n              </WhatsappShareButton>\r\n            </Button>\r\n            <Button disabled={!isPublic}>\r\n              <RedditShareButton\r\n                title={intl.formatMessage(messages.subject)}\r\n                url={url}\r\n              >\r\n                <RedditIcon round />\r\n                <FormattedMessage id=\"reddit\" {...messages.reddit} />\r\n              </RedditShareButton>\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </DialogContent>\r\n    </Dialog>\r\n  </React.Fragment>\r\n);\r\n\r\nBoardShare.defaultProps = {\r\n  open: false,\r\n  disabled: false,\r\n  onShareClose: () => {},\r\n  onCopyLink: () => {}\r\n};\r\n\r\nBoardShare.propTypes = {\r\n  open: PropTypes.bool,\r\n  intl: PropTypes.object.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n  onShareClose: PropTypes.func,\r\n  onShareClick: PropTypes.func.isRequired,\r\n  onCopyLink: PropTypes.func.isRequired\r\n};\r\n\r\nexport default withMobileDialog()(BoardShare);\r\n","import BoardShare from './BoardShare.component';\r\n\r\nexport default BoardShare;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  fullscreen: {\r\n    id: 'cboard.components.FullScreenButton.fullscreen',\r\n    defaultMessage: 'Full screen'\r\n  },\r\n  exitFullscreen: {\r\n    id: 'cboard.components.FullScreenButton.exitFullscreen',\r\n    defaultMessage: 'Exit full screen'\r\n  }\r\n});\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\r\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from './FullScreenButton.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * If true, button will be disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired\r\n};\r\n\r\nclass FullScreenButton extends PureComponent {\r\n  state = { fullscreen: false };\r\n\r\n  requestFullscreen(element) {\r\n    if (element.requestFullscreen) {\r\n      element.requestFullscreen();\r\n    } else if (element.mozRequestFullScreen) {\r\n      element.mozRequestFullScreen();\r\n    } else if (element.webkitRequestFullScreen) {\r\n      element.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\r\n    }\r\n    this.setState({ fullscreen: true });\r\n  }\r\n\r\n  exitFullscreen() {\r\n    if (document.exitFullscreen) {\r\n      document.exitFullscreen();\r\n    } else if (document.mozCancelFullScreen) {\r\n      document.mozCancelFullScreen();\r\n    } else if (document.webkitExitFullscreen) {\r\n      document.webkitExitFullscreen();\r\n    }\r\n    this.setState({ fullscreen: false });\r\n  }\r\n\r\n  toggleFullscreen() {\r\n    if (this.state.fullscreen) {\r\n      this.exitFullscreen();\r\n    } else {\r\n      this.requestFullscreen(window.document.documentElement);\r\n    }\r\n  }\r\n\r\n  handleClick = () => {\r\n    this.toggleFullscreen();\r\n  };\r\n\r\n  render() {\r\n    const { disabled, intl } = this.props;\r\n\r\n    const fullScreenLabel = this.state.fullscreen\r\n      ? intl.formatMessage(messages.exitFullscreen)\r\n      : intl.formatMessage(messages.fullscreen);\r\n\r\n    return (\r\n      <IconButton\r\n        disabled={disabled}\r\n        label={fullScreenLabel}\r\n        onClick={this.handleClick}\r\n      >\r\n        {this.state.fullscreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\r\n      </IconButton>\r\n    );\r\n  }\r\n}\r\n\r\nFullScreenButton.propTypes = propTypes;\r\n\r\nexport default injectIntl(FullScreenButton);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport PrintBoardIcon from '@material-ui/icons/Print';\r\n\r\nimport IconButton from '../IconButton';\r\n\r\nconst PrintBoardButton = ({ label, disabled, onClick }) => (\r\n  <IconButton label={label} disabled={disabled} onClick={onClick}>\r\n    <PrintBoardIcon />\r\n  </IconButton>\r\n);\r\n\r\nPrintBoardButton.propTypes = {\r\n  label: PropTypes.string,\r\n  onClick: PropTypes.func,\r\n  disabled: PropTypes.bool\r\n};\r\n\r\nexport default PrintBoardButton;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  printBoard: {\r\n    id: 'cboard.components.PrintBoardButton.printBoard',\r\n    defaultMessage: 'Print Board'\r\n  },\r\n  printBoardSecondary: {\r\n    id: 'cboard.components.PrintBoardButton.printBoardSecondary',\r\n    defaultMessage: 'Print current board (it can take a while).'\r\n  },\r\n  printCurrentBoard: {\r\n    id: 'cboard.components.PrintBoardButton.printCurrentBoard',\r\n    defaultMessage: 'Current Board'\r\n  },\r\n  printFullBoardSet: {\r\n    id: 'cboard.components.PrintBoardButton.printFullBoardSet',\r\n    defaultMessage: 'Full Board Set'\r\n  },\r\n  boardDownloaded: {\r\n    id: 'cboard.components.PrintBoardButton.boardDownloaded',\r\n    defaultMessage: 'Your board was downloaded'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport FullScreenDialog, { FullScreenDialogContent } from '../FullScreenDialog';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport messages from './PrintBoardButton.messages';\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nimport './PrintBoardDialog.css';\r\n\r\nconst PrintBoardDialog = ({\r\n  title,\r\n  open,\r\n  loading,\r\n  onClose,\r\n  onPrintCurrentBoard\r\n}) => (\r\n  <FullScreenDialog\r\n    disableSubmit={true}\r\n    open={open}\r\n    title={title}\r\n    onClose={onClose}\r\n  >\r\n    <Paper>\r\n      <FullScreenDialogContent className=\"PrintBoardDialog__container\">\r\n        <List>\r\n          <ListItem>\r\n            <ListItemText\r\n              primary={<FormattedMessage {...messages.printBoard} />}\r\n              secondary={<FormattedMessage {...messages.printBoardSecondary} />}\r\n            />\r\n          </ListItem>\r\n          <ListItem>\r\n            <ListItemSecondaryAction>\r\n              {loading && (\r\n                <CircularProgress\r\n                  size={25}\r\n                  className=\"PrintBoardDialog--spinner\"\r\n                  thickness={7}\r\n                />\r\n              )}\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n                onClick={onPrintCurrentBoard}\r\n                disabled={loading}\r\n              >\r\n                <FormattedMessage {...messages.printCurrentBoard} />\r\n              </Button>\r\n            </ListItemSecondaryAction>\r\n          </ListItem>\r\n        </List>\r\n      </FullScreenDialogContent>\r\n    </Paper>\r\n  </FullScreenDialog>\r\n);\r\n\r\nPrintBoardDialog.defaultProps = {\r\n  open: false,\r\n  loading: false,\r\n  onClose: () => {},\r\n  onPrintCurrentBoard: () => {}\r\n};\r\n\r\nPrintBoardDialog.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  open: PropTypes.bool,\r\n  loading: PropTypes.bool,\r\n  onClose: PropTypes.func,\r\n  onPrintCurrentBoard: PropTypes.func\r\n};\r\n\r\nexport default PrintBoardDialog;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { intlShape, injectIntl } from 'react-intl';\r\nimport PrintBoardButton from './PrintBoardButton.component';\r\nimport PrintBoardDialog from './PrintBoardDialog.component';\r\nimport messages from './PrintBoardButton.messages';\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\n\r\nclass PrintBoardButtonContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openDialog: false,\r\n      loading: false\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.exportHelpers = import('../../Settings/Export/Export.helpers');\r\n  }\r\n\r\n  openPrintBoardDialog() {\r\n    this.setState({ openDialog: true });\r\n  }\r\n\r\n  closePrintBoardDialog() {\r\n    this.setState({ openDialog: false });\r\n  }\r\n\r\n  async onPrintCurrentBoard() {\r\n    this.setState({ loading: true });\r\n    const { boardData, intl, showNotification } = this.props;\r\n    const currentBoard = boardData.boards.find(\r\n      board => board.id === boardData.activeBoardId\r\n    );\r\n\r\n    const { pdfExportAdapter } = await this.exportHelpers;\r\n    pdfExportAdapter([currentBoard], intl).then(() => {\r\n      this.setState({ loading: false });\r\n      showNotification(intl.formatMessage(messages.boardDownloaded));\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { intl } = this.props;\r\n    const label = intl.formatMessage(messages.printBoard);\r\n    return (\r\n      <div>\r\n        <PrintBoardButton\r\n          label={label}\r\n          onClick={this.openPrintBoardDialog.bind(this)}\r\n          {...this.props}\r\n        />\r\n\r\n        <PrintBoardDialog\r\n          title={label}\r\n          loading={this.state.loading}\r\n          open={this.state.openDialog}\r\n          onClose={this.closePrintBoardDialog.bind(this)}\r\n          onPrintCurrentBoard={this.onPrintCurrentBoard.bind(this)}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrintBoardButtonContainer.propTypes = {\r\n  intl: intlShape.isRequired,\r\n  boardData: PropTypes.object,\r\n  disabled: PropTypes.bool\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  boardData: state.board\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(PrintBoardButtonContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  login: {\r\n    id: 'cboard.components.UserIcon.login',\r\n    defaultMessage: 'Login or Sign up'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport green from '@material-ui/core/colors/green';\r\n\r\nimport AccountIcon from '@material-ui/icons/AccountCircle';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from './UserIcon.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  user: PropTypes.object\r\n};\r\n\r\nconst styles = {\r\n  greenAvatar: {\r\n    backgroundColor: green[500]\r\n  }\r\n};\r\n\r\nexport const UserIcon = ({ intl, user, classes, ...other }) => {\r\n  let avatar = null;\r\n  let hasPhotos = false;\r\n  if (user) {\r\n    const fPhotos =\r\n      user.facebook && user.facebook.photos && user.facebook.photos.length\r\n        ? user.facebook.photos\r\n        : null;\r\n    const gPhotos =\r\n      user.google && user.google.photos && user.google.photos.length\r\n        ? user.google.photos\r\n        : null;\r\n    const uPhotos = user.photos && user.photos.length ? user.photos : null;\r\n    const photos = uPhotos || gPhotos || fPhotos || [];\r\n\r\n    if (photos.length) {\r\n      hasPhotos = true;\r\n      avatar = photos[0];\r\n    } else {\r\n      const [first, second = ''] = user.name\r\n        .toUpperCase()\r\n        .split(' ')\r\n        .slice(0, 2);\r\n      avatar = `${first.slice(0, 1)}${second.slice(0, 1)}`;\r\n    }\r\n  }\r\n\r\n  return (\r\n    <IconButton\r\n      label={user ? user.name : intl.formatMessage(messages.login)}\r\n      {...other}\r\n    >\r\n      <React.Fragment>\r\n        {!user && <AccountIcon />}\r\n        {!!user && (\r\n          <Avatar className={`UserIcon__Avatar ${classes.greenAvatar}`}>\r\n            {!hasPhotos && avatar}\r\n            {hasPhotos && <img src={avatar} alt={user.name} />}\r\n          </Avatar>\r\n        )}\r\n      </React.Fragment>\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nUserIcon.propTypes = propTypes;\r\n\r\nexport default withStyles(styles)(injectIntl(UserIcon));\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport UserIcon from './UserIcon.component';\r\n\r\nconst UserIconContainer = props => <UserIcon {...props} />;\r\n\r\nconst mapStateToProps = ({ app: { userData } }, ownProps) => ({\r\n  ...ownProps,\r\n  user: userData.email ? userData : null\r\n});\r\n\r\nexport default connect(mapStateToProps)(UserIconContainer);\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport debounce from 'lodash/debounce';\r\n\r\nfunction withChildProof(WrappedComponent) {\r\n  return class extends PureComponent {\r\n    static propTypes = {\r\n      /**\r\n       * Clicks to unlock, when number of clicks reached fires onClick\r\n       */\r\n      clicksToUnlock: PropTypes.number,\r\n      /**\r\n       * Callback fired on unlock and lock\r\n       */\r\n      onClick: PropTypes.func.isRequired,\r\n      /**\r\n       * Callback fired on each click\r\n       */\r\n      onLockTick: PropTypes.func\r\n    };\r\n\r\n    static defaultProps = {\r\n      clicksToUnlock: 4,\r\n      onLockTick: () => {}\r\n    };\r\n\r\n    lockActivated = true;\r\n    count = 0;\r\n\r\n    incrementCount() {\r\n      this.count = this.count + 1;\r\n    }\r\n\r\n    resetCount() {\r\n      this.count = 0;\r\n    }\r\n\r\n    debouncedResetCount = debounce(() => {\r\n      this.resetCount();\r\n    }, 2000);\r\n\r\n    activateLock() {\r\n      this.lockActivated = true;\r\n    }\r\n\r\n    deactivateLock() {\r\n      this.lockActivated = false;\r\n    }\r\n\r\n    tickLock(onToggle, onTick) {\r\n      const { clicksToUnlock, locked } = this.props;\r\n\r\n      if (!this.lockActivated) {\r\n        return;\r\n      }\r\n\r\n      if (!locked) {\r\n        onToggle();\r\n        this.activateLock();\r\n        this.resetCount();\r\n        return;\r\n      }\r\n\r\n      this.incrementCount();\r\n\r\n      if (this.count < clicksToUnlock) {\r\n        this.debouncedResetCount();\r\n      } else {\r\n        this.debouncedResetCount.cancel();\r\n      }\r\n\r\n      if (this.count <= clicksToUnlock) {\r\n        const clicksLeft = clicksToUnlock - this.count;\r\n        onTick(clicksLeft);\r\n      }\r\n\r\n      if (this.count === clicksToUnlock) {\r\n        onToggle();\r\n        this.deactivateLock();\r\n\r\n        setTimeout(() => {\r\n          this.activateLock();\r\n        }, 1000);\r\n      }\r\n\r\n      if (this.count === clicksToUnlock + 1) {\r\n        this.resetCount();\r\n        onToggle();\r\n      }\r\n    }\r\n\r\n    handleClick = event => {\r\n      const { onClick, onLockTick } = this.props;\r\n\r\n      this.tickLock(() => {\r\n        onClick(event);\r\n      }, onLockTick);\r\n    };\r\n\r\n    render() {\r\n      return <WrappedComponent {...this.props} onClick={this.handleClick} />;\r\n    }\r\n  };\r\n}\r\n\r\nexport default withChildProof;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  lock: {\r\n    id: 'cboard.components.LockToggle.lock',\r\n    defaultMessage: 'Lock'\r\n  },\r\n  unlock: {\r\n    id: 'cboard.components.LockToggle.unlock',\r\n    defaultMessage: 'Unlock'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport LockOpenIcon from '@material-ui/icons/LockOpen';\r\n\r\nimport withChildProof from './childProof';\r\nimport IconButton from '../IconButton';\r\nimport messages from './LockToggle.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * If true, toggle will be locked\r\n   */\r\n  locked: PropTypes.bool\r\n};\r\n\r\nfunction LockToggle(props) {\r\n  const { intl, locked, ...rest } = props;\r\n\r\n  const lockButtonLabel = locked\r\n    ? intl.formatMessage(messages.unlock)\r\n    : intl.formatMessage(messages.lock);\r\n\r\n  return (\r\n    <IconButton label={lockButtonLabel} {...rest}>\r\n      {locked ? <LockOutlinedIcon /> : <LockOpenIcon />}\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nLockToggle.propTypes = propTypes;\r\n\r\nconst ChildProofLockToggle = withChildProof(LockToggle);\r\n\r\nexport default injectIntl(ChildProofLockToggle);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  analytics: {\r\n    id: 'cboard.components.Analytics.analytics',\r\n    defaultMessage: 'Analytics'\r\n  },\r\n  mostUsedBoards: {\r\n    id: 'cboard.components.Analytics.mostUsedBoards',\r\n    defaultMessage: 'Most Used Boards'\r\n  },\r\n  topUsedButtons: {\r\n    id: 'cboard.components.Analytics.topUsedButtons',\r\n    defaultMessage: 'Top Used Buttons'\r\n  },\r\n  symbolSources: {\r\n    id: 'cboard.components.Analytics.symbolSources',\r\n    defaultMessage: 'Symbol Sources'\r\n  },\r\n  tenDaysUsage: {\r\n    id: 'cboard.components.Analytics.tenDaysUsage',\r\n    defaultMessage: 'Ten Days Usage'\r\n  },\r\n  twentyDaysUsage: {\r\n    id: 'cboard.components.Analytics.twentyDaysUsage',\r\n    defaultMessage: 'Twenty Days Usage'\r\n  },\r\n  thirtyDaysUsage: {\r\n    id: 'cboard.components.Analytics.thirtyDaysUsage',\r\n    defaultMessage: 'Thirty Days Usage'\r\n  },\r\n  sixtyDaysUsage: {\r\n    id: 'cboard.components.Analytics.sixtyDaysUsage',\r\n    defaultMessage: 'Sixty Days Usage'\r\n  },\r\n  close: {\r\n    id: 'cboard.components.Analytics.close',\r\n    defaultMessage: 'Close'\r\n  },\r\n  loadingError: {\r\n    id: 'cboard.components.Analytics.loadingError',\r\n    defaultMessage: 'There was an error loading your data. Please refresh.'\r\n  },\r\n  totalWords: {\r\n    id: 'cboard.components.Analytics.totalWords',\r\n    defaultMessage: 'Total Words'\r\n  },\r\n  totalPhrases: {\r\n    id: 'cboard.components.Analytics.totalPhrases',\r\n    defaultMessage: 'Total phrases'\r\n  },\r\n  boardsUsed: {\r\n    id: 'cboard.components.Analytics.boardsUsed',\r\n    defaultMessage: 'Boards used'\r\n  },\r\n  tilesEdited: {\r\n    id: 'cboard.components.Analytics.tilesEdited',\r\n    defaultMessage: 'Tiles edited'\r\n  },\r\n  editingEvents: {\r\n    id: 'cboard.components.Analytics.editingEvents',\r\n    defaultMessage: 'Editing Events'\r\n  },\r\n  speechEvents: {\r\n    id: 'cboard.components.Analytics.speechEvents',\r\n    defaultMessage: 'Speech Events'\r\n  },\r\n  navigationEvents: {\r\n    id: 'cboard.components.Analytics.navigationEvents',\r\n    defaultMessage: 'Navigation Events'\r\n  },\r\n  name: {\r\n    id: 'cboard.components.Analytics.name',\r\n    defaultMessage: 'Name'\r\n  },\r\n  timesClicked: {\r\n    id: 'cboard.components.Analytics.timesClicked',\r\n    defaultMessage: 'Times Clicked'\r\n  },\r\n  action: {\r\n    id: 'cboard.components.Analytics.action',\r\n    defaultMessage: 'Action'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport AnalyticsIcon from '@material-ui/icons/BarChart';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from '../../Analytics/Analytics.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * The component used for the root node. Either a string to use a DOM element or a component.\r\n   */\r\n  component: PropTypes.object,\r\n  /**\r\n   * If true, back button is disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * Callback fired when back button is clicked\r\n   */\r\n  onClick: PropTypes.func\r\n};\r\n\r\nfunction AnalyticsButton(props) {\r\n  const { intl, ...other } = props;\r\n  const label = intl.formatMessage(messages.analytics);\r\n\r\n  return (\r\n    <IconButton label={label} {...other}>\r\n      <AnalyticsIcon />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nAnalyticsButton.propTypes = propTypes;\r\n\r\nexport default injectIntl(AnalyticsButton);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  settings: {\r\n    id: 'cboard.components.Settings.settings',\r\n    defaultMessage: 'Settings'\r\n  },\r\n  people: {\r\n    id: 'cboard.components.Settings.people',\r\n    defaultMessage: 'People'\r\n  },\r\n  guest: {\r\n    id: 'cboard.components.Settings.guest',\r\n    defaultMessage: 'Guest'\r\n  },\r\n  language: {\r\n    id: 'cboard.components.Settings.language',\r\n    defaultMessage: 'Language'\r\n  },\r\n  speech: {\r\n    id: 'cboard.components.Settings.speech',\r\n    defaultMessage: 'Speech'\r\n  },\r\n  export: {\r\n    id: 'cboard.components.Settings.export',\r\n    defaultMessage: 'Export'\r\n  },\r\n  import: {\r\n    id: 'cboard.components.Settings.import',\r\n    defaultMessage: 'Import'\r\n  },\r\n  display: {\r\n    id: 'cboard.components.Settings.display',\r\n    defaultMessage: 'Display'\r\n  },\r\n  scanning: {\r\n    id: 'cboard.components.Settings.scanning',\r\n    defaultMessage: 'Scanning'\r\n  },\r\n  navigation: {\r\n    id: 'cboard.components.Settings.navigation',\r\n    defaultMessage: 'Navigation'\r\n  },\r\n  system: {\r\n    id: 'cboard.components.Settings.system',\r\n    defaultMessage: 'System'\r\n  },\r\n  about: {\r\n    id: 'cboard.components.Settings.about',\r\n    defaultMessage: 'About Cboard'\r\n  },\r\n  feedback: {\r\n    id: 'cboard.components.Settings.feedback',\r\n    defaultMessage: 'Feedback'\r\n  },\r\n  donate: {\r\n    id: 'cboard.components.Settings.donate',\r\n    defaultMessage: 'Donate'\r\n  },\r\n  username: {\r\n    id: 'cboard.components.Settings.username',\r\n    defaultMessage: 'Username'\r\n  },\r\n  loginSignup: {\r\n    id: 'cboard.components.Settings.loginSignup',\r\n    defaultMessage: 'Login / Sign Up'\r\n  },\r\n  logout: {\r\n    id: 'cboard.components.Settings.logout',\r\n    defaultMessage: 'Logout'\r\n  },\r\n  help: {\r\n    id: 'cboard.components.Settings.help',\r\n    defaultMessage: 'Help'\r\n  },\r\n  userHelp: {\r\n    id: 'cboard.components.Settings.userHelp',\r\n    defaultMessage: 'User Help'\r\n  },\r\n  walkthroughEndTour: {\r\n    id: 'cboard.components.Settings.walkthroughEndTour',\r\n    defaultMessage: 'End Tour'\r\n  },\r\n  walkthroughCloseTour: {\r\n    id: 'cboard.components.Settings.walkthroughCloseTour',\r\n    defaultMessage: 'Close Tour'\r\n  },\r\n  walkthroughBack: {\r\n    id: 'cboard.components.Settings.walkthroughBack',\r\n    defaultMessage: 'Back'\r\n  },\r\n  walkthroughNext: {\r\n    id: 'cboard.components.Settings.walkthroughNext',\r\n    defaultMessage: 'Next'\r\n  },\r\n  walkthroughSettings: {\r\n    id: 'cboard.components.Settings.walkthroughSettings',\r\n    defaultMessage: 'Welcome to the settings!'\r\n  },\r\n  walkthroughSettingsDesc: {\r\n    id: 'cboard.components.Settings.walkthroughSettingsDesc',\r\n    defaultMessage:\r\n      'The settings allows you to configure Cboard according to your needs. You can change the language, voice, look and feel, elements sizes, enable scanning and many more. '\r\n  },\r\n  walkthroughLanguage: {\r\n    id: 'cboard.components.Settings.walkthroughLanguage',\r\n    defaultMessage: 'Select a language for your profile.'\r\n  },\r\n  walkthroughSpeech: {\r\n    id: 'cboard.components.Settings.walkthroughSpeech',\r\n    defaultMessage:\r\n      'Select the speech settings for your profile. You can change the voice, the pitch and the rate.'\r\n  },\r\n  walkthroughExport: {\r\n    id: 'cboard.components.Settings.walkthroughExport',\r\n    defaultMessage:\r\n      'Browse options to export your Cboard boards to use them offline.'\r\n  },\r\n  walkthroughImport: {\r\n    id: 'cboard.components.Settings.walkthroughImport',\r\n    defaultMessage: 'Click here to import or upload your own boards.'\r\n  },\r\n  uiSizeTitle: {\r\n    id: 'cboard.components.Settings.uiSizeTitle',\r\n    defaultMessage: 'User Interface size'\r\n  },\r\n  uiSizeDescrip: {\r\n    id: 'cboard.components.Settings.uiSizeDescrip',\r\n    defaultMessage:\r\n      'Edit the size of the tiles here by choosing between: 1. Standard - 2. Large - 3. Extra Large'\r\n  },\r\n  fontSizeTitle: {\r\n    id: 'cboard.components.Settings.fontSizeTitle',\r\n    defaultMessage: 'Font Size'\r\n  },\r\n  fontSizeDescrip: {\r\n    id: 'cboard.components.Settings.fontSizeDescrip',\r\n    defaultMessage:\r\n      'Edit font size here by selecting from: 1. Standard, 2. Large or 3. Extra Large.'\r\n  },\r\n  hideOutputBarTitle: {\r\n    id: 'cboard.components.Settings.hideOutputBarTitle',\r\n    defaultMessage: 'Hide the output bar'\r\n  },\r\n  hideOutputBarDescrip: {\r\n    id: 'cboard.components.Settings.hideOutputBarDescrip',\r\n    defaultMessage:\r\n      'Hides the white bar on the top of the screen where icons appear when you build a sentence or select pictograms.'\r\n  },\r\n  labelPositionTitle: {\r\n    id: 'cboard.components.Settings.labelPositionTitle',\r\n    defaultMessage: 'Label position'\r\n  },\r\n  labelPositionDescrip: {\r\n    id: 'cboard.components.Settings.labelPositionDescrip',\r\n    defaultMessage:\r\n      'You can choose where to position the label. It can be above, below or hidden.'\r\n  },\r\n  enableDarkThemeTitle: {\r\n    id: 'cboard.components.Settings.enableDarkThemeTitle',\r\n    defaultMessage: 'Enable dark theme'\r\n  },\r\n  enableDarkThemeDescrip: {\r\n    id: 'cboard.components.Settings.enableDarkThemeDescrip',\r\n    defaultMessage: 'Click here to change the screen to a black background.'\r\n  },\r\n  enableScanningTitle: {\r\n    id: 'cboard.components.Settings.enableScanningTitle',\r\n    defaultMessage: 'Scanning'\r\n  },\r\n  enableScanningDescrip: {\r\n    id: 'cboard.components.Settings.enableScanningDescrip',\r\n    defaultMessage:\r\n      'Scanning is where the items on your board are automatically selected sequentially over time and the user makes a selection indirectly by pressing any key. The scanning can be automatic, manual or have a time delay (users can select how much time). This feature may help users with limited mobility.'\r\n  },\r\n  enableContextAwareBackButtonTitle: {\r\n    id: 'cboard.components.Settings.enableContextAwareBackButtonTitle',\r\n    defaultMessage: 'Context aware back button'\r\n  },\r\n  enableContextAwareBackButtonDescrip: {\r\n    id: 'cboard.components.Settings.enableContextAwareBackButtonDescrip',\r\n    defaultMessage: 'Add a large orange back button to your boards.'\r\n  },\r\n  showSharePhraseButtonTitle: {\r\n    id: 'cboard.components.Settings.showSharePhraseButtonTitle',\r\n    defaultMessage: 'Add a share button'\r\n  },\r\n  showSharePhraseButtonDescrip: {\r\n    id: 'cboard.components.Settings.showSharePhraseButtonDescrip',\r\n    defaultMessage:\r\n      'Add a share button that allow sharing your selected symbols/sentence in the top white bar above your board.'\r\n  },\r\n  removeSymbolsFromTheOutputBarTitle: {\r\n    id: 'cboard.components.Settings.removeSymbolsFromTheOutputBarTitle',\r\n    defaultMessage: 'Delete symbols from the output bar'\r\n  },\r\n  removeSymbolsFromTheOutputBarDescrip: {\r\n    id: 'cboard.components.Settings.removeSymbolsFromTheOutputBarDescrip',\r\n    defaultMessage:\r\n      '\"X\" button on each symbol allows the user to delete pictograms from the output bar.'\r\n  },\r\n  folderVocalizationTitle: {\r\n    id: 'cboard.components.Settings.folderVocalizationTitle',\r\n    defaultMessage: 'Folder vocalization'\r\n  },\r\n  folderVocalizationDescrip: {\r\n    id: 'cboard.components.Settings.folderVocalizationDescrip',\r\n    defaultMessage: 'Reads folders name out loud when clicked'\r\n  },\r\n  enableTour: {\r\n    id: 'cboard.components.Settings.enableTour',\r\n    defaultMessage: 'Enable tour'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from '../../Settings/Settings.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * The component used for the root node. Either a string to use a DOM element or a component.\r\n   */\r\n  component: PropTypes.object,\r\n  /**\r\n   * If true, back button is disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * Callback fired when back button is clicked\r\n   */\r\n  onClick: PropTypes.func\r\n};\r\n\r\nfunction HelpButton(props) {\r\n  const { intl, ...other } = props;\r\n  const label = intl.formatMessage(messages.userHelp);\r\n\r\n  return (\r\n    <IconButton id=\"help-button\" label={label} {...other}>\r\n      <HelpIcon />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nHelpButton.propTypes = propTypes;\r\n\r\nexport default injectIntl(HelpButton);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  settings: {\r\n    id: 'cboard.components.SettingsButton.settings',\r\n    defaultMessage: 'Settings'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\n\r\nimport IconButton from '../IconButton';\r\nimport messages from './SettingsButton.messages';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * The component used for the root node. Either a string to use a DOM element or a component.\r\n   */\r\n  component: PropTypes.object,\r\n  /**\r\n   * If true, back button is disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * Callback fired when back button is clicked\r\n   */\r\n  onClick: PropTypes.func\r\n};\r\n\r\nfunction SettingsButton(props) {\r\n  const { intl, ...other } = props;\r\n  const label = intl.formatMessage(messages.settings);\r\n\r\n  return (\r\n    <IconButton label={label} {...other}>\r\n      <SettingsIcon />\r\n    </IconButton>\r\n  );\r\n}\r\n\r\nSettingsButton.propTypes = propTypes;\r\n\r\nexport default injectIntl(SettingsButton);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link, withRouter } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\nimport isMobile from 'ismobilejs';\r\nimport { Scannable } from 'react-scannable';\r\nimport { IconButton } from '@material-ui/core';\r\nimport ScannerDeactivateIcon from '@material-ui/icons/ExploreOff';\r\n\r\nimport BoardShare from '../BoardShare';\r\nimport FullScreenButton from '../../UI/FullScreenButton';\r\nimport PrintBoardButton from '../../UI/PrintBoardButton';\r\nimport UserIcon from '../../UI/UserIcon';\r\nimport LockToggle from '../../UI/LockToggle';\r\nimport BackButton from '../../UI/BackButton';\r\nimport AnalyticsButton from '../../UI/AnalyticsButton';\r\nimport HelpButton from '../../UI/HelpButton';\r\nimport SettingsButton from '../../UI/SettingsButton';\r\nimport messages from '../Board.messages';\r\nimport { isCordova, isAndroid } from '../../../cordova-util';\r\nimport './Navbar.css';\r\nimport { injectIntl } from 'react-intl';\r\n\r\nexport class Navbar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      backButton: false,\r\n      openShareDialog: false,\r\n      deactivateScannerButton: false\r\n    };\r\n  }\r\n\r\n  onShareClick = () => {\r\n    this.setState({ openShareDialog: true });\r\n  };\r\n\r\n  onShareClose = () => {\r\n    this.setState({ openShareDialog: false });\r\n  };\r\n\r\n  publishBoard = () => {\r\n    this.props.publishBoard();\r\n  };\r\n\r\n  handleCopyLink = async () => {\r\n    const { intl, showNotification } = this.props;\r\n    try {\r\n      if (isAndroid()) {\r\n        await window.cordova.plugins.clipboard.copy(this.getBoardToShare());\r\n      } else {\r\n        await navigator.clipboard.writeText(this.getBoardToShare());\r\n      }\r\n      showNotification(intl.formatMessage(messages.copyMessage));\r\n    } catch (err) {\r\n      showNotification(intl.formatMessage(messages.failedToCopy));\r\n      console.log(err.message);\r\n    }\r\n  };\r\n\r\n  onScannableFocus = property => () => {\r\n    if (!this.state[property]) {\r\n      this.setState({ [property]: true });\r\n    }\r\n  };\r\n\r\n  onScannableBlur = property => () => {\r\n    if (this.state[property]) {\r\n      this.setState({ [property]: false });\r\n    }\r\n  };\r\n\r\n  onUserIconClick = () => {\r\n    const { userData, isLocked, intl, history } = this.props;\r\n    if (isLocked) {\r\n      const userLock = intl.formatMessage(messages.userProfileLocked);\r\n      this.props.showNotification(userLock);\r\n    } else {\r\n      if (userData.name && userData.email) {\r\n        history.push('/settings/people');\r\n      } else {\r\n        history.push('/login-signup');\r\n      }\r\n    }\r\n  };\r\n\r\n  getBoardToShare = () => {\r\n    const { board } = this.props;\r\n    if (isCordova()) {\r\n      return 'https://app.cboard.io/board/' + board.id;\r\n    } else {\r\n      return window.location.href;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      className,\r\n      intl,\r\n      board,\r\n      userData,\r\n      title,\r\n      disabled,\r\n      isLocked,\r\n      isScannerActive,\r\n      onBackClick,\r\n      onDeactivateScannerClick,\r\n      onLockClick,\r\n      onLockNotify\r\n    } = this.props;\r\n\r\n    const isPublic = board && board.isPublic;\r\n    const isOwnBoard = board && board.email === userData.email;\r\n    const isLogged = userData && userData.name && userData.email;\r\n\r\n    return (\r\n      <div className={classNames('Navbar', className)}>\r\n        {isLocked && <h2 className=\"Navbar__title\">{title}</h2>}\r\n        <div className=\"Navbar__group Navbar__group--start\">\r\n          <div className={this.state.backButton ? 'scanner__focused' : ''}>\r\n            <Scannable\r\n              disabled={disabled}\r\n              onFocus={this.onScannableFocus('backButton')}\r\n              onBlur={this.onScannableBlur('backButton')}\r\n            >\r\n              <BackButton disabled={disabled} onClick={onBackClick} />\r\n            </Scannable>\r\n          </div>\r\n          {isScannerActive && (\r\n            <div\r\n              className={\r\n                this.state.deactivateScannerButton ? 'scanner__focused' : ''\r\n              }\r\n            >\r\n              <Scannable\r\n                onFocus={this.onScannableFocus('deactivateScannerButton')}\r\n                onBlur={this.onScannableBlur('deactivateScannerButton')}\r\n              >\r\n                <IconButton\r\n                  className=\"Navbar__deactivateScanner\"\r\n                  onClick={onDeactivateScannerClick}\r\n                >\r\n                  <ScannerDeactivateIcon />\r\n                </IconButton>\r\n              </Scannable>\r\n            </div>\r\n          )}\r\n          {!isLocked && <HelpButton component={Link} to=\"/settings/help\" />}\r\n        </div>\r\n        <div className=\"Navbar__group Navbar__group--end\">\r\n          {!isLocked && (\r\n            <React.Fragment>\r\n              <PrintBoardButton />\r\n              {!isMobile.any && <FullScreenButton />}\r\n              {isLogged && !isCordova() && (\r\n                <AnalyticsButton component={Link} to=\"/analytics\" />\r\n              )}\r\n              <SettingsButton component={Link} to=\"/settings\" />\r\n              <BoardShare\r\n                label={intl.formatMessage(messages.share)}\r\n                intl={this.props.intl}\r\n                isPublic={isPublic}\r\n                isOwnBoard={isOwnBoard}\r\n                isLogged={isLogged}\r\n                onShareClick={this.onShareClick}\r\n                onShareClose={this.onShareClose}\r\n                publishBoard={this.publishBoard}\r\n                onCopyLink={this.handleCopyLink}\r\n                open={this.state.openShareDialog}\r\n                url={this.getBoardToShare()}\r\n                fullScreen={false}\r\n              />\r\n            </React.Fragment>\r\n          )}\r\n          <div className={'personal__account'}>\r\n            <UserIcon onClick={this.onUserIconClick} />\r\n          </div>\r\n          <div className={'open__lock'}>\r\n            <LockToggle\r\n              locked={isLocked}\r\n              onLockTick={onLockNotify}\r\n              onClick={onLockClick}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNavbar.propTypes = {\r\n  /**\r\n   * @ignore\r\n   */\r\n  className: PropTypes.string,\r\n  /**\r\n   * Bar title\r\n   */\r\n  title: PropTypes.string,\r\n  /**\r\n   * If disabled, navigation is disabled\r\n   */\r\n  disabled: PropTypes.bool,\r\n  /**\r\n   * If enabled, navigation bar is locked Todo: shouldn't be here - mixing concerns\r\n   */\r\n  isLocked: PropTypes.bool,\r\n  /**\r\n   * Callback fired when clicking on back button\r\n   */\r\n  onBackClick: PropTypes.func,\r\n  /**\r\n   * Callback fired when clicking on lock button\r\n   */\r\n  onLockClick: PropTypes.func,\r\n  isScannerActive: PropTypes.bool,\r\n  onDeactivateScannerClick: PropTypes.func,\r\n  history: PropTypes.object.isRequired\r\n};\r\n\r\nexport default withRouter(injectIntl(Navbar));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  items: {\r\n    id: 'cboard.components.SelectedCounter.items',\r\n    defaultMessage: 'items'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport messages from './SelectedCounter.messages';\r\nimport './SelectedCounter.css';\r\n\r\nconst propTypes = {\r\n  count: PropTypes.number\r\n};\r\n\r\nconst defaultProps = {\r\n  count: 0\r\n};\r\n\r\nconst SelectedCounter = ({ count }) => (\r\n  <div className=\"SelectedCounter\">\r\n    <span>\r\n      {count} <FormattedMessage {...messages.items} />\r\n    </span>\r\n  </div>\r\n);\r\n\r\nSelectedCounter.propTypes = propTypes;\r\nSelectedCounter.defaultProps = defaultProps;\r\n\r\nexport default SelectedCounter;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  select: {\r\n    id: 'cboard.components.Board.EditToolbar.select',\r\n    defaultMessage: 'Select'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.Board.EditToolbar.cancel',\r\n    defaultMessage: 'Cancel'\r\n  },\r\n  deleteTiles: {\r\n    id: 'cboard.components.Board.EditToolbar.deleteTiles',\r\n    defaultMessage: 'Delete selected tiles'\r\n  },\r\n  editTiles: {\r\n    id: 'cboard.components.Board.EditToolbar.editTiles',\r\n    defaultMessage: 'Edit selected tiles'\r\n  },\r\n  createTiles: {\r\n    id: 'cboard.components.Board.EditToolbar.createTiles',\r\n    defaultMessage: 'Create tiles'\r\n  },\r\n  editTilesButton: {\r\n    id: 'cboard.components.Board.EditToolbar.editTilesButton',\r\n    defaultMessage: 'Edit'\r\n  },\r\n  addTileButton: {\r\n    id: 'cboard.components.Board.EditToolbar.addTileButton',\r\n    defaultMessage: 'Add Tile'\r\n  },\r\n  fixedBoard: {\r\n    id: 'cboard.components.Board.EditToolbar.fixedBoard',\r\n    defaultMessage: 'Fixed'\r\n  }\r\n});\r\n","import React, { Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport classNames from 'classnames';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Button from '@material-ui/core/Button';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport DashboardIcon from '@material-ui/icons/Dashboard';\r\nimport DashboardOutlinedIcon from '@material-ui/icons/DashboardOutlined';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport AddBoxIcon from '@material-ui/icons/AddBox';\r\n\r\nimport SelectedCounter from '../../UI/SelectedCounter';\r\nimport IconButton from '../../UI/IconButton';\r\nimport messages from './EditToolbar.messages';\r\nimport './EditToolbar.css';\r\nimport { FormControlLabel } from '@material-ui/core';\r\n\r\nEditToolbar.propTypes = {\r\n  /**\r\n   * @ignore\r\n   */\r\n  className: PropTypes.string,\r\n  /**\r\n   * @ignore\r\n   */\r\n  classes: PropTypes.object,\r\n  /**\r\n   * @ignore\r\n   */\r\n  intl: intlShape.isRequired,\r\n  /**\r\n   * If true, select all checkbox will be checked\r\n   */\r\n  isSelectAll: PropTypes.bool,\r\n  isFixedBoard: PropTypes.bool,\r\n  /**\r\n   * Used to show a second Toolbar -- Todo: rename for seperation\r\n   */\r\n  isSelecting: PropTypes.bool,\r\n  isLoggedIn: PropTypes.bool,\r\n  /**\r\n   * Used to render how many items were selected in selection mode\r\n   */\r\n  selectedItemsCount: PropTypes.number.isRequired,\r\n  /**\r\n   * Callback fired when clicking on select button\r\n   */\r\n  onSelectClick: PropTypes.func,\r\n  /**\r\n   * Callback fired when clicking on delete button\r\n   */\r\n  onDeleteClick: PropTypes.func,\r\n  /**\r\n   * Callback fired when clicking on edit button\r\n   */\r\n  onEditClick: PropTypes.func,\r\n  /**\r\n   * Callback fired when clicking on select all checkbox\r\n   */\r\n  onSelectAllToggle: PropTypes.func,\r\n  onBoardTitleClick: PropTypes.func,\r\n  board: PropTypes.object,\r\n  /**\r\n   * Callback fired when clicking on add button\r\n   */\r\n  onAddClick: PropTypes.func,\r\n  onBoardTypeChange: PropTypes.func\r\n};\r\n\r\nfunction EditToolbar({\r\n  board,\r\n  className,\r\n  classes,\r\n  intl,\r\n  isSelectAll,\r\n  isSelecting,\r\n  isFixedBoard,\r\n  isSaving,\r\n  isLoggedIn,\r\n  selectedItemsCount,\r\n  onSelectClick,\r\n  onDeleteClick,\r\n  onEditClick,\r\n  onSelectAllToggle,\r\n  onBoardTitleClick,\r\n  onAddClick,\r\n  onBoardTypeChange\r\n}) {\r\n  const isItemsSelected = !!selectedItemsCount;\r\n  const isFixed = !!isFixedBoard;\r\n\r\n  return (\r\n    <div\r\n      className={classNames('EditToolbar', className, {\r\n        'EditToolbar--selecting': isSelecting\r\n      })}\r\n    >\r\n      {(isSaving || !isLoggedIn) && (\r\n        <span className=\"EditToolbar__BoardTitle\">{board.name}</span>\r\n      )}\r\n\r\n      {!isSaving && isLoggedIn && (\r\n        <Button\r\n          className={classNames('EditToolbar__BoardTitle', {\r\n            'logged-in': isLoggedIn\r\n          })}\r\n          onClick={onBoardTitleClick}\r\n        >\r\n          {board.name}\r\n        </Button>\r\n      )}\r\n\r\n      <div className=\"EditToolbar__group EditToolbar__group--start\">\r\n        <Button\r\n          label={intl.formatMessage(\r\n            messages[isSelecting ? 'cancel' : 'editTilesButton']\r\n          )}\r\n          id=\"edit-board-tiles\"\r\n          aria-label=\"edit-board-tiles\"\r\n          onClick={onSelectClick}\r\n          disabled={isSaving}\r\n          className={'edit__board__ride'}\r\n        >\r\n          {isSelecting ? (\r\n            <DashboardOutlinedIcon className=\"EditToolbar__group EditToolbar__group--start--button\" />\r\n          ) : (\r\n            <DashboardIcon className=\"EditToolbar__group EditToolbar__group--start--button\" />\r\n          )}\r\n          {!isSelecting ? intl.formatMessage(messages.editTilesButton) : ''}\r\n        </Button>\r\n\r\n        {isSelecting && (\r\n          <Fragment>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={isFixed}\r\n                  onChange={onBoardTypeChange}\r\n                  name=\"switchFixedBoard\"\r\n                  color=\"secondary\"\r\n                />\r\n              }\r\n              label={intl.formatMessage(messages.fixedBoard)}\r\n            />\r\n          </Fragment>\r\n        )}\r\n\r\n        {isSaving && (\r\n          <CircularProgress\r\n            size={24}\r\n            className=\"EditToolbar__Spinner\"\r\n            thickness={7}\r\n          />\r\n        )}\r\n      </div>\r\n      <div className=\"EditToolbar__group EditToolbar__group--end\">\r\n        {isSelecting && (\r\n          <Fragment>\r\n            <Checkbox checked={isSelectAll} onChange={onSelectAllToggle} />\r\n            <SelectedCounter count={selectedItemsCount} />\r\n            <IconButton\r\n              label={intl.formatMessage(messages.deleteTiles)}\r\n              disabled={!isItemsSelected}\r\n              onClick={onDeleteClick}\r\n            >\r\n              <DeleteIcon />\r\n            </IconButton>\r\n\r\n            <IconButton\r\n              label={intl.formatMessage(messages.editTiles)}\r\n              disabled={!isItemsSelected}\r\n              onClick={onEditClick}\r\n            >\r\n              <EditIcon />\r\n            </IconButton>\r\n          </Fragment>\r\n        )}\r\n        {!isSelecting && (\r\n          <div className={'add__board__tile'}>\r\n            <IconButton\r\n              label={intl.formatMessage(messages.addTileButton)}\r\n              onClick={onAddClick}\r\n              disabled={isSaving}\r\n              color=\"inherit\"\r\n            >\r\n              <AddBoxIcon />\r\n            </IconButton>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default injectIntl(EditToolbar);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  boardIsEmpty: {\r\n    id: 'cboard.components.Board.boardIsEmpty',\r\n    defaultMessage: 'This board is empty'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport { withStyles } from '@material-ui/core/styles';\r\n\r\nimport messages from './EmptyBoard.messages';\r\nimport './EmptyBoard.css';\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    width: 120,\r\n    height: 120,\r\n    color: '#aaa'\r\n  },\r\n  text: {\r\n    color: '#aaa'\r\n  },\r\n  background: {\r\n    background: theme.palette.background.default\r\n  }\r\n});\r\n\r\nfunction EmptyBoard({ classes }) {\r\n  return (\r\n    <div className={classNames('EmptyBoard', classes.background)}>\r\n      <ViewModuleIcon className={classes.icon} />\r\n      <div className={classes.text}>\r\n        <FormattedMessage {...messages.boardIsEmpty} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default withStyles(styles)(EmptyBoard);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  save: {\r\n    id: 'cboard.components.FormDialog.save',\r\n    defaultMessage: 'Save'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.FormDialog.cancel',\r\n    defaultMessage: 'Cancel'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport PropTypes from 'prop-types';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport withMobileDialog from '@material-ui/core/withMobileDialog';\r\nimport messages from './FormDialog.messages';\r\n\r\nimport './FormDialog.css';\r\n\r\nFormDialog.propTypes = {\r\n  disableSubmit: PropTypes.bool,\r\n  open: PropTypes.bool,\r\n  title: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n  description: PropTypes.oneOfType([PropTypes.string, PropTypes.node]),\r\n  onClose: PropTypes.func,\r\n  onSubmit: PropTypes.func,\r\n  classes: PropTypes.string,\r\n  className: PropTypes.string,\r\n  fullScreen: PropTypes.bool,\r\n  children: PropTypes.node\r\n};\r\n\r\nFormDialog.defaultProps = {\r\n  classes: '',\r\n  onClose: () => {}\r\n};\r\n\r\nfunction FormDialog(props) {\r\n  const {\r\n    classes,\r\n    children,\r\n    open,\r\n    title,\r\n    description,\r\n    disableSubmit,\r\n    onClose,\r\n    onSubmit,\r\n    fullScreen\r\n  } = props;\r\n\r\n  return (\r\n    <Dialog\r\n      fullScreen={fullScreen}\r\n      open={open}\r\n      onClose={onClose}\r\n      className={`FormDialog__Container ${classes}`}\r\n    >\r\n      <DialogTitle className=\"FormDialog__Title\">{title}</DialogTitle>\r\n      <DialogContent className=\"FormDialog__Content\">\r\n        {!!description && <DialogContentText>{description}</DialogContentText>}\r\n        <div className=\"FormDialog__Children\">{children}</div>\r\n      </DialogContent>\r\n      <DialogActions className=\"FormDialog__Actions\">\r\n        <Button onClick={onClose} color=\"primary\">\r\n          <FormattedMessage {...messages.cancel} />\r\n        </Button>\r\n        <Button\r\n          onClick={onSubmit}\r\n          color=\"primary\"\r\n          variant=\"contained\"\r\n          autoFocus\r\n          disabled={disableSubmit}\r\n        >\r\n          <FormattedMessage {...messages.save} />\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withMobileDialog()(FormDialog);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  communicators: {\r\n    id: 'cboard.components.CommunicatorToolbar.communicators',\r\n    defaultMessage: 'Communicators'\r\n  },\r\n  editTitle: {\r\n    id: 'cboard.components.CommunicatorToolbar.editTitle',\r\n    defaultMessage: 'Edit Communicator Title'\r\n  },\r\n  communicatorTitle: {\r\n    id: 'cboard.components.CommunicatorToolbar.communicatorTitle',\r\n    defaultMessage: 'Communicator Title'\r\n  },\r\n  boards: {\r\n    id: 'cboard.components.CommunicatorToolbar.boards',\r\n    defaultMessage: 'Boards'\r\n  },\r\n  copyMessage: {\r\n    id: 'cboard.components.CommunicatorToolbar.copyMessage',\r\n    defaultMessage: 'Copied to clipboard!'\r\n  },\r\n  share: {\r\n    id: 'cboard.components.CommunicatorToolbar.share',\r\n    defaultMessage: 'Share'\r\n  },\r\n  tiles: {\r\n    id: 'cboard.components.CommunicatorToolbar.tiles',\r\n    defaultMessage: '{qty} Tiles'\r\n  },\r\n  editCommunicator: {\r\n    id: 'cboard.components.CommunicatorToolbar.editCommunicator',\r\n    defaultMessage: 'Build'\r\n  },\r\n  addBoardButton: {\r\n    id: 'cboard.components.CommunicatorToolbar.addBoardButton',\r\n    defaultMessage: 'Add Board'\r\n  }\r\n\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport classNames from 'classnames';\r\nimport Button from '@material-ui/core/Button';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport LayersIcon from '@material-ui/icons/Layers';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\r\n\r\nimport FormDialog from '../../UI/FormDialog';\r\nimport messages from './CommunicatorToolbar.messages';\r\nimport './CommunicatorToolbar.css';\r\nimport { isCordova } from '../../../cordova-util';\r\n\r\nclass CommunicatorToolbar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      boardsMenu: null,\r\n      openTitleDialog: false,\r\n      titleDialogValue:\r\n        this.props.currentCommunicator.name ||\r\n        this.props.currentCommunicator.id ||\r\n        ''\r\n    };\r\n  }\r\n\r\n  openMenu(e) {\r\n    this.setState({ boardsMenu: e.currentTarget });\r\n  }\r\n\r\n  closeMenu() {\r\n    this.setState({ boardsMenu: null });\r\n  }\r\n\r\n  switchBoard(board) {\r\n    this.closeMenu();\r\n    this.props.switchBoard(board.id);\r\n    this.props.history.replace(`/board/${board.id}`);\r\n  }\r\n\r\n  handleCommunicatorTitleClick = () => {\r\n    if (!this.props.isLoggedIn) {\r\n      return false;\r\n    }\r\n\r\n    if (!this.isCommunicatorTitleClicked) {\r\n      this.isCommunicatorTitleClicked = setTimeout(() => {\r\n        this.isCommunicatorTitleClicked = false;\r\n      }, 400);\r\n    } else {\r\n      this.setState({\r\n        openTitleDialog: true,\r\n        titleDialogValue:\r\n          this.props.currentCommunicator.name ||\r\n          this.props.currentCommunicator.id ||\r\n          ''\r\n      });\r\n    }\r\n  };\r\n\r\n  handleCommunicatorTitleChange = event => {\r\n    const { value: titleDialogValue } = event.target;\r\n    this.setState({ titleDialogValue });\r\n  };\r\n\r\n  handleCommunicatorTitleSubmit = async () => {\r\n    if (this.state.titleDialogValue.length) {\r\n      try {\r\n        await this.props.editCommunicatorTitle(this.state.titleDialogValue);\r\n      } catch (e) {}\r\n    }\r\n    this.handleCommunicatorTitleClose();\r\n  };\r\n\r\n  handleCommunicatorTitleClose = () => {\r\n    this.setState({\r\n      openTitleDialog: false,\r\n      titleDialogValue:\r\n        this.props.currentCommunicator.name ||\r\n        this.props.currentCommunicator.id ||\r\n        ''\r\n    });\r\n  };\r\n\r\n  handleNewBoardClick = () => {};\r\n\r\n  boardCaption = board => {\r\n    // Cordova path cannot be absolute\r\n    if (isCordova() && board.caption && board.caption.search('/') === 0) {\r\n      return `.${board.caption}`;\r\n    } else {\r\n      return board.caption;\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      intl,\r\n      className,\r\n      boards,\r\n      isSelecting,\r\n      openCommunicatorDialog\r\n    } = this.props;\r\n\r\n    return (\r\n      <div className={classNames('CommunicatorToolbar', className)}>\r\n        <Button\r\n          className=\"Communicator__title\"\r\n          id=\"boards-button\"\r\n          disabled={isSelecting || boards.length === 0}\r\n          onClick={this.openMenu.bind(this)}\r\n        >\r\n          <ArrowDropDownIcon />\r\n          <FormattedMessage {...messages.boards} />\r\n        </Button>\r\n        <Menu\r\n          id=\"boards-menu\"\r\n          className=\"CommunicatorToolbar__menu\"\r\n          anchorEl={this.state.boardsMenu}\r\n          open={Boolean(this.state.boardsMenu)}\r\n          onClose={this.closeMenu.bind(this)}\r\n        >\r\n          {boards.map(board => (\r\n            <ListItem\r\n              className=\"CommunicatorToolbar__menuitem\"\r\n              key={board.id}\r\n              onClick={this.switchBoard.bind(this, board)}\r\n            >\r\n              <ListItemAvatar>\r\n                {this.boardCaption(board) ? (\r\n                  <Avatar src={this.boardCaption(board)} />\r\n                ) : (\r\n                  <Avatar>\r\n                    <ViewModuleIcon />\r\n                  </Avatar>\r\n                )}\r\n              </ListItemAvatar>\r\n              <ListItemText\r\n                inset\r\n                primary={\r\n                  board.name ||\r\n                  (board.nameKey &&\r\n                    intl.formatMessage({\r\n                      id: board.nameKey,\r\n                      defaultMessage: board.id\r\n                    }))\r\n                }\r\n                secondary={intl.formatMessage(messages.tiles, {\r\n                  qty: board.tiles.length\r\n                })}\r\n              />\r\n            </ListItem>\r\n          ))}\r\n        </Menu>\r\n        <FormDialog\r\n          open={this.state.openTitleDialog}\r\n          title={<FormattedMessage {...messages.editTitle} />}\r\n          onSubmit={this.handleCommunicatorTitleSubmit}\r\n          onClose={this.handleCommunicatorTitleClose}\r\n        >\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label={<FormattedMessage {...messages.communicatorTitle} />}\r\n            value={this.state.titleDialogValue}\r\n            type=\"text\"\r\n            onChange={this.handleCommunicatorTitleChange}\r\n            fullWidth\r\n            required\r\n          />\r\n        </FormDialog>\r\n\r\n        <div className=\"CommunicatorToolbar__group CommunicatorToolbar__group--start\">\r\n          <Button\r\n            className={'edit__communicator'}\r\n            disabled={isSelecting}\r\n            onClick={openCommunicatorDialog}\r\n          >\r\n            <LayersIcon className=\"CommunicatorToolbar__group CommunicatorToolbar__group--start--button\" />\r\n            {intl.formatMessage(messages.editCommunicator)}\r\n          </Button>\r\n        </div>\r\n        <div className=\"CommunicatorToolbar__group CommunicatorToolbar__group--end\">\r\n          {false && (\r\n            <div>\r\n              <Button\r\n                label={intl.formatMessage(messages.addBoardButton)}\r\n                onClick={this.handleNewBoardClick}\r\n                //TODO: need to implement function\r\n                disabled={isSelecting}\r\n                color=\"inherit\"\r\n              >\r\n                {intl.formatMessage(messages.addBoardButton)}\r\n                <AddCircleIcon />\r\n              </Button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCommunicatorToolbar.defaultProps = {\r\n  className: '',\r\n  boards: [],\r\n  isSelecting: false,\r\n  switchBoard: () => {},\r\n  showNotification: () => {},\r\n  openCommunicatorDialog: () => {}\r\n};\r\n\r\nCommunicatorToolbar.propTypes = {\r\n  className: PropTypes.string,\r\n  intl: intlShape.isRequired,\r\n  boards: PropTypes.array,\r\n  currentCommunicator: PropTypes.object,\r\n  isSelecting: PropTypes.bool,\r\n  showNotification: PropTypes.func,\r\n  switchBoard: PropTypes.func,\r\n  openCommunicatorDialog: PropTypes.func,\r\n  editCommunicatorTitle: PropTypes.func\r\n};\r\n\r\nexport default CommunicatorToolbar;\r\n","export const TAB_INDEXES = {\r\n  COMMUNICATOR_BOARDS: 0,\r\n  PUBLIC_BOARDS: 1,\r\n  MY_BOARDS: 2\r\n};\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  title: {\r\n    id: 'cboard.components.CommunicatorDialog.title',\r\n    defaultMessage: 'My Communicator'\r\n  },\r\n  menu: {\r\n    id: 'cboard.components.CommunicatorDialog.menu',\r\n    defaultMessage: 'Menu'\r\n  },\r\n  menuRootBoardOption: {\r\n    id: 'cboard.components.CommunicatorDialog.menuRootBoardOption',\r\n    defaultMessage: 'Set as Root Board'\r\n  },\r\n  menuPublishOption: {\r\n    id: 'cboard.components.CommunicatorDialog.menuPublishOption',\r\n    defaultMessage: 'Publish Board'\r\n  },\r\n  menuUnpublishOption: {\r\n    id: 'cboard.components.CommunicatorDialog.menuUnpublishOption',\r\n    defaultMessage: 'Unpublish Board'\r\n  },\r\n  emptyBoardsList: {\r\n    id: 'cboard.components.CommunicatorDialog.emptyBoardsList',\r\n    defaultMessage: 'No boards :('\r\n  },\r\n  loadNextPage: {\r\n    id: 'cboard.components.CommunicatorDialog.loadNextPage',\r\n    defaultMessage: 'Load More'\r\n  },\r\n  search: {\r\n    id: 'cboard.components.CommunicatorDialog.search',\r\n    defaultMessage: 'Search'\r\n  },\r\n  author: {\r\n    id: 'cboard.components.CommunicatorDialog.author',\r\n    defaultMessage: 'By {author}'\r\n  },\r\n  addBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.addBoard',\r\n    defaultMessage: 'Add Board'\r\n  },\r\n  removeBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.removeBoard',\r\n    defaultMessage: 'Remove Board'\r\n  },\r\n  communicatorBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.communicatorBoards',\r\n    defaultMessage: 'Boards'\r\n  },\r\n  allBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.allBoards',\r\n    defaultMessage: 'Public Boards'\r\n  },\r\n  myBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.myBoards',\r\n    defaultMessage: 'All My Boards'\r\n  },\r\n  boardsQty: {\r\n    id: 'cboard.components.CommunicatorDialog.boardsQty',\r\n    defaultMessage: '{qty} boards'\r\n  },\r\n  helpAndSupport: {\r\n    id: 'cboard.components.CommunicatorDialog.helpAndSupport',\r\n    defaultMessage: 'Help And Support'\r\n  },\r\n  termsOfService: {\r\n    id: 'cboard.components.CommunicatorDialog.termsOfService',\r\n    defaultMessage: 'Terms Of Service'\r\n  },\r\n  tilesQty: {\r\n    id: 'cboard.components.CommunicatorDialog.tilesQty',\r\n    defaultMessage: '{qty} Tiles'\r\n  },\r\n  boardInfo: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfo',\r\n    defaultMessage: 'Board Information'\r\n  },\r\n  boardAddedToCommunicator: {\r\n    id: 'cboard.components.CommunicatorDialog.boardAddedToCommunicator',\r\n    defaultMessage: 'Board successfully added to your Communicator'\r\n  },\r\n  boardRemovedFromCommunicator: {\r\n    id: 'cboard.components.CommunicatorDialog.boardRemovedFromCommunicator',\r\n    defaultMessage: 'Board successfully removed from your Communicator'\r\n  },\r\n  close: {\r\n    id: 'cboard.components.CommunicatorDialog.close',\r\n    defaultMessage: 'Close'\r\n  },\r\n  boardInfoName: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoName',\r\n    defaultMessage: 'Board name'\r\n  },\r\n  boardInfoAuthor: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoAuthor',\r\n    defaultMessage: 'Board Author'\r\n  },\r\n  boardInfoTiles: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoTiles',\r\n    defaultMessage: 'Number of tiles'\r\n  },\r\n  boardInfoId: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoId',\r\n    defaultMessage: 'Board ID'\r\n  },\r\n  boardInfoUrl: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoUrl',\r\n    defaultMessage: 'Board URL'\r\n  },\r\n  boardInfoDate: {\r\n    id: 'cboard.components.CommunicatorDialog.boardInfoDate',\r\n    defaultMessage: 'Last edited'\r\n  },\r\n  boardDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.boardDescription',\r\n    defaultMessage: 'Description'\r\n  },\r\n  boardPublished: {\r\n    id: 'cboard.components.CommunicatorDialog.boardPublished',\r\n    defaultMessage:\r\n      'Board successfully published! Everybody can see your board now.'\r\n  },\r\n  boardUnpublished: {\r\n    id: 'cboard.components.CommunicatorDialog.boardUnpublished',\r\n    defaultMessage: 'Board was unpublished! Nobody can see your board now.'\r\n  },\r\n  boardDeleted: {\r\n    id: 'cboard.components.CommunicatorDialog.boardDeleted',\r\n    defaultMessage: 'Board was permanently deleted.'\r\n  },\r\n  rootBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.rootBoard',\r\n    defaultMessage: 'Root Board'\r\n  },\r\n  publicBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.publicBoard',\r\n    defaultMessage: 'Public Board'\r\n  },\r\n  privateBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.privateBoard',\r\n    defaultMessage: 'Private Board'\r\n  },\r\n  activeBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.activeBoard',\r\n    defaultMessage: 'Active Board'\r\n  },\r\n  copyBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.copyBoard',\r\n    defaultMessage: 'Copy Board into your communicator'\r\n  },\r\n  copyBoardDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.copyBoardDescription',\r\n    defaultMessage:\r\n      'This action will create a copy of the public board and will add it into your communicator. Do you want to proceed?'\r\n  },\r\n  deleteBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.deleteBoard',\r\n    defaultMessage: 'Delete Board'\r\n  },\r\n  deleteBoardDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.deleteBoardDescription',\r\n    defaultMessage:\r\n      'This action will delete the board and it cannot be recovered. Do you want to proceed?'\r\n  },\r\n  publishBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.publishBoard',\r\n    defaultMessage: 'Board Description'\r\n  },\r\n  publishBoardDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.publishBoardDescription',\r\n    defaultMessage:\r\n      'Please provide a short description about the content of the board and what is the board intended for.'\r\n  },\r\n  accept: {\r\n    id: 'cboard.components.CommunicatorDialog.accept',\r\n    defaultMessage: 'Accept'\r\n  },\r\n  imageBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.imageBoard',\r\n    defaultMessage: 'Edit Board Image'\r\n  },\r\n  imageBoardDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.imageBoardDescription',\r\n    defaultMessage: 'You can either upload or look for symbols from libraries.'\r\n  },\r\n  imageSearch: {\r\n    id: 'cboard.components.CommunicatorDialog.imageSearch',\r\n    defaultMessage: 'Search for symbols'\r\n  },\r\n  editBoardTitle: {\r\n    id: 'cboard.components.CommunicatorDialog.editBoardTitle',\r\n    defaultMessage: 'Edit board name and description'\r\n  },\r\n  editBoardTitleDescription: {\r\n    id: 'cboard.components.CommunicatorDialog.editBoardTitleDescription',\r\n    defaultMessage:\r\n      'You can edit board name and description from here. Please consider to write a meaningful description for your board.'\r\n  },\r\n  noTitle: {\r\n    id: 'cboard.components.CommunicatorDialog.noTitle',\r\n    defaultMessage: 'No title'\r\n  },\r\n  boardCopyError: {\r\n    id: 'cboard.components.CommunicatorDialog.boardCopyError',\r\n    defaultMessage: 'ERROR: There was an error trying to get the board.'\r\n  },\r\n  walkthroughCommunicatorTitle: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughCommunicatorTitle',\r\n    defaultMessage: 'Welcome to the communicator builder!'\r\n  },\r\n  walkthroughCommunicator: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughCommunicator',\r\n    defaultMessage:\r\n      'The communicator builder allows you to build a list of preferred boards for quick access. You can handle boards in order to copy, delete, publish, add and remove them.'\r\n  },\r\n  walkthroughSearch: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughSearch',\r\n    defaultMessage:\r\n      'You can always search boards by name or author using this buttton.'\r\n  },\r\n  walkthroughBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughBoards',\r\n    defaultMessage:\r\n      'This tab will list all boards included into your communicator.'\r\n  },\r\n  walkthroughPublicBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughPublicBoards',\r\n    defaultMessage: 'This tab will list all public boards from all users.'\r\n  },\r\n  walkthroughAllMyBoards: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughAllMyBoards',\r\n    defaultMessage: 'This tab will list all of your own boards.'\r\n  },\r\n  walkthroughBoardProperties: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughBoardProperties',\r\n    defaultMessage: 'These icons indicate the board properties:'\r\n  },\r\n  walkthroughBoardActionButton: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughBoardActionButton',\r\n    defaultMessage: 'Action buttons:'\r\n  },\r\n  walkthroughBoardActionsRemove: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughBoardActionsRemove',\r\n    defaultMessage:\r\n      'Quit the board from communicator, but it will not delete the board from the database and it will be still available under All My Boards tab.'\r\n  },\r\n  walkthroughBoardActionsSetBoardAsRoot: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughBoardActionsSetBoardAsRoot',\r\n    defaultMessage:\r\n      'Define the board as the first board to be displayed every time you login to Cboard.'\r\n  },\r\n  walkthroughEndTour: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughEndTour',\r\n    defaultMessage: 'End Tour'\r\n  },\r\n  walkthroughCloseTour: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughCloseTour',\r\n    defaultMessage: 'Close Tour'\r\n  },\r\n  walkthroughBack: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughBack',\r\n    defaultMessage: 'Back'\r\n  },\r\n  walkthroughNext: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughNext',\r\n    defaultMessage: 'Next'\r\n  },\r\n  walkthroughPublicBoardsCopy: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughPublicBoardsCopy',\r\n    defaultMessage:\r\n      'Copy the public board and add it into your communicator. This option will create a copy of the public board, and it will not modify the original board.'\r\n  },\r\n  walkthroughPublicBoardsDetail: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughPublicBoardsDetail',\r\n    defaultMessage: 'This buttton will display detailed board information.'\r\n  },\r\n  walkthroughAllMyBoardsRemoveBoard: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsRemoveBoard',\r\n    defaultMessage:\r\n      'Remove board from the communicator, but it will not delete the board from the database and it will be still available under All My Boards tab.'\r\n  },\r\n  walkthroughAllMyBoardsEditBoardImage: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsEditBoardImage',\r\n    defaultMessage: 'You can edit the image that represents the board.'\r\n  },\r\n  walkthroughAllMyBoardsEditBoardName: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsEditBoardName',\r\n    defaultMessage: 'You can edit the board title and description.'\r\n  },\r\n  walkthroughAllMyBoardsAddBoard: {\r\n    id: 'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsAddBoard',\r\n    defaultMessage: 'Add board into the communicator.'\r\n  },\r\n  walkthroughAllMyBoardsPublishBoard: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsPublishBoard',\r\n    defaultMessage:\r\n      'Publish board: Make your board public. The board will be displayed under the Public Boards tab.'\r\n  },\r\n  walkthroughAllMyBoardsUnpublishBoard: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsUnpublishBoard',\r\n    defaultMessage:\r\n      \"Unpublish board: Make your board private. The board won't be displayed under the Public Boards tab.\"\r\n  },\r\n  walkthroughAllMyBoardsDeleteBoard: {\r\n    id:\r\n      'cboard.components.CommunicatorDialog.walkthroughAllMyBoardsDeleteBoard',\r\n    defaultMessage:\r\n      'Delete your board from the database, and it cannot be recovered.'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { intlShape } from 'react-intl';\r\nimport moment from 'moment';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport KeyIcon from '@material-ui/icons/VpnKey';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport InputIcon from '@material-ui/icons/Input';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\r\nimport QueueIcon from '@material-ui/icons/Queue';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport Button from '@material-ui/core/Button';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\n\r\nimport IconButton from '../../UI/IconButton';\r\nimport { TAB_INDEXES } from './CommunicatorDialog.constants';\r\nimport messages from './CommunicatorDialog.messages';\r\nimport { isCordova } from '../../../cordova-util';\r\nimport InputImage from '../../UI/InputImage';\r\nimport SymbolSearch from '../../Board/SymbolSearch';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nclass CommunicatorDialogBoardItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      openBoardInfo: false,\r\n      openDeleteBoard: false,\r\n      openPublishBoard: false,\r\n      openCopyBoard: false,\r\n      openImageBoard: false,\r\n      openEditBoardTitle: false,\r\n      imageBoard: null,\r\n      isSymbolSearchOpen: false,\r\n      editBoardTitleDialogValue: props.board.name,\r\n      editBoardDescriptionDialogValue: props.board.description\r\n        ? props.board.description\r\n        : ''\r\n    };\r\n  }\r\n\r\n  openMenu(e) {\r\n    this.setState({ menu: e.currentTarget });\r\n  }\r\n\r\n  closeMenu() {\r\n    this.setState({ menu: null });\r\n  }\r\n\r\n  handleBoardInfoOpen() {\r\n    this.setState({\r\n      openBoardInfo: true\r\n    });\r\n  }\r\n\r\n  handleBoardDeleteOpen() {\r\n    this.setState({\r\n      openDeleteBoard: true\r\n    });\r\n  }\r\n\r\n  handleBoardDescriptionChange = event => {\r\n    const { value: editBoardDescriptionDialogValue } = event.target;\r\n    this.setState({\r\n      editBoardDescriptionDialogValue: editBoardDescriptionDialogValue\r\n    });\r\n  };\r\n\r\n  handleBoardTitleChange = event => {\r\n    const { value: editBoardTitleDialogValue } = event.target;\r\n    this.setState({ editBoardTitleDialogValue: editBoardTitleDialogValue });\r\n  };\r\n\r\n  handleBoardImageChange(image) {\r\n    this.setState({ imageBoard: image });\r\n  }\r\n\r\n  async handleBoardPublishOpen(board) {\r\n    if (!board.isPublic && !board.description) {\r\n      this.setState({\r\n        openPublishBoard: true\r\n      });\r\n    } else {\r\n      this.setState({ loading: true });\r\n      try {\r\n        if (this.state.editBoardDescriptionDialogValue) {\r\n          board.description = this.state.editBoardDescriptionDialogValue;\r\n        }\r\n        await this.props.publishBoard(board);\r\n      } catch (err) {\r\n      } finally {\r\n        this.setState({\r\n          loading: false\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  handleBoardCopyOpen() {\r\n    this.setState({\r\n      openCopyBoard: true\r\n    });\r\n  }\r\n\r\n  async handleBoardCopy(board) {\r\n    this.setState({\r\n      openCopyBoard: false,\r\n      loading: true\r\n    });\r\n    try {\r\n      await this.props.copyBoard(board);\r\n    } catch (err) {\r\n    } finally {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  async handleBoardDelete(board) {\r\n    this.setState({\r\n      openDeleteBoard: false,\r\n      loading: true\r\n    });\r\n    try {\r\n      await this.props.deleteMyBoard(board);\r\n    } catch (err) {\r\n    } finally {\r\n      this.setState({\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  handleSymbolSearchClick = event => {\r\n    this.setState({ isSymbolSearchOpen: true });\r\n  };\r\n\r\n  handleSymbolSearchChange = ({ image }) => {\r\n    this.setState({ imageBoard: image });\r\n  };\r\n\r\n  handleSymbolSearchClose = event => {\r\n    this.setState({ isSymbolSearchOpen: false });\r\n  };\r\n\r\n  async handleBoardImage(board) {\r\n    this.setState({\r\n      openImageBoard: false,\r\n      loading: true\r\n    });\r\n\r\n    try {\r\n      if (this.state.imageBoard) {\r\n        const newBoard = {\r\n          ...board,\r\n          caption: this.state.imageBoard\r\n        };\r\n        await this.props.updateMyBoard(newBoard);\r\n      }\r\n    } catch (err) {\r\n    } finally {\r\n      this.setState({\r\n        imageBoard: null,\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  async handleBoardTitleDesc(board) {\r\n    this.setState({\r\n      openEditBoardTitle: false,\r\n      loading: true\r\n    });\r\n    try {\r\n      const newBoard = {\r\n        ...board,\r\n        description: this.state.editBoardDescriptionDialogValue\r\n          ? this.state.editBoardDescriptionDialogValue\r\n          : board.description,\r\n        name: this.state.editBoardTitleDialogValue\r\n          ? this.state.editBoardTitleDialogValue\r\n          : board.name\r\n      };\r\n      await this.props.updateMyBoard(newBoard);\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    } finally {\r\n      this.setState({\r\n        editBoardDescriptionDialogValue: board.description,\r\n        editBoardTitleDialogValue: board.name,\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  async handleBoardPublish(board) {\r\n    this.setState({\r\n      openPublishBoard: false,\r\n      loading: true\r\n    });\r\n\r\n    try {\r\n      if (this.state.editBoardDescriptionDialogValue) {\r\n        const newBoard = {\r\n          ...board,\r\n          description: this.state.editBoardDescriptionDialogValue\r\n        };\r\n        await this.props.updateMyBoard(newBoard);\r\n        await this.props.publishBoard(newBoard);\r\n      } else {\r\n        await this.props.publishBoard(board);\r\n      }\r\n    } catch (err) {\r\n    } finally {\r\n      this.setState({\r\n        editBoardDescriptionDialogValue: '',\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  handleDialogClose() {\r\n    this.setState({\r\n      openBoardInfo: false,\r\n      openCopyBoard: false,\r\n      openDeleteBoard: false,\r\n      openPublishBoard: false,\r\n      openEditBoardTitle: false,\r\n      openImageBoard: false\r\n    });\r\n  }\r\n\r\n  async setRootBoard(board) {\r\n    await this.props.setRootBoard(board);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      board,\r\n      selectedTab,\r\n      intl,\r\n      userData,\r\n      communicator,\r\n      activeBoardId,\r\n      addOrRemoveBoard\r\n    } = this.props;\r\n    const title = board.name || board.id;\r\n    const boardUrl =\r\n      window.location.origin +\r\n      '/' +\r\n      window.location.pathname.split('/')[1] +\r\n      '/' +\r\n      board.id;\r\n    const displayActions =\r\n      selectedTab === TAB_INDEXES.MY_BOARDS ||\r\n      selectedTab === TAB_INDEXES.PUBLIC_BOARDS ||\r\n      (selectedTab === TAB_INDEXES.COMMUNICATOR_BOARDS && !!userData.authToken);\r\n    // Cordova path cannot be absolute\r\n    const boardCaption =\r\n      isCordova() && board.caption && board.caption.search('/') === 0\r\n        ? `.${board.caption}`\r\n        : board.caption;\r\n    const imageBoard =\r\n      isCordova() &&\r\n      this.state.imageBoard &&\r\n      this.state.imageBoard.search('/') === 0\r\n        ? `.${this.state.imageBoard}`\r\n        : this.state.imageBoard;\r\n    return (\r\n      <div className=\"CommunicatorDialog__boards__item\">\r\n        <div className=\"CommunicatorDialog__boards__item__image\">\r\n          {!!boardCaption && (\r\n            <div className=\"CommunicatorDialog__boards__item__image_container\">\r\n              <img src={boardCaption} alt={title} />\r\n              {selectedTab === TAB_INDEXES.MY_BOARDS && (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  disableElevation={true}\r\n                  onClick={() => {\r\n                    this.setState({ openImageBoard: true });\r\n                  }}\r\n                  id=\"CommunicatorDialog__boards__item__image__Btn\"\r\n                >\r\n                  <EditIcon />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n          {!boardCaption && (\r\n            <div className=\"CommunicatorDialog__boards__item__image__empty\">\r\n              <ViewModuleIcon className=\"CommunicatorDialog__boards__item__image__empty ViewModuleIcon\" />\r\n              {selectedTab === TAB_INDEXES.MY_BOARDS && (\r\n                <Button\r\n                  variant=\"contained\"\r\n                  disableElevation={true}\r\n                  onClick={() => {\r\n                    this.setState({ openImageBoard: true });\r\n                  }}\r\n                >\r\n                  <EditIcon />\r\n                </Button>\r\n              )}\r\n            </div>\r\n          )}\r\n          <Dialog\r\n            onClose={this.handleDialogClose.bind(this)}\r\n            aria-labelledby=\"board-image-dialog\"\r\n            open={this.state.openImageBoard}\r\n            TransitionComponent={Transition}\r\n            aria-describedby=\"board-image-desc\"\r\n          >\r\n            <DialogTitle\r\n              id=\"board-image-title\"\r\n              onClose={this.handleDialogClose.bind(this)}\r\n            >\r\n              {intl.formatMessage(messages.imageBoard)}\r\n            </DialogTitle>\r\n            <DialogContent className=\"CommunicatorDialog__imageDialog__content\">\r\n              <DialogContentText id=\"dialog-image-board-desc\">\r\n                {intl.formatMessage(messages.imageBoardDescription)}\r\n              </DialogContentText>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n                startIcon={<SearchIcon />}\r\n                onClick={this.handleSymbolSearchClick}\r\n              >\r\n                {intl.formatMessage(messages.imageSearch)}\r\n              </Button>\r\n              <InputImage onChange={this.handleBoardImageChange.bind(this)} />\r\n              {!!this.state.imageBoard && (\r\n                <img src={imageBoard} alt={board.name} />\r\n              )}\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button\r\n                onClick={this.handleDialogClose.bind(this)}\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.close)}\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  this.handleBoardImage(board);\r\n                }}\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.accept)}\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </div>\r\n        <div className=\"CommunicatorDialog__boards__item__data\">\r\n          <div className=\"CommunicatorDialog__boards__item__data__title\">\r\n            <ListItem disableGutters={true}>\r\n              <ListItemText\r\n                primary={\r\n                  <div>\r\n                    {title}\r\n                    {selectedTab === TAB_INDEXES.MY_BOARDS && (\r\n                      <div className=\"CommunicatorDialog__boards__item__edit-title\">\r\n                        <IconButton\r\n                          aria-label=\"edit-title\"\r\n                          onClick={() => {\r\n                            this.setState({ openEditBoardTitle: true });\r\n                          }}\r\n                          label={intl.formatMessage(messages.editBoardTitle)}\r\n                        >\r\n                          <EditIcon fontSize=\"small\" />\r\n                        </IconButton>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                }\r\n                secondary={intl.formatMessage(messages.tilesQty, {\r\n                  qty: board.tiles.length\r\n                })}\r\n              />\r\n            </ListItem>\r\n          </div>\r\n          <Dialog\r\n            onClose={this.handleDialogClose.bind(this)}\r\n            aria-labelledby=\"board-edit-title-dialog\"\r\n            open={this.state.openEditBoardTitle}\r\n            TransitionComponent={Transition}\r\n            aria-describedby=\"board-edit-title-desc\"\r\n          >\r\n            <DialogTitle\r\n              id=\"board-edit-title-title\"\r\n              onClose={this.handleDialogClose.bind(this)}\r\n            >\r\n              {intl.formatMessage(messages.editBoardTitle)}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"dialog-board-edit-title-desc\">\r\n                {intl.formatMessage(messages.editBoardTitleDescription)}\r\n              </DialogContentText>\r\n              <TextField\r\n                autoFocus\r\n                margin=\"dense\"\r\n                id=\"title\"\r\n                label={intl.formatMessage(messages.boardInfoName)}\r\n                type=\"text\"\r\n                fullWidth\r\n                value={this.state.editBoardTitleDialogValue}\r\n                onChange={this.handleBoardTitleChange}\r\n              />\r\n              <TextField\r\n                autoFocus\r\n                margin=\"dense\"\r\n                id=\"description\"\r\n                label={intl.formatMessage(messages.publishBoard)}\r\n                type=\"text\"\r\n                multiline\r\n                rowsMax={6}\r\n                fullWidth\r\n                value={this.state.editBoardDescriptionDialogValue}\r\n                onChange={this.handleBoardDescriptionChange}\r\n              />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button\r\n                onClick={this.handleDialogClose.bind(this)}\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.close)}\r\n              </Button>\r\n              <Button\r\n                onClick={() => {\r\n                  this.handleBoardTitleDesc(board);\r\n                }}\r\n                variant=\"contained\"\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.accept)}\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n          <div className=\"CommunicatorDialog__boards__item__data__author\">\r\n            {intl.formatMessage(messages.author, { author: board.author })}\r\n          </div>\r\n          <div className=\"CommunicatorDialog__boards__item__data__date\">\r\n            {moment(board.lastEdited).format('DD/MM/YYYY')}\r\n          </div>\r\n          <div className=\"CommunicatorDialog__boards__item__data__extra\">\r\n            {board.isPublic && (\r\n              <Tooltip\r\n                title={intl.formatMessage(messages.publicBoard)}\r\n                name=\"CommunicatorDialog__PropertyOption\"\r\n              >\r\n                <PublicIcon />\r\n              </Tooltip>\r\n            )}\r\n            {!board.isPublic && (\r\n              <Tooltip\r\n                title={intl.formatMessage(messages.privateBoard)}\r\n                name=\"CommunicatorDialog__PropertyOption\"\r\n              >\r\n                <KeyIcon />\r\n              </Tooltip>\r\n            )}\r\n            {communicator.rootBoard === board.id && (\r\n              <Tooltip\r\n                title={intl.formatMessage(messages.rootBoard)}\r\n                name=\"CommunicatorDialog__PropertyOption\"\r\n              >\r\n                <HomeIcon />\r\n              </Tooltip>\r\n            )}\r\n            {activeBoardId === board.id && (\r\n              <Tooltip\r\n                title={intl.formatMessage(messages.activeBoard)}\r\n                name=\"CommunicatorDialog__PropertyOption\"\r\n              >\r\n                <RemoveRedEyeIcon />\r\n              </Tooltip>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div>\r\n          {this.state.loading && <CircularProgress size={25} thickness={7} />}\r\n        </div>\r\n        <div className=\"CommunicatorDialog__boards__item__actions\">\r\n          {displayActions && (\r\n            <div>\r\n              {selectedTab === TAB_INDEXES.COMMUNICATOR_BOARDS && (\r\n                <div>\r\n                  <IconButton\r\n                    disabled={\r\n                      communicator.rootBoard === board.id || !userData.authToken\r\n                    }\r\n                    label={intl.formatMessage(messages.removeBoard)}\r\n                    onClick={() => {\r\n                      addOrRemoveBoard(board);\r\n                    }}\r\n                  >\r\n                    <ClearIcon />\r\n                  </IconButton>\r\n                  <IconButton\r\n                    disabled={communicator.rootBoard === board.id}\r\n                    onClick={() => {\r\n                      this.setRootBoard(board);\r\n                    }}\r\n                    label={intl.formatMessage(messages.menuRootBoardOption)}\r\n                  >\r\n                    <HomeIcon />\r\n                  </IconButton>\r\n                </div>\r\n              )}\r\n              {selectedTab === TAB_INDEXES.PUBLIC_BOARDS && (\r\n                <div>\r\n                  <IconButton\r\n                    disabled={\r\n                      communicator.boards.includes(board.id) ||\r\n                      (userData && userData.email === board.email)\r\n                    }\r\n                    onClick={this.handleBoardCopyOpen.bind(this)}\r\n                    label={intl.formatMessage(messages.copyBoard)}\r\n                  >\r\n                    <QueueIcon />\r\n                  </IconButton>\r\n                  <IconButton\r\n                    label={intl.formatMessage(messages.boardInfo)}\r\n                    onClick={this.handleBoardInfoOpen.bind(this)}\r\n                  >\r\n                    <InfoIcon />\r\n                  </IconButton>\r\n                  <Dialog\r\n                    onClose={this.handleDialogClose.bind(this)}\r\n                    aria-labelledby=\"board-info-title\"\r\n                    open={this.state.openBoardInfo}\r\n                    className=\"CommunicatorDialog__boardInfoDialog\"\r\n                  >\r\n                    <DialogTitle\r\n                      id=\"board-info-title\"\r\n                      onClose={this.handleDialogClose.bind(this)}\r\n                    >\r\n                      {board.name}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>{intl.formatMessage(messages.boardInfoName)}:</b>{' '}\r\n                          {board.name}\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>{intl.formatMessage(messages.boardInfoAuthor)}:</b>{' '}\r\n                          {board.author}\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>\r\n                            {intl.formatMessage(messages.boardDescription)}:\r\n                          </b>{' '}\r\n                          {board.description}\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>{intl.formatMessage(messages.boardInfoDate)}:</b>{' '}\r\n                          {moment(board.lastEdited).format('DD/MM/YYYY')}\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>{intl.formatMessage(messages.boardInfoTiles)}:</b>{' '}\r\n                          {board.tiles.length}\r\n                        </Typography>\r\n                        <Typography variant=\"body1\" gutterBottom>\r\n                          <b>{intl.formatMessage(messages.boardInfoId)}:</b>{' '}\r\n                          {board.id}\r\n                        </Typography>\r\n                        {!isCordova() && (\r\n                          <Typography variant=\"body1\" gutterBottom>\r\n                            <b>{intl.formatMessage(messages.boardInfoUrl)}:</b>{' '}\r\n                            <a\r\n                              href={boardUrl}\r\n                              target=\"_blank\"\r\n                              rel=\"noopener noreferrer\"\r\n                            >\r\n                              {boardUrl}\r\n                            </a>\r\n                          </Typography>\r\n                        )}\r\n                      </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button\r\n                        onClick={this.handleDialogClose.bind(this)}\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.close)}\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n\r\n                  <Dialog\r\n                    onClose={this.handleDialogClose.bind(this)}\r\n                    aria-labelledby=\"board-copy-dialog\"\r\n                    open={this.state.openCopyBoard}\r\n                  >\r\n                    <DialogTitle\r\n                      id=\"board-copy-title\"\r\n                      onClose={this.handleDialogClose.bind(this)}\r\n                    >\r\n                      {intl.formatMessage(messages.copyBoard)}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText>\r\n                        {intl.formatMessage(messages.copyBoardDescription)}\r\n                      </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button\r\n                        onClick={this.handleDialogClose.bind(this)}\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.close)}\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          this.handleBoardCopy(board);\r\n                        }}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.accept)}\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n                </div>\r\n              )}\r\n              {selectedTab === TAB_INDEXES.MY_BOARDS && (\r\n                <div>\r\n                  <IconButton\r\n                    disabled={communicator.rootBoard === board.id}\r\n                    label={\r\n                      communicator.boards.includes(board.id)\r\n                        ? intl.formatMessage(messages.removeBoard)\r\n                        : intl.formatMessage(messages.addBoard)\r\n                    }\r\n                    onClick={() => {\r\n                      addOrRemoveBoard(board);\r\n                    }}\r\n                  >\r\n                    {communicator.boards.includes(board.id) ? (\r\n                      <ClearIcon />\r\n                    ) : (\r\n                      <InputIcon />\r\n                    )}\r\n                  </IconButton>\r\n                  <IconButton\r\n                    label={\r\n                      board.isPublic\r\n                        ? intl.formatMessage(messages.menuUnpublishOption)\r\n                        : intl.formatMessage(messages.menuPublishOption)\r\n                    }\r\n                    onClick={() => {\r\n                      this.handleBoardPublishOpen(board);\r\n                    }}\r\n                  >\r\n                    {board.isPublic ? <KeyIcon /> : <PublicIcon />}\r\n                  </IconButton>\r\n                  <Dialog\r\n                    onClose={this.handleDialogClose.bind(this)}\r\n                    aria-labelledby=\"board-publish-dialog\"\r\n                    open={this.state.openPublishBoard}\r\n                    TransitionComponent={Transition}\r\n                    aria-describedby=\"board-publish-desc\"\r\n                  >\r\n                    <DialogTitle\r\n                      id=\"board-publish-title\"\r\n                      onClose={this.handleDialogClose.bind(this)}\r\n                    >\r\n                      {intl.formatMessage(messages.publishBoard)}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText id=\"dialog-publish-board-desc\">\r\n                        {intl.formatMessage(messages.publishBoardDescription)}\r\n                      </DialogContentText>\r\n                      <TextField\r\n                        autoFocus\r\n                        margin=\"dense\"\r\n                        id=\"description\"\r\n                        label={intl.formatMessage(messages.publishBoard)}\r\n                        type=\"text\"\r\n                        fullWidth\r\n                        value={this.state.editBoardDescriptionDialogValue}\r\n                        onChange={this.handleBoardDescriptionChange}\r\n                      />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button\r\n                        onClick={this.handleDialogClose.bind(this)}\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.close)}\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          this.handleBoardPublish(board);\r\n                        }}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.accept)}\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n                  <IconButton\r\n                    disabled={\r\n                      communicator.rootBoard === board.id ||\r\n                      activeBoardId === board.id\r\n                    }\r\n                    label={intl.formatMessage(messages.deleteBoard)}\r\n                    onClick={() => {\r\n                      this.handleBoardDeleteOpen(board);\r\n                    }}\r\n                  >\r\n                    <DeleteIcon />\r\n                  </IconButton>\r\n                  <Dialog\r\n                    onClose={this.handleDialogClose.bind(this)}\r\n                    aria-labelledby=\"board-delete-dialog\"\r\n                    open={this.state.openDeleteBoard}\r\n                  >\r\n                    <DialogTitle\r\n                      id=\"board-delete-title\"\r\n                      onClose={this.handleDialogClose.bind(this)}\r\n                    >\r\n                      {intl.formatMessage(messages.deleteBoard)}\r\n                    </DialogTitle>\r\n                    <DialogContent>\r\n                      <DialogContentText>\r\n                        {intl.formatMessage(messages.deleteBoardDescription)}\r\n                      </DialogContentText>\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                      <Button\r\n                        onClick={this.handleDialogClose.bind(this)}\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.close)}\r\n                      </Button>\r\n                      <Button\r\n                        onClick={() => {\r\n                          this.handleBoardDelete(board);\r\n                        }}\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                      >\r\n                        {intl.formatMessage(messages.accept)}\r\n                      </Button>\r\n                    </DialogActions>\r\n                  </Dialog>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <SymbolSearch\r\n          open={this.state.isSymbolSearchOpen}\r\n          onChange={this.handleSymbolSearchChange}\r\n          onClose={this.handleSymbolSearchClose}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCommunicatorDialogBoardItem.propTypes = {\r\n  intl: intlShape,\r\n  communicator: PropTypes.object,\r\n  activeBoardId: PropTypes.string,\r\n  selectedTab: PropTypes.number,\r\n  board: PropTypes.object,\r\n  userData: PropTypes.object,\r\n  copyBoard: PropTypes.func.isRequired,\r\n  addOrRemoveBoard: PropTypes.func.isRequired,\r\n  deleteMyBoard: PropTypes.func.isRequired,\r\n  updateMyBoard: PropTypes.func.isRequired,\r\n  publishBoard: PropTypes.func.isRequired,\r\n  setRootBoard: PropTypes.func.isRequired,\r\n  showNotification: PropTypes.func.isRequired,\r\n  selectedIds: PropTypes.arrayOf(PropTypes.string)\r\n};\r\n\r\nexport default CommunicatorDialogBoardItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport IconButton from '../../UI/IconButton';\r\nimport MenuIcon from '@material-ui/icons/MoreVert';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { intlShape, FormattedMessage } from 'react-intl';\r\n\r\nimport messages from './CommunicatorDialog.messages';\r\n\r\nclass CommunicatorDialogButtons extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      menu: null\r\n    };\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (\r\n      prevProps.isSearchOpen !== this.props.isSearchOpen &&\r\n      this.props.isSearchOpen\r\n    ) {\r\n      document.getElementById('communicator-dialog-buttons-search').focus();\r\n    }\r\n  }\r\n\r\n  openMenu(e) {\r\n    this.setState({ menu: e.currentTarget });\r\n  }\r\n\r\n  closeMenu() {\r\n    this.setState({ menu: null });\r\n  }\r\n\r\n  onSearch(event) {\r\n    const searchValue = event.target.value;\r\n    this.props.onSearch(searchValue);\r\n  }\r\n\r\n  render() {\r\n    const { intl, searchValue, isSearchOpen, openSearchBar, dark } = this.props;\r\n\r\n    return (\r\n      <div\r\n        className={classNames(\r\n          'CommunicatorDialogButtons__container',\r\n          dark ? 'is-dark' : ''\r\n        )}\r\n      >\r\n        {isSearchOpen && (\r\n          <div className=\"CommunicatorDialogButtons__searchInput\">\r\n            <TextField\r\n              id=\"communicator-dialog-buttons-search\"\r\n              value={searchValue}\r\n              onChange={this.onSearch.bind(this)}\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n            />\r\n          </div>\r\n        )}\r\n        {!isSearchOpen && (\r\n          <div className=\"CommunicatorDialogButtons__searchButton\">\r\n            <IconButton\r\n              id=\"communicator-dialog-buttons-search-button\"\r\n              label={intl.formatMessage(messages.search)}\r\n              onClick={openSearchBar}\r\n            >\r\n              <SearchIcon />\r\n            </IconButton>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"CommunicatorDialogButtons__menu\">\r\n          <IconButton\r\n            id=\"communicator-dialog-buttons-menu-button\"\r\n            label={intl.formatMessage(messages.menu)}\r\n            onClick={this.openMenu.bind(this)}\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Menu\r\n            id=\"communicator-dialog-buttons-menu\"\r\n            anchorEl={this.state.menu}\r\n            open={Boolean(this.state.menu)}\r\n            onClose={this.closeMenu.bind(this)}\r\n          >\r\n            <MenuItem>\r\n              <Link to=\"/settings/help\">\r\n                <FormattedMessage {...messages.helpAndSupport} />\r\n              </Link>\r\n            </MenuItem>\r\n            <MenuItem>\r\n              <a\r\n                href=\"https://www.cboard.io/terms-of-use/\"\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n              >\r\n                <FormattedMessage {...messages.termsOfService} />\r\n              </a>\r\n            </MenuItem>\r\n          </Menu>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nCommunicatorDialogButtons.propTypes = {\r\n  onSearch: PropTypes.func.isRequired,\r\n  intl: intlShape.isRequired,\r\n  dark: PropTypes.bool\r\n};\r\n\r\nexport default CommunicatorDialogButtons;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport Joyride, { STATUS } from 'react-joyride';\r\n\r\nimport { TAB_INDEXES } from './CommunicatorDialog.constants';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport QueueIcon from '@material-ui/icons/Queue';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport HomeIcon from '@material-ui/icons/Home';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport PublicIcon from '@material-ui/icons/Public';\r\nimport KeyIcon from '@material-ui/icons/VpnKey';\r\nimport RemoveRedEyeIcon from '@material-ui/icons/RemoveRedEye';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport InputIcon from '@material-ui/icons/Input';\r\n\r\nimport './CommunicatorDialog.css';\r\nimport messages from './CommunicatorDialog.messages';\r\n\r\nconst propTypes = {\r\n  communicatorTour: PropTypes.object.isRequired,\r\n  selectedTab: PropTypes.number,\r\n  disableTour: PropTypes.func.isRequired,\r\n  intl: intlShape.isRequired\r\n};\r\n\r\nconst joyrideStyles = {\r\n  options: {\r\n    arrowColor: '#eee',\r\n    backgroundColor: '#eee',\r\n    primaryColor: '#aa00ff',\r\n    textColor: '#333',\r\n    width: 500,\r\n    zIndex: 10000\r\n  }\r\n};\r\n\r\nfunction CommunicatorDialogTour({\r\n  communicatorTour,\r\n  selectedTab,\r\n  disableTour,\r\n  intl\r\n}) {\r\n  const commBoardsHelpSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <div>\r\n          <h2>\r\n            <FormattedMessage {...messages.walkthroughCommunicatorTitle} />\r\n          </h2>\r\n          <h5>\r\n            <FormattedMessage {...messages.walkthroughCommunicator} />\r\n          </h5>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#CommunicatorDialog__BoardBtn',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughBoards} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#CommunicatorDialog__PublicBoardsBtn',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughPublicBoards} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#CommunicatorDialog__AllMyBoardsBtn',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughAllMyBoards} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.CommunicatorDialogButtons__searchButton',\r\n      content: <FormattedMessage {...messages.walkthroughSearch} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '[name=\"CommunicatorDialog__PropertyOption\"]',\r\n      content: (\r\n        <div className=\"CommunicatorDialog__Tour CommunicatorDialog__Tour__boardProperty\">\r\n          <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n          >\r\n            <Grid item xs={12} md={12}>\r\n              <Typography variant=\"h6\">\r\n                <FormattedMessage {...messages.walkthroughBoardProperties} />\r\n              </Typography>\r\n              <List>\r\n                <ListItem alignItems=\"center\">\r\n                  <ListItemIcon>\r\n                    <PublicIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(messages.publicBoard)}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <KeyIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(messages.privateBoard)}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <HomeIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(messages.rootBoard)}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <RemoveRedEyeIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(messages.activeBoard)}\r\n                  />\r\n                </ListItem>\r\n              </List>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.CommunicatorDialog__boards__item__actions',\r\n      placement: 'left',\r\n      content: (\r\n        <div className=\"CommunicatorDialog__Tour\">\r\n          <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n          >\r\n            <Grid item xs={12} md={12}>\r\n              <Typography variant=\"h6\">\r\n                <FormattedMessage {...messages.walkthroughBoardActionButton} />\r\n              </Typography>\r\n              <List>\r\n                <ListItem alignItems=\"center\">\r\n                  <ListItemIcon>\r\n                    <ClearIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughBoardActionsRemove\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <HomeIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughBoardActionsSetBoardAsRoot\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n              </List>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const publicBoardsHelpSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <div>\r\n          <h2>\r\n            <FormattedMessage {...messages.allBoards} />\r\n          </h2>\r\n          <h5>\r\n            <FormattedMessage {...messages.walkthroughPublicBoards} />\r\n          </h5>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.CommunicatorDialog__boards__item__actions',\r\n      placement: 'left',\r\n      content: (\r\n        <div className=\"CommunicatorDialog__Tour\">\r\n          <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n          >\r\n            <Grid item xs={12} md={12}>\r\n              <Typography variant=\"h6\">\r\n                <FormattedMessage {...messages.walkthroughBoardActionButton} />\r\n              </Typography>\r\n              <List>\r\n                <ListItem alignItems=\"center\">\r\n                  <ListItemIcon>\r\n                    <QueueIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughPublicBoardsCopy\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <InfoIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughPublicBoardsDetail\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n              </List>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const allMyBoardsHelpSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <div>\r\n          <h2>\r\n            <FormattedMessage {...messages.myBoards} />\r\n          </h2>\r\n          <h5>\r\n            <FormattedMessage {...messages.walkthroughAllMyBoards} />\r\n          </h5>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      target: '#CommunicatorDialog__boards__item__image__Btn',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <FormattedMessage {...messages.walkthroughAllMyBoardsEditBoardImage} />\r\n      )\r\n    },\r\n    {\r\n      target: '.CommunicatorDialog__boards__item__edit-title',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <FormattedMessage {...messages.walkthroughAllMyBoardsEditBoardName} />\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.CommunicatorDialog__boards__item__actions',\r\n      placement: 'left',\r\n      content: (\r\n        <div className=\"CommunicatorDialog__Tour\">\r\n          <Grid\r\n            container\r\n            spacing={0}\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            justify=\"center\"\r\n          >\r\n            <Grid item xs={12} md={12}>\r\n              <Typography variant=\"h6\">\r\n                <FormattedMessage {...messages.walkthroughBoardActionButton} />\r\n              </Typography>\r\n              <List>\r\n                <ListItem alignItems=\"center\">\r\n                  <ListItemIcon>\r\n                    <ClearIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughAllMyBoardsRemoveBoard\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <InputIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughAllMyBoardsAddBoard\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <KeyIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughAllMyBoardsUnpublishBoard\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <HomeIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughAllMyBoardsPublishBoard\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n                <ListItem>\r\n                  <ListItemIcon>\r\n                    <DeleteIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={intl.formatMessage(\r\n                      messages.walkthroughAllMyBoardsDeleteBoard\r\n                    )}\r\n                  />\r\n                </ListItem>\r\n              </List>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n  return (\r\n    <div>\r\n      {selectedTab === TAB_INDEXES.PUBLIC_BOARDS &&\r\n        communicatorTour.isPublicBoardsEnabled && (\r\n          <Joyride\r\n            callback={data => {\r\n              const { status } = data;\r\n              if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n                disableTour({\r\n                  communicatorTour: {\r\n                    ...communicatorTour,\r\n                    isPublicBoardsEnabled: false\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n            steps={publicBoardsHelpSteps}\r\n            continuous={true}\r\n            showSkipButton={true}\r\n            disableScrollParentFix={true}\r\n            disableScrolling={true}\r\n            showProgress={false}\r\n            disableOverlayClose={true}\r\n            run={communicatorTour.isPublicBoardsEnabled}\r\n            styles={joyrideStyles}\r\n            locale={{\r\n              last: intl.formatMessage(messages.walkthroughEndTour),\r\n              skip: intl.formatMessage(messages.walkthroughCloseTour),\r\n              next: intl.formatMessage(messages.walkthroughNext),\r\n              back: intl.formatMessage(messages.walkthroughBack)\r\n            }}\r\n          />\r\n        )}\r\n      {selectedTab === TAB_INDEXES.MY_BOARDS &&\r\n        communicatorTour.isAllMyBoardsEnabled && (\r\n          <Joyride\r\n            callback={data => {\r\n              const { status } = data;\r\n              if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n                disableTour({\r\n                  communicatorTour: {\r\n                    ...communicatorTour,\r\n                    isAllMyBoardsEnabled: false\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n            steps={allMyBoardsHelpSteps}\r\n            continuous={true}\r\n            showSkipButton={true}\r\n            showProgress={false}\r\n            disableScrollParentFix={true}\r\n            disableOverlayClose={true}\r\n            scrollOffset={250}\r\n            run={communicatorTour.isAllMyBoardsEnabled}\r\n            styles={joyrideStyles}\r\n            locale={{\r\n              last: intl.formatMessage(messages.walkthroughEndTour),\r\n              skip: intl.formatMessage(messages.walkthroughCloseTour),\r\n              next: intl.formatMessage(messages.walkthroughNext),\r\n              back: intl.formatMessage(messages.walkthroughBack)\r\n            }}\r\n          />\r\n        )}\r\n      {selectedTab === TAB_INDEXES.COMMUNICATOR_BOARDS &&\r\n        communicatorTour.isCommBoardsEnabled && (\r\n          <Joyride\r\n            callback={data => {\r\n              const { status } = data;\r\n              if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n                disableTour({\r\n                  communicatorTour: {\r\n                    ...communicatorTour,\r\n                    isCommBoardsEnabled: false\r\n                  }\r\n                });\r\n              }\r\n            }}\r\n            steps={commBoardsHelpSteps}\r\n            continuous={true}\r\n            showSkipButton={true}\r\n            showProgress={false}\r\n            disableOverlayClose={true}\r\n            disableScrolling={true}\r\n            disableScrollParentFix={true}\r\n            run={communicatorTour.isCommBoardsEnabled}\r\n            styles={joyrideStyles}\r\n            locale={{\r\n              last: intl.formatMessage(messages.walkthroughEndTour),\r\n              skip: intl.formatMessage(messages.walkthroughCloseTour),\r\n              next: intl.formatMessage(messages.walkthroughNext),\r\n              back: intl.formatMessage(messages.walkthroughBack)\r\n            }}\r\n          />\r\n        )}\r\n    </div>\r\n  );\r\n}\r\n\r\nCommunicatorDialogTour.propTypes = propTypes;\r\n\r\nexport default CommunicatorDialogTour;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport FullScreenDialog, {\r\n  FullScreenDialogContent\r\n} from '../../UI/FullScreenDialog';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Tabs from '@material-ui/core/Tabs';\r\nimport Tab from '@material-ui/core/Tab';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport { intlShape, FormattedMessage } from 'react-intl';\r\n\r\nimport { TAB_INDEXES } from './CommunicatorDialog.constants';\r\nimport CommunicatorDialogBoardItem from './CommunicatorDialogBoardItem.component';\r\nimport messages from './CommunicatorDialog.messages';\r\n\r\nimport './CommunicatorDialog.css';\r\nimport CommunicatorDialogButtons from './CommunicatorDialogButtons.component';\r\nimport { Button } from '@material-ui/core';\r\n\r\nimport CommunicatorDialogTour from './CommunicatorDialogTour.component';\r\n\r\nconst CommunicatorDialog = ({\r\n  open,\r\n  intl,\r\n  selectedTab,\r\n  loading,\r\n  nextPageLoading,\r\n  boards,\r\n  total,\r\n  limit,\r\n  page,\r\n  totalPages,\r\n  userData,\r\n  communicatorBoardsIds,\r\n  communicator,\r\n  activeBoardId,\r\n  search,\r\n  isSearchOpen,\r\n  loadNextPage,\r\n  onClose,\r\n  onTabChange,\r\n  onSearch,\r\n  openSearchBar,\r\n  addOrRemoveBoard,\r\n  copyBoard,\r\n  deleteMyBoard,\r\n  updateMyBoard,\r\n  setRootBoard,\r\n  publishBoard,\r\n  showNotification,\r\n  dark,\r\n  communicatorTour,\r\n  disableTour\r\n}) => (\r\n  <FullScreenDialog\r\n    disableSubmit={true}\r\n    open={open}\r\n    title={intl.formatMessage(messages.title)}\r\n    onClose={onClose}\r\n    buttons={\r\n      <CommunicatorDialogButtons\r\n        intl={intl}\r\n        onSearch={onSearch}\r\n        openSearchBar={openSearchBar}\r\n        isSearchOpen={isSearchOpen}\r\n        searchValue={search}\r\n        dark={dark}\r\n      />\r\n    }\r\n  >\r\n    <Paper className={dark ? 'is-dark' : ''}>\r\n      <FullScreenDialogContent className=\"CommunicatorDialog__container\">\r\n        <Tabs\r\n          value={selectedTab}\r\n          onChange={onTabChange}\r\n          className=\"CommunicatorDialog__tabs\"\r\n          fixed=\"top\"\r\n          variant=\"scrollable\"\r\n          scrollButtons=\"off\"\r\n        >\r\n          <Tab\r\n            label={intl.formatMessage(messages.communicatorBoards)}\r\n            className={\r\n              selectedTab === TAB_INDEXES.COMMUNICATOR_BOARDS ? 'active' : ''\r\n            }\r\n            id=\"CommunicatorDialog__BoardBtn\"\r\n          />\r\n          <Tab\r\n            label={intl.formatMessage(messages.allBoards)}\r\n            className={\r\n              selectedTab === TAB_INDEXES.PUBLIC_BOARDS ? 'active' : ''\r\n            }\r\n            id=\"CommunicatorDialog__PublicBoardsBtn\"\r\n          />\r\n          <Tab\r\n            disabled={!userData.authToken}\r\n            label={intl.formatMessage(messages.myBoards)}\r\n            className={selectedTab === TAB_INDEXES.MY_BOARDS ? 'active' : ''}\r\n            id=\"CommunicatorDialog__AllMyBoardsBtn\"\r\n          />\r\n        </Tabs>\r\n\r\n        <div className=\"CommunicatorDialog__content\">\r\n          {!loading && (\r\n            <React.Fragment>\r\n              {selectedTab === TAB_INDEXES.COMMUNICATOR_BOARDS && (\r\n                <div className=\"CommunicatorDialog__communicatorData\">\r\n                  <React.Fragment>\r\n                    <div className=\"CommunicatorDialog__communicatorData__title\">\r\n                      {intl.formatMessage(messages.title)}\r\n                    </div>\r\n                    <div className=\"CommunicatorDialog__communicatorData__boardsQty\">\r\n                      {intl.formatMessage(messages.boardsQty, {\r\n                        qty: total\r\n                      })}\r\n                    </div>\r\n                  </React.Fragment>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"CommunicatorDialog__boards\">\r\n                {!boards.length && (\r\n                  <div className=\"CommunicatorDialog__boards__emptyMessage\">\r\n                    <FormattedMessage {...messages.emptyBoardsList} />\r\n                  </div>\r\n                )}\r\n\r\n                {boards.slice(0, limit).map((board, i) => (\r\n                  <CommunicatorDialogBoardItem\r\n                    key={i}\r\n                    board={board}\r\n                    intl={intl}\r\n                    selectedTab={selectedTab}\r\n                    addOrRemoveBoard={addOrRemoveBoard}\r\n                    copyBoard={copyBoard}\r\n                    deleteMyBoard={deleteMyBoard}\r\n                    updateMyBoard={updateMyBoard}\r\n                    publishBoard={publishBoard}\r\n                    setRootBoard={setRootBoard}\r\n                    selectedIds={communicatorBoardsIds}\r\n                    userData={userData}\r\n                    communicator={communicator}\r\n                    showNotification={showNotification}\r\n                    activeBoardId={activeBoardId}\r\n                    dark={dark}\r\n                  />\r\n                ))}\r\n\r\n                <CommunicatorDialogTour\r\n                  communicatorTour={communicatorTour}\r\n                  selectedTab={selectedTab}\r\n                  disableTour={disableTour}\r\n                  intl={intl}\r\n                />\r\n\r\n                {page < totalPages && (\r\n                  <Button color=\"primary\" onClick={loadNextPage}>\r\n                    <FormattedMessage {...messages.loadNextPage} />\r\n                  </Button>\r\n                )}\r\n\r\n                {nextPageLoading && (\r\n                  <CircularProgress\r\n                    size={35}\r\n                    className=\"CommunicatorDialog__spinner\"\r\n                    thickness={7}\r\n                  />\r\n                )}\r\n              </div>\r\n            </React.Fragment>\r\n          )}\r\n\r\n          {loading && (\r\n            <CircularProgress\r\n              size={35}\r\n              className=\"CommunicatorDialog__spinner\"\r\n              thickness={7}\r\n            />\r\n          )}\r\n        </div>\r\n      </FullScreenDialogContent>\r\n    </Paper>\r\n  </FullScreenDialog>\r\n);\r\n\r\nCommunicatorDialog.defaultProps = {\r\n  open: false,\r\n  loading: false,\r\n  nextPageLoading: false,\r\n  userData: null,\r\n  limit: 10,\r\n  page: 1,\r\n  totalPages: 1,\r\n  selectedTab: 0,\r\n  boards: [],\r\n  total: 0,\r\n  communicatorBoardsIds: [],\r\n  loadNextPage: () => {},\r\n  onClose: () => {},\r\n  onTabChange: () => {},\r\n  onSearch: () => {}\r\n};\r\n\r\nCommunicatorDialog.propTypes = {\r\n  boards: PropTypes.array,\r\n  userData: PropTypes.object,\r\n  limit: PropTypes.number,\r\n  page: PropTypes.number,\r\n  totalPages: PropTypes.number,\r\n  total: PropTypes.number,\r\n  open: PropTypes.bool,\r\n  loading: PropTypes.bool,\r\n  selectedTab: PropTypes.number,\r\n  communicator: PropTypes.object,\r\n  activeBoardId: PropTypes.string,\r\n  communicatorBoardsIds: PropTypes.arrayOf(PropTypes.string),\r\n  intl: intlShape,\r\n  loadNextPage: PropTypes.func,\r\n  onClose: PropTypes.func,\r\n  onTabChange: PropTypes.func,\r\n  onSearch: PropTypes.func,\r\n  addOrRemoveBoard: PropTypes.func.isRequired,\r\n  deleteMyBoard: PropTypes.func.isRequired,\r\n  updateMyBoard: PropTypes.func.isRequired,\r\n  copyBoard: PropTypes.func.isRequired,\r\n  setRootBoard: PropTypes.func.isRequired,\r\n  publishBoard: PropTypes.func.isRequired,\r\n  showNotification: PropTypes.func.isRequired,\r\n  dark: PropTypes.bool,\r\n  communicatorTour: PropTypes.object.isRequired,\r\n  disableTour: PropTypes.func.isRequired\r\n};\r\n\r\nexport default CommunicatorDialog;\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport CommunicatorDialog from './CommunicatorDialog.component';\r\nimport { TAB_INDEXES } from './CommunicatorDialog.constants';\r\nimport { injectIntl } from 'react-intl';\r\nimport shortid from 'shortid';\r\nimport API from '../../../api';\r\nimport {\r\n  createCommunicator,\r\n  editCommunicator,\r\n  changeCommunicator,\r\n  deleteBoardCommunicator,\r\n  addBoardCommunicator,\r\n  upsertCommunicator\r\n} from '../Communicator.actions';\r\nimport { deleteBoard, deleteApiBoard } from '../../Board/Board.actions';\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\nimport {\r\n  addBoards,\r\n  replaceBoard,\r\n  createBoard,\r\n  updateBoard,\r\n  updateApiObjectsNoChild,\r\n  updateApiBoard\r\n} from '../../Board/Board.actions';\r\nimport { disableTour } from '../../App/App.actions';\r\nimport messages from './CommunicatorDialog.messages';\r\n\r\nconst BOARDS_PAGE_LIMIT = 10;\r\nconst INITIAL_STATE = {\r\n  page: 0,\r\n  total: 0,\r\n  search: '',\r\n  data: []\r\n};\r\n\r\nconst findBoards = (boards, criteria, page, search = '') => {\r\n  let result = boards;\r\n  for (let [key, value] of Object.entries(criteria)) {\r\n    result = result.filter(\r\n      board =>\r\n        (board.hasOwnProperty(key) && board[key] === value) ||\r\n        !board.hasOwnProperty(key)\r\n    );\r\n  }\r\n  if (search) {\r\n    let re = new RegExp(search);\r\n    result = result.filter(\r\n      board => re.test(board.name) || re.test(board.author)\r\n    );\r\n  }\r\n  return {\r\n    limit: BOARDS_PAGE_LIMIT,\r\n    offset: 0,\r\n    search: search,\r\n    page: page,\r\n    total: result.length,\r\n    data: result.slice((page - 1) * BOARDS_PAGE_LIMIT, page * BOARDS_PAGE_LIMIT)\r\n  };\r\n};\r\n\r\nclass CommunicatorDialogContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      boards: props.communicatorBoards, // First time => Communicator Boards Tab\r\n      total: props.communicatorBoards.length,\r\n      selectedTab: TAB_INDEXES.COMMUNICATOR_BOARDS,\r\n      totalPages: Math.ceil(\r\n        props.communicatorBoards.length / BOARDS_PAGE_LIMIT\r\n      ),\r\n      page: 1,\r\n      search: '',\r\n      isSearchOpen: false,\r\n      communicatorBoards: findBoards(props.communicatorBoards, {}, 1)\r\n    };\r\n  }\r\n\r\n  async onTabChange(event, selectedTab = TAB_INDEXES.COMMUNICATOR_BOARDS) {\r\n    this.setState({ selectedTab, loading: true });\r\n    const tabData = await this.doSearch('', 1, selectedTab);\r\n    this.setState({\r\n      ...tabData,\r\n      selectedTab,\r\n      page: 1,\r\n      search: '',\r\n      isSearchOpen: false,\r\n      loading: false\r\n    });\r\n  }\r\n\r\n  async loadNextPage() {\r\n    this.setState({ nextPageLoading: true });\r\n    const page = this.state.page + 1;\r\n    const { search, selectedTab, boards } = this.state;\r\n    const tabData = await this.doSearch(search, page, selectedTab);\r\n    this.setState({\r\n      ...tabData,\r\n      boards: boards.concat(tabData.boards),\r\n      page: page,\r\n      loading: false,\r\n      nextPageLoading: false\r\n    });\r\n  }\r\n\r\n  async doSearch(\r\n    search = this.state.search,\r\n    page = this.state.page,\r\n    selectedTab = this.state.selectedTab\r\n  ) {\r\n    let boards = [];\r\n    let totalPages = 1;\r\n    let total = 0;\r\n\r\n    switch (selectedTab) {\r\n      case TAB_INDEXES.COMMUNICATOR_BOARDS:\r\n        const commState = findBoards(\r\n          this.props.communicatorBoards,\r\n          {},\r\n          page,\r\n          search\r\n        );\r\n        boards = boards.concat(commState.data);\r\n        total = commState.total;\r\n        totalPages = Math.ceil(commState.total / BOARDS_PAGE_LIMIT);\r\n        break;\r\n      case TAB_INDEXES.PUBLIC_BOARDS:\r\n        let externalState = INITIAL_STATE;\r\n        try {\r\n          externalState = await API.getPublicBoards({\r\n            limit: BOARDS_PAGE_LIMIT,\r\n            page,\r\n            search\r\n          });\r\n        } catch (err) {\r\n          externalState = findBoards(\r\n            this.props.availableBoards,\r\n            {\r\n              isPublic: true,\r\n              hidden: false\r\n            },\r\n            page,\r\n            search\r\n          );\r\n        }\r\n        boards = boards.concat(externalState.data);\r\n        total = externalState.total;\r\n        totalPages = Math.ceil(externalState.total / BOARDS_PAGE_LIMIT);\r\n        break;\r\n      case TAB_INDEXES.MY_BOARDS:\r\n        let myBoardsResponse = INITIAL_STATE;\r\n        try {\r\n          myBoardsResponse = await API.getMyBoards({\r\n            limit: BOARDS_PAGE_LIMIT,\r\n            page,\r\n            search\r\n          });\r\n        } catch (err) {\r\n          myBoardsResponse = findBoards(\r\n            this.props.availableBoards,\r\n            {\r\n              email: this.props.userData.email,\r\n              hidden: false\r\n            },\r\n            page,\r\n            search\r\n          );\r\n        }\r\n        boards = boards.concat(myBoardsResponse.data);\r\n        total = myBoardsResponse.total;\r\n        totalPages = Math.ceil(myBoardsResponse.total / BOARDS_PAGE_LIMIT);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    return {\r\n      boards,\r\n      totalPages,\r\n      total\r\n    };\r\n  }\r\n\r\n  async onSearch(search = this.state.search) {\r\n    this.setState({\r\n      search,\r\n      boards: [],\r\n      loading: true,\r\n      page: 1,\r\n      totalPages: 1\r\n    });\r\n    if (this.searchTimeout) {\r\n      clearTimeout(this.searchTimeout);\r\n    }\r\n    this.searchTimeout = setTimeout(async () => {\r\n      const { boards, totalPages, total } = await this.doSearch(search);\r\n      this.setState({\r\n        boards,\r\n        page: 1,\r\n        total,\r\n        totalPages,\r\n        loading: false\r\n      });\r\n    }, 500);\r\n  }\r\n\r\n  async addOrRemoveBoard(board) {\r\n    const BOARD_ACTIONS_MAP = {\r\n      [TAB_INDEXES.COMMUNICATOR_BOARDS]: 'communicatorBoardsAction',\r\n      [TAB_INDEXES.PUBLIC_BOARDS]: 'addOrRemoveAction',\r\n      [TAB_INDEXES.MY_BOARDS]: 'addOrRemoveAction'\r\n    };\r\n    const action = BOARD_ACTIONS_MAP[this.state.selectedTab];\r\n    await this[action](board);\r\n  }\r\n\r\n  async communicatorBoardsAction(board) {\r\n    // If Communicator Tab is selected, the board should be removed from the Communicator\r\n    const communicatorBoards = this.props.communicatorBoards.filter(\r\n      cb => cb.id !== board.id\r\n    );\r\n    await this.updateCommunicatorBoards(communicatorBoards);\r\n    this.setState({ boards: communicatorBoards });\r\n  }\r\n\r\n  async copyBoard(board) {\r\n    const { intl, showNotification } = this.props;\r\n    try {\r\n      await this.createBoardsRecursively(board);\r\n      showNotification(intl.formatMessage(messages.boardAddedToCommunicator));\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      showNotification(intl.formatMessage(messages.boardCopyError));\r\n    }\r\n  }\r\n\r\n  async createBoardsRecursively(board, records) {\r\n    const {\r\n      createBoard,\r\n      addBoardCommunicator,\r\n      upsertCommunicator,\r\n      changeCommunicator,\r\n      currentCommunicator,\r\n      userData,\r\n      updateApiObjectsNoChild,\r\n      availableBoards,\r\n      intl\r\n    } = this.props;\r\n\r\n    //prevent shit\r\n    if (!board) {\r\n      return;\r\n    }\r\n    if (records) {\r\n      //get the list of next boards in records\r\n      let nextBoardsRecords = records.map(entry => entry.next);\r\n      if (nextBoardsRecords.includes(board.id)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    let newBoard = {\r\n      ...board,\r\n      isPublic: false,\r\n      id: shortid.generate(),\r\n      hidden: false,\r\n      author: '',\r\n      email: ''\r\n    };\r\n    if (!newBoard.name) {\r\n      newBoard.name = newBoard.nameKey\r\n        ? intl.formatMessage({ id: newBoard.nameKey })\r\n        : intl.formatMessage(messages.noTitle);\r\n    }\r\n    if ('name' in userData && 'email' in userData) {\r\n      newBoard = {\r\n        ...newBoard,\r\n        author: userData.name,\r\n        email: userData.email\r\n      };\r\n    }\r\n    createBoard(newBoard);\r\n    if (!records) {\r\n      addBoardCommunicator(newBoard.id);\r\n    }\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      let createCommunicator = false;\r\n      if (currentCommunicator.email !== userData.email) {\r\n        //need to create a new communicator\r\n        const communicatorData = {\r\n          ...currentCommunicator,\r\n          author: userData.name,\r\n          email: userData.email,\r\n          id: shortid.generate()\r\n        };\r\n        upsertCommunicator(communicatorData);\r\n        changeCommunicator(communicatorData.id);\r\n        createCommunicator = true;\r\n      }\r\n      try {\r\n        this.setState({\r\n          loading: true\r\n        });\r\n        const boardId = await updateApiObjectsNoChild(\r\n          newBoard,\r\n          createCommunicator,\r\n          true\r\n        );\r\n        newBoard = {\r\n          ...newBoard,\r\n          id: boardId\r\n        };\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      } finally {\r\n        this.setState({\r\n          loading: false\r\n        });\r\n      }\r\n    }\r\n    if (!records) {\r\n      records = [{ prev: board.id, next: newBoard.id }];\r\n    } else {\r\n      records.push({ prev: board.id, next: newBoard.id });\r\n    }\r\n    this.updateBoardReferences(board, newBoard, records);\r\n\r\n    if (board.tiles.length < 1) {\r\n      return;\r\n    }\r\n\r\n    //return condition\r\n    board.tiles.forEach(async tile => {\r\n      if (tile.loadBoard) {\r\n        try {\r\n          const nextBoard = await API.getBoard(tile.loadBoard);\r\n          this.createBoardsRecursively(nextBoard, records);\r\n        } catch (err) {\r\n          if (err.response.status === 404) {\r\n            //look for this board in available boards\r\n            const localBoard = availableBoards.find(\r\n              b => b.id === tile.loadBoard\r\n            );\r\n            if (localBoard) {\r\n              this.createBoardsRecursively(localBoard, records);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  updateBoardReferences(board, newBoard, records) {\r\n    const { availableBoards, updateBoard } = this.props;\r\n    //get the list of prev boards in records, but remove the current board\r\n    let prevBoardsRecords = records.map(entry => entry.prev);\r\n    prevBoardsRecords = prevBoardsRecords.filter(id => id !== newBoard.id);\r\n    //look for reference to the original board id\r\n    availableBoards.forEach(b => {\r\n      b.tiles.forEach((tile, index) => {\r\n        if (\r\n          //general case: tile can contains reference to the board\r\n          tile &&\r\n          tile.loadBoard &&\r\n          tile.loadBoard === board.id\r\n        ) {\r\n          b.tiles.splice(index, 1, {\r\n            ...tile,\r\n            loadBoard: newBoard.id\r\n          });\r\n          try {\r\n            updateBoard(b);\r\n          } catch (err) {\r\n            console.log(err.message);\r\n          }\r\n        }\r\n        if (\r\n          //special case: tile can contains reference to a prev board in records!\r\n          tile &&\r\n          tile.loadBoard &&\r\n          prevBoardsRecords.includes(tile.loadBoard)\r\n        ) {\r\n          const el = records.find(e => e.prev === tile.loadBoard);\r\n          b.tiles.splice(index, 1, {\r\n            ...tile,\r\n            loadBoard: el.next\r\n          });\r\n          try {\r\n            updateBoard(b);\r\n          } catch (err) {\r\n            console.log(err.message);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  async addOrRemoveAction(board) {\r\n    // If All My Boards Tab is selected, the board should be added/removed to/from the Communicator\r\n    let communicatorBoards = [...this.props.communicatorBoards];\r\n    const boardIndex = communicatorBoards.findIndex(b => b.id === board.id);\r\n    if (boardIndex >= 0) {\r\n      communicatorBoards.splice(boardIndex, 1);\r\n      this.props.showNotification(\r\n        this.props.intl.formatMessage(messages.boardRemovedFromCommunicator)\r\n      );\r\n    } else {\r\n      communicatorBoards.push(board);\r\n      this.props.showNotification(\r\n        this.props.intl.formatMessage(messages.boardAddedToCommunicator)\r\n      );\r\n    }\r\n\r\n    await this.updateCommunicatorBoards(communicatorBoards);\r\n\r\n    // Need to fetch board if its not locally available\r\n    if (\r\n      boardIndex < 0 &&\r\n      this.props.availableBoards.findIndex(b => b.id === board.id) < 0\r\n    ) {\r\n      let boards = [];\r\n      try {\r\n        const boardData = await API.getBoard(board.id);\r\n        boards.push(boardData);\r\n      } catch (e) {}\r\n      this.props.addBoards(boards);\r\n    }\r\n  }\r\n\r\n  async updateCommunicatorBoards(boards) {\r\n    const {\r\n      userData,\r\n      communicators,\r\n      currentCommunicator,\r\n      changeCommunicator,\r\n      editCommunicator\r\n    } = this.props;\r\n\r\n    const updatedCommunicatorData = {\r\n      ...currentCommunicator,\r\n      boards: boards.map(cb => cb.id)\r\n    };\r\n\r\n    if (communicators.findIndex(c => c.id === currentCommunicator.id) >= 0) {\r\n      editCommunicator(updatedCommunicatorData);\r\n      changeCommunicator(updatedCommunicatorData.id);\r\n\r\n      // Loggedin user?\r\n      if ('name' in userData && 'email' in userData) {\r\n        try {\r\n          await API.updateCommunicator(updatedCommunicatorData);\r\n        } catch (err) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  async publishBoard(board) {\r\n    const { userData, replaceBoard, showNotification, intl } = this.props;\r\n    const boardData = {\r\n      ...board,\r\n      isPublic: !board.isPublic\r\n    };\r\n    const sBoards = this.state.boards;\r\n    const index = sBoards.findIndex(b => board.id === b.id);\r\n    sBoards.splice(index, 1, boardData);\r\n    replaceBoard(board, boardData);\r\n    this.setState({\r\n      boards: sBoards\r\n    });\r\n    boardData.isPublic\r\n      ? showNotification(intl.formatMessage(messages.boardPublished))\r\n      : showNotification(intl.formatMessage(messages.boardUnpublished));\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      try {\r\n        const boardResponse = await API.updateBoard(boardData);\r\n        replaceBoard(boardData, boardResponse);\r\n      } catch (err) {}\r\n    }\r\n  }\r\n\r\n  async setRootBoard(board) {\r\n    const {\r\n      userData,\r\n      communicators,\r\n      currentCommunicator,\r\n      changeCommunicator,\r\n      editCommunicator\r\n    } = this.props;\r\n\r\n    const updatedCommunicatorData = {\r\n      ...currentCommunicator,\r\n      rootBoard: board.id\r\n    };\r\n\r\n    if (communicators.findIndex(c => c.id === currentCommunicator.id) >= 0) {\r\n      editCommunicator(updatedCommunicatorData);\r\n      changeCommunicator(updatedCommunicatorData.id);\r\n\r\n      // Loggedin user?\r\n      if ('name' in userData && 'email' in userData) {\r\n        try {\r\n          await API.updateCommunicator(updatedCommunicatorData);\r\n        } catch (err) {}\r\n      }\r\n    }\r\n  }\r\n\r\n  openSearchBar() {\r\n    this.setState({ isSearchOpen: true });\r\n  }\r\n\r\n  async deleteMyBoard(board) {\r\n    const {\r\n      showNotification,\r\n      deleteBoard,\r\n      communicators,\r\n      editCommunicator,\r\n      deleteApiBoard,\r\n      userData,\r\n      intl\r\n    } = this.props;\r\n    deleteBoard(board.id);\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      try {\r\n        await deleteApiBoard(board.id);\r\n      } catch (err) {}\r\n    }\r\n    communicators.forEach(async comm => {\r\n      if (comm.boards.includes(board.id)) {\r\n        editCommunicator({\r\n          ...comm,\r\n          boards: comm.boards.filter(b => b !== board.id)\r\n        });\r\n\r\n        // Loggedin user?\r\n        if ('name' in userData && 'email' in userData) {\r\n          try {\r\n            await API.updateCommunicator(comm);\r\n          } catch (err) {}\r\n        }\r\n      }\r\n    });\r\n    const sBoards = this.state.boards;\r\n    const index = sBoards.findIndex(b => board.id === b.id);\r\n    sBoards.splice(index, 1);\r\n    this.setState({\r\n      boards: sBoards\r\n    });\r\n    showNotification(intl.formatMessage(messages.boardDeleted));\r\n  }\r\n\r\n  async updateMyBoard(board) {\r\n    const { updateBoard, updateApiBoard, userData } = this.props;\r\n    updateBoard(board);\r\n    const sBoards = this.state.boards;\r\n    const index = sBoards.findIndex(b => board.id === b.id);\r\n    sBoards.splice(index, 1, board);\r\n    this.setState({\r\n      boards: sBoards\r\n    });\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      try {\r\n        await updateApiBoard(board);\r\n      } catch (err) {}\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const limit = this.state.page * BOARDS_PAGE_LIMIT;\r\n    const communicatorBoardsIds = this.props.communicatorBoards.map(b => b.id);\r\n    const dialogProps = {\r\n      ...this.props,\r\n      ...this.state,\r\n      limit,\r\n      communicator: this.props.currentCommunicator,\r\n      communicatorBoardsIds,\r\n      addOrRemoveBoard: this.addOrRemoveBoard.bind(this),\r\n      deleteMyBoard: this.deleteMyBoard.bind(this),\r\n      updateMyBoard: this.updateMyBoard.bind(this),\r\n      publishBoard: this.publishBoard.bind(this),\r\n      setRootBoard: this.setRootBoard.bind(this),\r\n      copyBoard: this.copyBoard.bind(this),\r\n      loadNextPage: this.loadNextPage.bind(this),\r\n      onTabChange: this.onTabChange.bind(this),\r\n      onSearch: this.onSearch.bind(this),\r\n      openSearchBar: this.openSearchBar.bind(this),\r\n      disableTour: this.props.disableTour\r\n    };\r\n\r\n    return <CommunicatorDialog {...dialogProps} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ board, communicator, language, app }, ownProps) => {\r\n  const activeCommunicatorId = communicator.activeCommunicatorId;\r\n  const currentCommunicator = communicator.communicators.find(\r\n    communicator => communicator.id === activeCommunicatorId\r\n  );\r\n\r\n  const communicatorBoards = board.boards.filter(\r\n    board => currentCommunicator.boards.indexOf(board.id) >= 0\r\n  );\r\n\r\n  const { userData, displaySettings } = app;\r\n  const cboardBoards = board.boards.filter(\r\n    board => board.email === 'support@cboard.io'\r\n  );\r\n  const communicatorTour = app.liveHelp.communicatorTour || {\r\n    isCommBoardsEnabled: true,\r\n    isPublicBoardsEnabled: true,\r\n    isAllMyBoardsEnabled: true\r\n  };\r\n\r\n  return {\r\n    ...ownProps,\r\n    communicators: communicator.communicators,\r\n    currentCommunicator,\r\n    communicatorBoards,\r\n    cboardBoards,\r\n    availableBoards: board.boards,\r\n    userData,\r\n    activeBoardId: board.activeBoardId,\r\n    dark: displaySettings.darkThemeActive,\r\n    communicatorTour\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  createCommunicator,\r\n  editCommunicator,\r\n  changeCommunicator,\r\n  addBoards,\r\n  replaceBoard,\r\n  showNotification,\r\n  deleteBoard,\r\n  deleteApiBoard,\r\n  deleteBoardCommunicator,\r\n  createBoard,\r\n  updateBoard,\r\n  addBoardCommunicator,\r\n  upsertCommunicator,\r\n  updateApiObjectsNoChild,\r\n  updateApiBoard,\r\n  disableTour\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(CommunicatorDialogContainer));\r\n","import CommunicatorDialog from './CommunicatorDialog.container';\r\n\r\nexport default CommunicatorDialog;\r\n","import React from 'react';\r\nimport { withRouter } from 'react-router';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl } from 'react-intl';\r\nimport CommunicatorToolbar from './CommunicatorToolbar.component';\r\nimport CommunicatorDialog from '../CommunicatorDialog';\r\nimport { switchBoard, replaceBoard } from '../../Board/Board.actions';\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\nimport {\r\n  importCommunicator,\r\n  createCommunicator,\r\n  deleteCommunicator,\r\n  changeCommunicator,\r\n  upsertCommunicator\r\n} from '../Communicator.actions';\r\nimport API from '../../../api';\r\n\r\nclass CommunicatorContainer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openDialog: false\r\n    };\r\n  }\r\n\r\n  openCommunicatorDialog() {\r\n    this.setState({ openDialog: true });\r\n  }\r\n\r\n  closeCommunicatorDialog() {\r\n    this.setState({ openDialog: false });\r\n  }\r\n\r\n  editCommunicatorTitle = async name => {\r\n    const updatedCommunicatorData = {\r\n      ...this.props.currentCommunicator,\r\n      name\r\n    };\r\n\r\n    const communicatorData = await API.updateCommunicator(\r\n      updatedCommunicatorData\r\n    );\r\n\r\n    this.props.upsertCommunicator(communicatorData);\r\n    this.props.changeCommunicator(communicatorData.id);\r\n  };\r\n\r\n  render() {\r\n    const toolbarProps = {\r\n      ...this.props,\r\n      isLoggedIn: !!this.props.userData.email,\r\n      editCommunicatorTitle: this.editCommunicatorTitle,\r\n      openCommunicatorDialog: this.openCommunicatorDialog.bind(this)\r\n    };\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <CommunicatorToolbar {...toolbarProps} />\r\n        {this.state.openDialog && (\r\n          <CommunicatorDialog\r\n            open={this.state.openDialog}\r\n            onClose={this.closeCommunicatorDialog.bind(this)}\r\n          />\r\n        )}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (\r\n  { board, communicator, app: { userData } },\r\n  ownProps\r\n) => {\r\n  const activeCommunicatorId = communicator.activeCommunicatorId;\r\n  const currentCommunicator = communicator.communicators.find(\r\n    communicator => communicator.id === activeCommunicatorId\r\n  );\r\n  const activeBoardId = board.activeBoardId;\r\n  const boards = board.boards.filter(board =>\r\n    board !== null &&\r\n    board.id !== null &&\r\n    currentCommunicator.boards.includes(board.id));\r\n  const currentBoard = boards.find(board => board.id === activeBoardId);\r\n\r\n  return {\r\n    communicators: communicator.communicators,\r\n    boards,\r\n    currentCommunicator,\r\n    currentBoard,\r\n    userData,\r\n    ...ownProps\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  importCommunicator,\r\n  createCommunicator,\r\n  deleteCommunicator,\r\n  changeCommunicator,\r\n  upsertCommunicator,\r\n  showNotification,\r\n  switchBoard,\r\n  replaceBoard\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(withRouter(CommunicatorContainer)));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\r\nimport FirstPageIcon from '@material-ui/icons/FirstPage';\r\n\r\nimport './NavigationButtons.css';\r\n\r\nconst NavigationButtons = ({\r\n  active,\r\n  navHistory,\r\n  previousBoard,\r\n  toRootBoard\r\n}) => {\r\n  if (!active) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {navHistory.length > 2 && (\r\n        <div className=\"NavigationButton left\">\r\n          <button onClick={toRootBoard}>\r\n            <FirstPageIcon />\r\n          </button>\r\n        </div>\r\n      )}\r\n      {navHistory.length > 1 && (\r\n        <div className=\"NavigationButton right\">\r\n          <button onClick={previousBoard}>\r\n            <ChevronLeftIcon />\r\n          </button>\r\n        </div>\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nNavigationButtons.props = {\r\n  navHistory: PropTypes.arrayOf(PropTypes.string),\r\n  previousBoard: PropTypes.func,\r\n  toRootBoard: PropTypes.func\r\n};\r\n\r\nexport default NavigationButtons;\r\n","import NavigationButtons from './NavigationButtons.component';\r\n\r\nexport default NavigationButtons;\r\n","import EditGridButtons from './EditGridButtons.component';\r\n\r\nexport default EditGridButtons;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\r\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\r\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\r\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\r\n\r\nimport './EditGridButtons.css';\r\n\r\nclass EditGridButtons extends React.Component {\r\n  static propTypes = {\r\n    active: PropTypes.bool.isRequired,\r\n    rows: PropTypes.number.isRequired,\r\n    columns: PropTypes.number.isRequired,\r\n    onAddRemoveColumn: PropTypes.func.isRequired,\r\n    onAddRemoveRow: PropTypes.func.isRequired\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n  }\r\n\r\n  onAddRemoveColumn(isAdd, isLeftOrTop) {\r\n    const { onAddRemoveColumn } = this.props;\r\n    onAddRemoveColumn(isAdd, isLeftOrTop);\r\n  }\r\n\r\n  onAddRemoveRow(isAdd, isLeftOrTop) {\r\n    const { onAddRemoveRow } = this.props;\r\n    onAddRemoveRow(isAdd, isLeftOrTop);\r\n  }\r\n\r\n  renderButtons = (isVertical, isLeftOrTop) => {\r\n    const { rows, columns } = this.props;\r\n    return (\r\n      <ButtonGroup\r\n        orientation={isVertical ? 'vertical' : 'horizontal'}\r\n        color=\"primary\"\r\n        aria-label=\"edit_grid_button_group\"\r\n        fullWidth={true}\r\n        size=\"large\"\r\n        variant=\"contained\"\r\n      >\r\n        <Button\r\n          onClick={\r\n            isVertical\r\n              ? this.onAddRemoveColumn.bind(this, true, isLeftOrTop)\r\n              : this.onAddRemoveRow.bind(this, true, isLeftOrTop)\r\n          }\r\n          aria-label=\"edit_grid_button\"\r\n        >\r\n          {isVertical ? <KeyboardArrowRightIcon /> : <KeyboardArrowDownIcon />}\r\n        </Button>\r\n        <Button aria-label=\"edit_grid_value\">\r\n          {isVertical ? columns.toString() : rows.toString()}\r\n        </Button>\r\n        <Button\r\n          onClick={\r\n            isVertical\r\n              ? this.onAddRemoveColumn.bind(this, false, isLeftOrTop)\r\n              : this.onAddRemoveRow.bind(this, false, isLeftOrTop)\r\n          }\r\n          aria-label=\"edit_grid_button\"\r\n        >\r\n          {isVertical ? <KeyboardArrowLeftIcon /> : <KeyboardArrowUpIcon />}\r\n        </Button>\r\n      </ButtonGroup>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { active } = this.props;\r\n    if (!active) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        <div className=\"EditGridButtons right\">\r\n          {this.renderButtons(true, false)}\r\n        </div>\r\n        <div className=\"EditGridButtons bottom\">\r\n          {this.renderButtons(false, false)}\r\n        </div>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default EditGridButtons;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport keycode from 'keycode';\r\nimport classNames from 'classnames';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport { Scanner, Scannable } from 'react-scannable';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport FixedGrid from '../FixedGrid';\r\nimport Grid from '../Grid';\r\nimport Symbol from './Symbol';\r\nimport OutputContainer from './Output';\r\nimport Navbar from './Navbar';\r\nimport EditToolbar from './EditToolbar';\r\nimport Tile from './Tile';\r\nimport EmptyBoard from './EmptyBoard';\r\nimport CommunicatorToolbar from '../Communicator/CommunicatorToolbar';\r\nimport { DISPLAY_SIZE_GRID_COLS } from '../Settings/Display/Display.constants';\r\nimport NavigationButtons from '../NavigationButtons';\r\nimport EditGridButtons from '../EditGridButtons';\r\nimport { DEFAULT_ROWS_NUMBER, DEFAULT_COLUMNS_NUMBER } from './Board.constants';\r\n\r\nimport Joyride, { STATUS } from 'react-joyride';\r\n\r\nimport messages from './Board.messages';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport './Board.css';\r\nexport class Board extends Component {\r\n  static propTypes = {\r\n    board: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      name: PropTypes.string,\r\n      tiles: PropTypes.arrayOf(PropTypes.object)\r\n    }),\r\n    /**\r\n     * @ignore\r\n     */\r\n    className: PropTypes.string,\r\n    /**\r\n     *\r\n     */\r\n    disableBackButton: PropTypes.bool,\r\n    /**\r\n     * Callback fired when board tiles are deleted\r\n     */\r\n    onDeleteClick: PropTypes.func,\r\n    /**\r\n     * Callback fired when a board tile is focused\r\n     */\r\n    onFocusTile: PropTypes.func,\r\n    /**\r\n     * Callback fired when a board tile is clicked\r\n     */\r\n    onTileClick: PropTypes.func,\r\n    onSaveBoardClick: PropTypes.func,\r\n    editBoardTitle: PropTypes.func,\r\n    /**\r\n     *\r\n     */\r\n    onLockNotify: PropTypes.func,\r\n    onScannerActive: PropTypes.func,\r\n    /**\r\n     * Callback fired when requesting to load previous board\r\n     */\r\n    onRequestPreviousBoard: PropTypes.func,\r\n    /**\r\n     * Callback fired when requesting to travel and load root board\r\n     */\r\n    onRequestToRootBoard: PropTypes.func,\r\n    /**\r\n     *\r\n     */\r\n    selectedTileIds: PropTypes.arrayOf(PropTypes.string),\r\n    displaySettings: PropTypes.object,\r\n    navigationSettings: PropTypes.object,\r\n    scannerSettings: PropTypes.object,\r\n    userData: PropTypes.object,\r\n    deactivateScanner: PropTypes.func,\r\n    navHistory: PropTypes.arrayOf(PropTypes.string),\r\n    emptyVoiceAlert: PropTypes.bool,\r\n    offlineVoiceAlert: PropTypes.bool,\r\n    onBoardTypeChange: PropTypes.func,\r\n    isFixedBoard: PropTypes.bool,\r\n    onAddRemoveColumn: PropTypes.func,\r\n    onAddRemoveRow: PropTypes.func,\r\n    onLayoutChange: PropTypes.func,\r\n    isRootBoardTourEnabled: PropTypes.bool,\r\n    isUnlockedTourEnabled: PropTypes.bool,\r\n    disableTour: PropTypes.func\r\n  };\r\n\r\n  static defaultProps = {\r\n    displaySettings: {\r\n      uiSize: 'Standard',\r\n      labelPosition: 'Below',\r\n      shareShowActive: false,\r\n      hideOutputActive: false\r\n    },\r\n    navigationSettings: {},\r\n    scannerSettings: { active: false, delay: 2000, strategy: 'automatic' },\r\n    selectedTileIds: [],\r\n    emptyVoiceAlert: false,\r\n    userData: {}\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openTitleDialog: false,\r\n      titleDialogValue: props.board && props.board.name ? props.board.name : ''\r\n    };\r\n  }\r\n\r\n  unlockedHelpSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <h2>\r\n          <FormattedMessage {...messages.walkthroughStart} />\r\n        </h2>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.personal__account',\r\n      content: <FormattedMessage {...messages.walkthroughSignInUp} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.edit__board__ride',\r\n      content: <FormattedMessage {...messages.walkthroughEditBoard} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.EditToolbar__BoardTitle',\r\n      content: <FormattedMessage {...messages.walkthroughBoardName} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.add__board__tile',\r\n      content: <FormattedMessage {...messages.walkthroughAddTile} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.Communicator__title',\r\n      content: <FormattedMessage {...messages.walkthroughChangeBoard} />\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.edit__communicator',\r\n      content: <FormattedMessage {...messages.walkthroughBuildCommunicator} />\r\n    }\r\n  ];\r\n\r\n  lockedHelpSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <h2>\r\n          <FormattedMessage {...messages.walkthroughWelcome} />\r\n        </h2>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '.open__lock',\r\n      content: <FormattedMessage {...messages.walkthroughUnlock} />\r\n    }\r\n  ];\r\n\r\n  componentDidMount() {\r\n    if (this.props.scannerSettings.active) {\r\n      this.props.onScannerActive();\r\n    }\r\n  }\r\n\r\n  handleTileClick = tile => {\r\n    const { onTileClick } = this.props;\r\n\r\n    if (tile.loadBoard) {\r\n      this.tiles.scrollTop = 0;\r\n    }\r\n    onTileClick(tile);\r\n  };\r\n\r\n  handleTileFocus = tileId => {\r\n    const { onFocusTile, board } = this.props;\r\n    onFocusTile(tileId, board.id);\r\n  };\r\n\r\n  handleBoardKeyUp = event => {\r\n    const { onRequestPreviousBoard } = this.props;\r\n\r\n    if (event.keyCode === keycode('esc')) {\r\n      onRequestPreviousBoard();\r\n    }\r\n  };\r\n\r\n  handleBoardTitleClick = () => {\r\n    if (!this.props.userData.email) {\r\n      return false;\r\n    }\r\n    this.setState({\r\n      openTitleDialog: true,\r\n      titleDialogValue: this.props.board.name\r\n    });\r\n  };\r\n\r\n  handleBoardTitleChange = event => {\r\n    const { value: titleDialogValue } = event.target;\r\n    this.setState({ titleDialogValue });\r\n  };\r\n\r\n  handleBoardTitleSubmit = async () => {\r\n    if (this.state.titleDialogValue.length) {\r\n      try {\r\n        await this.props.editBoardTitle(this.state.titleDialogValue);\r\n      } catch (e) {}\r\n    }\r\n    this.handleBoardTitleClose();\r\n  };\r\n\r\n  handleBoardTitleClose = () => {\r\n    this.setState({\r\n      openTitleDialog: false,\r\n      titleDialogValue: this.props.board.name || this.props.board.id || ''\r\n    });\r\n  };\r\n\r\n  renderTiles(tiles) {\r\n    const {\r\n      isSelecting,\r\n      isSaving,\r\n      selectedTileIds,\r\n      displaySettings\r\n    } = this.props;\r\n\r\n    return tiles.map(tile => {\r\n      const isSelected = selectedTileIds.includes(tile.id);\r\n      const variant = Boolean(tile.loadBoard) ? 'folder' : 'button';\r\n\r\n      return (\r\n        <div key={tile.id}>\r\n          <Tile\r\n            backgroundColor={tile.backgroundColor}\r\n            borderColor={tile.borderColor}\r\n            variant={variant}\r\n            onClick={() => {\r\n              this.handleTileClick(tile);\r\n            }}\r\n            onFocus={() => {\r\n              this.handleTileFocus(tile.id);\r\n            }}\r\n          >\r\n            <Symbol\r\n              image={tile.image}\r\n              label={tile.label}\r\n              labelpos={displaySettings.labelPosition}\r\n            />\r\n\r\n            {isSelecting && !isSaving && (\r\n              <div className=\"CheckCircle\">\r\n                {isSelected && (\r\n                  <CheckCircleIcon className=\"CheckCircle__icon\" />\r\n                )}\r\n              </div>\r\n            )}\r\n          </Tile>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  renderTileFixedBoard(tile) {\r\n    const {\r\n      isSelecting,\r\n      isSaving,\r\n      selectedTileIds,\r\n      displaySettings\r\n    } = this.props;\r\n\r\n    const isSelected = selectedTileIds.includes(tile.id);\r\n    const variant = Boolean(tile.loadBoard) ? 'folder' : 'button';\r\n\r\n    return (\r\n      <Tile\r\n        backgroundColor={tile.backgroundColor}\r\n        borderColor={tile.borderColor}\r\n        variant={variant}\r\n        onClick={() => {\r\n          this.handleTileClick(tile);\r\n        }}\r\n        onFocus={() => {\r\n          this.handleTileFocus(tile.id);\r\n        }}\r\n      >\r\n        <Symbol\r\n          image={tile.image}\r\n          label={tile.label}\r\n          labelpos={displaySettings.labelPosition}\r\n        />\r\n\r\n        {isSelecting && !isSaving && (\r\n          <div className=\"CheckCircle\">\r\n            {isSelected && <CheckCircleIcon className=\"CheckCircle__icon\" />}\r\n          </div>\r\n        )}\r\n      </Tile>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      board,\r\n      intl,\r\n      userData,\r\n      disableBackButton,\r\n      isLocked,\r\n      isSaving,\r\n      isSelectAll,\r\n      isSelecting,\r\n      isFixedBoard,\r\n      onAddClick,\r\n      onDeleteClick,\r\n      onEditClick,\r\n      onSaveBoardClick,\r\n      onSelectAllToggle,\r\n      onSelectClick,\r\n      onLockClick,\r\n      onLockNotify,\r\n      onRequestPreviousBoard,\r\n      onRequestToRootBoard,\r\n      onBoardTypeChange,\r\n      selectedTileIds,\r\n      navigationSettings,\r\n      deactivateScanner,\r\n      publishBoard,\r\n      emptyVoiceAlert,\r\n      offlineVoiceAlert,\r\n      onAddRemoveRow,\r\n      onAddRemoveColumn,\r\n      onTileDrop,\r\n      onLayoutChange,\r\n      isRootBoardTourEnabled,\r\n      isUnlockedTourEnabled,\r\n      disableTour\r\n    } = this.props;\r\n\r\n    const tiles = this.renderTiles(board.tiles);\r\n    const cols = DISPLAY_SIZE_GRID_COLS[this.props.displaySettings.uiSize];\r\n    const isLoggedIn = !!userData.email;\r\n\r\n    const joyRideStyles = {\r\n      options: {\r\n        arrowColor: '#eee',\r\n        backgroundColor: '#eee',\r\n        primaryColor: '#aa00ff',\r\n        textColor: '#333',\r\n        width: 500,\r\n        zIndex: 1000\r\n      }\r\n    };\r\n\r\n    return (\r\n      <Scanner\r\n        active={this.props.scannerSettings.active}\r\n        iterationInterval={this.props.scannerSettings.delay}\r\n        strategy={this.props.scannerSettings.strategy}\r\n        onDeactivation={deactivateScanner}\r\n      >\r\n        <div\r\n          className={classNames('Board', {\r\n            'is-locked': this.props.isLocked\r\n          })}\r\n        >\r\n          {isLocked && isRootBoardTourEnabled && (\r\n            <Joyride\r\n              callback={data => {\r\n                const { status } = data;\r\n                if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n                  if (isRootBoardTourEnabled) {\r\n                    disableTour({ isRootBoardTourEnabled: false });\r\n                  }\r\n                }\r\n              }}\r\n              steps={this.lockedHelpSteps}\r\n              continuous={true}\r\n              showSkipButton={true}\r\n              showProgress={true}\r\n              disableOverlayClose={true}\r\n              run={isRootBoardTourEnabled}\r\n              styles={joyRideStyles}\r\n              locale={{\r\n                last: <FormattedMessage {...messages.walkthroughEndTour} />,\r\n                skip: <FormattedMessage {...messages.walkthroughCloseTour} />,\r\n                next: <FormattedMessage {...messages.walkthroughNext} />,\r\n                back: <FormattedMessage {...messages.walkthroughBack} />\r\n              }}\r\n            />\r\n          )}\r\n          {!isLocked && isUnlockedTourEnabled && (\r\n            <Joyride\r\n              callback={data => {\r\n                const { status } = data;\r\n                if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n                  if (isUnlockedTourEnabled) {\r\n                    disableTour({ isUnlockedTourEnabled: false });\r\n                  }\r\n                }\r\n              }}\r\n              steps={this.unlockedHelpSteps}\r\n              continuous={true}\r\n              showSkipButton={true}\r\n              showProgress={true}\r\n              disableOverlayClose={true}\r\n              run={isUnlockedTourEnabled}\r\n              styles={joyRideStyles}\r\n              locale={{\r\n                last: <FormattedMessage {...messages.walkthroughEndTour} />,\r\n                skip: <FormattedMessage {...messages.walkthroughCloseTour} />,\r\n                next: <FormattedMessage {...messages.walkthroughNext} />,\r\n                back: <FormattedMessage {...messages.walkthroughBack} />\r\n              }}\r\n            />\r\n          )}\r\n          <Scannable>\r\n            <div\r\n              className={classNames('Board__output', {\r\n                hidden: this.props.displaySettings.hideOutputActive\r\n              })}\r\n            >\r\n              <OutputContainer />\r\n            </div>\r\n          </Scannable>\r\n\r\n          <Navbar\r\n            className=\"Board__navbar\"\r\n            disabled={disableBackButton || isSelecting || isSaving}\r\n            isLocked={isLocked}\r\n            isScannerActive={this.props.scannerSettings.active}\r\n            onBackClick={onRequestPreviousBoard}\r\n            onLockClick={onLockClick}\r\n            onDeactivateScannerClick={deactivateScanner}\r\n            onLockNotify={onLockNotify}\r\n            title={board.name}\r\n            board={board}\r\n            userData={userData}\r\n            publishBoard={publishBoard}\r\n            showNotification={this.props.showNotification}\r\n          />\r\n          {emptyVoiceAlert && (\r\n            <Alert variant=\"filled\" severity=\"error\">\r\n              {intl.formatMessage(messages.emptyVoiceAlert)}\r\n            </Alert>\r\n          )}\r\n          {offlineVoiceAlert && (\r\n            <Alert variant=\"filled\" severity=\"warning\">\r\n              {intl.formatMessage(messages.offlineVoiceAlert)}\r\n            </Alert>\r\n          )}\r\n\r\n          <CommunicatorToolbar\r\n            className=\"Board__communicator-toolbar\"\r\n            isSelecting={isSelecting || isSaving}\r\n          />\r\n\r\n          <EditToolbar\r\n            board={board}\r\n            onBoardTitleClick={this.handleBoardTitleClick}\r\n            className=\"Board__edit-toolbar\"\r\n            isSelectAll={isSelectAll}\r\n            isSelecting={isSelecting}\r\n            isSaving={isSaving}\r\n            isLoggedIn={isLoggedIn}\r\n            onAddClick={onAddClick}\r\n            isFixedBoard={isFixedBoard}\r\n            onDeleteClick={onDeleteClick}\r\n            onEditClick={onEditClick}\r\n            onSaveBoardClick={onSaveBoardClick}\r\n            onSelectAllToggle={onSelectAllToggle}\r\n            onSelectClick={onSelectClick}\r\n            selectedItemsCount={selectedTileIds.length}\r\n            onBoardTypeChange={onBoardTypeChange}\r\n          />\r\n\r\n          <Scannable>\r\n            <div\r\n              id=\"BoardTilesContainer\"\r\n              className=\"Board__tiles\"\r\n              onKeyUp={this.handleBoardKeyUp}\r\n              ref={ref => {\r\n                this.tiles = ref;\r\n              }}\r\n            >\r\n              {!board.isFixed &&\r\n                (tiles.length ? (\r\n                  <Grid\r\n                    board={board}\r\n                    edit={isSelecting && !isSaving}\r\n                    cols={cols}\r\n                    onLayoutChange={onLayoutChange}\r\n                  >\r\n                    {tiles}\r\n                  </Grid>\r\n                ) : (\r\n                  <EmptyBoard />\r\n                ))}\r\n\r\n              {board.isFixed && (\r\n                <FixedGrid\r\n                  order={board.grid ? board.grid.order : []}\r\n                  items={board.tiles}\r\n                  columns={\r\n                    board.grid ? board.grid.columns : DEFAULT_COLUMNS_NUMBER\r\n                  }\r\n                  rows={board.grid ? board.grid.rows : DEFAULT_ROWS_NUMBER}\r\n                  dragAndDropEnabled={isSelecting}\r\n                  renderItem={item => this.renderTileFixedBoard(item)}\r\n                  onItemDrop={onTileDrop}\r\n                />\r\n              )}\r\n\r\n              <EditGridButtons\r\n                active={isFixedBoard && isSelecting && !isSaving ? true : false}\r\n                columns={\r\n                  board.grid ? board.grid.columns : DEFAULT_COLUMNS_NUMBER\r\n                }\r\n                rows={board.grid ? board.grid.rows : DEFAULT_ROWS_NUMBER}\r\n                onAddRemoveRow={onAddRemoveRow}\r\n                onAddRemoveColumn={onAddRemoveColumn}\r\n              />\r\n            </div>\r\n          </Scannable>\r\n\r\n          <NavigationButtons\r\n            active={\r\n              navigationSettings.caBackButtonActive &&\r\n              !isSelecting &&\r\n              !isSaving &&\r\n              !this.props.scannerSettings.active\r\n            }\r\n            navHistory={this.props.navHistory}\r\n            previousBoard={onRequestPreviousBoard}\r\n            toRootBoard={onRequestToRootBoard}\r\n          />\r\n\r\n          <Dialog\r\n            open={this.state.openTitleDialog}\r\n            aria-labelledby=\"board-dialog-title\"\r\n            onSubmit={this.handleBoardTitleSubmit}\r\n            onClose={this.handleBoardTitleClose}\r\n          >\r\n            <DialogTitle id=\"board-dialog-title\">\r\n              {intl.formatMessage(messages.editTitle)}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <TextField\r\n                autoFocus\r\n                margin=\"dense\"\r\n                id=\"board title\"\r\n                label={intl.formatMessage(messages.boardTitle)}\r\n                type=\"text\"\r\n                fullWidth\r\n                value={this.state.titleDialogValue}\r\n                onChange={this.handleBoardTitleChange}\r\n              />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={this.handleBoardTitleClose} color=\"primary\">\r\n                {intl.formatMessage(messages.boardEditTitleCancel)}\r\n              </Button>\r\n              <Button\r\n                onClick={this.handleBoardTitleSubmit}\r\n                color=\"primary\"\r\n                variant=\"contained\"\r\n              >\r\n                {intl.formatMessage(messages.boardEditTitleAccept)}\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </div>\r\n      </Scanner>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Board;\r\n","import React, { Component, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport shortid from 'shortid';\r\nimport { resize } from 'mathjs';\r\nimport { isEqual } from 'lodash';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport isMobile from 'ismobilejs';\r\nimport domtoimage from 'dom-to-image';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport {\r\n  showNotification,\r\n  hideNotification\r\n} from '../Notifications/Notifications.actions';\r\nimport { deactivateScanner } from '../../providers/ScannerProvider/ScannerProvider.actions';\r\nimport {\r\n  speak,\r\n  cancelSpeech\r\n} from '../../providers/SpeechProvider/SpeechProvider.actions';\r\nimport { moveOrderItem } from '../FixedGrid/utils';\r\nimport {\r\n  addBoards,\r\n  changeBoard,\r\n  replaceBoard,\r\n  previousBoard,\r\n  toRootBoard,\r\n  createBoard,\r\n  updateBoard,\r\n  switchBoard,\r\n  createTile,\r\n  deleteTiles,\r\n  editTiles,\r\n  focusTile,\r\n  clickSymbol,\r\n  changeOutput,\r\n  historyRemoveBoard,\r\n  updateApiObjects,\r\n  updateApiObjectsNoChild,\r\n  getApiObjects,\r\n  downloadImages\r\n} from './Board.actions';\r\nimport {\r\n  upsertCommunicator,\r\n  changeCommunicator,\r\n  addBoardCommunicator\r\n} from '../Communicator/Communicator.actions';\r\nimport { disableTour } from '../App/App.actions';\r\nimport TileEditor from './TileEditor';\r\nimport messages from './Board.messages';\r\nimport Board from './Board.component';\r\nimport API from '../../api';\r\nimport {\r\n  SCANNING_METHOD_AUTOMATIC,\r\n  SCANNING_METHOD_MANUAL\r\n} from '../Settings/Scanning/Scanning.constants';\r\nimport { NOTIFICATION_DELAY } from '../Notifications/Notifications.constants';\r\nimport { isAndroid } from '../../cordova-util';\r\nimport { EMPTY_VOICES } from '../../providers/SpeechProvider/SpeechProvider.constants';\r\nimport { DEFAULT_ROWS_NUMBER, DEFAULT_COLUMNS_NUMBER } from './Board.constants';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nexport class BoardContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * @ignore\r\n     */\r\n    intl: intlShape.isRequired,\r\n    /**\r\n     * Board history navigation stack\r\n     */\r\n    navHistory: PropTypes.arrayOf(PropTypes.string),\r\n    /**\r\n     * Board to display\r\n     */\r\n    board: PropTypes.shape({\r\n      id: PropTypes.string,\r\n      name: PropTypes.string,\r\n      tiles: PropTypes.arrayOf(PropTypes.object)\r\n    }),\r\n    /**\r\n     * Board output\r\n     */\r\n    output: PropTypes.arrayOf(\r\n      PropTypes.shape({\r\n        label: PropTypes.string,\r\n        image: PropTypes.string,\r\n        vocalization: PropTypes.string\r\n      })\r\n    ),\r\n    /**\r\n     * Add boards from API\r\n     */\r\n    addBoards: PropTypes.func,\r\n    /**\r\n     * Load board\r\n     */\r\n    changeBoard: PropTypes.func,\r\n    /**\r\n     * Load previous board\r\n     */\r\n    previousBoard: PropTypes.func,\r\n    /**\r\n     * Load root board\r\n     */\r\n    toRootBoard: PropTypes.func,\r\n    historyRemoveBoard: PropTypes.func,\r\n    /**\r\n     * Create board\r\n     */\r\n    createBoard: PropTypes.func,\r\n    updateBoard: PropTypes.func,\r\n    /**\r\n     * Create tile\r\n     */\r\n    createTile: PropTypes.func,\r\n    /**\r\n     * Edit tiles\r\n     */\r\n    editTiles: PropTypes.func,\r\n    /**\r\n     * Delete tiles\r\n     */\r\n    deleteTiles: PropTypes.func,\r\n    /**\r\n     * Focuses a board tile\r\n     */\r\n    focusTile: PropTypes.func,\r\n    /**\r\n     * Change output\r\n     */\r\n    changeOutput: PropTypes.func,\r\n    /**\r\n     * Show notification\r\n     */\r\n    showNotification: PropTypes.func,\r\n    /**\r\n     * Deactivate Scanner\r\n     */\r\n    deactivateScanner: PropTypes.func,\r\n    /**\r\n     * Show display Settings\r\n     */\r\n    displaySettings: PropTypes.object,\r\n    /**\r\n     * Show navigationSettings\r\n     */\r\n    navigationSettings: PropTypes.object,\r\n    /**\r\n     * Show userData\r\n     */\r\n    userData: PropTypes.object,\r\n    /**\r\n     * Scanner Settings\r\n     */\r\n    scannerSettings: PropTypes.object,\r\n    /**\r\n     * Adds a Board to the Active Communicator\r\n     */\r\n    addBoardCommunicator: PropTypes.func.isRequired,\r\n    downloadImages: PropTypes.func,\r\n    lang: PropTypes.string,\r\n    isRootBoardTourEnabled: PropTypes.bool,\r\n    disableTour: PropTypes.func\r\n  };\r\n\r\n  state = {\r\n    selectedTileIds: [],\r\n    isSaving: false,\r\n    isSelectAll: false,\r\n    isSelecting: false,\r\n    isLocked: true,\r\n    tileEditorOpen: false,\r\n    translatedBoard: null,\r\n    isGettingApiObjects: false,\r\n    copyPublicBoard: false,\r\n    blockedPrivateBoard: false,\r\n    isFixedBoard: false\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const {\r\n      match: {\r\n        params: { id }\r\n      }\r\n    } = this.props;\r\n\r\n    const {\r\n      board,\r\n      boards,\r\n      communicator,\r\n      changeBoard,\r\n      userData,\r\n      history,\r\n      getApiObjects,\r\n      downloadImages\r\n    } = this.props;\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData && window.navigator.onLine) {\r\n      //synchronize user id in analytics\r\n      window.gtag('set', { user_id: userData.id });\r\n      //synchronize communicator and boards with API\r\n      this.setState({ isGettingApiObjects: true });\r\n      await getApiObjects();\r\n      this.setState({ isGettingApiObjects: false });\r\n    }\r\n\r\n    let boardExists = null;\r\n\r\n    if (id && board && id === board.id) {\r\n      //active board = requested board, use that board\r\n      boardExists = boards.find(b => b.id === board.id);\r\n    } else if (id && board && id !== board.id) {\r\n      //active board != requested board, use requested if exist otherwise use active\r\n      boardExists = boards.find(b => b.id === id);\r\n      if (!boardExists) {\r\n        try {\r\n          const remoteBoard = await this.tryRemoteBoard(id);\r\n          if (remoteBoard) {\r\n            boardExists = remoteBoard;\r\n          } else {\r\n            boardExists = boards.find(b => b.id === board.id);\r\n          }\r\n        } catch (err) {\r\n          boardExists = boards.find(b => b.id === board.id);\r\n        }\r\n      }\r\n    } else if (id && !board) {\r\n      //no active board but requested board, use requested\r\n      boardExists = boards.find(b => b.id === id);\r\n      if (!boardExists) {\r\n        try {\r\n          boardExists = await this.tryRemoteBoard(id);\r\n        } catch (err) {\r\n          boardExists = null;\r\n        }\r\n      }\r\n    } else if (!id && !!board) {\r\n      //no requested board, use active board\r\n      boardExists = boards.find(b => b.id === board.id);\r\n    } else {\r\n      //neither requested nor active board, use communicator root board\r\n      boardExists = boards.find(b => b.id === communicator.rootBoard);\r\n    }\r\n\r\n    if (!boardExists) {\r\n      // try the root board\r\n      boardExists = boards.find(b => b.id === communicator.rootBoard);\r\n      if (!boardExists) {\r\n        boardExists = boards.find(b => b.id !== '');\r\n      }\r\n    }\r\n    const boardId = boardExists.id;\r\n    changeBoard(boardId);\r\n    const goTo = id ? boardId : `board/${boardId}`;\r\n    history.replace(goTo);\r\n\r\n    const translatedBoard = this.translateBoard(boardExists);\r\n    this.setState({ translatedBoard });\r\n\r\n    //set board type\r\n    this.setState({ isFixedBoard: !!boardExists.isFixed });\r\n\r\n    if (isAndroid()) downloadImages();\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    if (this.props.match.params.id !== nextProps.match.params.id) {\r\n      const {\r\n        navHistory,\r\n        boards,\r\n        changeBoard,\r\n        previousBoard,\r\n        historyRemoveBoard\r\n      } = this.props;\r\n\r\n      const boardExists = boards.find(b => b.id === nextProps.match.params.id);\r\n      if (boardExists) {\r\n        // Was a browser back action?\r\n        if (\r\n          navHistory.length >= 2 &&\r\n          nextProps.match.params.id === navHistory[navHistory.length - 2]\r\n        ) {\r\n          changeBoard(nextProps.match.params.id);\r\n          previousBoard();\r\n        }\r\n      } else {\r\n        // Was a browser back action?\r\n        if (\r\n          navHistory.length >= 2 &&\r\n          nextProps.match.params.id === navHistory[navHistory.length - 2]\r\n        ) {\r\n          //board is invalid so we remove from navigation history\r\n          historyRemoveBoard(nextProps.match.params.id);\r\n        }\r\n      }\r\n    }\r\n\r\n    // TODO: perf issues\r\n    const translatedBoard = this.translateBoard(nextProps.board);\r\n    this.setState({ translatedBoard });\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const { board } = this.props;\r\n    if (board && prevProps.board && board.isFixed !== prevProps.board.isFixed) {\r\n      this.setState({ isFixedBoard: board.isFixed });\r\n    }\r\n  }\r\n\r\n  toggleSelectMode() {\r\n    this.setState(prevState => ({\r\n      isSelecting: !prevState.isSelecting,\r\n      isSelectAll: false,\r\n      selectedTileIds: []\r\n    }));\r\n  }\r\n\r\n  selectAllTiles() {\r\n    const { board } = this.props;\r\n    const allTileIds = board.tiles.map(tile => tile.id);\r\n\r\n    this.setState({\r\n      selectedTileIds: allTileIds\r\n    });\r\n  }\r\n\r\n  selectTile(tileId) {\r\n    this.setState({\r\n      selectedTileIds: [...this.state.selectedTileIds, tileId]\r\n    });\r\n  }\r\n\r\n  deselectTile(tileId) {\r\n    const [...selectedTileIds] = this.state.selectedTileIds;\r\n    const tileIndex = selectedTileIds.indexOf(tileId);\r\n    selectedTileIds.splice(tileIndex, 1);\r\n    this.setState({ selectedTileIds });\r\n  }\r\n\r\n  toggleTileSelect(tileId) {\r\n    if (this.state.selectedTileIds.includes(tileId)) {\r\n      this.deselectTile(tileId);\r\n    } else {\r\n      this.selectTile(tileId);\r\n    }\r\n  }\r\n\r\n  async tryRemoteBoard(boardId) {\r\n    const { userData } = this.props;\r\n    const remoteBoard = await API.getBoard(boardId);\r\n    //if requested board is from the user just add it\r\n    if (\r\n      'name' in userData &&\r\n      'email' in userData &&\r\n      remoteBoard.email === userData.email &&\r\n      remoteBoard.author === userData.name\r\n    ) {\r\n      return remoteBoard;\r\n    } else {\r\n      //if requested board is public, ask about copy it\r\n      if (remoteBoard.isPublic) {\r\n        this.setState({ copyPublicBoard: remoteBoard });\r\n      } else {\r\n        this.setState({ blockedPrivateBoard: true });\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  translateBoard(board) {\r\n    if (!board) {\r\n      return null;\r\n    }\r\n\r\n    const { intl } = this.props;\r\n    let name;\r\n    let nameFromKey;\r\n    if (board.nameKey) {\r\n      const nameKeyArray = board.nameKey.split('.');\r\n      nameFromKey = nameKeyArray[nameKeyArray.length - 1];\r\n    }\r\n    if (board.nameKey && !board.name) {\r\n      name = intl.formatMessage({ id: board.nameKey });\r\n    } else if (\r\n      board.nameKey &&\r\n      board.name &&\r\n      nameFromKey === board.name &&\r\n      intl.messages[board.nameKey]\r\n    ) {\r\n      name = intl.formatMessage({ id: board.nameKey });\r\n    } else {\r\n      name = board.name;\r\n    }\r\n    const validTiles = board.tiles.filter(tile => (tile ? true : false));\r\n    const tiles = validTiles.map(tile => ({\r\n      ...tile,\r\n      label:\r\n        tile.labelKey && intl.messages[tile.labelKey]\r\n          ? intl.formatMessage({ id: tile.labelKey })\r\n          : tile.label\r\n    }));\r\n\r\n    const translatedBoard = {\r\n      ...board,\r\n      name,\r\n      tiles\r\n    };\r\n\r\n    return translatedBoard;\r\n  }\r\n\r\n  async captureBoardScreenshot() {\r\n    const node = document.getElementById('BoardTilesContainer').firstChild;\r\n    let dataURL = null;\r\n    try {\r\n      dataURL = await domtoimage.toPng(node);\r\n    } catch (e) {}\r\n\r\n    return dataURL;\r\n  }\r\n\r\n  async updateBoardScreenshot() {\r\n    let url = null;\r\n    const dataURL = await this.captureBoardScreenshot();\r\n    if (dataURL && dataURL !== 'data:,') {\r\n      const filename = `${this.state.translatedBoard.name ||\r\n        this.state.translatedBoard.id}.png`;\r\n      url = await API.uploadFromDataURL(dataURL, filename);\r\n    }\r\n\r\n    return url;\r\n  }\r\n\r\n  playAudio(src) {\r\n    let audio = new Audio();\r\n    audio.src = src;\r\n    audio.play();\r\n  }\r\n\r\n  handleEditBoardTitle = name => {\r\n    const { board, updateBoard } = this.props;\r\n    const titledBoard = {\r\n      ...board,\r\n      name: name\r\n    };\r\n    const processedBoard = this.updateIfFeaturedBoard(titledBoard);\r\n    updateBoard(processedBoard);\r\n    this.saveApiBoardOperation(processedBoard);\r\n  };\r\n\r\n  saveApiBoardOperation = async board => {\r\n    const {\r\n      userData,\r\n      communicator,\r\n      upsertCommunicator,\r\n      changeCommunicator,\r\n      replaceBoard,\r\n      updateApiObjectsNoChild,\r\n      lang\r\n    } = this.props;\r\n\r\n    var createCommunicator = false;\r\n    var createBoard = false;\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.setState({ isSaving: true });\r\n      try {\r\n        //prepare board\r\n        let boardData = {\r\n          ...board,\r\n          author: userData.name,\r\n          email: userData.email,\r\n          hidden: false,\r\n          locale: lang\r\n        };\r\n        //check if user has an own communicator\r\n        let communicatorData = { ...communicator };\r\n        if (communicator.email !== userData.email) {\r\n          //need to create a new communicator\r\n          communicatorData = {\r\n            ...communicator,\r\n            author: userData.name,\r\n            email: userData.email,\r\n            boards: boardData.id === 'root' ? ['root'] : ['root', boardData.id],\r\n            rootBoard: 'root',\r\n            id: shortid.generate()\r\n          };\r\n          upsertCommunicator(communicatorData);\r\n          changeCommunicator(communicatorData.id);\r\n          createCommunicator = true;\r\n        }\r\n        //check if we have to create a copy of the board\r\n        if (boardData.id.length < 14) {\r\n          createBoard = true;\r\n          boardData = {\r\n            ...boardData,\r\n            isPublic: false\r\n          };\r\n        } else {\r\n          //update the board\r\n          updateBoard(boardData);\r\n        }\r\n        //api updates\r\n        updateApiObjectsNoChild(boardData, createCommunicator, createBoard)\r\n          .then(boardId => {\r\n            if (createBoard) {\r\n              replaceBoard({ ...boardData }, { ...boardData, id: boardId });\r\n            }\r\n            this.props.history.replace(`/board/${boardId}`);\r\n          })\r\n          .catch(err => {\r\n            console.log(err.message);\r\n          });\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      } finally {\r\n        this.setState({ isSaving: false });\r\n      }\r\n    }\r\n  };\r\n\r\n  handleEditClick = () => {\r\n    this.setState({ tileEditorOpen: true });\r\n  };\r\n\r\n  handleBoardTypeChange = async () => {\r\n    const { board, updateBoard } = this.props;\r\n\r\n    this.setState({ isFixedBoard: !this.state.isFixedBoard });\r\n    const newBoard = {\r\n      ...board,\r\n      isFixed: !this.state.isFixedBoard\r\n    };\r\n    if (!board.grid) {\r\n      const defaultGrid = {\r\n        rows: DEFAULT_ROWS_NUMBER,\r\n        columns: DEFAULT_COLUMNS_NUMBER,\r\n        order: this.getDefaultOrdering(board.tiles)\r\n      };\r\n      newBoard.grid = defaultGrid;\r\n    }\r\n    const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n    await updateBoard(processedBoard);\r\n    this.saveApiBoardOperation(processedBoard);\r\n  };\r\n\r\n  getDefaultOrdering = tiles => {\r\n    let order = [];\r\n    let tilesIndex = 0;\r\n    for (var i = 0; i < DEFAULT_ROWS_NUMBER; i++) {\r\n      order[i] = [];\r\n      for (var j = 0; j < DEFAULT_COLUMNS_NUMBER; j++) {\r\n        if (tilesIndex < tiles.length && tiles[tilesIndex]) {\r\n          order[i][j] = tiles[tilesIndex].id;\r\n        } else {\r\n          order[i][j] = null;\r\n        }\r\n        tilesIndex++;\r\n      }\r\n    }\r\n    return order;\r\n  };\r\n\r\n  handleTileEditorCancel = () => {\r\n    this.setState({ tileEditorOpen: false });\r\n  };\r\n\r\n  handleEditTileEditorSubmit = tiles => {\r\n    const { board, editTiles, userData } = this.props;\r\n    this.updateIfFeaturedBoard(board);\r\n    editTiles(tiles, board.id);\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.handleApiUpdates(null, null, tiles);\r\n    }\r\n    this.toggleSelectMode();\r\n  };\r\n\r\n  handleAddTileEditorSubmit = tile => {\r\n    const {\r\n      userData,\r\n      createTile,\r\n      board,\r\n      createBoard,\r\n      switchBoard,\r\n      addBoardCommunicator,\r\n      history\r\n    } = this.props;\r\n    const boardData = {\r\n      id: tile.loadBoard,\r\n      name: tile.label,\r\n      nameKey: tile.labelKey,\r\n      hidden: false,\r\n      tiles: [],\r\n      isPublic: false,\r\n      email: userData.email ? userData.email : board.email,\r\n      author: userData.name ? userData.name : board.author\r\n    };\r\n    if (tile.loadBoard && !tile.linkedBoard) {\r\n      createBoard(boardData);\r\n      addBoardCommunicator(boardData.id);\r\n    }\r\n    if (tile.type !== 'board') {\r\n      this.updateIfFeaturedBoard(board);\r\n      createTile(tile, board.id);\r\n    }\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.handleApiUpdates(tile);\r\n      return;\r\n    }\r\n    //if not and is adding an emptyBoard\r\n    if (tile.type === 'board') {\r\n      switchBoard(boardData.id);\r\n      history.replace(`/board/${boardData.id}`, []);\r\n    }\r\n  };\r\n\r\n  updateIfFeaturedBoard = board => {\r\n    const { userData, updateBoard, intl, lang } = this.props;\r\n    let boardData = {\r\n      ...board\r\n    };\r\n    if (\r\n      'name' in userData &&\r\n      'email' in userData &&\r\n      board.email !== userData.email\r\n    ) {\r\n      boardData = {\r\n        ...boardData,\r\n        name:\r\n          board.name ||\r\n          this.nameFromKey(board) ||\r\n          intl.formatMessage(messages.myBoardTitle),\r\n        author: userData.name,\r\n        email: userData.email,\r\n        hidden: false,\r\n        isPublic: false,\r\n        locale: lang\r\n      };\r\n      updateBoard(boardData);\r\n    }\r\n    return boardData;\r\n  };\r\n\r\n  nameFromKey = board => {\r\n    let nameFromKey = undefined;\r\n    if (board.nameKey) {\r\n      const nameKeyArray = board.nameKey.split('.');\r\n      nameFromKey = nameKeyArray[nameKeyArray.length - 1];\r\n    }\r\n    return nameFromKey;\r\n  };\r\n\r\n  handleAddClick = () => {\r\n    this.setState({\r\n      tileEditorOpen: true,\r\n      selectedTileIds: [],\r\n      isSelecting: false\r\n    });\r\n  };\r\n\r\n  handleAddRemoveRow = async (isAdd, isLeftOrTop) => {\r\n    const { board, updateBoard } = this.props;\r\n    if ((!isAdd && board.grid.rows > 1) || (isAdd && board.grid.rows < 12)) {\r\n      let newOrder = [];\r\n      const newRows = isAdd ? board.grid.rows + 1 : board.grid.rows - 1;\r\n      if (Array.isArray(board.grid.order) && board.grid.order.length) {\r\n        newOrder = resize(\r\n          board.grid.order,\r\n          [newRows, board.grid.columns],\r\n          null\r\n        );\r\n      } else {\r\n        newOrder = this.getDefaultOrdering(board.tiles);\r\n      }\r\n      const newBoard = {\r\n        ...board,\r\n        grid: {\r\n          ...board.grid,\r\n          rows: newRows,\r\n          order: newOrder\r\n        }\r\n      };\r\n      const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n      updateBoard(processedBoard);\r\n      this.saveApiBoardOperation(processedBoard);\r\n    }\r\n  };\r\n\r\n  handleAddRemoveColumn = async (isAdd, isLeftOrTop) => {\r\n    const { board, updateBoard } = this.props;\r\n    if (\r\n      (!isAdd && board.grid.columns > 1) ||\r\n      (isAdd && board.grid.columns < 12)\r\n    ) {\r\n      let newOrder = [];\r\n      const newColumns = isAdd\r\n        ? board.grid.columns + 1\r\n        : board.grid.columns - 1;\r\n      if (Array.isArray(board.grid.order) && board.grid.order.length) {\r\n        newOrder = resize(\r\n          board.grid.order,\r\n          [board.grid.rows, newColumns],\r\n          null\r\n        );\r\n      } else {\r\n        newOrder = this.getDefaultOrdering(board.tiles);\r\n      }\r\n      const newBoard = {\r\n        ...board,\r\n        grid: {\r\n          ...board.grid,\r\n          columns: newColumns,\r\n          order: newOrder\r\n        }\r\n      };\r\n      const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n      updateBoard(processedBoard);\r\n      this.saveApiBoardOperation(processedBoard);\r\n    }\r\n  };\r\n\r\n  handleLayoutChange = (currentLayout, layouts) => {\r\n    const { updateBoard, replaceBoard, board } = this.props;\r\n    currentLayout.sort((a, b) => {\r\n      if (a.y === b.y) {\r\n        return a.x - b.x;\r\n      } else if (a.y > b.y) {\r\n        return 1;\r\n      }\r\n      return -1;\r\n    });\r\n\r\n    const tilesIds = currentLayout.map(gridTile => gridTile.i);\r\n    const tiles = tilesIds.map(t => {\r\n      return board.tiles.find(\r\n        tile => tile.id === t || Number(tile.id) === Number(t)\r\n      );\r\n    });\r\n    const newBoard = { ...board, tiles };\r\n    replaceBoard(board, newBoard);\r\n    if (!isEqual(board.tiles, tiles)) {\r\n      const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n      updateBoard(processedBoard);\r\n      this.saveApiBoardOperation(processedBoard);\r\n    }\r\n  };\r\n\r\n  handleTileDrop = async (tile, position) => {\r\n    const { board, updateBoard } = this.props;\r\n    const newOrder = moveOrderItem(tile.id, position, board.grid.order);\r\n\r\n    const newBoard = {\r\n      ...board,\r\n      grid: {\r\n        ...board.grid,\r\n        order: newOrder\r\n      }\r\n    };\r\n    const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n    updateBoard(processedBoard);\r\n    this.saveApiBoardOperation(processedBoard);\r\n  };\r\n\r\n  handleLockClick = () => {\r\n    this.setState((state, props) => ({\r\n      isLocked: !state.isLocked,\r\n      isSaving: false,\r\n      isSelecting: false,\r\n      selectedTileIds: []\r\n    }));\r\n  };\r\n\r\n  handleSelectClick = () => {\r\n    this.toggleSelectMode();\r\n  };\r\n\r\n  handleSelectAllToggle = () => {\r\n    if (this.state.isSelectAll) {\r\n      this.setState({ selectedTileIds: [] });\r\n    } else {\r\n      this.selectAllTiles();\r\n    }\r\n\r\n    this.setState(prevState => ({\r\n      isSelectAll: !prevState.isSelectAll\r\n    }));\r\n  };\r\n\r\n  handleTileClick = tile => {\r\n    if (this.state.isSelecting) {\r\n      this.toggleTileSelect(tile.id);\r\n      return;\r\n    }\r\n\r\n    const {\r\n      changeBoard,\r\n      changeOutput,\r\n      clickSymbol,\r\n      speak,\r\n      intl,\r\n      boards,\r\n      showNotification,\r\n      navigationSettings\r\n    } = this.props;\r\n    const hasAction = tile.action && tile.action.startsWith('+');\r\n\r\n    const say = () => {\r\n      if (tile.sound) {\r\n        this.playAudio(tile.sound);\r\n      } else {\r\n        const toSpeak = !hasAction ? tile.vocalization || tile.label : null;\r\n        if (toSpeak) {\r\n          speak(toSpeak);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (tile.loadBoard) {\r\n      const nextBoard =\r\n        boards.find(b => b.id === tile.loadBoard) ||\r\n        // If the board id is invalid, try falling back to a board\r\n        // with the right name.\r\n        boards.find(b => b.name === tile.label);\r\n      if (nextBoard) {\r\n        changeBoard(nextBoard.id);\r\n        this.props.history.push(nextBoard.id);\r\n        if (navigationSettings.vocalizeFolders) {\r\n          say();\r\n        }\r\n      } else {\r\n        showNotification(intl.formatMessage(messages.boardMissed));\r\n      }\r\n    } else {\r\n      changeOutput([...this.props.output, tile]);\r\n      clickSymbol(tile.label);\r\n      say();\r\n    }\r\n  };\r\n\r\n  handleAddTile = (tile, boardId) => {\r\n    const { intl, createTile, showNotification } = this.props;\r\n    createTile(tile, boardId);\r\n    showNotification(intl.formatMessage(messages.tilesCreated));\r\n  };\r\n\r\n  handleDeleteClick = () => {\r\n    const { intl, deleteTiles, showNotification, board, userData } = this.props;\r\n    this.updateIfFeaturedBoard(board);\r\n    deleteTiles(this.state.selectedTileIds, board.id);\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.handleApiUpdates(null, this.state.selectedTileIds, null);\r\n    }\r\n\r\n    this.setState({\r\n      selectedTileIds: []\r\n    });\r\n    showNotification(intl.formatMessage(messages.tilesDeleted));\r\n    this.toggleSelectMode();\r\n  };\r\n\r\n  handleLockNotify = countdown => {\r\n    const { intl, showNotification, hideNotification } = this.props;\r\n\r\n    if (countdown > 3) {\r\n      return;\r\n    }\r\n\r\n    if (!countdown) {\r\n      hideNotification();\r\n      return;\r\n    }\r\n\r\n    const clicksToUnlock = `${countdown} ${intl.formatMessage(\r\n      messages.clicksToUnlock\r\n    )}`;\r\n\r\n    hideNotification();\r\n    // HACK: refactor Notification container\r\n    setTimeout(() => {\r\n      showNotification(clicksToUnlock);\r\n    });\r\n  };\r\n\r\n  handleScannerStrategyNotification = () => {\r\n    const {\r\n      scannerSettings: { strategy },\r\n      showNotification,\r\n      intl\r\n    } = this.props;\r\n    const messagesKeyMap = {\r\n      [SCANNING_METHOD_MANUAL]: messages.scannerManualStrategy,\r\n      [SCANNING_METHOD_AUTOMATIC]: messages.scannerAutomaticStrategy\r\n    };\r\n    showNotification(intl.formatMessage(messagesKeyMap[strategy]));\r\n\r\n    if (!isMobile.any) {\r\n      setTimeout(() => {\r\n        showNotification(intl.formatMessage(messages.scannerHowToDeactivate));\r\n      }, NOTIFICATION_DELAY);\r\n    }\r\n  };\r\n\r\n  async uploadTileSound(tile) {\r\n    if (tile && tile.sound && tile.sound.startsWith('data')) {\r\n      const { userData } = this.props;\r\n      try {\r\n        var blob = new Blob([this.convertDataURIToBinary(tile.sound)], {\r\n          type: 'audio/ogg; codecs=opus'\r\n        });\r\n        const audioUrl = await API.uploadFile(blob, userData.email + '.ogg');\r\n        tile.sound = audioUrl;\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n    return tile;\r\n  }\r\n\r\n  convertDataURIToBinary(dataURI) {\r\n    var BASE64_MARKER = ';base64,';\r\n    var base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length;\r\n    var base64 = dataURI.substring(base64Index);\r\n    var raw = window.atob(base64);\r\n    var rawLength = raw.length;\r\n    var array = new Uint8Array(new ArrayBuffer(rawLength));\r\n\r\n    for (let i = 0; i < rawLength; i++) {\r\n      array[i] = raw.charCodeAt(i);\r\n    }\r\n    return array;\r\n  }\r\n\r\n  handleApiUpdates = async (\r\n    tile = null,\r\n    deletedTilesiIds = null,\r\n    editedTiles = null,\r\n    processedBoard = null\r\n  ) => {\r\n    const {\r\n      userData,\r\n      communicator,\r\n      board,\r\n      intl,\r\n      upsertCommunicator,\r\n      changeCommunicator,\r\n      updateApiObjectsNoChild,\r\n      updateApiObjects,\r\n      replaceBoard,\r\n      updateBoard,\r\n      switchBoard,\r\n      lang\r\n    } = this.props;\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.setState({\r\n        isSaving: true\r\n      });\r\n\r\n      if (tile && tile.sound && tile.sound.startsWith('data')) {\r\n        tile = await this.uploadTileSound(tile);\r\n      }\r\n      if (editedTiles) {\r\n        let _editedTiles = [];\r\n        for (let _tile of editedTiles) {\r\n          _editedTiles.push(await this.uploadTileSound(_tile));\r\n        }\r\n        editedTiles = _editedTiles;\r\n      }\r\n\r\n      var createCommunicator = false;\r\n      var createParentBoard = false;\r\n      var createChildBoard = false;\r\n      var childBoardData = null;\r\n\r\n      let uTiles = [];\r\n      if (deletedTilesiIds) {\r\n        uTiles = board.tiles.filter(\r\n          cTile => !deletedTilesiIds.includes(cTile.id)\r\n        );\r\n      }\r\n      if (editedTiles) {\r\n        uTiles = board.tiles.map(\r\n          cTile => editedTiles.find(s => s.id === cTile.id) || cTile\r\n        );\r\n      }\r\n      if (tile && tile.type !== 'board') {\r\n        uTiles = [...board.tiles, tile];\r\n      }\r\n      if (tile && tile.type === 'board') {\r\n        uTiles = [...board.tiles];\r\n      }\r\n\r\n      let parentBoardData = processedBoard\r\n        ? processedBoard\r\n        : {\r\n            ...board,\r\n            name:\r\n              board.name ||\r\n              this.nameFromKey(board) ||\r\n              intl.formatMessage(messages.myBoardTitle),\r\n            tiles: uTiles,\r\n            author: userData.name,\r\n            email: userData.email,\r\n            hidden: false,\r\n            locale: lang\r\n          };\r\n      //check if user has an own communicator\r\n      let communicatorData = { ...communicator };\r\n      if (communicator.email !== userData.email) {\r\n        //need to create a new communicator\r\n        communicatorData = {\r\n          ...communicator,\r\n          author: userData.name,\r\n          email: userData.email,\r\n          id: shortid.generate()\r\n        };\r\n        upsertCommunicator(communicatorData);\r\n        changeCommunicator(communicatorData.id);\r\n        createCommunicator = true;\r\n      }\r\n      //check for a new  own board\r\n      if (tile && tile.loadBoard && !tile.linkedBoard) {\r\n        const boardData = {\r\n          id: tile.loadBoard,\r\n          name: tile.label,\r\n          nameKey: tile.labelKey,\r\n          hidden: false,\r\n          tiles: [],\r\n          isPublic: false,\r\n          author: userData.name,\r\n          email: userData.email,\r\n          locale: lang,\r\n          caption: tile.image\r\n        };\r\n        childBoardData = { ...boardData };\r\n        createChildBoard = true;\r\n        updateBoard(childBoardData);\r\n      }\r\n      //check if we have to create a copy of the parent\r\n      if (parentBoardData.id.length < 14) {\r\n        createParentBoard = true;\r\n        parentBoardData = {\r\n          ...parentBoardData,\r\n          isPublic: false\r\n        };\r\n      } else {\r\n        //update the parent\r\n        updateBoard(parentBoardData);\r\n      }\r\n      //api updates\r\n      if (tile && tile.type === 'board') {\r\n        //child becomes parent\r\n        updateApiObjectsNoChild(childBoardData, createCommunicator, true)\r\n          .then(parentBoardId => {\r\n            switchBoard(parentBoardId);\r\n            this.props.history.replace(`/board/${parentBoardId}`, []);\r\n            this.setState({ isSaving: false });\r\n          })\r\n          .catch(e => {\r\n            this.setState({ isSaving: false });\r\n          });\r\n      } else {\r\n        if (!createChildBoard) {\r\n          updateApiObjectsNoChild(\r\n            parentBoardData,\r\n            createCommunicator,\r\n            createParentBoard\r\n          )\r\n            .then(parentBoardId => {\r\n              if (createParentBoard) {\r\n                replaceBoard(\r\n                  { ...parentBoardData },\r\n                  { ...parentBoardData, id: parentBoardId }\r\n                );\r\n              }\r\n              this.props.history.replace(`/board/${parentBoardId}`);\r\n              this.setState({ isSaving: false });\r\n            })\r\n            .catch(e => {\r\n              this.setState({ isSaving: false });\r\n            });\r\n        } else {\r\n          updateApiObjects(\r\n            childBoardData,\r\n            parentBoardData,\r\n            createCommunicator,\r\n            createParentBoard\r\n          )\r\n            .then(parentBoardId => {\r\n              if (createParentBoard) {\r\n                replaceBoard(\r\n                  { ...parentBoardData },\r\n                  { ...parentBoardData, id: parentBoardId }\r\n                );\r\n              }\r\n              this.props.history.replace(`/board/${parentBoardId}`);\r\n              this.setState({ isSaving: false });\r\n            })\r\n            .catch(e => {\r\n              this.setState({ isSaving: false });\r\n            });\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  onRequestPreviousBoard() {\r\n    if (this.props.navHistory.length >= 2) {\r\n      const prevBoardId = this.props.navHistory[\r\n        this.props.navHistory.length - 2\r\n      ];\r\n      this.props.history.replace(`/board/${prevBoardId}`);\r\n    }\r\n  }\r\n\r\n  handleCopyRemoteBoard = async () => {\r\n    const { intl, showNotification } = this.props;\r\n    try {\r\n      await this.createBoardsRecursively(this.state.copyPublicBoard);\r\n      showNotification(intl.formatMessage(messages.boardCopiedSuccessfully));\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      showNotification(intl.formatMessage(messages.boardCopyError));\r\n    }\r\n  };\r\n  async createBoardsRecursively(board, records) {\r\n    const {\r\n      createBoard,\r\n      switchBoard,\r\n      addBoardCommunicator,\r\n      upsertCommunicator,\r\n      changeCommunicator,\r\n      history,\r\n      communicator,\r\n      userData,\r\n      updateApiObjectsNoChild,\r\n      boards,\r\n      intl\r\n    } = this.props;\r\n\r\n    //prevent shit\r\n    if (!board) {\r\n      return;\r\n    }\r\n    if (records) {\r\n      //get the list of next boards in records\r\n      let nextBoardsRecords = records.map(entry => entry.next);\r\n      if (nextBoardsRecords.includes(board.id)) {\r\n        return;\r\n      }\r\n    }\r\n\r\n    let newBoard = {\r\n      ...board,\r\n      isPublic: false,\r\n      id: shortid.generate(),\r\n      hidden: false,\r\n      author: '',\r\n      email: ''\r\n    };\r\n    if (!newBoard.name) {\r\n      newBoard.name = newBoard.nameKey\r\n        ? intl.formatMessage({ id: newBoard.nameKey })\r\n        : intl.formatMessage(messages.noTitle);\r\n    }\r\n    if ('name' in userData && 'email' in userData) {\r\n      newBoard = {\r\n        ...newBoard,\r\n        author: userData.name,\r\n        email: userData.email\r\n      };\r\n    }\r\n    createBoard(newBoard);\r\n    if (!records) {\r\n      addBoardCommunicator(newBoard.id);\r\n    }\r\n\r\n    // Loggedin user?\r\n    if ('name' in userData && 'email' in userData) {\r\n      this.setState({\r\n        isSaving: true\r\n      });\r\n      let createCommunicator = false;\r\n      if (communicator.email !== userData.email) {\r\n        //need to create a new communicator\r\n        const communicatorData = {\r\n          ...communicator,\r\n          author: userData.name,\r\n          email: userData.email,\r\n          id: shortid.generate()\r\n        };\r\n        upsertCommunicator(communicatorData);\r\n        changeCommunicator(communicatorData.id);\r\n        createCommunicator = true;\r\n      }\r\n      try {\r\n        const boardId = await updateApiObjectsNoChild(\r\n          newBoard,\r\n          createCommunicator,\r\n          true\r\n        );\r\n        newBoard = {\r\n          ...newBoard,\r\n          id: boardId\r\n        };\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n    if (!records) {\r\n      records = [{ prev: board.id, next: newBoard.id }];\r\n      switchBoard(newBoard.id);\r\n      history.replace(`/board/${newBoard.id}`, []);\r\n      const translatedBoard = this.translateBoard(newBoard);\r\n      this.setState({\r\n        translatedBoard,\r\n        isSaving: false,\r\n        copyPublicBoard: false,\r\n        blockedPrivateBoard: false\r\n      });\r\n    } else {\r\n      records.push({ prev: board.id, next: newBoard.id });\r\n    }\r\n    this.updateBoardReferences(board, newBoard, records);\r\n\r\n    if (board.tiles.length < 1) {\r\n      return;\r\n    }\r\n\r\n    //return condition\r\n    board.tiles.forEach(async tile => {\r\n      if (tile.loadBoard) {\r\n        try {\r\n          const nextBoard = await API.getBoard(tile.loadBoard);\r\n          this.createBoardsRecursively(nextBoard, records);\r\n        } catch (err) {\r\n          if (err.response.status === 404) {\r\n            //look for this board in available boards\r\n            const localBoard = boards.find(b => b.id === tile.loadBoard);\r\n            if (localBoard) {\r\n              this.createBoardsRecursively(localBoard, records);\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  updateBoardReferences(board, newBoard, records) {\r\n    const { boards, updateBoard } = this.props;\r\n    //get the list of prev boards in records, but remove the current board\r\n    let prevBoardsRecords = records.map(entry => entry.prev);\r\n    prevBoardsRecords = prevBoardsRecords.filter(id => id !== newBoard.id);\r\n    //look for reference to the original board id\r\n    boards.forEach(b => {\r\n      b.tiles.forEach((tile, index) => {\r\n        if (\r\n          //general case: tile can contains reference to the board\r\n          tile &&\r\n          tile.loadBoard &&\r\n          tile.loadBoard === board.id\r\n        ) {\r\n          b.tiles.splice(index, 1, {\r\n            ...tile,\r\n            loadBoard: newBoard.id\r\n          });\r\n          try {\r\n            updateBoard(b);\r\n          } catch (err) {\r\n            console.log(err.message);\r\n          }\r\n        }\r\n        if (\r\n          //special case: tile can contains reference to a prev board in records!\r\n          tile &&\r\n          tile.loadBoard &&\r\n          prevBoardsRecords.includes(tile.loadBoard)\r\n        ) {\r\n          const el = records.find(e => e.prev === tile.loadBoard);\r\n          b.tiles.splice(index, 1, {\r\n            ...tile,\r\n            loadBoard: el.next\r\n          });\r\n          try {\r\n            updateBoard(b);\r\n          } catch (err) {\r\n            console.log(err.message);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  handleCloseDialog = () => {\r\n    this.setState({\r\n      copyPublicBoard: false,\r\n      blockedPrivateBoard: false\r\n    });\r\n  };\r\n\r\n  publishBoard = () => {\r\n    const { board, updateBoard } = this.props;\r\n    const newBoard = {\r\n      ...board,\r\n      isPublic: !board.isPublic\r\n    };\r\n    const processedBoard = this.updateIfFeaturedBoard(newBoard);\r\n    updateBoard(processedBoard);\r\n    this.saveApiBoardOperation(processedBoard);\r\n  };\r\n\r\n  render() {\r\n    const { navHistory, board, focusTile } = this.props;\r\n\r\n    if (!this.state.translatedBoard) {\r\n      return (\r\n        <div className=\"Board__loading\">\r\n          <CircularProgress size={60} thickness={5} color=\"inherit\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const disableBackButton = navHistory.length === 1;\r\n    const editingTiles = this.state.tileEditorOpen\r\n      ? this.state.selectedTileIds.map(selectedTileId => {\r\n          const tiles = board.tiles.filter(tile => {\r\n            return tile.id === selectedTileId;\r\n          })[0];\r\n\r\n          return tiles;\r\n        })\r\n      : [];\r\n\r\n    return (\r\n      <Fragment>\r\n        <Board\r\n          board={this.state.translatedBoard}\r\n          intl={this.props.intl}\r\n          scannerSettings={this.props.scannerSettings}\r\n          deactivateScanner={this.props.deactivateScanner}\r\n          disableBackButton={disableBackButton}\r\n          userData={this.props.userData}\r\n          isLocked={this.state.isLocked}\r\n          isSaving={this.state.isSaving}\r\n          isSelecting={this.state.isSelecting}\r\n          isSelectAll={this.state.isSelectAll}\r\n          isFixedBoard={this.state.isFixedBoard}\r\n          isRootBoardTourEnabled={this.props.isRootBoardTourEnabled}\r\n          isUnlockedTourEnabled={this.props.isUnlockedTourEnabled}\r\n          //updateBoard={this.handleUpdateBoard}\r\n          onAddClick={this.handleAddClick}\r\n          onDeleteClick={this.handleDeleteClick}\r\n          onEditClick={this.handleEditClick}\r\n          onSelectAllToggle={this.handleSelectAllToggle}\r\n          onFocusTile={focusTile}\r\n          onLockClick={this.handleLockClick}\r\n          onLockNotify={this.handleLockNotify}\r\n          onScannerActive={this.handleScannerStrategyNotification}\r\n          onRequestPreviousBoard={this.onRequestPreviousBoard.bind(this)}\r\n          onRequestToRootBoard={this.props.toRootBoard}\r\n          onSelectClick={this.handleSelectClick}\r\n          onTileClick={this.handleTileClick}\r\n          onBoardTypeChange={this.handleBoardTypeChange}\r\n          editBoardTitle={this.handleEditBoardTitle}\r\n          selectedTileIds={this.state.selectedTileIds}\r\n          displaySettings={this.props.displaySettings}\r\n          navigationSettings={this.props.navigationSettings}\r\n          navHistory={this.props.navHistory}\r\n          publishBoard={this.publishBoard}\r\n          showNotification={this.props.showNotification}\r\n          emptyVoiceAlert={this.props.emptyVoiceAlert}\r\n          offlineVoiceAlert={this.props.offlineVoiceAlert}\r\n          onAddRemoveColumn={this.handleAddRemoveColumn}\r\n          onAddRemoveRow={this.handleAddRemoveRow}\r\n          onTileDrop={this.handleTileDrop}\r\n          onLayoutChange={this.handleLayoutChange}\r\n          disableTour={this.props.disableTour}\r\n        />\r\n        <Dialog\r\n          open={!!this.state.copyPublicBoard}\r\n          TransitionComponent={Transition}\r\n          keepMounted\r\n          onClose={this.handleCloseDialog}\r\n          aria-labelledby=\"dialog-copy-title\"\r\n          aria-describedby=\"dialog-copy-desc\"\r\n        >\r\n          <DialogTitle id=\"dialog-copy-board-title\">\r\n            {this.props.intl.formatMessage(messages.copyPublicBoardTitle)}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"dialog-copy-board-desc\">\r\n              {this.props.intl.formatMessage(messages.copyPublicBoardDesc)}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button onClick={this.handleCloseDialog} color=\"primary\">\r\n              {this.props.intl.formatMessage(messages.boardCopyCancel)}\r\n            </Button>\r\n            <Button\r\n              onClick={this.handleCopyRemoteBoard}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              {this.props.intl.formatMessage(messages.boardCopyAccept)}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n        <Dialog\r\n          open={this.state.blockedPrivateBoard}\r\n          TransitionComponent={Transition}\r\n          keepMounted\r\n          onClose={this.handleCloseDialog}\r\n          aria-labelledby=\"dialog-blocked-title\"\r\n          aria-describedby=\"dialog-blocked-desc\"\r\n        >\r\n          <DialogTitle id=\"dialog-blocked-board-title\">\r\n            {this.props.intl.formatMessage(messages.blockedPrivateBoardTitle)}\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <DialogContentText id=\"dialog-blocked-board-desc\">\r\n              {this.props.intl.formatMessage(messages.blockedPrivateBoardDesc)}\r\n            </DialogContentText>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={this.handleCloseDialog}\r\n              color=\"primary\"\r\n              variant=\"contained\"\r\n            >\r\n              {this.props.intl.formatMessage(messages.boardCopyAccept)}\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n\r\n        <TileEditor\r\n          editingTiles={editingTiles}\r\n          open={this.state.tileEditorOpen}\r\n          onClose={this.handleTileEditorCancel}\r\n          onEditSubmit={this.handleEditTileEditorSubmit}\r\n          onAddSubmit={this.handleAddTileEditorSubmit}\r\n          boards={this.props.boards}\r\n        />\r\n      </Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({\r\n  board,\r\n  communicator,\r\n  speech,\r\n  scanner,\r\n  app: { displaySettings, navigationSettings, userData, isConnected, liveHelp },\r\n  language: { lang }\r\n}) => {\r\n  const activeCommunicatorId = communicator.activeCommunicatorId;\r\n  const currentCommunicator = communicator.communicators.find(\r\n    communicator => communicator.id === activeCommunicatorId\r\n  );\r\n  const activeBoardId = board.activeBoardId;\r\n  const currentVoice = speech.voices.find(\r\n    v => v.voiceURI === speech.options.voiceURI\r\n  );\r\n  const emptyVoiceAlert =\r\n    speech.voices.length > 0 && speech.options.voiceURI !== EMPTY_VOICES\r\n      ? false\r\n      : true;\r\n  const offlineVoiceAlert =\r\n    !isConnected &&\r\n    speech.voices.length &&\r\n    currentVoice &&\r\n    currentVoice.voiceSource === 'cloud';\r\n  return {\r\n    communicator: currentCommunicator,\r\n    board: board.boards.find(board => board.id === activeBoardId),\r\n    boards: board.boards,\r\n    output: board.output,\r\n    scannerSettings: scanner,\r\n    navHistory: board.navHistory,\r\n    displaySettings,\r\n    navigationSettings,\r\n    userData,\r\n    emptyVoiceAlert,\r\n    lang,\r\n    offlineVoiceAlert,\r\n    isRootBoardTourEnabled: liveHelp.isRootBoardTourEnabled,\r\n    isUnlockedTourEnabled: liveHelp.isUnlockedTourEnabled\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addBoards,\r\n  changeBoard,\r\n  replaceBoard,\r\n  previousBoard,\r\n  toRootBoard,\r\n  historyRemoveBoard,\r\n  createBoard,\r\n  updateBoard,\r\n  switchBoard,\r\n  createTile,\r\n  deleteTiles,\r\n  editTiles,\r\n  focusTile,\r\n  clickSymbol,\r\n  changeOutput,\r\n  speak,\r\n  cancelSpeech,\r\n  showNotification,\r\n  hideNotification,\r\n  deactivateScanner,\r\n  upsertCommunicator,\r\n  changeCommunicator,\r\n  addBoardCommunicator,\r\n  updateApiObjects,\r\n  updateApiObjectsNoChild,\r\n  getApiObjects,\r\n  downloadImages,\r\n  disableTour\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(BoardContainer));\r\n","import {\r\n  ACTIVATE_SCANNER,\r\n  DEACTIVATE_SCANNER,\r\n  TOGGLE_SCANNER,\r\n  UPDATE_SCANNER_SETTINGS\r\n} from './ScannerProvider.constants';\r\n\r\nexport function activateScanner() {\r\n  return { type: ACTIVATE_SCANNER };\r\n}\r\n\r\nexport function deactivateScanner() {\r\n  return { type: DEACTIVATE_SCANNER };\r\n}\r\n\r\nexport function toggleScanner() {\r\n  return { type: TOGGLE_SCANNER };\r\n}\r\n\r\nexport function updateScannerSettings(payload = {}) {\r\n  return { type: UPDATE_SCANNER_SETTINGS, payload };\r\n}\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n    refreshPage: {\r\n      id: 'cboard.components.Notifications.refreshPage',\r\n      defaultMessage: 'Refresh page'\r\n    }\r\n});","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport Button from '@material-ui/core/Button';\r\nimport { NOTIFICATION_DELAY } from './Notifications.constants';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport messages from './Notifications.messages';\r\n\r\nconst propTypes = {\r\n  config: PropTypes.object.isRequired,\r\n  handleNotificationDismissal: PropTypes.func.isRequired,\r\n  message: PropTypes.string.isRequired,\r\n  open: PropTypes.bool.isRequired,\r\n  kind: PropTypes.string\r\n};\r\n\r\nfunction onRefreshPage() {\r\n  window.location.reload(true);\r\n}\r\n\r\nconst Notifications = ({\r\n  config,\r\n  handleNotificationDismissal,\r\n  message,\r\n  open,\r\n  kind\r\n}) => (\r\n  <Snackbar\r\n    {...config}\r\n    open={open}\r\n    ContentProps={{\r\n      variant: 'elevation',\r\n      'aria-describedby': 'message-id'\r\n    }}\r\n    message={<span id=\"message-id\">{message}</span>}\r\n    autoHideDuration={NOTIFICATION_DELAY}\r\n    onClose={handleNotificationDismissal}\r\n  >\r\n    {kind === 'refresh' ? (\r\n      <Alert\r\n        elevation={6}\r\n        variant=\"filled\"\r\n        onClose={handleNotificationDismissal}\r\n        severity=\"info\"\r\n        action={\r\n          <Button variant=\"outlined\" onClick={onRefreshPage}>\r\n            <FormattedMessage {...messages.refreshPage} />\r\n          </Button>\r\n        }\r\n      >\r\n        <span id=\"message-id\">{message}</span>\r\n      </Alert>\r\n    ) : null}\r\n  </Snackbar>\r\n);\r\n\r\nNotifications.propTypes = propTypes;\r\n\r\nexport default Notifications;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { hideNotification, showNotification } from './Notifications.actions';\r\nimport Notifications from './Notifications.component';\r\n\r\nclass NotificationsContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * If true, notification bar is open, used by showNotification\r\n     */\r\n    open: PropTypes.bool.isRequired,\r\n    /**\r\n     * The Message to display\r\n     */\r\n    message: PropTypes.string.isRequired,\r\n    /**\r\n     * The Kind of notification bar\r\n     */\r\n    kind: PropTypes.string,\r\n    /**\r\n     * Shows notification bar\r\n     */\r\n    showNotification: PropTypes.func.isRequired,\r\n    /**\r\n     * Hids notification bar\r\n     */\r\n    hideNotification: PropTypes.func.isRequired\r\n  };\r\n\r\n  static defaultProps = {\r\n    anchorOrigin: {\r\n      vertical: 'bottom',\r\n      horizontal: 'center'\r\n    },\r\n    autoHideDuration: 5000, // ms\r\n    open: false\r\n  };\r\n\r\n  // maintain queued notifications\r\n  // a notification is queued if already another\r\n  // notification is already displayed\r\n  // this is not part of the state beacuase\r\n  // we do not want a change in this to re-render\r\n  // our component\r\n  queuedNotifications = [];\r\n\r\n  shouldComponentUpdate(nextProps) {\r\n    // following the material design guidelines\r\n    // we can only show one notification at a time\r\n    // here we ignore updates to an already displayed\r\n    // notification and instead queue them to be shown\r\n    // after the present one transitions out\r\n    if (\r\n      this.props.open &&\r\n      nextProps.open &&\r\n      this.props.message !== nextProps.message\r\n    ) {\r\n      this.queuedNotifications.push(nextProps.message);\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  handleNotificationDismissal = (event, reason) => {\r\n    const { hideNotification } = this.props;\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    hideNotification();\r\n    this.showQueuedNotificationIfAny();\r\n  };\r\n\r\n  showQueuedNotificationIfAny = () => {\r\n    if (this.queuedNotifications.length !== 0) {\r\n      this.props.showNotification(this.queuedNotifications[0]);\r\n      this.queuedNotifications.splice(0, 1);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      open,\r\n      message,\r\n      kind,\r\n      showNotification,\r\n      hideNotification,\r\n      ...config\r\n    } = this.props;\r\n\r\n    if (message && message.length < 1) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <Notifications\r\n        config={config}\r\n        open={open}\r\n        message={message}\r\n        kind={kind}\r\n        handleNotificationDismissal={this.handleNotificationDismissal}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ notification: { message, open, kind } }) => ({\r\n  message,\r\n  open,\r\n  kind\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showNotification,\r\n  hideNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(NotificationsContainer);\r\n","import React from 'react';\r\n\r\nimport './NotFound.css';\r\n\r\nconst NotFound = () => (\r\n  <div className=\"NotFound\">\r\n    <p className=\"NotFound__codeError\">404</p>\r\n    This page doesn't exist\r\n  </div>\r\n);\r\n\r\nexport default NotFound;\r\n","import React, { PureComponent, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListSubheader from '@material-ui/core/ListSubheader';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport './Settings.css';\r\n\r\nexport class SettingsSection extends PureComponent {\r\n  static propTypes = {\r\n    settings: PropTypes.array\r\n  };\r\n\r\n  static defaultProps = {\r\n    settings: []\r\n  };\r\n\r\n  render() {\r\n    const { subheader, settings } = this.props;\r\n    const settingsLength = settings.length;\r\n\r\n    return (\r\n      <Paper className=\"Settings__section\">\r\n        <List\r\n          subheader={\r\n            <ListSubheader>\r\n              <FormattedMessage {...subheader} />\r\n            </ListSubheader>\r\n          }\r\n        >\r\n          {settings.map((item, index) => {\r\n            const listItemProps = {\r\n              button: true,\r\n              onClick: item.onClick\r\n            };\r\n\r\n            if (item.url) {\r\n              listItemProps.component = Link;\r\n              listItemProps.to = item.url;\r\n            }\r\n\r\n            return (\r\n              <Fragment key={index}>\r\n                <ListItem {...listItemProps}>\r\n                  <div\r\n                    className=\"Settings__Item__Container\"\r\n                    id={item.text.defaultMessage}\r\n                  >\r\n                    <ListItemIcon>{item.icon}</ListItemIcon>\r\n                    <ListItemText\r\n                      primary={<FormattedMessage {...item.text} />}\r\n                      secondary={item.secondary}\r\n                    />\r\n                  </div>\r\n                  {item.rightContent && (\r\n                    <ListItemSecondaryAction className=\"Settings__section--secondaryAction\">\r\n                      {item.rightContent}\r\n                    </ListItemSecondaryAction>\r\n                  )}\r\n                </ListItem>\r\n\r\n                {index !== settingsLength - 1 && <Divider variant=\"inset\" />}\r\n              </Fragment>\r\n            );\r\n          })}\r\n        </List>\r\n      </Paper>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SettingsSection;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Joyride, { STATUS } from 'react-joyride';\r\nimport messages from './Settings.messages';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport { Swiper, SwiperSlide } from 'swiper/react';\r\nimport SwiperCore, { Navigation, Pagination, Autoplay } from 'swiper/core';\r\nimport 'swiper/swiper.min.css';\r\nimport 'swiper/components/navigation/navigation.min.css';\r\nimport 'swiper/components/pagination/pagination.min.css';\r\n\r\nimport './Settings.css';\r\nimport { isCordova } from '../../cordova-util';\r\n\r\nSwiperCore.use([Navigation, Pagination, Autoplay]);\r\n\r\nconst propTypes = {\r\n  isSettingsTourEnabled: PropTypes.bool.isRequired,\r\n  disableTour: PropTypes.func.isRequired,\r\n  intl: intlShape.isRequired\r\n};\r\n\r\nconst joyRideStyles = {\r\n  options: {\r\n    arrowColor: '#eee',\r\n    backgroundColor: '#eee',\r\n    primaryColor: '#aa00ff',\r\n    textColor: '#333',\r\n    width: 500,\r\n    zIndex: 10000\r\n  },\r\n  tooltipContent: {\r\n    padding: '5px 5px'\r\n  }\r\n};\r\n\r\nconst imgFolderPath = '../../../images/tour/settingsTour/';\r\nlet settingsTourImages = {\r\n  display: [\r\n    {\r\n      src: imgFolderPath + 'elementsSize.png',\r\n      description: messages.uiSizeDescrip,\r\n      title: messages.uiSizeTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'fontSize.png',\r\n      description: messages.fontSizeDescrip,\r\n      title: messages.fontSizeTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'hideTheOutputBarOpt.png',\r\n      description: messages.hideOutputBarDescrip,\r\n      title: messages.hideOutputBarTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'labelPosition.png',\r\n      description: messages.labelPositionDescrip,\r\n      title: messages.labelPositionTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'enableDarkThemeOpt.png',\r\n      description: messages.enableDarkThemeDescrip,\r\n      title: messages.enableDarkThemeTitle\r\n    }\r\n  ],\r\n  scanning: [\r\n    {\r\n      src: imgFolderPath + 'enableScanning2.gif',\r\n      description: messages.enableScanningDescrip,\r\n      title: messages.enableScanningTitle\r\n    }\r\n  ],\r\n  navigation: [\r\n    {\r\n      src: imgFolderPath + 'enableContextAwareBackButton.png',\r\n      description: messages.enableContextAwareBackButtonDescrip,\r\n      title: messages.enableContextAwareBackButtonTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'showSharePhraseButton.png',\r\n      description: messages.showSharePhraseButtonDescrip,\r\n      title: messages.showSharePhraseButtonTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'removeSymbolsFromTheOutputBar.png',\r\n      description: messages.removeSymbolsFromTheOutputBarDescrip,\r\n      title: messages.removeSymbolsFromTheOutputBarTitle\r\n    },\r\n    {\r\n      src: imgFolderPath + 'folderVocalization.png',\r\n      description: messages.folderVocalizationDescrip,\r\n      title: messages.folderVocalizationTitle\r\n    }\r\n  ]\r\n};\r\n\r\nfunction SettingsTour({ intl, disableTour, isSettingsTourEnabled }) {\r\n  const [tooltipSwiperText, setTooltipSwiperText] = useState({\r\n    title: '',\r\n    description: ''\r\n  });\r\n\r\n  const handleOnSlideChange = (sectionEnabled, index) => {\r\n    for (const section in settingsTourImages) {\r\n      if (section === sectionEnabled) {\r\n        setTooltipSwiperText({\r\n          title: (\r\n            <FormattedMessage\r\n              {...settingsTourImages[sectionEnabled][index].title}\r\n            />\r\n          ),\r\n          description: (\r\n            <FormattedMessage\r\n              {...settingsTourImages[sectionEnabled][index].description}\r\n            />\r\n          )\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  let settingsTourSteps = [\r\n    {\r\n      target: 'body',\r\n      placement: 'center',\r\n      hideCloseButton: true,\r\n      content: (\r\n        <div>\r\n          <h2>\r\n            <FormattedMessage {...messages.walkthroughSettings} />\r\n          </h2>\r\n          <h5>\r\n            <FormattedMessage {...messages.walkthroughSettingsDesc} />\r\n          </h5>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Language',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughLanguage} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Speech',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughSpeech} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Export',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughExport} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Import',\r\n      content: (\r\n        <div>\r\n          <FormattedMessage {...messages.walkthroughImport} />\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Display',\r\n      content: (\r\n        <div className=\"Settings__Tour__Step__Swiper__Container\">\r\n          <h2 className=\"Settings_Tour_Tooltip_Swiper_Title\">\r\n            {tooltipSwiperText.title}\r\n          </h2>\r\n          <Swiper\r\n            navigation={true}\r\n            pagination={true}\r\n            autoplay={{\r\n              delay: 4000,\r\n              disableOnInteraction: true\r\n            }}\r\n            className=\"mySwiper\"\r\n            onSlideChange={swiper => {\r\n              handleOnSlideChange('display', swiper.realIndex);\r\n            }}\r\n            onInit={swiper => {\r\n              handleOnSlideChange('display', swiper.realIndex);\r\n            }}\r\n          >\r\n            {settingsTourImages.display.map((imgData, inx) => (\r\n              <SwiperSlide key={`slide-${inx}`}>\r\n                <div className=\"swiperSlideContentContainer\">\r\n                  <img\r\n                    src={imgData.src}\r\n                    alt={intl.formatMessage(imgData.title)}\r\n                    key={intl.formatMessage(imgData.title)}\r\n                  />\r\n                </div>\r\n              </SwiperSlide>\r\n            ))}\r\n          </Swiper>\r\n          <div>{tooltipSwiperText.description}</div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Scanning',\r\n      content: (\r\n        <div>\r\n          <h2 className=\"Settings_Tour_Tooltip_Swiper_Title\">\r\n            {tooltipSwiperText.title}\r\n          </h2>\r\n          <Swiper\r\n            watchOverflow={true}\r\n            onSlideChange={swiper => {\r\n              handleOnSlideChange('scanning', swiper.realIndex);\r\n            }}\r\n            onInit={swiper => {\r\n              handleOnSlideChange('scanning', swiper.realIndex);\r\n            }}\r\n          >\r\n            {settingsTourImages.scanning.map((imgData, inx) => (\r\n              <SwiperSlide key={intl.formatMessage(imgData.title)}>\r\n                <div className=\"swiperSlideContentContainer Settings__Tour__Scanning__Img\">\r\n                  <img\r\n                    style={{ height: '100% ' }}\r\n                    src={imgData.src}\r\n                    alt={intl.formatMessage(imgData.title)}\r\n                    key={intl.formatMessage(imgData.title)}\r\n                  />\r\n                </div>\r\n              </SwiperSlide>\r\n            ))}\r\n          </Swiper>\r\n          <div className=\"Settings_Tour_Description_Scanning\">\r\n            {tooltipSwiperText.description}\r\n          </div>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      hideCloseButton: true,\r\n      target: '#Navigation',\r\n      content: (\r\n        <div className=\"Settings__Tour__Step__Swiper__Container\">\r\n          <h2 className=\"Settings_Tour_Tooltip_Swiper_Title\">\r\n            {tooltipSwiperText.title}\r\n          </h2>\r\n          <Swiper\r\n            navigation={true}\r\n            pagination={true}\r\n            autoplay={{\r\n              delay: 2500,\r\n              disableOnInteraction: true\r\n            }}\r\n            className=\"mySwiper\"\r\n            onSlideChange={swiper => {\r\n              handleOnSlideChange('navigation', swiper.realIndex);\r\n            }}\r\n            onInit={swiper => {\r\n              handleOnSlideChange('navigation', swiper.realIndex);\r\n            }}\r\n          >\r\n            {settingsTourImages.navigation.map((imgData, inx) => (\r\n              <SwiperSlide key={intl.formatMessage(imgData.title)}>\r\n                <div className=\"swiperSlideContentContainer\">\r\n                  <img\r\n                    src={imgData.src}\r\n                    alt={intl.formatMessage(imgData.title)}\r\n                    key={intl.formatMessage(imgData.title)}\r\n                  />\r\n                </div>\r\n              </SwiperSlide>\r\n            ))}\r\n          </Swiper>\r\n          <div>{tooltipSwiperText.description}</div>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n\r\n  const formatImgForCordova = () => {\r\n    for (const section in settingsTourImages) {\r\n      settingsTourImages[section].forEach((img, indx) => {\r\n        const src = img.src;\r\n        const searchTerm = '/images';\r\n        const indexOfFirst = src.indexOf(searchTerm);\r\n        const tableOfContents = src.substring(0, indexOfFirst - 1);\r\n        const srcCva = src.replace(tableOfContents, '');\r\n        console.log(srcCva);\r\n        settingsTourImages[section][indx].src = srcCva;\r\n      });\r\n    }\r\n  };\r\n\r\n  if (isCordova()) formatImgForCordova();\r\n\r\n  return (\r\n    <div>\r\n      <Joyride\r\n        callback={data => {\r\n          const { status } = data;\r\n          if ([STATUS.FINISHED, STATUS.SKIPPED].includes(status)) {\r\n            disableTour({ isSettingsTourEnabled: false });\r\n          }\r\n        }}\r\n        steps={settingsTourSteps}\r\n        continuous={true}\r\n        showSkipButton={true}\r\n        //disableScrollParentFix={true}\r\n        showProgress={false}\r\n        disableOverlayClose={true}\r\n        run={isSettingsTourEnabled}\r\n        scrollOffset={500}\r\n        spotlightPadding={4}\r\n        styles={joyRideStyles}\r\n        scrollDuration={100}\r\n        disableBeacon={true}\r\n        locale={{\r\n          last: intl.formatMessage(messages.walkthroughEndTour),\r\n          skip: intl.formatMessage(messages.walkthroughCloseTour),\r\n          next: intl.formatMessage(messages.walkthroughNext),\r\n          back: intl.formatMessage(messages.walkthroughBack)\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\nSettingsTour.propTypes = propTypes;\r\n\r\nexport default SettingsTour;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport LanguageIcon from '@material-ui/icons/Language';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined';\r\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\r\nimport CloudUploadIcon from '@material-ui/icons/CloudUpload';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport ScanningIcon from '@material-ui/icons/CenterFocusStrong';\r\nimport NavigationIcon from '@material-ui/icons/ChevronRight';\r\nimport FeedbackIcon from '@material-ui/icons/Feedback';\r\nimport PersonIcon from '@material-ui/icons/Person';\r\nimport MonetizationOnIcon from '@material-ui/icons/MonetizationOn';\r\nimport HelpIcon from '@material-ui/icons/Help';\r\nimport IconButton from '../UI/IconButton';\r\nimport LiveHelpIcon from '@material-ui/icons/LiveHelp';\r\n\r\nimport messages from './Settings.messages';\r\nimport SettingsSection from './SettingsSection.component';\r\nimport FullScreenDialog from '../UI/FullScreenDialog';\r\nimport UserIcon from '../UI/UserIcon';\r\nimport SettingsTour from './SettingsTour.component';\r\n\r\nimport { isAndroid } from '../../cordova-util';\r\n\r\nimport './Settings.css';\r\n\r\nconst propTypes = {\r\n  isLogged: PropTypes.bool.isRequired,\r\n  logout: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  intl: intlShape.isRequired\r\n};\r\n\r\nexport class Settings extends PureComponent {\r\n  getSettingsSections() {\r\n    const { isLogged, logout, user } = this.props;\r\n\r\n    function handleLogOutClick() {\r\n      if (isAndroid()) {\r\n        window.plugins.googleplus.disconnect(function(msg) {\r\n          console.log('disconnect msg' + msg);\r\n        });\r\n      }\r\n      logout();\r\n    }\r\n\r\n    return [\r\n      {\r\n        subheader: messages.people,\r\n        settings: [\r\n          {\r\n            icon: (\r\n              <div className=\"Settings__UserIcon__Container\">\r\n                <UserIcon link={false} accountIcon={PersonIcon} />\r\n              </div>\r\n            ),\r\n            secondary: isLogged ? user.name : null,\r\n            text: isLogged ? messages.username : messages.guest,\r\n            url: '/settings/people',\r\n            rightContent: isLogged ? (\r\n              <Button\r\n                color=\"primary\"\r\n                onClick={handleLogOutClick}\r\n                variant=\"outlined\"\r\n              >\r\n                <FormattedMessage {...messages.logout} />\r\n              </Button>\r\n            ) : (\r\n              <Button\r\n                color=\"primary\"\r\n                variant=\"outlined\"\r\n                component={Link}\r\n                to=\"/login-signup\"\r\n              >\r\n                <FormattedMessage {...messages.loginSignup} />\r\n              </Button>\r\n            )\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        subheader: messages.language,\r\n        settings: [\r\n          {\r\n            icon: <LanguageIcon />,\r\n            text: messages.language,\r\n            url: '/settings/language'\r\n          },\r\n          {\r\n            icon: <RecordVoiceOverIcon />,\r\n            text: messages.speech,\r\n            url: '/settings/speech'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        subheader: messages.system,\r\n        settings: [\r\n          {\r\n            icon: <CloudUploadIcon />,\r\n            text: messages.export,\r\n            url: '/settings/export'\r\n          },\r\n          {\r\n            icon: <CloudDownloadIcon />,\r\n            text: messages.import,\r\n            url: '/settings/import'\r\n          },\r\n          {\r\n            icon: <VisibilityIcon />,\r\n            text: messages.display,\r\n            url: '/settings/display'\r\n          },\r\n          {\r\n            icon: <ScanningIcon />,\r\n            text: messages.scanning,\r\n            url: '/settings/scanning'\r\n          },\r\n          {\r\n            icon: <NavigationIcon />,\r\n            text: messages.navigation,\r\n            url: '/settings/navigation'\r\n          }\r\n        ]\r\n      },\r\n      {\r\n        subheader: messages.help,\r\n        settings: [\r\n          {\r\n            icon: <HelpIcon />,\r\n            text: messages.userHelp,\r\n            url: '/settings/help'\r\n          },\r\n          {\r\n            icon: <InfoOutlinedIcon />,\r\n            text: messages.about,\r\n            url: '/settings/about'\r\n          },\r\n          {\r\n            icon: <MonetizationOnIcon />,\r\n            text: messages.donate,\r\n            onClick: this.handleDonateClick\r\n          },\r\n          {\r\n            icon: <FeedbackIcon />,\r\n            text: messages.feedback,\r\n            onClick: this.handleFeedbackClick\r\n          }\r\n        ]\r\n      }\r\n    ];\r\n  }\r\n\r\n  handleFeedbackClick = () => {\r\n    window.location.href = 'mailto:support@cboard.io?subject=Cboard feedback';\r\n  };\r\n  handleDonateClick = () => {\r\n    window.open('https://opencollective.com/cboard#backer', '_blank');\r\n  };\r\n\r\n  handleGoBack = () => {\r\n    const { history } = this.props;\r\n    history.replace('/');\r\n  };\r\n\r\n  enableTour = () => {\r\n    const { disableTour } = this.props;\r\n    disableTour({ isSettingsTourEnabled: true });\r\n  };\r\n\r\n  render() {\r\n    const { intl, disableTour, isSettingsTourEnabled, location } = this.props;\r\n    const isSettingsLocation = location.pathname === '/settings';\r\n    return (\r\n      <FullScreenDialog\r\n        className=\"Settings\"\r\n        open\r\n        title={<FormattedMessage {...messages.settings} />}\r\n        onClose={this.handleGoBack}\r\n        buttons={\r\n          isSettingsLocation &&\r\n          !isSettingsTourEnabled && (\r\n            <div className=\"Settings_EnableTour_Button\">\r\n              <IconButton\r\n                label={intl.formatMessage(messages.enableTour)}\r\n                onClick={this.enableTour} //Enable tour\r\n              >\r\n                <LiveHelpIcon />\r\n              </IconButton>\r\n            </div>\r\n          )\r\n        }\r\n      >\r\n        {this.getSettingsSections().map(({ subheader, settings }, index) => (\r\n          <SettingsSection\r\n            subheader={subheader}\r\n            settings={settings}\r\n            key={index}\r\n          />\r\n        ))}\r\n        {isSettingsLocation && isSettingsTourEnabled && (\r\n          <SettingsTour\r\n            intl={intl}\r\n            disableTour={disableTour}\r\n            isSettingsTourEnabled={isSettingsTourEnabled}\r\n          />\r\n        )}\r\n      </FullScreenDialog>\r\n    );\r\n  }\r\n}\r\n\r\nSettings.propTypes = propTypes;\r\n\r\nexport default Settings;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { PropTypes } from 'prop-types';\r\n\r\nimport SettingsComponent from './Settings.component';\r\nimport { logout } from '../Account/Login/Login.actions';\r\nimport { getUser, isLogged } from '../App/App.selectors';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { disableTour } from '../../components/App/App.actions';\r\n\r\nexport class SettingsContainer extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    isLogged: PropTypes.bool.isRequired,\r\n    user: PropTypes.object,\r\n    logout: PropTypes.func.isRequired\r\n  };\r\n\r\n  render() {\r\n    return <SettingsComponent {...this.props} />;\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isLogged: isLogged(state),\r\n  user: getUser(state),\r\n  isSettingsTourEnabled: state.app.liveHelp.isSettingsTourEnabled\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  disableTour\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(SettingsContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  people: {\r\n    id: 'cboard.components.Settings.People.people',\r\n    defaultMessage: 'People'\r\n  },\r\n  name: {\r\n    id: 'cboard.components.Settings.People.name',\r\n    defaultMessage: 'Name'\r\n  },\r\n  nameSecondary: {\r\n    id: 'cboard.components.Settings.People.nameSecondary',\r\n    defaultMessage: 'Update your user name'\r\n  },\r\n  email: {\r\n    id: 'cboard.components.Settings.People.email',\r\n    defaultMessage: 'Email'\r\n  },\r\n  emailSecondary: {\r\n    id: 'cboard.components.Settings.People.emailSecondary',\r\n    defaultMessage: 'Update your user email'\r\n  },\r\n  language: {\r\n    id: 'cboard.components.Settings.People.language',\r\n    defaultMessage: 'Language'\r\n  },\r\n  languageSecondary: {\r\n    id: 'cboard.components.Settings.People.languageSecondary',\r\n    defaultMessage: 'Let us know what is your language'\r\n  },\r\n  birthdate: {\r\n    id: 'cboard.components.Settings.People.birthdate',\r\n    defaultMessage: 'Birth Date'\r\n  },\r\n  birthdateSecondary: {\r\n    id: 'cboard.components.Settings.People.birthdateSecondary',\r\n    defaultMessage: 'Update your birth date'\r\n  },\r\n  logout: {\r\n    id: 'cboard.components.Settings.People.logout',\r\n    defaultMessage: 'Logout'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport { Link } from 'react-router-dom';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Button from '@material-ui/core/Button';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './People.messages';\r\nimport UserIcon from '../../UI/UserIcon';\r\nimport '../Settings.css';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func,\r\n  /**\r\n   * Callback fired when clicking the logout button\r\n   */\r\n  logout: PropTypes.func.isRequired,\r\n  /**\r\n   * flag for user\r\n   */\r\n  isLogged: PropTypes.bool.isRequired,\r\n  /**\r\n   * Name of user\r\n   */\r\n  name: PropTypes.string.isRequired,\r\n  /**\r\n   * User email\r\n   */\r\n  email: PropTypes.string.isRequired,\r\n  /**\r\n   * User birthdate\r\n   */\r\n  birthdate: PropTypes.string.isRequired\r\n};\r\n\r\nconst defaultProps = {\r\n  name: '',\r\n  email: '',\r\n  birthdate: ''\r\n};\r\n\r\nconst People = ({\r\n  onClose,\r\n  isLogged,\r\n  logout,\r\n  name,\r\n  email,\r\n  birthdate,\r\n  onChangePeople,\r\n  onSubmitPeople\r\n}) => {\r\n  return (\r\n    <div className=\"People\">\r\n      <FullScreenDialog\r\n        open\r\n        title={<FormattedMessage {...messages.people} />}\r\n        onClose={onClose}\r\n        onSubmit={onSubmitPeople}\r\n        disableSubmit={!isLogged}\r\n      >\r\n        <Paper>\r\n          <List>\r\n            <ListItem>\r\n              <div className=\"Settings__UserIcon__Container\">\r\n                <UserIcon />\r\n              </div>\r\n              <ListItemText primary={name} />\r\n              <ListItemSecondaryAction className=\"Settings--secondaryAction\">\r\n                <Button\r\n                  disabled={!isLogged}\r\n                  variant=\"outlined\"\r\n                  color=\"primary\"\r\n                  onClick={logout}\r\n                  component={Link}\r\n                  to=\"/\"\r\n                >\r\n                  <FormattedMessage {...messages.logout} />\r\n                </Button>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemText\r\n                primary={<FormattedMessage {...messages.name} />}\r\n                secondary={<FormattedMessage {...messages.nameSecondary} />}\r\n              />\r\n              <ListItemSecondaryAction className=\"Settings--secondaryAction\">\r\n                <TextField\r\n                  disabled={!isLogged}\r\n                  id=\"user-name\"\r\n                  label={<FormattedMessage {...messages.name} />}\r\n                  value={name}\r\n                  margin=\"normal\"\r\n                  onChange={onChangePeople('name')}\r\n                />\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemText\r\n                primary={<FormattedMessage {...messages.email} />}\r\n                secondary={<FormattedMessage {...messages.emailSecondary} />}\r\n              />\r\n              <ListItemSecondaryAction className=\"Settings--secondaryAction\">\r\n                <TextField\r\n                  className=\"Settings--secondaryAction--textField\"\r\n                  disabled={true} // Replace with `{!isLogged}` untill fix issue #140 on cboard-api\r\n                  id=\"user-email\"\r\n                  label={<FormattedMessage {...messages.email} />}\r\n                  value={email}\r\n                  margin=\"normal\"\r\n                  onChange={onChangePeople('email')}\r\n                />\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <ListItem>\r\n              <ListItemText\r\n                primary={<FormattedMessage {...messages.birthdate} />}\r\n                secondary={\r\n                  <FormattedMessage {...messages.birthdateSecondary} />\r\n                }\r\n              />\r\n              <ListItemSecondaryAction className=\"Settings--secondaryAction\">\r\n                <TextField\r\n                  className=\"Settings--secondaryAction--textField\"\r\n                  disabled={!isLogged}\r\n                  id=\"user-birthdate\"\r\n                  label={<FormattedMessage {...messages.birthdate} />}\r\n                  type=\"date\"\r\n                  value={birthdate}\r\n                  InputLabelProps={{\r\n                    shrink: true\r\n                  }}\r\n                  onChange={onChangePeople('birthdate')}\r\n                />\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          </List>\r\n        </Paper>\r\n      </FullScreenDialog>\r\n    </div>\r\n  );\r\n};\r\n\r\nPeople.propTypes = propTypes;\r\nPeople.defaultProps = defaultProps;\r\n\r\nexport default People;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport { logout } from '../../Account/Login/Login.actions';\r\nimport { updateUserData } from '../../App/App.actions';\r\nimport People from './People.component';\r\nimport { getUser, isLogged } from '../../App/App.selectors';\r\nimport API from '../../../api';\r\n\r\nimport { isAndroid } from '../../../cordova-util';\r\n\r\nexport class PeopleContainer extends PureComponent {\r\n  static propTypes = {\r\n    history: PropTypes.object.isRequired\r\n  };\r\n\r\n  state = {\r\n    name: this.props.user.name,\r\n    email: this.props.user.email,\r\n    birthdate: this.props.user.birthdate\r\n  };\r\n\r\n  handleChange = name => event => {\r\n    this.setState({\r\n      ...this.state,\r\n      [name]: event.target.value\r\n    });\r\n  };\r\n\r\n  handleSubmit = async () => {\r\n    try {\r\n      await API.updateUser({\r\n        id: this.props.user.id,\r\n        name: this.state.name,\r\n        email: this.state.email,\r\n        birthdate: this.state.birthdate\r\n      });\r\n      this.props.updateUserData({\r\n        ...this.props.user,\r\n        name: this.state.name,\r\n        email: this.state.email,\r\n        birthdate: this.state.birthdate\r\n      });\r\n    } catch (e) {\r\n    } finally {\r\n    }\r\n  };\r\n\r\n  handleLogout = () => {\r\n    if (isAndroid()) {\r\n      window.plugins.googleplus.disconnect(function(msg) {\r\n        console.log('disconnect msg' + msg);\r\n      });\r\n    }\r\n    this.props.logout();\r\n  };\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n\r\n    return (\r\n      <People\r\n        onClose={history.goBack}\r\n        isLogged={this.props.isLogged}\r\n        logout={this.handleLogout}\r\n        name={this.state.name}\r\n        email={this.state.email}\r\n        birthdate={this.state.birthdate}\r\n        onChangePeople={this.handleChange}\r\n        onSubmitPeople={this.handleSubmit}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isLogged: isLogged(state),\r\n  user: getUser(state)\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout: logout,\r\n  updateUserData: updateUserData\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(PeopleContainer);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  language: {\r\n    id: 'cboard.components.Settings.Language.language',\r\n    defaultMessage: 'Language'\r\n  },\r\n  moreLanguages: {\r\n    id: 'cboard.components.Settings.Language.moreLanguages',\r\n    defaultMessage: 'More Languages'\r\n  },\r\n  close: {\r\n    id: 'cboard.components.Settings.Language.close',\r\n    defaultMessage: 'Close'\r\n  },\r\n  ar: {\r\n    id: 'cboard.components.Settings.Language.arabic',\r\n    defaultMessage: 'Arabic'\r\n  },\r\n  be: {\r\n    id: 'cboard.components.Settings.Language.belarusian',\r\n    defaultMessage: 'Belarusian'\r\n  },\r\n  bg: {\r\n    id: 'cboard.components.Settings.Language.bulgarian',\r\n    defaultMessage: 'Bulgarian'\r\n  },\r\n  bn: {\r\n    id: 'cboard.components.Settings.Language.bengali',\r\n    defaultMessage: 'Bengali'\r\n  },\r\n  cs: {\r\n    id: 'cboard.components.Settings.Language.czech',\r\n    defaultMessage: 'Czech'\r\n  },\r\n  da: {\r\n    id: 'cboard.components.Settings.Language.danish',\r\n    defaultMessage: 'Danish'\r\n  },\r\n  de: {\r\n    id: 'cboard.components.Settings.Language.german',\r\n    defaultMessage: 'German'\r\n  },\r\n  el: {\r\n    id: 'cboard.components.Settings.Language.greek',\r\n    defaultMessage: 'Greek'\r\n  },\r\n  en: {\r\n    id: 'cboard.components.Settings.Language.english',\r\n    defaultMessage: 'English'\r\n  },\r\n  es: {\r\n    id: 'cboard.components.Settings.Language.spanish',\r\n    defaultMessage: 'Spanish'\r\n  },\r\n  fi: {\r\n    id: 'cboard.components.Settings.Language.finnish',\r\n    defaultMessage: 'Finnish'\r\n  },\r\n  fr: {\r\n    id: 'cboard.components.Settings.Language.french',\r\n    defaultMessage: 'French'\r\n  },\r\n  he: {\r\n    id: 'cboard.components.Settings.Language.hebrew',\r\n    defaultMessage: 'Hebrew'\r\n  },\r\n  hi: {\r\n    id: 'cboard.components.Settings.Language.hindi',\r\n    defaultMessage: 'Hindi'\r\n  },\r\n  hr: {\r\n    id: 'cboard.components.Settings.Language.croatian',\r\n    defaultMessage: 'Croatian'\r\n  },\r\n  hu: {\r\n    id: 'cboard.components.Settings.Language.hungarian',\r\n    defaultMessage: 'Hungarian'\r\n  },\r\n  id: {\r\n    id: 'cboard.components.Settings.Language.indonesian',\r\n    defaultMessage: 'Indonesian'\r\n  },\r\n  it: {\r\n    id: 'cboard.components.Settings.Language.italian',\r\n    defaultMessage: 'Italian'\r\n  },\r\n  ja: {\r\n    id: 'cboard.components.Settings.Language.japanese',\r\n    defaultMessage: 'Japanese'\r\n  },\r\n  km: {\r\n    id: 'cboard.components.Settings.Language.khmer',\r\n    defaultMessage: 'Khmer'\r\n  },\r\n  ko: {\r\n    id: 'cboard.components.Settings.Language.korean',\r\n    defaultMessage: 'Korean'\r\n  },\r\n  me: {\r\n    id: 'cboard.components.Settings.Language.montenegrin',\r\n    defaultMessage: 'Montenegrin'\r\n  },\r\n  mk: {\r\n    id: 'cboard.components.Settings.Language.macedonian',\r\n    defaultMessage: 'Macedonian'\r\n  },\r\n  ne: {\r\n    id: 'cboard.components.Settings.Language.nepali',\r\n    defaultMessage: 'Nepali'\r\n  },\r\n  nl: {\r\n    id: 'cboard.components.Settings.Language.dutch',\r\n    defaultMessage: 'Dutch'\r\n  },\r\n  no: {\r\n    id: 'cboard.components.Settings.Language.norwegian',\r\n    defaultMessage: 'Norwegian'\r\n  },\r\n  pl: {\r\n    id: 'cboard.components.Settings.Language.polish',\r\n    defaultMessage: 'Polish'\r\n  },\r\n  pt: {\r\n    id: 'cboard.components.Settings.Language.portuguese',\r\n    defaultMessage: 'Portuguese'\r\n  },\r\n  ro: {\r\n    id: 'cboard.components.Settings.Language.romanian',\r\n    defaultMessage: 'Romanian'\r\n  },\r\n  ru: {\r\n    id: 'cboard.components.Settings.Language.russian',\r\n    defaultMessage: 'Russian'\r\n  },\r\n  si: {\r\n    id: 'cboard.components.Settings.Language.sinhala',\r\n    defaultMessage: 'Sinhala'\r\n  },\r\n  sk: {\r\n    id: 'cboard.components.Settings.Language.slovak',\r\n    defaultMessage: 'Slovak'\r\n  },\r\n  sr: {\r\n    id: 'cboard.components.Settings.Language.serbian',\r\n    defaultMessage: 'Serbian'\r\n  },\r\n  sv: {\r\n    id: 'cboard.components.Settings.Language.swedish',\r\n    defaultMessage: 'Swedish'\r\n  },\r\n  th: {\r\n    id: 'cboard.components.Settings.Language.thai',\r\n    defaultMessage: 'Thai'\r\n  },\r\n  tr: {\r\n    id: 'cboard.components.Settings.Language.turkish',\r\n    defaultMessage: 'Turkish'\r\n  },\r\n  tu: {\r\n    id: 'cboard.components.Settings.Language.tetum',\r\n    defaultMessage: 'Tetum'\r\n  },\r\n  uk: {\r\n    id: 'cboard.components.Settings.Language.ukrainian',\r\n    defaultMessage: 'Ukrainian'\r\n  },\r\n  vi: {\r\n    id: 'cboard.components.Settings.Language.vietnamese',\r\n    defaultMessage: 'Vietnamese'\r\n  },\r\n  zh: {\r\n    id: 'cboard.components.Settings.Language.chinese',\r\n    defaultMessage: 'Chinese'\r\n  },\r\n  ttsEngines: {\r\n    id: 'cboard.components.Settings.Language.ttsEngines',\r\n    defaultMessage: 'Text to speech engine'\r\n  },\r\n  ttsEngineError: {\r\n    id: 'cboard.components.Settings.Language.ttsEngineError',\r\n    defaultMessage:\r\n      'WARNING: This text to speech engine does not include any language supported by Cboard!. Feel free to contact us and let us know.'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage, intlShape, injectIntl } from 'react-intl';\r\nimport ISO6391 from 'iso-639-1';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport CheckIcon from '@material-ui/icons/Check';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport { Button } from '@material-ui/core';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport Chip from '@material-ui/core/Chip';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Language.messages';\r\nimport { isAndroid, isCordova } from '../../../cordova-util';\r\n\r\nimport './../Settings.css';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nclass Language extends React.Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    /**\r\n     * Languages to display\r\n     */\r\n    langs: PropTypes.arrayOf(PropTypes.string),\r\n    /**\r\n     * Selected language\r\n     */\r\n    selectedLang: PropTypes.string,\r\n    /**\r\n     * Callback fired when clicking on a language item\r\n     */\r\n    onLangClick: PropTypes.func.isRequired,\r\n    /**\r\n     * Callback fired when clicking the back button\r\n     */\r\n    onClose: PropTypes.func.isRequired,\r\n    /**\r\n     * Callback fired when submitting selected language\r\n     */\r\n    onSubmitLang: PropTypes.func.isRequired,\r\n    language: PropTypes.object.isRequired,\r\n    /**\r\n     * TTS engines list\r\n     */\r\n    ttsEngines: PropTypes.arrayOf(PropTypes.object),\r\n    /**\r\n     * TTS default engine\r\n     */\r\n    ttsEngine: PropTypes.object,\r\n    onSetTtsEngine: PropTypes.func.isRequired\r\n  };\r\n\r\n  static defaultProps = {\r\n    langs: [],\r\n    localLangs: [],\r\n    selectedLang: ''\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      moreLangDialog: false,\r\n      loading: false,\r\n      ttsEngine: props.ttsEngine.name,\r\n      openTtsEngineError: false,\r\n      markdown: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let markdownPath = '';\r\n    try {\r\n      markdownPath = require(`../../../translations/moreLanguages/${\r\n        this.props.language.lang\r\n      }.md`);\r\n    } catch (err) {\r\n      markdownPath = require(`../../../translations/moreLanguages/en-US.md`);\r\n    } finally {\r\n      if (isCordova()) {\r\n        const req = new XMLHttpRequest();\r\n        req.onload = () => {\r\n          const text = req.responseText;\r\n          const utext = this.formatTextForCordova(text);\r\n          this.setState({ markdown: utext });\r\n        };\r\n        req.open('GET', markdownPath);\r\n        req.send();\r\n      } else {\r\n        fetch(markdownPath)\r\n          .then(response => {\r\n            return response.text();\r\n          })\r\n          .then(text => {\r\n            this.setState({ markdown: text });\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  formatTextForCordova(text) {\r\n    //remove table of content\r\n    const searchTerm = '##';\r\n    const indexOfFirst = text.indexOf(searchTerm);\r\n    const tableOfContents = text.substring(\r\n      indexOfFirst,\r\n      text.indexOf(searchTerm, indexOfFirst + 1)\r\n    );\r\n    const textNoTableOfContents = text.replace(tableOfContents, '');\r\n    //update path for images\r\n    const searchRegExp = /\\/images/gi;\r\n    const replaceWith = './images';\r\n    return textNoTableOfContents.replace(searchRegExp, replaceWith);\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.ttsEngine.name !== prevProps.ttsEngine.name) {\r\n      this.setState({\r\n        ttsEngine: this.props.ttsEngine.name,\r\n        loading: false\r\n      });\r\n    }\r\n  }\r\n\r\n  async handleTtsEngineChange(event) {\r\n    const { onSetTtsEngine } = this.props;\r\n    this.setState({\r\n      ttsEngine: event.target.value,\r\n      loading: true\r\n    });\r\n    try {\r\n      await onSetTtsEngine(event.target.value);\r\n    } catch (err) {\r\n      this.setState({\r\n        ttsEngine: this.props.ttsEngine.name,\r\n        loading: false,\r\n        openTtsEngineError: true\r\n      });\r\n    }\r\n  }\r\n\r\n  handleMoreLangClick() {\r\n    this.setState({ moreLangDialog: true });\r\n  }\r\n\r\n  handleMoreLangClose() {\r\n    this.setState({ moreLangDialog: false });\r\n  }\r\n\r\n  async handleTtsErrorDialogClose() {\r\n    const { onSetTtsEngine } = this.props;\r\n    this.setState({ openTtsEngineError: false });\r\n    onSetTtsEngine(this.props.ttsEngine.name);\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      langs,\r\n      localLangs,\r\n      intl,\r\n      ttsEngines,\r\n      selectedLang,\r\n      onLangClick,\r\n      onClose,\r\n      onSubmitLang\r\n    } = this.props;\r\n    const langItems = langs.map((lang, index, array) => {\r\n      const locale = lang.slice(0, 2).toLowerCase();\r\n      const showLangCode =\r\n        langs.filter(langCode => langCode.slice(0, 2).toLowerCase() === locale)\r\n          .length > 1;\r\n\r\n      const langCode = showLangCode ? `(${lang})` : '';\r\n      let nativeName = `${ISO6391.getNativeName(locale)} ${langCode}`;\r\n      //handle custom native name\r\n      if (lang === 'sr-ME') {\r\n        nativeName = 'Crnogorski jezik';\r\n      } else if (lang === 'sr-SP') {\r\n        nativeName = `Српски језик ${langCode}`;\r\n      } else if (lang === 'sr-RS') {\r\n        nativeName = `Srpski jezik ${langCode}`;\r\n      } else if (lang === 'pt-TL') {\r\n        nativeName = `Tetum`;\r\n      }\r\n\r\n      return (\r\n        <ListItem\r\n          id=\"language-list-item\"\r\n          button\r\n          divider={index !== array.length - 1}\r\n          onClick={() => onLangClick(lang)}\r\n          key={index}\r\n        >\r\n          <div className=\"Language__LangMenuItemText\">\r\n            <ListItemText\r\n              primary={nativeName}\r\n              secondary={<FormattedMessage {...messages[locale]} />}\r\n            />\r\n            {!localLangs.includes(lang) && (\r\n              <Chip label=\"online\" size=\"small\" color=\"secondary\" />\r\n            )}\r\n          </div>\r\n          {selectedLang === lang && (\r\n            <CheckIcon className=\"Language__LangMenuItemCheck\" />\r\n          )}\r\n        </ListItem>\r\n      );\r\n    });\r\n    return (\r\n      <FullScreenDialog\r\n        open\r\n        title={<FormattedMessage {...messages.language} />}\r\n        onClose={onClose}\r\n        onSubmit={onSubmitLang}\r\n      >\r\n        <Paper>\r\n          {isAndroid() && (\r\n            <React.Fragment>\r\n              <div className=\"Settings__Language__TTSEnginesContainer\">\r\n                <FormControl\r\n                  className=\"Settings__Language__TTSEnginesContainer__Select\"\r\n                  variant=\"standard\"\r\n                  error={this.state.ttsEngineError}\r\n                  disabled={this.state.loading}\r\n                >\r\n                  <InputLabel id=\"tts-engines-select-label\">\r\n                    <FormattedMessage {...messages.ttsEngines} />\r\n                  </InputLabel>\r\n                  <Select\r\n                    labelId=\"tts-engines-select-label\"\r\n                    id=\"tts-engines-select\"\r\n                    autoWidth={false}\r\n                    value={this.state.ttsEngine}\r\n                    onChange={this.handleTtsEngineChange.bind(this)}\r\n                    inputProps={{\r\n                      name: 'tts-engine',\r\n                      id: 'language-tts-engine'\r\n                    }}\r\n                  >\r\n                    {ttsEngines.map((ttsEng, i) => (\r\n                      <MenuItem key={i} value={ttsEng.name}>\r\n                        {ttsEng.label}\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </FormControl>\r\n              </div>\r\n              <Divider variant=\"middle\" />\r\n            </React.Fragment>\r\n          )}\r\n          {this.state.loading ? (\r\n            <CircularProgress\r\n              size={60}\r\n              className=\"Settings__Language__Spinner\"\r\n              thickness={5}\r\n            />\r\n          ) : (\r\n            <List>{langItems}</List>\r\n          )}\r\n          <Dialog\r\n            onClose={this.handleTtsErrorDialogClose.bind(this)}\r\n            aria-labelledby=\"tts-error-dialog\"\r\n            open={this.state.openTtsEngineError}\r\n            className=\"CommunicatorDialog__boardInfoDialog\"\r\n          >\r\n            <DialogTitle\r\n              id=\"tts-error-dialog-title\"\r\n              onClose={this.handleTtsErrorDialogClose.bind(this)}\r\n            >\r\n              <WarningIcon />\r\n              {intl.formatMessage(messages.ttsEngines)}\r\n            </DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText>\r\n                {intl.formatMessage(messages.ttsEngineError)}\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button\r\n                onClick={this.handleTtsErrorDialogClose.bind(this)}\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.close)}\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </Paper>\r\n        <div className=\"Settings__Language__MoreLang\">\r\n          <Button color=\"primary\" onClick={this.handleMoreLangClick.bind(this)}>\r\n            <FormattedMessage {...messages.moreLanguages} />\r\n          </Button>\r\n        </div>\r\n        <Dialog\r\n          onClose={this.handleMoreLangClose.bind(this)}\r\n          aria-labelledby=\"more-languages-dialog\"\r\n          open={this.state.moreLangDialog}\r\n          TransitionComponent={Transition}\r\n          aria-describedby=\"more-languages-dialog-desc\"\r\n        >\r\n          <DialogTitle\r\n            id=\"more-languages-dialog-title\"\r\n            onClose={this.handleMoreLangClose.bind(this)}\r\n          >\r\n            <FormattedMessage {...messages.moreLanguages} />\r\n          </DialogTitle>\r\n          <DialogContent aria-label=\"more-languages-dialog-content\">\r\n            <div className=\"Settings__Language__MoreLang__Dialog\">\r\n              <ReactMarkdown source={this.state.markdown} escapeHtml={false} />\r\n            </div>\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={this.handleMoreLangClose.bind(this)}\r\n              color=\"primary\"\r\n            >\r\n              <FormattedMessage {...messages.close} />\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </FullScreenDialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  language: state.language\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(Language));\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { FormattedMessage } from 'react-intl';\r\n\r\nimport { changeLang } from '../../../providers/LanguageProvider/LanguageProvider.actions';\r\nimport {\r\n  getVoices,\r\n  setTtsEngine,\r\n  updateLangSpeechStatus\r\n} from '../../../providers/SpeechProvider/SpeechProvider.actions';\r\nimport Language from './Language.component';\r\nimport messages from './Language.messages';\r\nimport API from '../../../api';\r\n\r\nconst sortLangs = (activeLang, langs = [], localLangs = []) => {\r\n  const cloudLangs = langs.filter(lang => !localLangs.includes(lang));\r\n  let sortedLangs = localLangs.concat(cloudLangs);\r\n  const activeLangIndex = sortedLangs.indexOf(activeLang);\r\n  if (activeLangIndex > 0) {\r\n    sortedLangs.splice(activeLangIndex, 1);\r\n    sortedLangs.unshift(activeLang);\r\n  }\r\n  return sortedLangs;\r\n};\r\n\r\nexport class LanguageContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * Active language\r\n     */\r\n    lang: PropTypes.string.isRequired,\r\n    /**\r\n     * Language list\r\n     */\r\n    langs: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n    /**\r\n     * Local available languages list\r\n     */\r\n    localLangs: PropTypes.arrayOf(PropTypes.string),\r\n    /**\r\n     * TTS engines list\r\n     */\r\n    ttsEngines: PropTypes.arrayOf(PropTypes.object),\r\n    /**\r\n     * TTS default engine\r\n     */\r\n    ttsDefaultEngine: PropTypes.object,\r\n    /**\r\n     * Callback fired when language changes\r\n     */\r\n    onLangChange: PropTypes.func,\r\n    /**\r\n     * Callback fired when tts engine changes\r\n     */\r\n    setTtsEngine: PropTypes.func.isRequired,\r\n    /**\r\n     * Callback fired when clicking the back button\r\n     */\r\n    onClose: PropTypes.func,\r\n    history: PropTypes.object.isRequired,\r\n    getVoices: PropTypes.func.isRequired,\r\n    updateLangSpeechStatus: PropTypes.func.isRequired\r\n  };\r\n\r\n  state = { selectedLang: this.props.lang };\r\n\r\n  handleSubmit = async () => {\r\n    const { onLangChange } = this.props;\r\n\r\n    try {\r\n      await API.updateSettings({ language: { lang: this.state.selectedLang } });\r\n    } catch (err) {\r\n      console.log(err.message);\r\n    }\r\n    onLangChange(this.state.selectedLang);\r\n  };\r\n\r\n  handleLangClick = lang => {\r\n    this.setState({ selectedLang: lang });\r\n  };\r\n\r\n  handleSetTtsEngine = async engineName => {\r\n    const { setTtsEngine, getVoices, updateLangSpeechStatus } = this.props;\r\n    try {\r\n      await setTtsEngine(engineName);\r\n      const voices = await getVoices();\r\n      await updateLangSpeechStatus(voices);\r\n    } catch (err) {\r\n      throw new Error('TTS engine selection error on handleSetTtsEngine');\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      history,\r\n      lang,\r\n      langs,\r\n      localLangs,\r\n      ttsEngines,\r\n      ttsEngine\r\n    } = this.props;\r\n    const sortedLangs = sortLangs(lang, langs, localLangs);\r\n\r\n    return (\r\n      <Language\r\n        title={<FormattedMessage {...messages.language} />}\r\n        selectedLang={this.state.selectedLang}\r\n        langs={sortedLangs}\r\n        localLangs={localLangs}\r\n        ttsEngines={ttsEngines ? ttsEngines : []}\r\n        ttsEngine={ttsEngine}\r\n        onLangClick={this.handleLangClick}\r\n        onClose={history.goBack}\r\n        onSubmitLang={this.handleSubmit}\r\n        onSetTtsEngine={this.handleSetTtsEngine}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  lang: state.language.lang,\r\n  langs: state.language.langs,\r\n  localLangs: state.language.localLangs,\r\n  ttsEngines: state.speech.ttsEngines,\r\n  ttsEngine: state.speech.ttsEngine\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  onLangChange: changeLang,\r\n  setTtsEngine,\r\n  getVoices,\r\n  updateLangSpeechStatus\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LanguageContainer);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  higher: {\r\n    id: 'cboard.components.Settings.Speech.higher',\r\n    defaultMessage: 'Higher'\r\n  },\r\n  lower: {\r\n    id: 'cboard.components.Settings.Speech.lower',\r\n    defaultMessage: 'Lower'\r\n  },\r\n  faster: {\r\n    id: 'cboard.components.Settings.Speech.faster',\r\n    defaultMessage: 'Faster'\r\n  },\r\n  slower: {\r\n    id: 'cboard.components.Settings.Speech.slower',\r\n    defaultMessage: 'Slower'\r\n  },\r\n  pitch: {\r\n    id: 'cboard.components.Settings.Speech.pitch',\r\n    defaultMessage: 'Pitch'\r\n  },\r\n  pitchDescription: {\r\n    id: 'cboard.components.Settings.Speech.pitchDescription',\r\n    defaultMessage: 'Make the voice use a higher or lower pitch'\r\n  },\r\n  rate: {\r\n    id: 'cboard.components.Settings.Speech.rate',\r\n    defaultMessage: 'Rate'\r\n  },\r\n  rateDescription: {\r\n    id: 'cboard.components.Settings.Speech.rateDescription',\r\n    defaultMessage: 'Make the voice speak faster or slower'\r\n  },\r\n  speech: {\r\n    id: 'cboard.components.Settings.Speech.speech',\r\n    defaultMessage: 'Speech'\r\n  },\r\n  sampleSentence: {\r\n    id: 'cboard.components.Settings.Speech.sampleSentence',\r\n    defaultMessage: 'Hi! This is my voice.'\r\n  },\r\n  voice: {\r\n    id: 'cboard.components.Settings.Speech.voice',\r\n    defaultMessage: 'Voice'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Slider from '@material-ui/core/Slider';\r\nimport Chip from '@material-ui/core/Chip';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport { isCordova } from '../../../cordova-util';\r\nimport {\r\n  MIN_PITCH,\r\n  MAX_PITCH,\r\n  INCREMENT_PITCH,\r\n  MIN_RATE,\r\n  MAX_RATE,\r\n  INCREMENT_RATE\r\n} from './Speech.constants';\r\nimport messages from './Speech.messages';\r\nimport './Speech.css';\r\n\r\nconst propTypes = {\r\n  handleChangePitch: PropTypes.func,\r\n  handleChangeRate: PropTypes.func,\r\n  handleClickListItem: PropTypes.func,\r\n  onMenuItemClick: PropTypes.func,\r\n  handleVoiceClose: PropTypes.func,\r\n  intl: intlShape.isRequired,\r\n  langVoices: PropTypes.arrayOf(PropTypes.object),\r\n  onClose: PropTypes.func,\r\n  pitch: PropTypes.number,\r\n  rate: PropTypes.number,\r\n  selectedVoiceIndex: PropTypes.number,\r\n  isVoiceOpen: PropTypes.bool.isRequired,\r\n  voice: PropTypes.object.isRequired\r\n};\r\n\r\nconst styles = theme => ({\r\n  container: {\r\n    display: 'flex',\r\n    position: 'relative',\r\n    justifyContent: 'center',\r\n    width: '100%'\r\n  }\r\n});\r\n\r\nconst getVoiceLabel = voice => {\r\n  if (!voice) {\r\n    return undefined;\r\n  }\r\n  if (voice.name === 'srpski Crna Gora') {\r\n    return voice.voiceURI;\r\n  }\r\n  return isCordova() ? voice.name + ' - ' + voice.voiceURI : voice.name;\r\n};\r\n\r\nconst Speech = ({\r\n  anchorEl,\r\n  classes,\r\n  handleChangePitch,\r\n  handleChangeRate,\r\n  handleClickListItem,\r\n  onMenuItemClick,\r\n  handleVoiceClose,\r\n  intl,\r\n  langVoices,\r\n  onClose,\r\n  pitch,\r\n  rate,\r\n  selectedVoiceIndex,\r\n  isVoiceOpen,\r\n  voice\r\n}) => (\r\n  <div className=\"Speech\">\r\n    <FullScreenDialog\r\n      open\r\n      title={<FormattedMessage {...messages.speech} />}\r\n      onClose={onClose}\r\n    >\r\n      <Paper>\r\n        <List>\r\n          <ListItem\r\n            button\r\n            divider\r\n            aria-haspopup=\"true\"\r\n            aria-controls=\"voice-menu\"\r\n            aria-label=\"Voice\"\r\n            onClick={handleClickListItem}\r\n          >\r\n            <ListItemText\r\n              className=\"Speech__ListItemText\"\r\n              primary={<FormattedMessage {...messages.voice} />}\r\n              secondary={getVoiceLabel(voice)}\r\n            />\r\n          </ListItem>\r\n          <ListItem\r\n            disabled={voice && voice.voiceSource === 'cloud' ? true : false}\r\n            divider\r\n            aria-label={intl.formatMessage(messages.pitch)}\r\n          >\r\n            <ListItemText\r\n              primary={<FormattedMessage {...messages.pitch} />}\r\n              secondary={<FormattedMessage {...messages.pitchDescription} />}\r\n            />\r\n            <div className={classes.container}>\r\n              <Slider\r\n                color=\"secondary\"\r\n                value={pitch}\r\n                min={MIN_PITCH}\r\n                max={MAX_PITCH}\r\n                step={INCREMENT_PITCH}\r\n                onChange={handleChangePitch}\r\n                disabled={voice && voice.voiceSource === 'cloud' ? true : false}\r\n              />\r\n            </div>\r\n          </ListItem>\r\n          <ListItem\r\n            disabled={voice && voice.voiceSource === 'cloud' ? true : false}\r\n            aria-label={intl.formatMessage(messages.rate)}\r\n          >\r\n            <ListItemText\r\n              className=\"Speech__ListItemText\"\r\n              primary={<FormattedMessage {...messages.rate} />}\r\n              secondary={<FormattedMessage {...messages.rateDescription} />}\r\n            />\r\n            <div className={classes.container}>\r\n              <Slider\r\n                color=\"secondary\"\r\n                value={rate}\r\n                min={MIN_RATE}\r\n                max={MAX_RATE}\r\n                step={INCREMENT_RATE}\r\n                onChange={handleChangeRate}\r\n                disabled={voice && voice.voiceSource === 'cloud' ? true : false}\r\n              />\r\n            </div>\r\n          </ListItem>\r\n        </List>\r\n      </Paper>\r\n      {langVoices.length && (\r\n        <Menu\r\n          id=\"voice-menu\"\r\n          anchorEl={anchorEl}\r\n          open={isVoiceOpen}\r\n          onClose={handleVoiceClose}\r\n        >\r\n          {langVoices.map((voice, index) => (\r\n            <MenuItem\r\n              key={index}\r\n              selected={index === selectedVoiceIndex}\r\n              onClick={() => onMenuItemClick(voice, index)}\r\n            >\r\n              <div className=\"Speech__VoiceMenuItemText\">\r\n                <div className=\"Speech__VoiceLabel\">{getVoiceLabel(voice)}</div>\r\n                {voice.voiceSource === 'cloud' && (\r\n                  <Chip label=\"online\" size=\"small\" color=\"secondary\" />\r\n                )}\r\n              </div>\r\n            </MenuItem>\r\n          ))}\r\n        </Menu>\r\n      )}\r\n    </FullScreenDialog>\r\n  </div>\r\n);\r\n\r\nSpeech.propTypes = propTypes;\r\n\r\nexport default withStyles(styles)(Speech);\r\n","export const MIN_PITCH = 0.0;\r\nexport const MAX_PITCH = 2.0;\r\nexport const INCREMENT_PITCH = 0.25;\r\nexport const MIN_RATE = 0;\r\nexport const MAX_RATE = 2;\r\nexport const INCREMENT_RATE = 0.25;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport debounce from 'lodash/debounce';\r\nimport { injectIntl } from 'react-intl';\r\n\r\nimport {\r\n  speak,\r\n  cancelSpeech,\r\n  changeVoice,\r\n  changePitch,\r\n  changeRate\r\n} from '../../../providers/SpeechProvider/SpeechProvider.actions';\r\nimport Speech from './Speech.component';\r\nimport messages from './Speech.messages';\r\nimport API from '../../../api';\r\nimport { DEFAULT_LANG } from '../../App/App.constants';\r\nimport { EMPTY_VOICES } from '../../../providers/SpeechProvider/SpeechProvider.constants';\r\n\r\nexport class SpeechContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * Active language\r\n     */\r\n    lang: PropTypes.string,\r\n    /**\r\n     * Current full speech state\r\n     */\r\n    speech: PropTypes.object,\r\n    /**\r\n     * Current full voices state\r\n     */\r\n    voices: PropTypes.array,\r\n    cancelSpeech: PropTypes.func.isRequired,\r\n    changeVoice: PropTypes.func.isRequired,\r\n    changePitch: PropTypes.func.isRequired,\r\n    changeRate: PropTypes.func.isRequired,\r\n    history: PropTypes.object.isRequired\r\n  };\r\n\r\n  state = {\r\n    selectedVoiceIndex: 0,\r\n    isVoiceOpen: false,\r\n    anchorEl: undefined\r\n  };\r\n\r\n  async componentDidMount() {}\r\n\r\n  speakSample = debounce(() => {\r\n    const { cancelSpeech, intl, speak } = this.props;\r\n    const text = intl.formatMessage(messages.sampleSentence);\r\n    cancelSpeech();\r\n    speak(text);\r\n  }, 500);\r\n\r\n  handleClickListItem = event => {\r\n    this.setState({ isVoiceOpen: true, anchorEl: event.currentTarget });\r\n  };\r\n\r\n  handleMenuItemClick = async ({ voiceURI, lang }, index) => {\r\n    const { changeVoice } = this.props;\r\n    changeVoice(voiceURI, lang);\r\n    this.speakSample();\r\n    await this.updateSettings('voiceURI', voiceURI);\r\n    this.setState({ isVoiceOpen: false, selectedVoiceIndex: index });\r\n  };\r\n\r\n  updateSettings(property, value) {\r\n    if (this.updateSettingsTimeout) {\r\n      clearTimeout(this.updateSettingsTimeout);\r\n    }\r\n\r\n    this.updateSettingsTimeout = setTimeout(async () => {\r\n      const {\r\n        speech: {\r\n          options: { voiceURI, pitch, rate }\r\n        }\r\n      } = this.props;\r\n\r\n      const speech = {\r\n        voiceURI,\r\n        pitch,\r\n        rate,\r\n        [property]: value\r\n      };\r\n\r\n      try {\r\n        await API.updateSettings({ speech });\r\n      } catch (e) {}\r\n    }, 500);\r\n  }\r\n\r\n  handleChangePitch = async (event, value) => {\r\n    const { changePitch } = this.props;\r\n    await this.updateSettings('pitch', value);\r\n    changePitch(value);\r\n    this.speakSample();\r\n  };\r\n\r\n  handleChangeRate = async (event, value) => {\r\n    const { changeRate } = this.props;\r\n    await this.updateSettings('rate', value);\r\n    changeRate(value);\r\n    this.speakSample();\r\n  };\r\n\r\n  handleVoiceClose = () => {\r\n    this.setState({ isVoiceOpen: false });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      history,\r\n      intl,\r\n      lang,\r\n      speech: {\r\n        voices,\r\n        options: { voiceURI, pitch, rate }\r\n      }\r\n    } = this.props;\r\n\r\n    const langVoices = voices.filter(\r\n      voice => voice.lang.slice(0, 2) === lang.slice(0, 2)\r\n    );\r\n    // typically, voice should be found\r\n    let voice = voices.find(v => voiceURI === v.voiceURI);\r\n    // handle exceptional cases\r\n    if (!voice && voices.lenght) {\r\n      // rare case\r\n      voice = voices[0];\r\n    } else if (!voice && !voices) {\r\n      // should never happen\r\n      voice = {\r\n        lang: DEFAULT_LANG,\r\n        voiceURI: EMPTY_VOICES,\r\n        voiceSource: 'local',\r\n        name: EMPTY_VOICES\r\n      };\r\n    }\r\n\r\n    return (\r\n      <Speech\r\n        {...this.state}\r\n        handleChangePitch={this.handleChangePitch}\r\n        handleChangeRate={this.handleChangeRate}\r\n        handleClickListItem={this.handleClickListItem}\r\n        onMenuItemClick={this.handleMenuItemClick}\r\n        handleVoiceClose={this.handleVoiceClose}\r\n        intl={intl}\r\n        langVoices={langVoices}\r\n        onClose={history.goBack}\r\n        pitch={pitch}\r\n        rate={rate}\r\n        voice={voice}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  lang: state.language.lang,\r\n  voices: state.speech.voices,\r\n  speech: state.speech\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  cancelSpeech,\r\n  changeVoice,\r\n  changePitch,\r\n  changeRate,\r\n  speak\r\n};\r\n\r\nconst EnhancedSpeechContainer = injectIntl(SpeechContainer);\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(EnhancedSpeechContainer);\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  export: {\r\n    id: 'cboard.components.Settings.Export.export',\r\n    defaultMessage: 'Export'\r\n  },\r\n  exportSingle: {\r\n    id: 'cboard.components.Settings.Export.exportSingle',\r\n    defaultMessage: 'Export a single board'\r\n  },\r\n  exportSingleSecondary: {\r\n    id: 'cboard.components.Settings.Export.exportSingleSecondary',\r\n    defaultMessage:\r\n      'This option will export a single board you have from a list of boards. You can choose {cboardLink}, {link} or PDF formats.'\r\n  },\r\n  exportAll: {\r\n    id: 'cboard.components.Settings.Export.exportAll',\r\n    defaultMessage: 'Export All Boards'\r\n  },\r\n  exportAllSecondary: {\r\n    id: 'cboard.components.Settings.Export.exportAllSecondary',\r\n    defaultMessage:\r\n      'This option will export ALL the boards you have if you choose {cboardLink} format or {link} format. It will export JUST the current board if you choose PDF format.'\r\n  },\r\n  boardDownloaded: {\r\n    id: 'cboard.components.Settings.Export.boardDownloaded',\r\n    defaultMessage: 'Your board(s) was downloaded'\r\n  },\r\n  boardDownloadedCva: {\r\n    id: 'cboard.components.Settings.Export.boardDownloadedCva',\r\n    defaultMessage:\r\n      'Your board was downloaded. Find your file under the downloads folder'\r\n  },\r\n  boards: {\r\n    id: 'cboard.components.Settings.Export.boards',\r\n    defaultMessage: 'Boards'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, intlShape } from 'react-intl';\r\nimport Link from '@material-ui/core/Link';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Divider from '@material-ui/core/Divider';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Export.messages';\r\n\r\nimport './Export.css';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the export Cboard button\r\n   */\r\n  onExportClick: PropTypes.func.isRequired,\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func,\r\n  boards: PropTypes.array.isRequired,\r\n  intl: intlShape.isRequired\r\n};\r\n\r\nclass Export extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      exportSingleBoard: '',\r\n      exportAllBoard: '',\r\n      singleBoard: '',\r\n      loadingSingle: false,\r\n      loadingAll: false,\r\n      boardError: false\r\n    };\r\n  }\r\n\r\n  openMenu(e) {\r\n    this.setState({ exportMenu: e.currentTarget });\r\n  }\r\n\r\n  closeMenu() {\r\n    this.setState({ exportMenu: null });\r\n  }\r\n\r\n  handleBoardChange = event => {\r\n    this.setState({\r\n      boardError: false,\r\n      singleBoard: event.target.value\r\n    });\r\n  };\r\n\r\n  handleAllBoardChange = event => {\r\n    const doneCallback = () => {\r\n      this.setState({\r\n        loadingAll: false\r\n      });\r\n    };\r\n\r\n    this.setState(\r\n      {\r\n        loadingAll: true,\r\n        exportAllBoard: event.target.value\r\n      },\r\n      () => {\r\n        this.props.onExportClick(this.state.exportAllBoard, '', doneCallback);\r\n      }\r\n    );\r\n  };\r\n\r\n  handleSingleBoardChange = event => {\r\n    if (!this.state.singleBoard) {\r\n      this.setState({\r\n        boardError: true\r\n      });\r\n      return;\r\n    }\r\n    const doneCallback = () => {\r\n      this.setState({\r\n        loadingSingle: false\r\n      });\r\n    };\r\n\r\n    this.setState(\r\n      {\r\n        loadingSingle: true,\r\n        exportSingleBoard: event.target.value\r\n      },\r\n      () => {\r\n        this.props.onExportClick(\r\n          this.state.exportSingleBoard,\r\n          this.state.singleBoard,\r\n          doneCallback\r\n        );\r\n      }\r\n    );\r\n  };\r\n\r\n  render() {\r\n    const { onClose, boards, intl } = this.props;\r\n    return (\r\n      <div className=\"Export\">\r\n        <FullScreenDialog\r\n          open\r\n          title={<FormattedMessage {...messages.export} />}\r\n          onClose={onClose}\r\n        >\r\n          <Paper>\r\n            <List>\r\n              <ListItem className=\"Export__ListItem\">\r\n                <ListItemText\r\n                  className=\"Export__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.exportSingle} />}\r\n                  secondary={\r\n                    <FormattedMessage\r\n                      {...messages.exportSingleSecondary}\r\n                      values={{\r\n                        cboardLink: (\r\n                          <Link\r\n                            href=\"https://www.cboard.io/help/#HowdoIimportaboardintoCboard\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            Cboard\r\n                          </Link>\r\n                        ),\r\n                        link: (\r\n                          <Link\r\n                            href=\"https://www.openboardformat.org/\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            OpenBoard\r\n                          </Link>\r\n                        )\r\n                      }}\r\n                    />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <div className=\"Export__SelectContainer\">\r\n                    {this.state.loadingSingle && (\r\n                      <CircularProgress\r\n                        size={25}\r\n                        className=\"Export__SelectContainer--spinner\"\r\n                        thickness={7}\r\n                      />\r\n                    )}\r\n                    {!this.state.loadingSingle && (\r\n                      <div className=\"Export__SelectContainer\">\r\n                        <FormControl\r\n                          className=\"Export__SelectContainer__Select\"\r\n                          variant=\"standard\"\r\n                          error={this.state.boardError}\r\n                          disabled={this.state.loading}\r\n                        >\r\n                          <InputLabel id=\"boards-select-label\">\r\n                            {intl.formatMessage(messages.boards)}\r\n                          </InputLabel>\r\n                          <Select\r\n                            labelId=\"boards-select-label\"\r\n                            id=\"boards-select\"\r\n                            autoWidth={false}\r\n                            value={this.state.singleBoard}\r\n                            onChange={this.handleBoardChange}\r\n                          >\r\n                            {boards.map(\r\n                              board =>\r\n                                !board.hidden && (\r\n                                  <MenuItem key={board.id} value={board}>\r\n                                    {board.name}\r\n                                  </MenuItem>\r\n                                )\r\n                            )}\r\n                          </Select>\r\n                        </FormControl>\r\n                        <FormControl\r\n                          className=\"Export__SelectContainer__Select\"\r\n                          variant=\"standard\"\r\n                          disabled={this.state.loading}\r\n                        >\r\n                          <InputLabel id=\"export-single-select-label\">\r\n                            {intl.formatMessage(messages.export)}\r\n                          </InputLabel>\r\n                          <Select\r\n                            labelId=\"export-single-select-label\"\r\n                            id=\"export-single-select\"\r\n                            autoWidth={false}\r\n                            disabled={this.state.loading}\r\n                            value={this.state.exportSingleBoard}\r\n                            onChange={this.handleSingleBoardChange}\r\n                          >\r\n                            <MenuItem value=\"cboard\">Cboard</MenuItem>\r\n                            <MenuItem value=\"openboard\">OpenBoard</MenuItem>\r\n                            <MenuItem value=\"pdf\">PDF</MenuItem>\r\n                          </Select>\r\n                        </FormControl>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Export__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.exportAll} />}\r\n                  secondary={\r\n                    <FormattedMessage\r\n                      {...messages.exportAllSecondary}\r\n                      values={{\r\n                        cboardLink: (\r\n                          <Link\r\n                            href=\"https://www.cboard.io/help/#HowdoIimportaboardintoCboard\"\r\n                            target=\"_blank\"\r\n                          >\r\n                            Cboard\r\n                          </Link>\r\n                        ),\r\n                        link: (\r\n                          <Link\r\n                            href=\"https://www.openboardformat.org/\"\r\n                            target=\"_blank\"\r\n                          >\r\n                            OpenBoard\r\n                          </Link>\r\n                        )\r\n                      }}\r\n                    />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <div className=\"Export__SelectContainer\">\r\n                    {this.state.loadingAll && (\r\n                      <CircularProgress\r\n                        size={25}\r\n                        className=\"Export__SelectContainer--spinner\"\r\n                        thickness={7}\r\n                      />\r\n                    )}\r\n                    {!this.state.loadingAll && (\r\n                      <FormControl\r\n                        className=\"Export__SelectContainer__Select\"\r\n                        variant=\"standard\"\r\n                        disabled={this.state.loadingAll}\r\n                      >\r\n                        <InputLabel id=\"export-all-select-label\">\r\n                          {intl.formatMessage(messages.export)}\r\n                        </InputLabel>\r\n                        <Select\r\n                          labelId=\"export-all-select-label\"\r\n                          id=\"export-all-select\"\r\n                          autoWidth={false}\r\n                          value={this.state.exportAllBoard}\r\n                          onChange={this.handleAllBoardChange}\r\n                        >\r\n                          <MenuItem value=\"cboard\">Cboard</MenuItem>\r\n                          <MenuItem value=\"openboard\">OpenBoard</MenuItem>\r\n                          <MenuItem value=\"pdf\">PDF</MenuItem>\r\n                        </Select>\r\n                      </FormControl>\r\n                    )}\r\n                  </div>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            </List>\r\n          </Paper>\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nExport.propTypes = propTypes;\r\n\r\nexport default Export;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\n\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\nimport Export from './Export.component';\r\nimport { EXPORT_CONFIG_BY_TYPE } from './Export.constants';\r\nimport messages from './Export.messages';\r\nimport { isAndroid } from '../../../cordova-util';\r\n\r\nexport class ExportContainer extends PureComponent {\r\n  static propTypes = {\r\n    boards: PropTypes.array.isRequired,\r\n    history: PropTypes.object.isRequired,\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  handleExportClick = async (\r\n    type = 'cboard',\r\n    singleBoard = '',\r\n    doneCallback\r\n  ) => {\r\n    const exportConfig = EXPORT_CONFIG_BY_TYPE[type];\r\n    const EXPORT_HELPERS = await import('./Export.helpers');\r\n\r\n    if (\r\n      !exportConfig ||\r\n      !exportConfig.callback ||\r\n      !EXPORT_HELPERS[exportConfig.callback]\r\n    ) {\r\n      return false;\r\n    }\r\n\r\n    const { boards, intl, activeBoardId, showNotification } = this.props;\r\n    // TODO: Make this block easier to follow.\r\n    if (type === 'openboard' && singleBoard) {\r\n      await EXPORT_HELPERS.openboardExportAdapter(singleBoard, intl);\r\n    } else if (type === 'cboard') {\r\n      await EXPORT_HELPERS.cboardExportAdapter(boards, singleBoard);\r\n    } else if (type !== 'pdf' && !singleBoard) {\r\n      await EXPORT_HELPERS[exportConfig.callback](boards, intl);\r\n    } else {\r\n      if (singleBoard) {\r\n        await EXPORT_HELPERS[exportConfig.callback]([singleBoard], intl);\r\n      } else {\r\n        const currentBoard = boards.filter(board => board.id === activeBoardId);\r\n        await EXPORT_HELPERS[exportConfig.callback](currentBoard, intl);\r\n      }\r\n    }\r\n    isAndroid()\r\n      ? showNotification(intl.formatMessage(messages.boardDownloadedCva))\r\n      : showNotification(intl.formatMessage(messages.boardDownloaded));\r\n    doneCallback();\r\n  };\r\n\r\n  render() {\r\n    const { boards, intl, history } = this.props;\r\n\r\n    return (\r\n      <Export\r\n        intl={intl}\r\n        boards={boards}\r\n        onExportClick={this.handleExportClick}\r\n        onClose={history.goBack}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  boards: state.board.boards,\r\n  activeBoardId: state.board.activeBoardId\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(ExportContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  import: {\r\n    id: 'cboard.components.Settings.Import.import',\r\n    defaultMessage: 'Import'\r\n  },\r\n  importSecondary: {\r\n    id: 'cboard.components.Settings.Import.importSecondary',\r\n    defaultMessage:\r\n      'This option will import JUST the new boards detected. It WILL NOT import the default boards included on Cboard. Supported formats are {cboardLink} format or {link} format.'\r\n  },\r\n  success: {\r\n    id: 'cboard.components.Settings.Import.success',\r\n    defaultMessage: 'Success!! {boards} boards were imported successfully.'\r\n  },\r\n  emptyImport: {\r\n    id: 'cboard.components.Settings.Import.emptyImport',\r\n    defaultMessage: 'WARNING: There is nothing to import from the current file.'\r\n  },\r\n  errorImport: {\r\n    id: 'cboard.components.Settings.Import.errorImport',\r\n    defaultMessage:\r\n      'WARNING: There was an error trying to import from the current file.'\r\n  },\r\n  invalidImport: {\r\n    id: 'cboard.components.Settings.Import.invalidImport',\r\n    defaultMessage: 'Please, select a valid file: json, obz, obf'\r\n  },\r\n  noImport: {\r\n    id: 'cboard.components.Settings.Import.noImport',\r\n    defaultMessage: 'WARNING: There is no selected file.'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Link from '@material-ui/core/Link';\r\nimport Button from '@material-ui/core/Button';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Import.messages';\r\n\r\nimport './Import.css';\r\nimport { requestCvaPermissions, isCordova } from '../../../cordova-util';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the import Cboard button\r\n   */\r\n  onImportClick: PropTypes.func.isRequired,\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func\r\n};\r\n\r\nclass Import extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false\r\n    };\r\n  }\r\n\r\n  onImportClick(event) {\r\n    const doneCallback = () => {\r\n      this.setState({ loading: false });\r\n    };\r\n\r\n    // https://reactjs.org/docs/events.html#event-pooling\r\n    event.persist();\r\n\r\n    this.setState({ loading: true, exportMenu: null }, () => {\r\n      this.props.onImportClick(event, doneCallback);\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const { onClose } = this.props;\r\n    if (isCordova()) {\r\n      requestCvaPermissions();\r\n    }\r\n\r\n    return (\r\n      <div className=\"Import\">\r\n        <FullScreenDialog\r\n          open\r\n          title={<FormattedMessage {...messages.import} />}\r\n          onClose={onClose}\r\n        >\r\n          <Paper>\r\n            <List>\r\n              <ListItem className=\"Import__ListItem\">\r\n                <ListItemText\r\n                  className=\"Import__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.import} />}\r\n                  secondary={\r\n                    <FormattedMessage\r\n                      {...messages.importSecondary}\r\n                      values={{\r\n                        cboardLink: (\r\n                          <Link\r\n                            href=\"https://www.cboard.io/help/#HowdoIimportaboardintoCboard\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            Cboard\r\n                          </Link>\r\n                        ),\r\n                        link: (\r\n                          <Link\r\n                            href=\"https://www.openboardformat.org/\"\r\n                            target=\"_blank\"\r\n                            rel=\"noopener noreferrer\"\r\n                          >\r\n                            OpenBoard\r\n                          </Link>\r\n                        )\r\n                      }}\r\n                    />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <div className=\"Import__ButtonContainer\">\r\n                    {this.state.loading && (\r\n                      <CircularProgress\r\n                        size={25}\r\n                        className=\"Import__ButtonContainer--spinner\"\r\n                        thickness={7}\r\n                      />\r\n                    )}\r\n                    <Button\r\n                      id=\"import-button\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      component=\"span\"\r\n                      disabled={this.state.loading}\r\n                    >\r\n                      <label htmlFor=\"file\">\r\n                        <FormattedMessage {...messages.import} />\r\n                      </label>\r\n                      <input\r\n                        id=\"file\"\r\n                        type=\"file\"\r\n                        style={{ display: 'none' }}\r\n                        onChange={e => this.onImportClick(e)}\r\n                      />\r\n                    </Button>\r\n                  </div>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            </List>\r\n          </Paper>\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nImport.propTypes = propTypes;\r\n\r\nexport default Import;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport shortid from 'shortid';\r\n\r\nimport { addBoards, changeBoard } from '../../Board/Board.actions';\r\nimport {\r\n  upsertCommunicator,\r\n  changeCommunicator\r\n} from '../../Communicator/Communicator.actions';\r\nimport { switchBoard } from '../../Board/Board.actions';\r\nimport { showNotification } from '../../Notifications/Notifications.actions';\r\nimport Import from './Import.component';\r\nimport API from '../../../api';\r\nimport messages from './Import.messages';\r\n\r\nexport class ImportContainer extends PureComponent {\r\n  static propTypes = {\r\n    boards: PropTypes.array.isRequired,\r\n    history: PropTypes.object.isRequired,\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  async updateLoadBoardsIds(boards, shouldUpdate = false) {\r\n    const updatedBoards = await Promise.all(\r\n      boards.map(async board => {\r\n        const boardsToBeLoaded = {};\r\n        const tilesToBeReplaced = {};\r\n        const tempBoards = this.props.boards\r\n          .concat(boards)\r\n          .filter(b => b.prevId);\r\n        let updated = false;\r\n        board.tiles.forEach((tile, i) => {\r\n          if (tile.loadBoard) {\r\n            const boardToBeLoaded = tempBoards.find(\r\n              tb => tb.prevId && tb.prevId === tile.loadBoard\r\n            );\r\n            if (boardToBeLoaded) {\r\n              tilesToBeReplaced[i] = tile;\r\n              boardsToBeLoaded[boardToBeLoaded.prevId] = boardToBeLoaded.id;\r\n            }\r\n          }\r\n        });\r\n\r\n        const tilesIndexes = Object.keys(tilesToBeReplaced);\r\n        tilesIndexes.forEach(i => {\r\n          const tile = board.tiles[i];\r\n\r\n          if (boardsToBeLoaded[tile.loadBoard]) {\r\n            board.tiles[i].loadBoard = boardsToBeLoaded[tile.loadBoard];\r\n\r\n            updated = true;\r\n          }\r\n        });\r\n\r\n        let boardToBeUpdated = board;\r\n        if (shouldUpdate && updated) {\r\n          boardToBeUpdated = await API.updateBoard(boardToBeUpdated);\r\n        }\r\n\r\n        return boardToBeUpdated;\r\n      })\r\n    );\r\n\r\n    return updatedBoards;\r\n  }\r\n\r\n  async syncBoardsWithAPI(boards) {\r\n    const { userData } = this.props;\r\n\r\n    let boardsResponse = boards;\r\n    if (userData.email) {\r\n      const { email, name: author } = userData;\r\n\r\n      boardsResponse = await Promise.all(\r\n        boards.map(async board => {\r\n          const boardToCreate = {\r\n            ...board,\r\n            email,\r\n            author,\r\n            isPublic: false,\r\n            locale: this.props.intl.locale\r\n          };\r\n          //board validate\r\n          if (typeof boardToCreate.id !== 'undefined') {\r\n            delete boardToCreate.id;\r\n          }\r\n          if (typeof boardToCreate.name === 'undefined') {\r\n            boardToCreate.name = 'unknow';\r\n          }\r\n          try {\r\n            const response = await API.createBoard(boardToCreate);\r\n            if (board.id) {\r\n              response.prevId = board.id;\r\n            }\r\n            return response;\r\n          } catch (err) {\r\n            console.log(err.message);\r\n            return board\r\n          }\r\n        })\r\n      );\r\n    } else {\r\n      boardsResponse.forEach(board => {\r\n        if (board.id) {\r\n          board.prevId = board.id;\r\n        }\r\n        board.id = shortid.generate();\r\n      });\r\n    }\r\n\r\n    boardsResponse = await this.updateLoadBoardsIds(\r\n      boardsResponse,\r\n      userData.email\r\n    );\r\n\r\n    this.props.addBoards(boardsResponse);\r\n    await this.addBoardsToCommunicator(boardsResponse);\r\n    this.props.switchBoard(boardsResponse[0].id);\r\n  }\r\n\r\n  async addBoardsToCommunicator(boards) {\r\n    const { userData, currentCommunicator } = this.props;\r\n\r\n    const communicatorBoards = new Set(\r\n      currentCommunicator.boards.concat(boards.map(b => b.id))\r\n    );\r\n    let communicatorModified = {\r\n      ...currentCommunicator,\r\n      boards: Array.from(communicatorBoards)\r\n    };\r\n\r\n    if (userData && userData.authToken && userData.authToken.length) {\r\n      try {\r\n        communicatorModified = await API.updateCommunicator(communicatorModified);\r\n      } catch (err) {\r\n        console.log(err.message);\r\n      }\r\n    }\r\n\r\n    this.props.upsertCommunicator(communicatorModified);\r\n    this.props.changeCommunicator(communicatorModified.id);\r\n  }\r\n\r\n  async handleImportClick(e, doneCallback) {\r\n    const { showNotification, intl, boards } = this.props;\r\n\r\n    // Check for the various File API support.\r\n    if (window.File && window.FileReader && window.FileList && window.Blob) {\r\n      if (e.target.files.length > 0) {\r\n        const file = e.target.files[0];\r\n        const ext = file.name.match(/\\.([^.]+)$/)[1];\r\n        const importConstants = await import('./Import.constants');\r\n\r\n        const importCallback =\r\n          importConstants.IMPORT_CONFIG_BY_EXTENSION[ext.toLowerCase()];\r\n        if (importCallback) {\r\n          // TODO. Json format validation\r\n          try {\r\n            const jsonFile = await importCallback(\r\n              file,\r\n              this.props.intl,\r\n              boards\r\n            );\r\n            if (jsonFile.length) {\r\n              const importHelpers = await import('./Import.helpers');\r\n              await importHelpers.requestQuota(jsonFile);\r\n              await this.syncBoardsWithAPI(jsonFile);\r\n              showNotification(\r\n                intl.formatMessage(messages.success, {\r\n                  boards: jsonFile.length\r\n                })\r\n              );\r\n            } else {\r\n              showNotification(intl.formatMessage(messages.emptyImport));\r\n            }\r\n          } catch (e) {\r\n            showNotification(intl.formatMessage(messages.errorImport));\r\n            console.error(e);\r\n          }\r\n        } else {\r\n          showNotification(intl.formatMessage(messages.invalidImport));\r\n          alert('Please, select a valid file: json, obz, obf');\r\n        }\r\n      } else {\r\n        showNotification(intl.formatMessage(messages.noImport));\r\n        console.warn('There is no selected file.');\r\n      }\r\n    } else {\r\n      console.warn('The File APIs are not fully supported in this browser.');\r\n    }\r\n\r\n    if (doneCallback) {\r\n      doneCallback();\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { boards, history } = this.props;\r\n\r\n    return (\r\n      <Import\r\n        boards={boards}\r\n        onImportClick={this.handleImportClick.bind(this)}\r\n        onClose={history.goBack}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({ board, communicator, app }) => {\r\n  const activeCommunicatorId = communicator.activeCommunicatorId;\r\n  const currentCommunicator = communicator.communicators.find(\r\n    communicator => communicator.id === activeCommunicatorId\r\n  );\r\n\r\n  const { userData } = app;\r\n\r\n  return {\r\n    boards: board.boards,\r\n    currentCommunicator,\r\n    communicators: communicator.communicators,\r\n    userData\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = {\r\n  addBoards,\r\n  changeBoard,\r\n  switchBoard,\r\n  upsertCommunicator,\r\n  changeCommunicator,\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(ImportContainer));\r\n","import { defineMessages } from 'react-intl';\r\nimport {\r\n  DISPLAY_SIZE_STANDARD,\r\n  DISPLAY_SIZE_LARGE,\r\n  DISPLAY_SIZE_EXTRALARGE,\r\n  LABEL_POSITION_ABOVE,\r\n  LABEL_POSITION_BELOW,\r\n  LABEL_POSITION_HIDDEN\r\n} from './Display.constants';\r\n\r\nexport default defineMessages({\r\n  display: {\r\n    id: 'cboard.components.Settings.Display.display',\r\n    defaultMessage: 'Display'\r\n  },\r\n  [DISPLAY_SIZE_STANDARD]: {\r\n    id: 'cboard.components.Settings.Display.StandardSize',\r\n    defaultMessage: 'Standard'\r\n  },\r\n  [DISPLAY_SIZE_LARGE]: {\r\n    id: 'cboard.components.Settings.Display.LargeSize',\r\n    defaultMessage: 'Large'\r\n  },\r\n  [DISPLAY_SIZE_EXTRALARGE]: {\r\n    id: 'cboard.components.Settings.Display.ExtraLargeSize',\r\n    defaultMessage: 'Extra Large'\r\n  },\r\n  [LABEL_POSITION_ABOVE]: {\r\n    id: 'cboard.components.Settings.Display.LabelPositionAbove',\r\n    defaultMessage: 'Above'\r\n  },\r\n  [LABEL_POSITION_BELOW]: {\r\n    id: 'cboard.components.Settings.Display.LabelPositionBelow',\r\n    defaultMessage: 'Below'\r\n  },\r\n  [LABEL_POSITION_HIDDEN]: {\r\n    id: 'cboard.components.Settings.Display.LabelPositionHidden',\r\n    defaultMessage: 'Hidden'\r\n  },\r\n  uiSize: {\r\n    id: 'cboard.components.Settings.Display.uiSize',\r\n    defaultMessage: 'UI Size'\r\n  },\r\n  uiSizeSecondary: {\r\n    id: 'cboard.components.Settings.Display.uiSizeSecondary',\r\n    defaultMessage: 'Elements size'\r\n  },\r\n  fontSize: {\r\n    id: 'cboard.components.Settings.Display.fontSize',\r\n    defaultMessage: 'Font Size'\r\n  },\r\n  fontSizeSecondary: {\r\n    id: 'cboard.components.Settings.Display.fontSizeSecondary',\r\n    defaultMessage: 'App font size'\r\n  },\r\n  labelPosition: {\r\n    id: 'cboard.components.Settings.Display.labelPosition',\r\n    defaultMessage: 'Label Position'\r\n  },\r\n  labelPositionSecondary: {\r\n    id: 'cboard.components.Settings.Display.labelPositionSecondary',\r\n    defaultMessage:\r\n      'Whether labels on tiles should be visible, or positioned above or below'\r\n  },\r\n  outputHide: {\r\n    id: 'cboard.components.Settings.Display.outputHide',\r\n    defaultMessage: 'Hide the output bar'\r\n  },\r\n  outputHideSecondary: {\r\n    id: 'cboard.components.Settings.Display.outputHideSecondary',\r\n    defaultMessage: 'Hides the white bar on the top where you build a sentence.'\r\n  },\r\n  darkTheme: {\r\n    id: 'cboard.components.Settings.Display.darkTheme',\r\n    defaultMessage: 'Enable dark theme'\r\n  },\r\n  darkThemeSecondary: {\r\n    id: 'cboard.components.Settings.Display.darkThemeSecondary',\r\n    defaultMessage:\r\n      'The theme specifies the color of the components, darkness of the surfaces, level of shadow, appropriate opacity of ink elements, etc.'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Display.messages';\r\n\r\nimport './Display.css';\r\nimport {\r\n  DISPLAY_SIZE_STANDARD,\r\n  DISPLAY_SIZE_LARGE,\r\n  DISPLAY_SIZE_EXTRALARGE,\r\n  LABEL_POSITION_ABOVE,\r\n  LABEL_POSITION_BELOW,\r\n  LABEL_POSITION_HIDDEN\r\n} from './Display.constants';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func,\r\n  displaySettings: PropTypes.object.isRequired,\r\n  updateDisplaySettings: PropTypes.func.isRequired\r\n};\r\n\r\nclass Display extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      ...props.displaySettings\r\n    };\r\n  }\r\n\r\n  toggleHideOutput = () => {\r\n    this.setState({\r\n      hideOutputActive: !this.state.hideOutputActive\r\n    });\r\n  };\r\n\r\n  toggleDarkTheme = () => {\r\n    this.setState({\r\n      darkThemeActive: !this.state.darkThemeActive\r\n    });\r\n  };\r\n\r\n  onDisplaySettingsChange(displaySetting, event) {\r\n    const {\r\n      target: { value }\r\n    } = event;\r\n    this.setState({ [displaySetting]: value });\r\n  }\r\n\r\n  renderSelect(name) {\r\n    return (\r\n      <FormControl>\r\n        <Select\r\n          aria-label={this.props.intl.formatMessage(messages[name])}\r\n          id={name}\r\n          name={name}\r\n          value={this.state[name]}\r\n          onChange={e => this.onDisplaySettingsChange(name, e)}\r\n        >\r\n          <MenuItem\r\n            value={\r\n              name === 'labelPosition'\r\n                ? LABEL_POSITION_ABOVE\r\n                : DISPLAY_SIZE_STANDARD\r\n            }\r\n          >\r\n            {this.props.intl.formatMessage(\r\n              name === 'labelPosition'\r\n                ? messages[LABEL_POSITION_ABOVE]\r\n                : messages[DISPLAY_SIZE_STANDARD]\r\n            )}\r\n          </MenuItem>\r\n          <MenuItem\r\n            value={\r\n              name === 'labelPosition'\r\n                ? LABEL_POSITION_BELOW\r\n                : DISPLAY_SIZE_LARGE\r\n            }\r\n          >\r\n            {this.props.intl.formatMessage(\r\n              name === 'labelPosition'\r\n                ? messages[LABEL_POSITION_BELOW]\r\n                : messages[DISPLAY_SIZE_LARGE]\r\n            )}\r\n          </MenuItem>\r\n          <MenuItem\r\n            value={\r\n              name === 'labelPosition'\r\n                ? LABEL_POSITION_HIDDEN\r\n                : DISPLAY_SIZE_EXTRALARGE\r\n            }\r\n          >\r\n            {this.props.intl.formatMessage(\r\n              name === 'labelPosition'\r\n                ? messages[LABEL_POSITION_HIDDEN]\r\n                : messages[DISPLAY_SIZE_EXTRALARGE]\r\n            )}\r\n          </MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    );\r\n  }\r\n\r\n  onSubmit() {\r\n    this.props.updateDisplaySettings(this.state);\r\n  }\r\n\r\n  render() {\r\n    const { onClose } = this.props;\r\n    return (\r\n      <FullScreenDialog\r\n        open\r\n        title={<FormattedMessage {...messages.display} />}\r\n        onClose={onClose}\r\n        onSubmit={this.onSubmit.bind(this)}\r\n      >\r\n        <Paper className=\"Display\">\r\n          <List>\r\n            <ListItem>\r\n              <ListItemText\r\n                className=\"Display__ListItemText\"\r\n                primary={<FormattedMessage {...messages.uiSize} />}\r\n                secondary={<FormattedMessage {...messages.uiSizeSecondary} />}\r\n              />\r\n              <ListItemSecondaryAction className=\"Display__Options\">\r\n                {this.renderSelect('uiSize')}\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <Divider />\r\n            <ListItem>\r\n              <ListItemText\r\n                className=\"Display__ListItemText\"\r\n                primary={<FormattedMessage {...messages.fontSize} />}\r\n                secondary={<FormattedMessage {...messages.fontSizeSecondary} />}\r\n              />\r\n              <ListItemSecondaryAction className=\"Display__Options\">\r\n                {this.renderSelect('fontSize')}\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <Divider />\r\n            <ListItem>\r\n              <ListItemText\r\n                className=\"Display__ListItemText\"\r\n                primary={<FormattedMessage {...messages.outputHide} />}\r\n                secondary={\r\n                  <FormattedMessage {...messages.outputHideSecondary} />\r\n                }\r\n              />\r\n              <ListItemSecondaryAction>\r\n                <Switch\r\n                  checked={this.state.hideOutputActive}\r\n                  onChange={this.toggleHideOutput}\r\n                  value=\"active\"\r\n                  color=\"secondary\"\r\n                />\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <Divider />\r\n            <ListItem>\r\n              <ListItemText\r\n                className=\"Display__ListItemText\"\r\n                primary={<FormattedMessage {...messages.labelPosition} />}\r\n                secondary={\r\n                  <FormattedMessage {...messages.labelPositionSecondary} />\r\n                }\r\n              />\r\n              <ListItemSecondaryAction className=\"Display__Options\">\r\n                {this.renderSelect('labelPosition')}\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n            <Divider />\r\n            <ListItem>\r\n              <ListItemText\r\n                className=\"Display__ListItemText\"\r\n                primary={<FormattedMessage {...messages.darkTheme} />}\r\n                secondary={\r\n                  <FormattedMessage {...messages.darkThemeSecondary} />\r\n                }\r\n              />\r\n              <ListItemSecondaryAction className=\"Display__Options\">\r\n                <Switch\r\n                  checked={this.state.darkThemeActive}\r\n                  onChange={this.toggleDarkTheme}\r\n                  value=\"active\"\r\n                  color=\"secondary\"\r\n                />\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          </List>\r\n        </Paper>\r\n      </FullScreenDialog>\r\n    );\r\n  }\r\n}\r\n\r\nDisplay.propTypes = propTypes;\r\n\r\nexport default Display;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { updateDisplaySettings } from '../../App/App.actions';\r\nimport Display from './Display.component';\r\nimport API from '../../../api';\r\n\r\nexport class DisplayContainer extends PureComponent {\r\n  updateDisplaySettings = async displaySettings => {\r\n    try {\r\n      await API.updateSettings({ display: displaySettings });\r\n    } catch (e) {}\r\n    this.props.updateDisplaySettingsAction(displaySettings);\r\n  };\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n    return (\r\n      <Display\r\n        {...this.props}\r\n        updateDisplaySettings={this.updateDisplaySettings}\r\n        onClose={history.goBack}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nDisplayContainer.props = {\r\n  intl: intlShape.isRequired,\r\n  displaySettings: PropTypes.object.isRequired,\r\n  history: PropTypes.object.isRequired,\r\n  updateDisplaySettings: PropTypes.func\r\n};\r\n\r\nconst mapStateToProps = ({ app: { displaySettings } }) => ({ displaySettings });\r\n\r\nconst mapDispatchToProps = {\r\n  updateDisplaySettingsAction: updateDisplaySettings\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(DisplayContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  about: {\r\n    id: 'cboard.components.About.about',\r\n    defaultMessage: 'About'\r\n  },\r\n  intro: {\r\n    id: 'cboard.components.About.intro',\r\n    defaultMessage:\r\n      'Cboard is an augmentative and alternative communication (AAC) web application, allowing people with speech and language impairments to communicate by symbols and text-to-speech.'\r\n  },\r\n  contributors: {\r\n    id: 'cboard.components.About.contributors',\r\n    defaultMessage: 'Contributors'\r\n  },\r\n  license: {\r\n    id: 'cboard.components.About.license',\r\n    defaultMessage: 'License'\r\n  },\r\n  resources: {\r\n    id: 'cboard.components.About.resources',\r\n    defaultMessage: 'Resources'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Link from '@material-ui/core/Link';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport messages from './About.messages';\r\nimport FullScreenDialog, {\r\n  FullScreenDialogContent\r\n} from '../../UI/FullScreenDialog';\r\n\r\nimport './About.css';\r\n\r\nAbout.propTypes = {\r\n  history: PropTypes.object.isRequired,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nfunction About({ history, onClose }) {\r\n  return (\r\n    <FullScreenDialog\r\n      open\r\n      title={<FormattedMessage {...messages.about} />}\r\n      onClose={history.goBack}\r\n    >\r\n      <Paper>\r\n        <FullScreenDialogContent>\r\n          <Typography variant=\"body1\">\r\n            <FormattedMessage {...messages.intro} />\r\n          </Typography>\r\n\r\n          <Typography variant=\"h5\">\r\n            <FormattedMessage {...messages.contributors} />\r\n          </Typography>\r\n          <Typography variant=\"body1\" component=\"div\">\r\n            <ul>\r\n              <li>\r\n                <Link\r\n                  href=\"https://twitter.com/amberleyjohanna\"\r\n                  target=\"_blank\"\r\n                >\r\n                  Amberley Romo\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://twitter.com/_arthurdenner\" target=\"_blank\">\r\n                  Arthur Denner\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://twitter.com/hwk73\" target=\"_blank\">\r\n                  Arijit Bhattacharya\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://github.com/BrendanFDMoore\" target=\"_blank\">\r\n                  Brendan Moore\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://twitter.com/jvuillermet\" target=\"_blank\">\r\n                  Jeremy Vuillermet\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://twitter.com/jquintozamora\" target=\"_blank\">\r\n                  Jose Quinto\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://github.com/martinbedouret\" target=\"_blank\">\r\n                  Martin Bedouret\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                <Link href=\"https://github.com/shayc\" target=\"_blank\">\r\n                  Shay Cojocaru\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n          <Typography variant=\"h5\">\r\n            <FormattedMessage {...messages.resources} />\r\n          </Typography>\r\n          <Typography variant=\"body1\" component=\"div\">\r\n            <ul>\r\n              <li>\r\n                <Link\r\n                  href=\"https://openassistive.org/awesome-assistivetech/\"\r\n                  target=\"_blank\"\r\n                >\r\n                  Awesome Assistivetech\r\n                </Link>{' '}\r\n                - A curated list of{' '}\r\n                <span role=\"img\" aria-label=\"cool\">\r\n                  😎\r\n                </span>{' '}\r\n                awesome Assistive Technology frameworks and tools to help you\r\n                develop your AT tool/system.\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n          <Typography variant=\"h5\">\r\n            <FormattedMessage {...messages.license} />\r\n          </Typography>\r\n          <Typography variant=\"body1\" component=\"div\">\r\n            <ul>\r\n              <li>\r\n                Code -{' '}\r\n                <Link\r\n                  href=\"https://github.com/shayc/cboard/blob/master/LICENSE\"\r\n                  target=\"_blank\"\r\n                >\r\n                  GPLv3\r\n                </Link>\r\n              </li>\r\n              <li>\r\n                Mulberry Symbols -{' '}\r\n                <Link\r\n                  href=\"https://creativecommons.org/licenses/by-sa/2.0/uk/\"\r\n                  target=\"_blank\"\r\n                >\r\n                  CC BY-SA\r\n                </Link>\r\n              </li>\r\n            </ul>\r\n          </Typography>\r\n        </FullScreenDialogContent>\r\n      </Paper>\r\n    </FullScreenDialog>\r\n  );\r\n}\r\n\r\nexport default About;\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  scanning: {\r\n    id: 'cboard.components.Settings.Scanning.scanning',\r\n    defaultMessage: 'Scanning'\r\n  },\r\n  enable: {\r\n    id: 'cboard.components.Settings.Scanning.enable',\r\n    defaultMessage: 'Enable'\r\n  },\r\n  enableSecondary: {\r\n    id: 'cboard.components.Settings.Scanning.enableSecondary',\r\n    defaultMessage: 'Start scanning boards immediately'\r\n  },\r\n  delay: {\r\n    id: 'cboard.components.Settings.Scanning.delay',\r\n    defaultMessage: 'Time delay'\r\n  },\r\n  delaySecondary: {\r\n    id: 'cboard.components.Settings.Scanning.delaySecondary',\r\n    defaultMessage: 'Time between two consecutive scanning highlights'\r\n  },\r\n  method: {\r\n    id: 'cboard.components.Settings.Scanning.method',\r\n    defaultMessage: 'Scan method'\r\n  },\r\n  methodSecondary: {\r\n    id: 'cboard.components.Settings.Scanning.methodSecondary',\r\n    defaultMessage: 'Method to be used for board exploration'\r\n  },\r\n  seconds: {\r\n    id: 'cboard.components.Settings.Scanning.seconds',\r\n    defaultMessage: '{value} seconds'\r\n  },\r\n  automatic: {\r\n    id: 'cboard.components.Settings.Scanning.automatic',\r\n    defaultMessage: 'Automatic'\r\n  },\r\n  manual: {\r\n    id: 'cboard.components.Settings.Scanning.manual',\r\n    defaultMessage: 'Manual'\r\n  },\r\n  scannerHowToDeactivate: {\r\n    id: 'cboard.components.Settings.Scanning.scannerHowToDeactivate',\r\n    defaultMessage: 'Press Escape 4 times to deactivate Scanner.'\r\n  },\r\n  scannerManualStrategy: {\r\n    id: 'cboard.components.Settings.Scanning.scannerManualStrategy',\r\n    defaultMessage:\r\n      'Scanner advances with space bar key, press enter to select an item.'\r\n  },\r\n  scannerAutomaticStrategy: {\r\n    id: 'cboard.components.Settings.Scanning.scannerAutomaticStrategy',\r\n    defaultMessage:\r\n      'Scanner will iterate over elements, press any key to select them.'\r\n  }\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Scanning.messages';\r\nimport {\r\n  SCANNING_METHOD_AUTOMATIC,\r\n  SCANNING_METHOD_MANUAL\r\n} from './Scanning.constants';\r\n\r\nimport './Scanning.css';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func,\r\n  updateScannerSettings: PropTypes.func\r\n};\r\n\r\nconst SCANNER_MESSAGES_KEYMAP = {\r\n  [SCANNING_METHOD_MANUAL]: messages.scannerManualStrategy,\r\n  [SCANNING_METHOD_AUTOMATIC]: messages.scannerAutomaticStrategy\r\n};\r\n\r\nconst DELAY_OPTIONS = [\r\n  {\r\n    value: 750,\r\n    label: 0.75\r\n  },\r\n  {\r\n    value: 1000,\r\n    label: 1\r\n  },\r\n  {\r\n    value: 2000,\r\n    label: 2\r\n  },\r\n  {\r\n    value: 3000,\r\n    label: 3\r\n  },\r\n  {\r\n    value: 5000,\r\n    label: 5\r\n  }\r\n];\r\n\r\nclass Scanning extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      ...props.scanningSettings\r\n    };\r\n  }\r\n\r\n  toggleScanner = () => {\r\n    this.setState({\r\n      active: !this.state.active\r\n    });\r\n  };\r\n\r\n  changeSelect = property => event => {\r\n    this.setState({\r\n      [property]: event.target.value\r\n    });\r\n  };\r\n\r\n  onSubmit = () => {\r\n    this.props.updateScannerSettings(this.state);\r\n  };\r\n\r\n  render() {\r\n    const { onClose } = this.props;\r\n    return (\r\n      <div className=\"Scanning\">\r\n        <FullScreenDialog\r\n          open\r\n          title={<FormattedMessage {...messages.scanning} />}\r\n          onClose={onClose}\r\n          onSubmit={this.onSubmit}\r\n        >\r\n          <Paper>\r\n            <List>\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Scanning__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.enable} />}\r\n                  secondary={<FormattedMessage {...messages.enableSecondary} />}\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    checked={this.state.active}\r\n                    onChange={this.toggleScanner}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Scanning__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.delay} />}\r\n                  secondary={<FormattedMessage {...messages.delaySecondary} />}\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Select\r\n                    value={this.state.delay}\r\n                    onChange={this.changeSelect('delay')}\r\n                    inputProps={{\r\n                      name: 'delay',\r\n                      id: 'scanning-delay'\r\n                    }}\r\n                  >\r\n                    {DELAY_OPTIONS.map(({ value, label }, i) => (\r\n                      <MenuItem key={i} value={value}>\r\n                        <FormattedMessage\r\n                          {...messages.seconds}\r\n                          values={{ value: label }}\r\n                        />\r\n                      </MenuItem>\r\n                    ))}\r\n                  </Select>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Scanning__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.method} />}\r\n                  secondary={<FormattedMessage {...messages.methodSecondary} />}\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Select\r\n                    value={this.state.strategy}\r\n                    onChange={this.changeSelect('strategy')}\r\n                    inputProps={{\r\n                      name: 'strategy',\r\n                      id: 'scanning-strategy'\r\n                    }}\r\n                  >\r\n                    <MenuItem value={SCANNING_METHOD_AUTOMATIC}>\r\n                      <FormattedMessage {...messages.automatic} />\r\n                    </MenuItem>\r\n                    <MenuItem value={SCANNING_METHOD_MANUAL}>\r\n                      <FormattedMessage {...messages.manual} />\r\n                    </MenuItem>\r\n                  </Select>\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n            </List>\r\n            <div className=\"Scanning__HelpText\">\r\n              <div>\r\n                <FormattedMessage\r\n                  {...SCANNER_MESSAGES_KEYMAP[this.state.strategy]}\r\n                />\r\n              </div>\r\n              <div>\r\n                <FormattedMessage {...messages.scannerHowToDeactivate} />\r\n              </div>\r\n            </div>\r\n          </Paper>\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nScanning.propTypes = propTypes;\r\n\r\nexport default Scanning;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport Scanning from './Scanning.component';\r\nimport { updateScannerSettings } from '../../../providers/ScannerProvider/ScannerProvider.actions';\r\nimport API from '../../../api';\r\n\r\nexport class ScanningContainer extends PureComponent {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  updateScannerSettings = async (scanningSettings) => {\r\n    try {\r\n      await API.updateSettings({ scanning: scanningSettings });\r\n    } catch (e) { }\r\n    this.props.updateScannerSettings(scanningSettings);\r\n  };\r\n\r\n  render() {\r\n    const { history, scanningSettings } = this.props;\r\n\r\n    return (\r\n      <Scanning\r\n        onClose={history.goBack}\r\n        updateScannerSettings={this.updateScannerSettings}\r\n        scanningSettings={scanningSettings}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nScanningContainer.props = {\r\n  history: PropTypes.object,\r\n  updateScannerSettings: PropTypes.func.isRequired,\r\n  scanningSettings: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = ({ scanner: scanningSettings }) => ({\r\n  scanningSettings\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  updateScannerSettings\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(ScanningContainer));\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  navigation: {\r\n    id: 'cboard.components.Settings.Navigation.navigation',\r\n    defaultMessage: 'Navigation & Buttons'\r\n  },\r\n  enable: {\r\n    id: 'cboard.components.Settings.Navigation.enable',\r\n    defaultMessage: 'Enable context aware back button'\r\n  },\r\n  enableSecondary: {\r\n    id: 'cboard.components.Settings.Navigation.enableSecondary',\r\n    defaultMessage: 'Shows big back buttons on top of the boards'\r\n  },\r\n  quickUnlock: {\r\n    id: 'cboard.components.Settings.Navigation.quickUnlock',\r\n    defaultMessage: 'Enable quick settings unlock'\r\n  },\r\n  quickUnlockSecondary: {\r\n    id: 'cboard.components.Settings.Navigation.quickUnlockSecondary',\r\n    defaultMessage: 'Unlocks the settings with a single click'\r\n  },\r\n  shareShow: {\r\n    id: 'cboard.components.Settings.Navigation.shareShow',\r\n    defaultMessage: 'Show the share phrase button'\r\n  },\r\n  shareShowSecondary: {\r\n    id: 'cboard.components.Settings.Navigation.shareShowSecondary',\r\n    defaultMessage:\r\n      'Show a share button (next to backspace button) that allow to share the selected symbols.'\r\n  },\r\n  outputRemove: {\r\n    id: 'cboard.components.Settings.Navigation.outputRemove',\r\n    defaultMessage: 'Remove symbols from the output bar'\r\n  },\r\n  outputRemoveSecondary: {\r\n    id: 'cboard.components.Settings.Navigation.outputRemoveSecondary',\r\n    defaultMessage: 'Shows a \"x\" buttton on each symbol in order to remove it'\r\n  },\r\n  vocalizeFolders: {\r\n    id: 'cboard.components.Settings.Navigation.vocalizeFolders',\r\n    defaultMessage: 'Enable folder vocalization'\r\n  },\r\n  vocalizeFoldersSecondary: {\r\n    id: 'cboard.components.Settings.Navigation.vocalizeFoldersSecondary',\r\n    defaultMessage: \"Reads a folder's name out loud when clicked\"\r\n  }\r\n});\r\n","import { defineMessages } from 'react-intl';\r\n\r\nexport default defineMessages({\r\n  resetTours: {\r\n    id: 'cboard.components.ResetToursItem.resetTours',\r\n    defaultMessage: 'Reset all help tours'\r\n  },\r\n  resetToursSecondary: {\r\n    id: 'cboard.components.ResetToursItem.resetToursSecondary',\r\n    defaultMessage: 'Enable all the help tours across Cboard again'\r\n  },\r\n  confirmDialog: {\r\n    id: 'cboard.components.ResetToursItem.confirmDialog',\r\n    defaultMessage: 'Are you sure you want to enable all help tours again?'\r\n  },\r\n  ok: {\r\n    id: 'cboard.components.ResetToursItem.ok',\r\n    defaultMessage: 'OK'\r\n  },\r\n  cancel: {\r\n    id: 'cboard.components.ResetToursItem.cancel',\r\n    defaultMessage: 'Cancel'\r\n  }\r\n});\r\n","import React, { useState } from 'react';\r\nimport { injectIntl, intlShape, FormattedMessage } from 'react-intl';\r\nimport PropTypes from 'prop-types';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport messages from './ResetToursItem.messages';\r\n\r\nconst propTypes = {\r\n  intl: intlShape.isRequired,\r\n  enableAllTours: PropTypes.func.isRequired\r\n};\r\n\r\nfunction ResetToursItem(props) {\r\n  const [openDialogToursState, setOpenDialogToursState] = useState(false);\r\n\r\n  const handleOnClickOk = () => {\r\n    props.enableAllTours();\r\n    handleClose();\r\n  };\r\n\r\n  const handleClickOpen = () => {\r\n    setOpenDialogToursState(true);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpenDialogToursState(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ListItem button={true} onClick={handleClickOpen}>\r\n        <ListItemText\r\n          className=\"Navigation__ListItemText\"\r\n          primary={<FormattedMessage {...messages.resetTours} />}\r\n          secondary={<FormattedMessage {...messages.resetToursSecondary} />}\r\n        />\r\n      </ListItem>\r\n      <Dialog\r\n        open={openDialogToursState}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"alert-dialog-title\"\r\n        aria-describedby=\"alert-dialog-description\"\r\n      >\r\n        <DialogTitle id=\"alert-dialog-title\">\r\n          <FormattedMessage {...messages.confirmDialog} />\r\n        </DialogTitle>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            <FormattedMessage {...messages.cancel} />\r\n          </Button>\r\n          <Button onClick={handleOnClickOk} color=\"primary\">\r\n            <FormattedMessage {...messages.ok} />\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n\r\nResetToursItem.propTypes = propTypes;\r\n\r\nexport default injectIntl(ResetToursItem);\r\n","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { enableAllTours } from '../../App/App.actions';\r\nimport ResetToursItem from './ResetToursItem.component';\r\n\r\nconst ResetToursItemContainer = props => <ResetToursItem {...props} />;\r\nconst mapStateToProps = () => ({});\r\n\r\nconst mapDispatchToProps = {\r\n  enableAllTours\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ResetToursItemContainer);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport Switch from '@material-ui/core/Switch';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport messages from './Navigation.messages';\r\n\r\nimport './Navigation.css';\r\nimport ResetToursItem from '../../UI/ResetToursItem';\r\n\r\nconst propTypes = {\r\n  /**\r\n   * Callback fired when clicking the back button\r\n   */\r\n  onClose: PropTypes.func,\r\n  updateNavigationSettings: PropTypes.func.isRequired,\r\n  navigationSettings: PropTypes.object.isRequired\r\n};\r\n\r\nclass Navigation extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      ...props.navigationSettings\r\n    };\r\n  }\r\n\r\n  toggleCABackButton = () => {\r\n    this.setState({\r\n      caBackButtonActive: !this.state.caBackButtonActive\r\n    });\r\n  };\r\n\r\n  toggleQuickUnlock = () => {\r\n    this.setState({\r\n      quickUnlockActive: !this.state.quickUnlockActive\r\n    });\r\n  };\r\n\r\n  toggleShareShow = () => {\r\n    this.setState({\r\n      shareShowActive: !this.state.shareShowActive\r\n    });\r\n  };\r\n\r\n  toggleRemoveOutput = () => {\r\n    this.setState({\r\n      removeOutputActive: !this.state.removeOutputActive\r\n    });\r\n  };\r\n\r\n  toggleVocalizeFolders = () => {\r\n    this.setState({\r\n      vocalizeFolders: !this.state.vocalizeFolders\r\n    });\r\n  };\r\n\r\n  onSubmit = () => {\r\n    this.props.updateNavigationSettings(this.state);\r\n  };\r\n\r\n  render() {\r\n    const { onClose } = this.props;\r\n    return (\r\n      <div className=\"Navigation\">\r\n        <FullScreenDialog\r\n          open\r\n          title={<FormattedMessage {...messages.navigation} />}\r\n          onClose={onClose}\r\n          onSubmit={this.onSubmit}\r\n        >\r\n          <Paper>\r\n            <List>\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Navigation__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.enable} />}\r\n                  secondary={<FormattedMessage {...messages.enableSecondary} />}\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    checked={this.state.caBackButtonActive}\r\n                    onChange={this.toggleCABackButton}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Display__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.shareShow} />}\r\n                  secondary={\r\n                    <FormattedMessage {...messages.shareShowSecondary} />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    checked={this.state.shareShowActive}\r\n                    onChange={this.toggleShareShow}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Navigation__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.outputRemove} />}\r\n                  secondary={\r\n                    <FormattedMessage {...messages.outputRemoveSecondary} />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    checked={this.state.removeOutputActive}\r\n                    onChange={this.toggleRemoveOutput}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ListItem disabled={true}>\r\n                <ListItemText\r\n                  className=\"Navigation__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.quickUnlock} />}\r\n                  secondary={\r\n                    <FormattedMessage {...messages.quickUnlockSecondary} />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    disabled={true}\r\n                    checked={this.state.quickUnlockActive}\r\n                    onChange={this.toggleQuickUnlock}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ListItem>\r\n                <ListItemText\r\n                  className=\"Navigation__ListItemText\"\r\n                  primary={<FormattedMessage {...messages.vocalizeFolders} />}\r\n                  secondary={\r\n                    <FormattedMessage {...messages.vocalizeFoldersSecondary} />\r\n                  }\r\n                />\r\n                <ListItemSecondaryAction>\r\n                  <Switch\r\n                    checked={this.state.vocalizeFolders}\r\n                    onChange={this.toggleVocalizeFolders}\r\n                    value=\"active\"\r\n                    color=\"secondary\"\r\n                  />\r\n                </ListItemSecondaryAction>\r\n              </ListItem>\r\n              <Divider />\r\n              <ResetToursItem />\r\n            </List>\r\n          </Paper>\r\n        </FullScreenDialog>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nNavigation.propTypes = propTypes;\r\n\r\nexport default Navigation;\r\n","import React, { PureComponent } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { updateNavigationSettings } from '../../App/App.actions';\r\nimport Navigation from './Navigation.component';\r\nimport API from '../../../api';\r\n\r\nexport class NavigationContainer extends PureComponent {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired\r\n  };\r\n\r\n  updateNavigationSettings = async navigationSettings => {\r\n    try {\r\n      await API.updateSettings({ navigation: navigationSettings });\r\n    } catch (e) {}\r\n    this.props.updateNavigationSettingsAction(navigationSettings);\r\n  };\r\n\r\n  render() {\r\n    const { history } = this.props;\r\n\r\n    return (\r\n      <Navigation\r\n        {...this.props}\r\n        onClose={history.goBack}\r\n        updateNavigationSettings={this.updateNavigationSettings}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nNavigationContainer.props = {\r\n  history: PropTypes.object,\r\n  updateNavigationSettings: PropTypes.func.isRequired,\r\n  navigationSettings: PropTypes.object.isRequired\r\n};\r\n\r\nconst mapStateToProps = ({ app: { navigationSettings } }) => ({\r\n  navigationSettings\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  updateNavigationSettingsAction: updateNavigationSettings\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(NavigationContainer));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage } from 'react-intl';\r\nimport ReactMarkdown from 'react-markdown';\r\nimport { connect } from 'react-redux';\r\nimport Paper from '@material-ui/core/Paper';\r\n\r\nimport FullScreenDialog from '../../UI/FullScreenDialog';\r\nimport { isCordova } from '../../../cordova-util';\r\nimport messages from '../Settings.messages';\r\nimport './Help.css';\r\n\r\nconst propTypes = {\r\n  history: PropTypes.object.isRequired,\r\n  onClose: PropTypes.func\r\n};\r\n\r\nclass Help extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      markdown: ''\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    let markdownPath = '';\r\n    try {\r\n      markdownPath = require(`../../../translations/help/${\r\n        this.props.language.lang\r\n      }.md`);\r\n    } catch (err) {\r\n      markdownPath = require(`../../../translations/help/en-US.md`);\r\n    } finally {\r\n      if (isCordova()) {\r\n        const req = new XMLHttpRequest();\r\n        req.onload = () => {\r\n          const text = req.responseText;\r\n          const utext = this.formatTextForCordova(text);\r\n          this.setState({ markdown: utext });\r\n        };\r\n        req.open('GET', markdownPath);\r\n        req.send();\r\n      } else {\r\n        fetch(markdownPath)\r\n          .then(response => {\r\n            return response.text();\r\n          })\r\n          .then(text => {\r\n            this.setState({ markdown: text });\r\n          });\r\n      }\r\n    }\r\n  }\r\n\r\n  formatTextForCordova(text) {\r\n    //remove table of content\r\n    const searchTerm = '##';\r\n    const indexOfFirst = text.indexOf(searchTerm);\r\n    const tableOfContents = text.substring(\r\n      indexOfFirst,\r\n      text.indexOf(searchTerm, indexOfFirst + 1)\r\n    );\r\n    const textNoTableOfContents = text.replace(tableOfContents, '');\r\n    //update path for images\r\n    const searchRegExp = /\\/images/gi;\r\n    const replaceWith = './images';\r\n    return textNoTableOfContents.replace(searchRegExp, replaceWith);\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    let hash = window.location.hash.replace('#', '');\r\n    if (hash) {\r\n      let node = window.document.getElementsByName(hash)[0];\r\n      if (node) {\r\n        node.scrollIntoView();\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <FullScreenDialog\r\n        open\r\n        title={<FormattedMessage {...messages.userHelp} />}\r\n        onClose={this.props.history.goBack}\r\n      >\r\n        <Paper aria-label=\"user-help\" className=\"Help\">\r\n          <ReactMarkdown source={this.state.markdown} escapeHtml={false} />\r\n        </Paper>\r\n      </FullScreenDialog>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  language: state.language\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nHelp.propTypes = propTypes;\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(Help);\r\n","import React, { Fragment } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport Settings from './Settings.container';\r\nimport People from './People';\r\nimport Language from './Language';\r\nimport Speech from './Speech';\r\nimport Export from './Export';\r\nimport Import from './Import';\r\nimport Display from './Display';\r\nimport About from './About';\r\nimport Scanning from './Scanning';\r\nimport Navigation from './Navigation';\r\nimport Help from './Help';\r\n\r\nconst SettingsWrapper = ({ match }) => (\r\n  <Fragment>\r\n    <Route exact component={Settings} />\r\n    <Switch>\r\n      <Route path={`${match.url}/people`} component={People} />\r\n      <Route path={`${match.url}/language`} component={Language} />\r\n      <Route path={`${match.url}/speech`} component={Speech} />\r\n      <Route path={`${match.url}/export`} component={Export} />\r\n      <Route path={`${match.url}/import`} component={Import} />\r\n      <Route path={`${match.url}/display`} component={Display} />\r\n      <Route path={`${match.url}/about`} component={About} />\r\n      <Route path={`${match.url}/help`} component={Help} />\r\n      <Route path={`${match.url}/scanning`} component={Scanning} />\r\n      <Route path={`${match.url}/navigation`} component={Navigation} />\r\n    </Switch>\r\n  </Fragment>\r\n);\r\n\r\nexport default SettingsWrapper;\r\n","import React from 'react';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport { merge } from 'lodash';\r\n\r\nconst defaultOption = {\r\n  grid: {\r\n    top: 16,\r\n    left: 36,\r\n    right: 16,\r\n    bottom: 32\r\n  },\r\n  legend: {},\r\n  tooltip: {\r\n    show: true,\r\n    trigger: 'axis',\r\n\r\n    axisPointer: {\r\n      type: 'cross',\r\n      lineStyle: {\r\n        opacity: 0\r\n      }\r\n    },\r\n    crossStyle: {\r\n      color: '#000'\r\n    }\r\n  },\r\n  series: [\r\n    {\r\n      areaStyle: {},\r\n      smooth: true,\r\n      lineStyle: {\r\n        width: 2,\r\n        color: '#fff'\r\n      }\r\n    }\r\n  ],\r\n  xAxis: {\r\n    show: true,\r\n    type: 'category',\r\n    showGrid: false,\r\n    boundaryGap: false,\r\n    axisLabel: {\r\n      color: '#ccc',\r\n      margin: 20\r\n    },\r\n    axisLine: {\r\n      show: false\r\n    },\r\n    axisTick: {\r\n      show: false\r\n    }\r\n  },\r\n  yAxis: {\r\n    type: 'value',\r\n    min: 10,\r\n    max: 60,\r\n    axisLabel: {\r\n      color: '#ccc',\r\n      margin: 20,\r\n      fontSize: 13,\r\n      fontFamily: 'roboto'\r\n    },\r\n    splitLine: {\r\n      show: true,\r\n      lineStyle: {\r\n        color: 'rgba(255, 255, 255, .1)'\r\n      }\r\n    },\r\n\r\n    axisLine: {\r\n      show: false\r\n    },\r\n    axisTick: {\r\n      show: false\r\n    }\r\n  },\r\n  color: [\r\n    {\r\n      type: 'linear',\r\n      x: 0,\r\n      y: 0,\r\n      x2: 0,\r\n      y2: 1,\r\n      colorStops: [\r\n        {\r\n          offset: 0,\r\n          color: 'rgba(255,255,255,0.3)' // color at 0% position\r\n        },\r\n        {\r\n          offset: 1,\r\n          color: 'rgba(255,255,255,0)' // color at 100% position\r\n        }\r\n      ],\r\n      global: false // false by default\r\n    }\r\n  ]\r\n};\r\n\r\nconst ModifiedAreaChart = ({ height, option }) => {\r\n  return (\r\n    <ReactEcharts\r\n      style={{ height: height }}\r\n      option={merge({}, defaultOption, option)}\r\n    />\r\n  );\r\n};\r\n\r\nexport default ModifiedAreaChart;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Grid, Card, IconButton, Tooltip } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport SpellCheckIcon from '@material-ui/icons/Spellcheck';\r\nimport ViewModuleIcon from '@material-ui/icons/ViewModule';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\nimport ArrowRightAltIcon from '@material-ui/icons/ArrowRightAlt';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\n\r\nimport './StatCards.css';\r\n\r\n\r\nconst propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  onDetailsClick: PropTypes.func.isRequired,\r\n  data: PropTypes.object\r\n}\r\n\r\nconst styles = theme => ({\r\n  icon: {\r\n    fontSize: '44px',\r\n    opacity: 0.6,\r\n    color: theme.palette.primary.main\r\n  }\r\n});\r\n\r\nconst StatCards = ({ classes, data, onDetailsClick }) => {\r\n  return (\r\n    <div className=\"StatCards\">\r\n      <Grid container spacing={3} className=\"StatCards__Container\">\r\n        <Grid item xs={12} md={6}>\r\n          <Card className=\"StatCards__Card\" elevation={3}>\r\n            <div className=\"StatCards__Card__Items\">\r\n              <SpellCheckIcon className={classes.icon} />\r\n              <div className=\"StatCards__Card__Items__Text\">\r\n                <small className=\"StatCards__Card__Items__Text__Label\">\r\n                {data.words['title']}\r\n                </small>\r\n                <h6 className=\"StatCards__Card__Items__Text__Value\">\r\n                  {data.words['total']}\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <Tooltip title=\"View Details\" placement=\"top\">\r\n              <IconButton onClick={onDetailsClick('words')}>\r\n                <ArrowRightAltIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <Card className=\"StatCards__Card\" elevation={3}>\r\n            <div className=\"StatCards__Card__Items\">\r\n              <RecordVoiceOverIcon className={classes.icon} />\r\n              <div className=\"StatCards__Card__Items__Text\">\r\n                <small className=\"StatCards__Card__Items__Text__Label\">\r\n                {data.phrases['title']}\r\n                </small>\r\n                <h6 className=\"StatCards__Card__Items__Text__Value\">\r\n                  {data.phrases['total']}\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <Tooltip title=\"View Details\" placement=\"top\">\r\n              <IconButton onClick={onDetailsClick('phrases')}>\r\n                <ArrowRightAltIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <Card className=\"StatCards__Card\" elevation={3}>\r\n            <div className=\"StatCards__Card__Items\">\r\n              <ViewModuleIcon className={classes.icon} />\r\n              <div className=\"StatCards__Card__Items__Text\">\r\n                <small className=\"StatCards__Card__Items__Text__Label\">\r\n                {data.boards['title']}\r\n                </small>\r\n                <h6 className=\"StatCards__Card__Items__Text__Value\">\r\n                  {data.boards['total']}\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <Tooltip title=\"View Details\" placement=\"top\">\r\n              <IconButton onClick={onDetailsClick('boards')}>\r\n                <ArrowRightAltIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Card>\r\n        </Grid>\r\n        <Grid item xs={12} md={6}>\r\n          <Card className=\"StatCards__Card\" elevation={3}>\r\n            <div className=\"StatCards__Card__Items\">\r\n              <EditIcon className={classes.icon} />\r\n              <div className=\"StatCards__Card__Items__Text\">\r\n                <small className=\"StatCards__Card__Items__Text__Label\">\r\n                {data.editions['title']}\r\n                </small>\r\n                <h6 className=\"StatCards__Card__Items__Text__Value\">\r\n                  {data.editions['total']}\r\n                </h6>\r\n              </div>\r\n            </div>\r\n            <Tooltip title=\"View Details\" placement=\"top\">\r\n              <IconButton onClick={onDetailsClick('editions')}>\r\n                <ArrowRightAltIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Card>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n};\r\n\r\nStatCards.propTypes = propTypes;\r\nexport default withStyles(styles, { withTheme: true })(StatCards);\r\n","import React from 'react';\r\nimport { Grid, Card, Fab } from '@material-ui/core';\r\nimport NavigationIcon from '@material-ui/icons/Navigation';\r\nimport RecordVoiceOverIcon from '@material-ui/icons/RecordVoiceOver';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport './StatCards2.css';\r\n\r\nconst StatCards2 = ({ categoryTotals }) => {\r\n  return (\r\n    <Grid\r\n      container\r\n      spacing={2}\r\n      direction=\"column\"\r\n      className=\"StatCards2__Container\"\r\n    >\r\n      <Grid item>\r\n        <Card elevation={3} className=\"StatCards2__Card\">\r\n          <div className=\"StatCards2__Card__Items\">\r\n            <Fab size=\"medium\" color=\"primary\">\r\n              <NavigationIcon />\r\n            </Fab>\r\n            <h4 className=\"StatCards2__Card__Items__text\">\r\n            {categoryTotals.navigation.title}\r\n            </h4>\r\n          </div>\r\n          <h1 className=\"StatCards2__Card__Value\">\r\n            {categoryTotals.navigation.value}\r\n          </h1>\r\n        </Card>\r\n      </Grid>\r\n      <Grid item>\r\n        <Card elevation={3} className=\"StatCards2__Card\">\r\n          <div className=\"StatCards2__Card__Items\">\r\n            <Fab size=\"medium\" color=\"primary\">\r\n              <RecordVoiceOverIcon />\r\n            </Fab>\r\n            <h4 className=\"StatCards2__Card__Items__text\">\r\n            {categoryTotals.speech.title}\r\n            </h4>\r\n          </div>\r\n          <h1 className=\"StatCards2__Card__Value\">\r\n          {categoryTotals.speech.value}\r\n          </h1>\r\n        </Card>\r\n      </Grid>\r\n      <Grid item>\r\n        <Card elevation={3} className=\"StatCards2__Card\">\r\n          <div className=\"StatCards2__Card__Items\">\r\n            <Fab size=\"medium\" color=\"primary\">\r\n              <EditIcon />\r\n            </Fab>\r\n            <h4 className=\"StatCards2__Card__Items__text\">\r\n            {categoryTotals.edit.title}\r\n            </h4>\r\n          </div>\r\n          <h1 className=\"StatCards2__Card__Value\">\r\n          {categoryTotals.edit.value}\r\n          </h1>\r\n        </Card>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default StatCards2;\r\n","import React, { useState } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { withStyles, makeStyles } from '@material-ui/core/styles';\r\nimport {\r\n  IconButton,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody\r\n} from '@material-ui/core';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport VolumeUpIcon from '@material-ui/icons/VolumeUp';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport {\r\n  speak,\r\n  cancelSpeech\r\n} from '../../../providers/SpeechProvider/SpeechProvider.actions';\r\nimport './StyledTable.css';\r\n\r\nconst propTypes = {\r\n  boards: PropTypes.array.isRequired,\r\n  speak: PropTypes.func.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  tableHead: PropTypes.array.isRequired,\r\n  isDense: PropTypes.bool\r\n}\r\n\r\nconst StyledTableCell = withStyles((theme) => ({\r\n  head: {\r\n    backgroundColor: theme.palette.primary.main,\r\n    color: theme.palette.common.white,\r\n  },\r\n  body: {\r\n    fontSize: 13,\r\n    paddingRight: '6px',\r\n    whiteSpace: 'normal',\r\n    overflowWrap: 'break-word',\r\n    wordWrap: 'break-word'\r\n  },\r\n}))(TableCell);\r\n\r\nconst StyledTableRow = withStyles((theme) => ({\r\n  root: {\r\n    '&:nth-of-type(odd)': {\r\n      backgroundColor: theme.palette.action.hover,\r\n    },\r\n  },\r\n}))(TableRow);\r\n\r\nconst useStyles = makeStyles({\r\n  table: {\r\n    minWidth: 300,\r\n  },\r\n});\r\n\r\nconst StyledTable = ({ data, tableHead, isDense, speak, boards }) => {\r\n  const classes = useStyles();\r\n  const [imageView, setImageView] = useState(false);\r\n\r\n  const getTileFromLabel = (label) => {\r\n    for (let i = 0; i < boards.length; i++) {\r\n      for (let j = 0; j < boards[i].tiles.length; j++) {\r\n        const tile = boards[i].tiles[j];\r\n        if (\r\n          (tile.label &&\r\n            tile.label.trim().toLowerCase() === label.trim().toLowerCase()) ||\r\n          (tile.labelKey &&\r\n            tile.labelKey\r\n              .split()[tile.labelKey.split().length - 1].trim()\r\n              .toLowerCase() === label\r\n                .trim()\r\n                .replace(' ', '')\r\n                .toLowerCase())\r\n        ) {\r\n          return tile;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  };\r\n\r\n  const handleImageViewClose = () => {\r\n    setImageView(false);\r\n  }\r\n  const handleRowAction = (item = {}) => {\r\n    if (item.type === 'sound') {\r\n      speak(item.name || '');\r\n    }\r\n    else if (item.type === 'view') {\r\n      const tile = getTileFromLabel(item.name);\r\n      if (tile) {\r\n        setImageView({ ...tile, name: item.name });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"StyledTable\">\r\n      <div className=\"StyledTable__Container\">\r\n        {!imageView && (\r\n          <Table className=\"StyledTable__Table\" size={isDense ? 'small' : 'medium'}>\r\n            <TableHead>\r\n              <TableRow key=\"headRow\">\r\n                {tableHead && tableHead.length > 0 && tableHead.map((item, index) => (\r\n                  <StyledTableCell\r\n                    key={item}\r\n                    colSpan={index === 0 ? 3 : 0}\r\n                    align={index > 0 ? 'right' : 'left'}>\r\n                    {item}\r\n                  </StyledTableCell>\r\n                ))}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {data && data.length > 0 && data.map((item, index) => (\r\n                <StyledTableRow key={item.name}>\r\n                  <StyledTableCell colSpan=\"3\" component=\"th\" scope=\"row\">\r\n                    <div className=\"StyledTable__Table__StyledTableCell__Items\">\r\n                      {item.name}\r\n                    </div>\r\n                  </StyledTableCell>\r\n                  <StyledTableCell align=\"right\">\r\n                    {item.total > 999\r\n                      ? (item.total / 1000).toFixed(1) + 'k'\r\n                      : item.total}\r\n                  </StyledTableCell>\r\n                  <StyledTableCell align=\"right\">\r\n                    <IconButton\r\n                      className={classes.root}\r\n                      onClick={() => handleRowAction(item)}\r\n                    >\r\n                      {item.type === 'view'\r\n                        ? <VisibilityIcon color=\"secondary\" />\r\n                        : <VolumeUpIcon color=\"secondary\" />\r\n                      }\r\n                    </IconButton>\r\n                  </StyledTableCell>\r\n                </StyledTableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>)}\r\n        {imageView && (\r\n          <div className=\"StyledTable__ImageView\">\r\n            <IconButton onClick={handleImageViewClose}>\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <img alt={imageView.name} src={imageView.image} />\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nStyledTable.propTypes = propTypes;\r\n\r\nconst mapStateToProps = state => ({\r\n  boards: state.board.boards\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  speak,\r\n  cancelSpeech\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(StyledTable);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Card } from '@material-ui/core';\r\nimport StyledTable from '../StyledTable';\r\nimport './TableCard.css';\r\n\r\nconst propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  data: PropTypes.array.isRequired,\r\n  tableHead: PropTypes.array.isRequired,\r\n}\r\n\r\nconst TableCard = ({ data, tableHead, title }) => {\r\n\r\n  return (\r\n    <Card elevation={3} className=\"TableCard\">\r\n      <div className=\"TableCard__Title\">{title}</div>\r\n      <StyledTable isDense={true} data={data} tableHead={tableHead} />\r\n    </Card>\r\n  );\r\n};\r\n\r\nTableCard.propTypes = propTypes;\r\n\r\nexport default TableCard;\r\n","import React from 'react';\r\nimport ReactEcharts from 'echarts-for-react';\r\nimport { withStyles } from '@material-ui/styles';\r\nimport Card from '@material-ui/core/Card';\r\nimport './Doughnut.css';\r\n\r\nconst DoughnutChart = ({ data, title, height, color = [], theme }) => {\r\n  const option = {\r\n    legend: {\r\n      show: true,\r\n      itemGap: 20,\r\n      icon: 'circle',\r\n      bottom: 0,\r\n      textStyle: {\r\n        color: theme.palette.text.secondary,\r\n        fontSize: 13,\r\n        fontFamily: 'Helvetica'\r\n      }\r\n    },\r\n    tooltip: {\r\n      show: false,\r\n      trigger: 'item',\r\n      formatter: '{a} <br/>{b}: {c} ({d}%)'\r\n    },\r\n    xAxis: [\r\n      {\r\n        axisLine: {\r\n          show: false\r\n        },\r\n        splitLine: {\r\n          show: false\r\n        }\r\n      }\r\n    ],\r\n    yAxis: [\r\n      {\r\n        axisLine: {\r\n          show: false\r\n        },\r\n        splitLine: {\r\n          show: false\r\n        }\r\n      }\r\n    ],\r\n    series: [\r\n      {\r\n        name: title,\r\n        type: 'pie',\r\n        radius: ['45%', '72.55%'],\r\n        center: ['50%', '50%'],\r\n        avoidLabelOverlap: false,\r\n        hoverOffset: 5,\r\n        stillShowZeroSum: false,\r\n        label: {\r\n          normal: {\r\n            show: false,\r\n            position: 'center', // shows the description data to center, turn off to show in right side\r\n            textStyle: {\r\n              color: theme.palette.text.secondary,\r\n              fontSize: 13,\r\n              fontFamily: 'Helvetica'\r\n            },\r\n            formatter: '{a}'\r\n          },\r\n          emphasis: {\r\n            show: true,\r\n            textStyle: {\r\n              fontSize: '14',\r\n              fontWeight: 'normal'\r\n              // color: \"rgba(15, 21, 77, 1)\"\r\n            },\r\n            formatter: '{b} \\n{c} ({d}%)'\r\n          }\r\n        },\r\n        labelLine: {\r\n          normal: {\r\n            show: false\r\n          }\r\n        },\r\n        data: data,\r\n        itemStyle: {\r\n          emphasis: {\r\n            shadowBlur: 10,\r\n            shadowOffsetX: 0,\r\n            shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n          }\r\n        }\r\n      }\r\n    ]\r\n  };\r\n\r\n  return (\r\n    <Card className=\"Doughnut__Card\">\r\n      <div className=\"Doughnut__Card__Title\">{title}</div>\r\n      <ReactEcharts\r\n        style={{ height: height }}\r\n        option={{\r\n          ...option,\r\n          color: [...color]\r\n        }}\r\n      />\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default withStyles({}, { withTheme: true })(DoughnutChart);\r\n","import React from 'react';\r\nimport Card from '@material-ui/core/Card';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\n\r\nimport './Barchart.css';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst Barchart = ({ data, title }) => {\r\n  let max = 0;\r\n  if (data && data[0]) {\r\n    max = data[0].total;\r\n  }\r\n  return (\r\n    <div>\r\n      <Card className=\"Barchart__Card\">\r\n        <div className=\"Barchart__Card__Title\">{title}</div>\r\n        <Grid container direction=\"column\" spacing={3}>\r\n          {data.map(board => {\r\n            return (\r\n              <Grid className=\"Barchart__Item__Container\" item key={board.name}>\r\n                <Typography className=\"Barchart__Item__Name\">\r\n                  {board.name}\r\n                </Typography>\r\n                <div className=\"Barchart__Bar__Container\">\r\n                  <LinearProgress\r\n                    className=\"Barchart__Bar\"\r\n                    variant=\"determinate\"\r\n                    value={Math.ceil((board.total / max) * 100)}\r\n                  />\r\n                  <Typography>{board.total}</Typography>\r\n                </div>\r\n              </Grid>\r\n            );\r\n          })}\r\n        </Grid>\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Barchart;\r\n","import React, { PureComponent, Fragment } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { FormattedMessage, injectIntl, intlShape } from 'react-intl';\r\nimport moment from 'moment';\r\nimport { Grid } from '@material-ui/core';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport Select from '@material-ui/core/Select';\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport Button from '@material-ui/core/Button';\r\nimport Slide from '@material-ui/core/Slide';\r\n\r\nimport messages from './Analytics.messages';\r\nimport FullScreenDialog from '../UI/FullScreenDialog';\r\nimport ModifiedAreaChart from '../UI/ModifiedAreaChart';\r\nimport StatCards from '../UI/StatCards';\r\nimport StatCards2 from '../UI/StatCards2';\r\nimport TableCard from '../UI/TableCard';\r\nimport DoughnutChart from '../UI/Doughnut';\r\nimport './Analytics.css';\r\nimport Barchart from '../UI/Barchart';\r\nimport StyledTable from '../UI/StyledTable';\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n});\r\n\r\nconst propTypes = {\r\n  intl: intlShape.isRequired,\r\n  classes: PropTypes.object.isRequired,\r\n  onDaysChange: PropTypes.func.isRequired,\r\n  days: PropTypes.number.isRequired,\r\n  isFetching: PropTypes.bool.isRequired,\r\n  isLogged: PropTypes.bool.isRequired,\r\n  logout: PropTypes.func.isRequired,\r\n  user: PropTypes.object.isRequired,\r\n  symbolSources: PropTypes.array.isRequired,\r\n  totals: PropTypes.object.isRequired,\r\n  categoryTotals: PropTypes.object.isRequired,\r\n  usage: PropTypes.object.isRequired,\r\n  topUsed: PropTypes.object.isRequired\r\n};\r\n\r\nconst styles = theme => ({\r\n  root: {\r\n    color: 'white',\r\n    padding: '0px'\r\n  },\r\n});\r\n\r\nexport class Analytics extends PureComponent {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      openDetailsDialog: false,\r\n      detailsData: []\r\n    };\r\n  }\r\n\r\n  handleUserHelpClick = () => {\r\n    window.open('https://www.cboard.io/help', '_blank');\r\n  };\r\n\r\n  handleGoBack = () => {\r\n    const { history } = this.props;\r\n    history.replace('/');\r\n  };\r\n\r\n  handleDaysChange = event => {\r\n    this.props.onDaysChange(event.target.value);\r\n  };\r\n\r\n  handleDetailsDialogOpen = name => event => {\r\n    switch (name) {\r\n      case 'boards':\r\n        this.setState({ detailsData: this.props.totals.boards['rows'] });\r\n        break;\r\n      case 'words':\r\n        this.setState({ detailsData: this.props.totals.words['rows'] });\r\n        break;\r\n      case 'phrases':\r\n        this.setState({ detailsData: this.props.totals.phrases['rows'] });\r\n        break;\r\n      case 'editions':\r\n        this.setState({ detailsData: this.props.totals.editions['rows'] });\r\n        break;\r\n      default:\r\n        this.setState({ detailsData: [] });\r\n        break;\r\n    }\r\n    this.setState({\r\n      openDetailsDialog: true\r\n    })\r\n  };\r\n\r\n  getDates = range => {\r\n    const days = [];\r\n    const dateEnd = moment();\r\n    const dateStart = moment().subtract(range, 'days');\r\n    while (dateEnd.diff(dateStart, 'days') >= 0) {\r\n      days.push(dateStart.format('DD/MM'));\r\n      dateStart.add(1, 'days');\r\n    }\r\n    return days;\r\n  };\r\n\r\n  handleDialogClose() {\r\n    this.setState({\r\n      openDetailsDialog: false\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      intl,\r\n      classes,\r\n      theme,\r\n      usage,\r\n      symbolSources,\r\n      topUsed,\r\n      days,\r\n      totals,\r\n      categoryTotals,\r\n      isFetching\r\n    } = this.props;\r\n    const tablesHead = [\r\n      intl.formatMessage(messages.name),\r\n      intl.formatMessage(messages.timesClicked),\r\n      intl.formatMessage(messages.action)\r\n    ];\r\n    return (\r\n      <FullScreenDialog\r\n        className=\"Analytics\"\r\n        open\r\n        title={<FormattedMessage {...messages.analytics} />}\r\n        onClose={this.handleGoBack}\r\n        fullWidth={true}\r\n      >\r\n        <Fragment>\r\n          <div className=\"Analytics__Graph\">\r\n            <Grid\r\n              container\r\n              direction=\"row\"\r\n              className=\"Analytics__Graph__Select\">\r\n              <Grid item className=\"Analytics__Graph__Select__Item\">\r\n                <FormControl variant=\"outlined\">\r\n                  <Select\r\n                    className={classes.root}\r\n                    labelId=\"range-select-label\"\r\n                    id=\"range-select\"\r\n                    autoWidth={false}\r\n                    onChange={this.handleDaysChange}\r\n                    value={days}\r\n                  >\r\n                    <MenuItem value={10}>{intl.formatMessage(messages.tenDaysUsage)}</MenuItem>\r\n                    <MenuItem value={20}>{intl.formatMessage(messages.twentyDaysUsage)}</MenuItem>\r\n                    <MenuItem value={30}>{intl.formatMessage(messages.thirtyDaysUsage)}</MenuItem>\r\n                    <MenuItem value={60}>{intl.formatMessage(messages.sixtyDaysUsage)}</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              <Grid item className=\"Analytics__Graph__Select__Item\">\r\n                {isFetching && (<CircularProgress size={30} thickness={4} className={classes.root} />)}\r\n              </Grid>\r\n            </Grid>\r\n            <ModifiedAreaChart\r\n              height=\"200px\"\r\n              option={{\r\n                series: [\r\n                  {\r\n                    data: usage.data,\r\n                    type: 'line'\r\n                  }\r\n                ],\r\n                xAxis: {\r\n                  data: this.getDates(days)\r\n                },\r\n                yAxis: {\r\n                  max: usage.max,\r\n                  min: usage.min,\r\n                  offset: -13\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n          <div className=\"Analytics__Metrics\">\r\n            <Grid container spacing={3}>\r\n              <Grid item lg={8} md={8} sm={12} xs={12}>\r\n                <StatCards onDetailsClick={this.handleDetailsDialogOpen.bind(this)} data={totals} />\r\n                <TableCard\r\n                  data={topUsed.symbols}\r\n                  tableHead={tablesHead}\r\n                  title={intl.formatMessage(messages.topUsedButtons)}\r\n                />\r\n              </Grid>\r\n              <Grid item lg={4} md={4} sm={12} xs={12}>\r\n                <DoughnutChart\r\n                  data={symbolSources}\r\n                  title={intl.formatMessage(messages.symbolSources)}\r\n                  height=\"300px\"\r\n                  color={[\r\n                    theme.palette.primary.dark,\r\n                    theme.palette.primary.main,\r\n                    theme.palette.primary.light\r\n                  ]}\r\n                />\r\n                <StatCards2 categoryTotals={categoryTotals} />\r\n                <Barchart\r\n                  data={topUsed.boards}\r\n                  title={intl.formatMessage(messages.mostUsedBoards)}\r\n                />\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n          <Dialog\r\n            onClose={this.handleDialogClose.bind(this)}\r\n            aria-labelledby=\"details-dialog\"\r\n            open={this.state.openDetailsDialog}\r\n            TransitionComponent={Transition}\r\n            aria-describedby=\"details-desc\"\r\n          >\r\n            <DialogContent className={classes.root}>\r\n              <DialogContentText id=\"details-dialog-desc\">\r\n              </DialogContentText>\r\n              <StyledTable data={this.state.detailsData} tableHead={tablesHead} isDense={true} />\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button\r\n                onClick={this.handleDialogClose.bind(this)}\r\n                color=\"primary\"\r\n              >\r\n                {intl.formatMessage(messages.close)}\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n        </Fragment>\r\n      </FullScreenDialog>\r\n    );\r\n  }\r\n}\r\n\r\nAnalytics.propTypes = propTypes;\r\n\r\nexport default withStyles(styles, { withTheme: true })(injectIntl(Analytics));\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { isArray } from 'lodash';\r\n\r\nimport AnalyticsComponent from './Analytics.component';\r\nimport { logout } from '../Account/Login/Login.actions';\r\nimport { getUser, isLogged } from '../App/App.selectors';\r\nimport { showNotification } from '../Notifications/Notifications.actions';\r\nimport API from '../../api';\r\nimport messages from './Analytics.messages';\r\nimport { isCordova } from '../../cordova-util';\r\n\r\nexport class AnalyticsContainer extends Component {\r\n  static propTypes = {\r\n    intl: intlShape.isRequired,\r\n    isLogged: PropTypes.bool.isRequired,\r\n    user: PropTypes.object.isRequired,\r\n    boards: PropTypes.array.isRequired,\r\n    logout: PropTypes.func.isRequired,\r\n    showNotification: PropTypes.func.isRequired\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      days: 30,\r\n      isFetching: false,\r\n      usage: {\r\n        max: 100,\r\n        min: 0,\r\n        data: Array.from(Array(30), () => 0)\r\n      },\r\n      totals: {\r\n        words: {\r\n          title: props.intl.formatMessage(messages.totalWords)\r\n        },\r\n        phrases: {\r\n          title: props.intl.formatMessage(messages.totalPhrases)\r\n        },\r\n        boards: {\r\n          title: props.intl.formatMessage(messages.boardsUsed)\r\n        },\r\n        editions: {\r\n          title: props.intl.formatMessage(messages.tilesEdited)\r\n        }\r\n      },\r\n      categoryTotals: {\r\n        navigation: {\r\n          value: 0,\r\n          title: props.intl.formatMessage(messages.navigationEvents)\r\n        },\r\n        speech: {\r\n          value: 0,\r\n          title: props.intl.formatMessage(messages.speechEvents)\r\n        },\r\n        edit: {\r\n          value: 0,\r\n          title: props.intl.formatMessage(messages.editingEvents)\r\n        }\r\n      },\r\n      topUsed: { symbols: [], boards: [] }\r\n    };\r\n  }\r\n\r\n  clientId = '';\r\n  timerId = '';\r\n\r\n  async componentDidMount() {\r\n    const { intl, showNotification } = this.props;\r\n    this.setState({ isFetching: true });\r\n    try {\r\n      this.clientId = await this.getGaClientId();\r\n      const totals = await this.getTotals(this.state.days);\r\n      const usage = await this.getUsage(this.state.days);\r\n      const categoryTotals = await this.getCategoryTotals(this.state.days);\r\n      const topUsed = this.getTopUsed(totals);\r\n      this.setState({\r\n        totals,\r\n        categoryTotals,\r\n        usage,\r\n        topUsed,\r\n        isFetching: false\r\n      });\r\n    } catch (err) {\r\n      this.setState({ isFetching: false });\r\n      showNotification(intl.formatMessage(messages.loadingError));\r\n      console.log(err.message);\r\n    }\r\n  }\r\n\r\n  getSymbolSources() {\r\n    try {\r\n      const { boards } = this.props;\r\n      const images = boards\r\n        .map(board => {\r\n          return isArray(board.tiles)\r\n            ? board.tiles.map(tile => (tile ? tile.image : 'invalid'))\r\n            : [];\r\n        })\r\n        .reduce(\r\n          (accumulator, currentValue) => accumulator.concat(currentValue),\r\n          []\r\n        );\r\n      const sources = ['arasaac', 'mulberry', 'cboard', 'globalsymbols'];\r\n      const summary = images.reduce(function(all, image) {\r\n        sources.forEach(source => {\r\n          try {\r\n            if (image.match(source)) {\r\n              if (source in all) {\r\n                all[source]++;\r\n              } else {\r\n                all[source] = 1;\r\n              }\r\n            }\r\n          } catch (err) {\r\n            //just skip the image in counting\r\n          }\r\n        });\r\n        return all;\r\n      }, {});\r\n      const summaryData = Object.entries(summary).map(([key, value]) => {\r\n        return {\r\n          value: value,\r\n          name: key\r\n        };\r\n      });\r\n      return summaryData;\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      return [{ value: 0, name: 'No data' }];\r\n    }\r\n  }\r\n\r\n  getGaClientIdFromCookie = () => {\r\n    var nameEQ = '_ga=';\r\n    var ca = document.cookie.split(';');\r\n    for (var i = 0; i < ca.length; i++) {\r\n      var c = ca[i];\r\n      while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n      if (c.indexOf(nameEQ) === 0)\r\n        return c.substring(nameEQ.length + 6, c.length);\r\n    }\r\n    return null;\r\n  };\r\n\r\n  getGaClientId = async () => {\r\n    return new Promise((resolve, reject) => {\r\n      this.timerId = setTimeout(() => {\r\n        if (isCordova()) {\r\n          resolve(this.getGaClientIdFromCookie());\r\n        } else if (\r\n          typeof window.ga !== 'undefined' &&\r\n          typeof window.ga.getAll === 'function' &&\r\n          typeof window.ga.getAll()[0] !== 'undefined' &&\r\n          typeof window.ga.getAll()[0].get('clientId') !== 'undefined'\r\n        ) {\r\n          resolve(window.ga.getAll()[0].get('clientId'));\r\n        } else {\r\n          reject(\r\n            new Error({ message: 'Google analytics client id not found' })\r\n          );\r\n        }\r\n      }, 800);\r\n    });\r\n  };\r\n\r\n  async getUsage(days) {\r\n    const request = {\r\n      mobileView: isCordova(),\r\n      clientId: this.clientId,\r\n      startDate: `${days}daysago`,\r\n      endDate: 'today',\r\n      metric: 'avgSessionDuration',\r\n      dimension: 'nthDay'\r\n    };\r\n    let template = Array.from(Array(days), () => 0);\r\n    let usage = {\r\n      max: 10,\r\n      min: 0,\r\n      data: template\r\n    };\r\n    try {\r\n      const report = await API.analyticsReport([request]);\r\n      if (\r\n        report &&\r\n        report.reports &&\r\n        report.reports.length >= 1 &&\r\n        report.reports[0].data['rows']\r\n      ) {\r\n        const data = report.reports[0].data.rows.map(row => {\r\n          return {\r\n            index: parseInt(row.dimensions[1]),\r\n            value: parseInt(row.metrics[0].values[0]) / 60\r\n          };\r\n        });\r\n        data.forEach(value => {\r\n          template[value.index] = value.value;\r\n        });\r\n        usage = {\r\n          max: Math.ceil(\r\n            parseInt(report.reports[0].data.maximums[0].values[0]) / 60\r\n          ),\r\n          min: 0,\r\n          data: template\r\n        };\r\n      }\r\n    } catch (err) {}\r\n    return usage;\r\n  }\r\n\r\n  async getTotals(days) {\r\n    const baseData = {\r\n      mobileView: isCordova(),\r\n      clientId: this.clientId,\r\n      startDate: `${days}daysago`,\r\n      endDate: 'today',\r\n      metric: 'totalEvents',\r\n      dimension: 'eventLabel',\r\n      filter: ''\r\n    };\r\n    const fullRequest = [];\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventAction', value: 'Click Symbol' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventAction', value: 'Click Output' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventAction', value: 'Create Tile' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventAction', value: 'Edit Tiles' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventAction', value: 'Change Board' }\r\n    });\r\n    const report = await API.analyticsReport(fullRequest);\r\n\r\n    const totals = {\r\n      words: {\r\n        ...this.state.totals.words,\r\n        total: this.getReportTotal(report, 0),\r\n        rows: this.getReportRows(report, 0, 'sound')\r\n      },\r\n      phrases: {\r\n        ...this.state.totals.phrases,\r\n        total: this.getReportTotal(report, 1),\r\n        rows: this.getReportRows(report, 1, 'sound')\r\n      },\r\n      editions: {\r\n        ...this.state.totals.editions,\r\n        total:\r\n          Number(this.getReportTotal(report, 2)) +\r\n          Number(this.getReportTotal(report, 3)),\r\n        rows: this.getReportRows(report, 2).concat(\r\n          this.getReportRows(report, 3)\r\n        )\r\n      },\r\n      boards: {\r\n        ...this.state.totals.boards,\r\n        total: this.getReportTotal(report, 4, 'rowCount'),\r\n        rows: this.getReportRows(report, 4)\r\n      }\r\n    };\r\n    return totals;\r\n  }\r\n\r\n  getReportTotal(report, index = 0, type = 'totals') {\r\n    let total = 0;\r\n    if (\r\n      report &&\r\n      report.reports &&\r\n      report.reports.length >= index &&\r\n      report.reports[index].data['rows']\r\n    ) {\r\n      if (type === 'rowCount') {\r\n        total = report.reports[index].data['rowCount'];\r\n      } else {\r\n        total = report.reports[index].data['totals'][0]['values'][0];\r\n      }\r\n    }\r\n    return total;\r\n  }\r\n\r\n  getReportRows(report, index = 0, type = 'view', max = 10) {\r\n    let rows = [];\r\n    if (\r\n      report &&\r\n      report.reports &&\r\n      report.reports.length >= index &&\r\n      report.reports[index].data['rows']\r\n    ) {\r\n      rows = report.reports[index].data['rows'].slice(0, max).map(row => {\r\n        return {\r\n          name: row['dimensions'][1],\r\n          total: row['metrics'][0]['values'][0],\r\n          type: type\r\n        };\r\n      });\r\n    }\r\n    return rows;\r\n  }\r\n\r\n  async getCategoryTotals(days) {\r\n    const baseData = {\r\n      mobileView: isCordova(),\r\n      clientId: this.clientId,\r\n      startDate: `${days}daysago`,\r\n      endDate: 'today',\r\n      metric: 'totalEvents',\r\n      dimension: 'eventCategory',\r\n      filter: ''\r\n    };\r\n    const fullRequest = [];\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventCategory', value: 'Navigation' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventCategory', value: 'Speech' }\r\n    });\r\n    fullRequest.push({\r\n      ...baseData,\r\n      filter: { name: 'eventCategory', value: 'Editing' }\r\n    });\r\n\r\n    const report = await API.analyticsReport(fullRequest);\r\n    const totals = {\r\n      navigation: {\r\n        ...this.state.categoryTotals.navigation,\r\n        value: this.getReportTotal(report, 0)\r\n      },\r\n      speech: {\r\n        ...this.state.categoryTotals.speech,\r\n        value: this.getReportTotal(report, 1)\r\n      },\r\n      edit: {\r\n        ...this.state.categoryTotals.edit,\r\n        value: this.getReportTotal(report, 2)\r\n      }\r\n    };\r\n    return totals;\r\n  }\r\n\r\n  getTopUsed(totals) {\r\n    return {\r\n      symbols: totals['words']['rows'] || [],\r\n      boards: totals['boards']['rows'] || []\r\n    };\r\n  }\r\n\r\n  getTileFromLabel(label) {\r\n    const { boards } = this.props;\r\n    for (let i = 0; i < boards.length; i++) {\r\n      for (let j = 0; j < boards[i].tiles.length; j++) {\r\n        const tile = boards[i].tiles[j];\r\n        if (\r\n          (tile.label &&\r\n            tile.label.trim().toLowerCase() === label.trim().toLowerCase()) ||\r\n          (tile.labelKey &&\r\n            tile.labelKey\r\n              .split()\r\n              [tile.labelKey.split().length - 1].trim()\r\n              .toLowerCase() ===\r\n              label\r\n                .trim()\r\n                .replace(' ', '')\r\n                .toLowerCase())\r\n        ) {\r\n          return tile;\r\n        }\r\n      }\r\n    }\r\n    return undefined;\r\n  }\r\n\r\n  onDaysChange = async days => {\r\n    const { intl, showNotification } = this.props;\r\n    this.setState({ isFetching: true });\r\n    try {\r\n      const totals = await this.getTotals(days);\r\n      const usage = await this.getUsage(days);\r\n      const categoryTotals = await this.getCategoryTotals(days);\r\n      const topUsed = this.getTopUsed(totals);\r\n      this.setState({\r\n        days,\r\n        totals,\r\n        categoryTotals,\r\n        usage,\r\n        topUsed,\r\n        isFetching: false\r\n      });\r\n    } catch (err) {\r\n      this.setState({ isFetching: false });\r\n      showNotification(intl.formatMessage(messages.loadingError));\r\n      console.log(err.message);\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <AnalyticsComponent\r\n        onDaysChange={this.onDaysChange}\r\n        symbolSources={this.getSymbolSources()}\r\n        days={this.state.days}\r\n        totals={this.state.totals}\r\n        categoryTotals={this.state.categoryTotals}\r\n        usage={this.state.usage}\r\n        topUsed={this.state.topUsed}\r\n        isFetching={this.state.isFetching}\r\n        {...this.props}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  isLogged: isLogged(state),\r\n  user: getUser(state),\r\n  boards: state.board.boards\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  logout,\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(AnalyticsContainer));\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Helmet from 'react-helmet';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport classNames from 'classnames';\r\n\r\nimport Activate from '../Account/Activate';\r\nimport ChangePassword from '../Account/ChangePassword';\r\nimport OAuthLogin from '../Account/OAuthLogin';\r\nimport AuthScreen, { RedirectIfLogged } from '../AuthScreen';\r\nimport BoardContainer from '../Board';\r\nimport Notifications from '../Notifications';\r\nimport NotFound from '../NotFound';\r\nimport Settings from '../Settings';\r\nimport WelcomeScreen from '../WelcomeScreen';\r\nimport Analytics from '../Analytics';\r\nimport './App.css';\r\n\r\nexport class App extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * App language direction\r\n     */\r\n    dir: PropTypes.string.isRequired,\r\n    /**\r\n     * If 'true', user first visit\r\n     */\r\n    isFirstVisit: PropTypes.bool,\r\n    /**\r\n     * If 'true', user is logged in\r\n     */\r\n    isLogged: PropTypes.bool,\r\n    /**\r\n     * App language\r\n     */\r\n    lang: PropTypes.string.isRequired,\r\n    /**\r\n     * If 'true', dark mode is enabled\r\n     */\r\n    dark: PropTypes.bool,\r\n  };\r\n\r\n  render() {\r\n    const { lang, dir, isFirstVisit, isLogged, dark } = this.props;\r\n\r\n    return (\r\n      <div className={classNames('App', { 'is-dark': dark })}>\r\n        <Helmet>\r\n          <html lang={lang} dir={dir} />\r\n        </Helmet>\r\n\r\n        <Notifications />\r\n\r\n        <Switch>\r\n          <RedirectIfLogged\r\n            component={AuthScreen}\r\n            isLogged={isLogged}\r\n            path=\"/login-signup\"\r\n            to=\"/\"\r\n          />\r\n          <Route path=\"/settings\" component={Settings} />\r\n          <Route path=\"/analytics\" component={Analytics} />\r\n          <Route path=\"/activate/:url\" component={Activate} />\r\n          <Route path=\"/reset/:userid/:url\" component={ChangePassword} />\r\n          <Route path=\"/login/:type/callback\" component={OAuthLogin} />\r\n          <Route path=\"/board/:id\" component={BoardContainer} />\r\n          <Route\r\n            exact\r\n            path=\"/\"\r\n            component={\r\n              isFirstVisit && !isLogged ? WelcomeScreen : BoardContainer\r\n            }\r\n          />\r\n          <Route component={NotFound} />\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { injectIntl, intlShape } from 'react-intl';\r\nimport { BrowserRouter } from \"react-router-dom\";\r\n\r\nimport registerServiceWorker from '../../registerServiceWorker';\r\nimport { showNotification } from '../Notifications/Notifications.actions';\r\nimport { isFirstVisit, isLogged } from './App.selectors';\r\nimport messages from './App.messages';\r\nimport App from './App.component';\r\nimport { DISPLAY_SIZE_STANDARD } from '../Settings/Display/Display.constants';\r\n\r\nexport class AppContainer extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * App language direction\r\n     */\r\n    dir: PropTypes.string.isRequired,\r\n    /**\r\n     * @ignore\r\n     */\r\n    intl: intlShape.isRequired,\r\n    /**\r\n     * If 'true', user first visit\r\n     */\r\n    isFirstVisit: PropTypes.bool,\r\n    /**\r\n     * If 'true', user is logged in\r\n     */\r\n    isLogged: PropTypes.bool,\r\n    /**\r\n     * App language\r\n     */\r\n    lang: PropTypes.string.isRequired,\r\n    displaySettings: PropTypes.object.isRequired\r\n  };\r\n\r\n  componentDidMount() {\r\n    registerServiceWorker(\r\n      this.handleNewContentAvailable,\r\n      this.handleContentCached\r\n    );\r\n  }\r\n\r\n  handleNewContentAvailable = () => {\r\n    const { intl, showNotification } = this.props;\r\n    showNotification(\r\n      intl.formatMessage(messages.newContentAvailable),\r\n      'refresh'\r\n    ); //send the kind of notification.\r\n  };\r\n\r\n  handleContentCached = () => {\r\n    const { intl, showNotification } = this.props;\r\n    showNotification(intl.formatMessage(messages.contentIsCached));\r\n  };\r\n\r\n  render() {\r\n    const { dir, isFirstVisit, isLogged, lang, displaySettings } = this.props;\r\n\r\n    const uiSize = displaySettings.uiSize || DISPLAY_SIZE_STANDARD;\r\n    const fontSize = displaySettings.fontSize || DISPLAY_SIZE_STANDARD;\r\n    const classes = [\r\n      'Cboard__DisplaySettings',\r\n      `Cboard__UISize__${uiSize}`,\r\n      `Cboard__FontSize__${fontSize}`\r\n    ];\r\n\r\n    const htmlElement = document.getElementsByTagName('html')[0];\r\n    htmlElement.className = classes.join(' ');\r\n\r\n    return (\r\n      <BrowserRouter basename=\"/cboard-translate\">\r\n        <App\r\n          dir={dir}\r\n          isFirstVisit={isFirstVisit}\r\n          isLogged={isLogged}\r\n          lang={lang}\r\n          dark={displaySettings.darkThemeActive}\r\n        />\r\n      </BrowserRouter>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  dir: state.language.dir,\r\n  isFirstVisit: isFirstVisit(state),\r\n  isLogged: isLogged(state),\r\n  lang: state.language.lang,\r\n  displaySettings: state.app.displaySettings\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(injectIntl(AppContainer));\r\n","import Intl from 'intl';\r\n\r\nif (window && !window.Intl) {\r\n  window.Intl = Intl;\r\n}\r\n\r\n// https://github.com/tc39/proposal-object-values-entries/blob/master/polyfill.js\r\nconst reduce = Function.bind.call(Function.call, Array.prototype.reduce);\r\nconst isEnumerable = Function.bind.call(\r\n  Function.call,\r\n  Object.prototype.propertyIsEnumerable\r\n);\r\nconst concat = Function.bind.call(Function.call, Array.prototype.concat);\r\nconst keys = Reflect.ownKeys;\r\n\r\nif (!Object.values) {\r\n  Object.values = function values(O) {\r\n    return reduce(\r\n      keys(O),\r\n      (v, k) =>\r\n        concat(v, typeof k === 'string' && isEnumerable(O, k) ? [O[k]] : []),\r\n      []\r\n    );\r\n  };\r\n}\r\n\r\nif (!Object.entries) {\r\n  Object.entries = function entries(O) {\r\n    return reduce(\r\n      keys(O),\r\n      (e, k) =>\r\n        concat(\r\n          e,\r\n          typeof k === 'string' && isEnumerable(O, k) ? [[k, O[k]]] : []\r\n        ),\r\n      []\r\n    );\r\n  };\r\n}\r\n","import dotenv from 'dotenv';\r\n\r\ndotenv.config({ silent: true });\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\nimport { IntlProvider } from 'react-intl';\r\n\r\nimport { DEFAULT_LANG } from '../../components/App/App.constants';\r\nimport { changeLang, setLangs } from './LanguageProvider.actions';\r\nimport { showNotification } from '../../components/Notifications/Notifications.actions';\r\nimport { importTranslation } from '../../i18n';\r\n\r\nexport class LanguageProvider extends Component {\r\n  static propTypes = {\r\n    /**\r\n     * Active language\r\n     */\r\n    lang: PropTypes.string.isRequired,\r\n    /**\r\n     * Platform supported languages\r\n     */\r\n    platformLangs: PropTypes.array,\r\n    children: PropTypes.node.isRequired\r\n  };\r\n\r\n  static defaultProps = {\r\n    platformLangs: []\r\n  };\r\n\r\n  state = {\r\n    messages: null\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { lang } = this.props;\r\n\r\n    if (lang) {\r\n      this.fetchMessages(lang);\r\n    } else {\r\n      this.fetchMessages(DEFAULT_LANG);\r\n    }\r\n  }\r\n\r\n  UNSAFE_componentWillReceiveProps(nextProps) {\r\n    const { lang } = nextProps;\r\n\r\n    if (lang) {\r\n      this.fetchMessages(lang);\r\n    }\r\n  }\r\n\r\n  fetchMessages(lang) {\r\n    const {\r\n      platformLangs,\r\n      changeLang,\r\n      setLangs,\r\n      showNotification\r\n    } = this.props;\r\n    this.setState({ messages: null });\r\n\r\n    importTranslation(lang)\r\n      .then(messages => {\r\n        this.setState({ messages });\r\n      })\r\n      .catch(() => {\r\n        if (!platformLangs.includes(DEFAULT_LANG)) {\r\n          setLangs(platformLangs.push(DEFAULT_LANG));\r\n        }\r\n        changeLang(DEFAULT_LANG);\r\n        showNotification(`A ${lang} translation was not found!.\r\n          Go to Settings if you want to change language.`);\r\n      });\r\n  }\r\n\r\n  render() {\r\n    const { lang, children } = this.props;\r\n    const locale = lang.slice(0, 2);\r\n\r\n    if (!this.state.messages) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <IntlProvider locale={locale} key={locale} messages={this.state.messages}>\r\n        {React.Children.only(children)}\r\n      </IntlProvider>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  lang: state.language.lang,\r\n  platformLangs: state.speech.langs\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  changeLang,\r\n  setLangs,\r\n  showNotification\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(LanguageProvider);\r\n","import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { connect } from 'react-redux';\r\n\r\nimport tts from './tts';\r\nimport {\r\n  getVoices,\r\n  getTtsEngines,\r\n  getTtsDefaultEngine,\r\n  updateLangSpeechStatus,\r\n  setTtsEngine\r\n} from './SpeechProvider.actions';\r\nimport { isAndroid } from '../../cordova-util';\r\n\r\nexport class SpeechProvider extends Component {\r\n  static propTypes = {\r\n    langs: PropTypes.array.isRequired,\r\n    children: PropTypes.node.isRequired,\r\n    ttsEngine: PropTypes.object,\r\n    setTtsEngine: PropTypes.func\r\n  };\r\n\r\n  async componentDidMount() {\r\n    const {\r\n      getVoices,\r\n      updateLangSpeechStatus,\r\n      getTtsEngines,\r\n      getTtsDefaultEngine,\r\n      ttsEngine,\r\n      setTtsEngine\r\n    } = this.props;\r\n    if (tts.isSupported()) {\r\n      //if android we have to set the tts engine first\r\n      if (isAndroid()) {\r\n        getTtsEngines();\r\n        getTtsDefaultEngine();\r\n      }\r\n      if (ttsEngine && ttsEngine.name) {\r\n        try {\r\n          await setTtsEngine(ttsEngine.name);\r\n        } catch (err) {\r\n          console.error(err.message);\r\n        }\r\n      }\r\n      try {\r\n        const voices = await getVoices();\r\n        await updateLangSpeechStatus(voices);\r\n      } catch (err) {\r\n        console.error(err.message);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { children } = this.props;\r\n\r\n    return React.Children.only(children);\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  langs: state.speech.langs,\r\n  lang: state.language.lang,\r\n  voiceURI: state.speech.options.voiceURI,\r\n  ttsEngine: state.speech.ttsEngine\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n  getVoices,\r\n  getTtsEngines,\r\n  getTtsDefaultEngine,\r\n  setTtsEngine,\r\n  updateLangSpeechStatus\r\n};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(SpeechProvider);\r\n","import React from 'react';\r\n\r\nimport { create } from 'jss';\r\nimport rtl from 'jss-rtl';\r\nimport {\r\n  StylesProvider,\r\n  createGenerateClassName,\r\n  jssPreset\r\n} from '@material-ui/core/styles';\r\n\r\n// Configure JSS\r\nconst jss = create({\r\n  plugins: [...jssPreset().plugins, rtl()]\r\n});\r\n\r\n// Custom Material-UI class name generator.\r\nconst generateClassName = createGenerateClassName();\r\n\r\nexport function RTLSupport({ children }) {\r\n  return (\r\n    <StylesProvider jss={jss} generateClassName={generateClassName}>\r\n      {React.Children.only(children)}\r\n    </StylesProvider>\r\n  );\r\n}\r\n\r\nexport default RTLSupport;\r\n","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { MuiThemeProvider, createTheme } from '@material-ui/core/styles';\r\nimport amber from '@material-ui/core/colors/amber';\r\n\r\nimport RTLSupport from './RTLSupport';\r\n\r\nexport class ThemeProvider extends Component {\r\n  render() {\r\n    const { dir, children, darkThemeActive } = this.props;\r\n\r\n    const lightTheme = createTheme({\r\n      typography: {},\r\n      direction: dir\r\n    });\r\n\r\n    const darkTheme = createTheme({\r\n      palette: {\r\n        type: 'dark',\r\n        primary: {\r\n          main: '#78909c'\r\n        },\r\n        secondary: amber\r\n      },\r\n      typography: {},\r\n      direction: dir\r\n    });\r\n\r\n    return (\r\n      <MuiThemeProvider theme={darkThemeActive ? darkTheme : lightTheme}>\r\n        <RTLSupport>{children}</RTLSupport>\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n  dir: state.language.dir,\r\n  darkThemeActive: state.app.displaySettings.darkThemeActive\r\n});\r\n\r\nconst mapDispatchToProps = {};\r\n\r\nexport default connect(\r\n  mapStateToProps,\r\n  mapDispatchToProps\r\n)(ThemeProvider);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport 'fontsource-roboto';\r\nimport { Provider } from 'react-redux';\r\nimport { BrowserRouter, HashRouter, Route } from 'react-router-dom';\r\nimport { TouchBackend } from 'react-dnd-touch-backend';\r\nimport { DndProvider } from 'react-dnd';\r\nimport { PersistGate } from 'redux-persist/es/integration/react';\r\n\r\nimport App from './components/App';\r\nimport { isCordova, onCordovaReady, initCordovaPlugins } from './cordova-util';\r\nimport './index.css';\r\nimport './polyfills';\r\nimport './env';\r\nimport LanguageProvider from './providers/LanguageProvider';\r\nimport SpeechProvider from './providers/SpeechProvider';\r\nimport ThemeProvider from './providers/ThemeProvider';\r\nimport configureStore, { getStore } from './store';\r\nimport { ApplicationInsights } from '@microsoft/applicationinsights-web';\r\nimport { AZURE_INST_KEY } from './constants';\r\n\r\nif (AZURE_INST_KEY) {\r\n  const appInsights = new ApplicationInsights({\r\n    config: {\r\n      instrumentationKey: AZURE_INST_KEY,\r\n      enableAutoRouteTracking: true,\r\n      loggingLevelTelemetry: 2\r\n    }\r\n  });\r\n  appInsights.loadAppInsights();\r\n  appInsights.trackPageView(); // Manually call trackPageView to establish the current user/session/pageview\r\n}\r\nconst { persistor } = configureStore();\r\nconst store = getStore();\r\nconst dndOptions = {\r\n  enableTouchEvents: true,\r\n  enableMouseEvents: true,\r\n  enableKeyboardEvents: true\r\n};\r\n\r\n// When running in Cordova, must use the HashRouter\r\nconst PlatformRouter = isCordova() ? HashRouter : BrowserRouter;\r\n\r\nconst renderApp = () => {\r\n  if (isCordova()) {\r\n    initCordovaPlugins();\r\n  }\r\n  ReactDOM.render(\r\n    <Provider store={store}>\r\n      <PersistGate persistor={persistor}>\r\n        <SpeechProvider>\r\n          <LanguageProvider>\r\n            <ThemeProvider>\r\n              <PlatformRouter>\r\n                <DndProvider backend={TouchBackend} options={dndOptions}>\r\n                  <Route path=\"/\" component={App} />\r\n                </DndProvider>\r\n              </PlatformRouter>\r\n            </ThemeProvider>\r\n          </LanguageProvider>\r\n        </SpeechProvider>\r\n      </PersistGate>\r\n    </Provider>,\r\n    document.getElementById('root')\r\n  );\r\n};\r\n\r\nisCordova() ? onCordovaReady(renderApp) : renderApp();\r\n","import { CHANGE_LANG, SET_LANGS } from './LanguageProvider.constants';\r\nimport { updateUserData } from '../../components/App/App.actions';\r\n\r\nexport function changeLang(lang) {\r\n  updateUserData();\r\n  return {\r\n    type: CHANGE_LANG,\r\n    lang\r\n  };\r\n}\r\n\r\nexport function setLangs(langs, localLangs) {\r\n  return {\r\n    type: SET_LANGS,\r\n    langs,\r\n    localLangs\r\n  };\r\n}\r\n","import { createBrowserHistory } from 'history';\r\n\r\nconst history = createBrowserHistory();\r\nexport default history;\r\n","export const dataURLtoFile = (dataurl, filename, checkExtension = false) => {\r\n  // https://stackoverflow.com/a/38936042\r\n  const arr = dataurl.split(',');\r\n  const type = arr[0].match(/:(.*?);/)[1];\r\n  const bstr = atob(arr[1]);\r\n  let n = bstr.length;\r\n  const u8arr = new Uint8Array(n);\r\n\r\n  let name = filename;\r\n  if (checkExtension) {\r\n    const extension = type.split('/')[1].toLowerCase();\r\n    name = `${name}.${extension}`;\r\n  }\r\n\r\n  while (n--) {\r\n    u8arr[n] = bstr.charCodeAt(n);\r\n  }\r\n\r\n  return new File([u8arr], name, { type });\r\n};\r\n","import axios from 'axios';\r\nimport history from '../history';\r\nimport { alpha2ToAlpha3T } from '@cospired/i18n-iso-languages';\r\n\r\nimport {\r\n  API_URL,\r\n  ARASAAC_BASE_PATH_API,\r\n  TAWASOL_BASE_PATH_API,\r\n  GLOBALSYMBOLS_BASE_PATH_API,\r\n  AZURE_VOICES_BASE_PATH_API,\r\n  AZURE_SPEECH_SUBSCR_KEY\r\n} from '../constants';\r\nimport { getStore } from '../store';\r\nimport { dataURLtoFile } from '../helpers';\r\nimport { logout } from '../components/Account/Login/Login.actions.js';\r\nimport { isAndroid } from '../cordova-util';\r\n\r\nconst BASE_URL = API_URL;\r\nconst LOCAL_COMMUNICATOR_ID = 'cboard_default';\r\n\r\nconst getUserData = () => {\r\n  const store = getStore();\r\n  const {\r\n    app: { userData }\r\n  } = store.getState();\r\n\r\n  return userData;\r\n};\r\n\r\nconst getAuthToken = () => {\r\n  const userData = getUserData() || {};\r\n  return userData.authToken || null;\r\n};\r\n\r\nconst getQueryParameters = (obj = {}) => {\r\n  return Object.keys(obj)\r\n    .map(k => `${encodeURIComponent(k)}=${encodeURIComponent(obj[k])}`)\r\n    .join('&');\r\n};\r\n\r\nclass API {\r\n  constructor(config = {}) {\r\n    this.axiosInstance = axios.create({\r\n      baseURL: BASE_URL,\r\n      ...config\r\n    });\r\n    this.axiosInstance.interceptors.response.use(\r\n      response => response,\r\n      error => {\r\n        if (\r\n          error.response.status === 403 &&\r\n          error.config.baseURL === BASE_URL\r\n        ) {\r\n          if (isAndroid()) {\r\n            window.plugins.googleplus.disconnect(function(msg) {\r\n              console.log('disconnect msg' + msg);\r\n            });\r\n          }\r\n          getStore().dispatch(logout());\r\n          history.push('/login-signup/');\r\n          window.location.reload();\r\n        }\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n  }\r\n\r\n  async getLanguage(lang) {\r\n    try {\r\n      const { status, data } = await this.axiosInstance.get(\r\n        `/languages/${lang}`\r\n      );\r\n      if (status === 200) return data;\r\n      return null;\r\n    } catch (err) {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async getAzureVoices() {\r\n    const azureVoicesListPath = `${AZURE_VOICES_BASE_PATH_API}list`;\r\n    const headers = {\r\n      'Ocp-Apim-Subscription-Key': AZURE_SPEECH_SUBSCR_KEY\r\n    };\r\n    try {\r\n      const { status, data } = await this.axiosInstance.get(\r\n        azureVoicesListPath,\r\n        { headers }\r\n      );\r\n      if (status === 200) return data;\r\n      return [];\r\n    } catch (err) {\r\n      console.error(err.message);\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async arasaacPictogramsSearch(locale, searchText) {\r\n    const pictogSearchTextPath = `${ARASAAC_BASE_PATH_API}pictograms/${locale}/search/${searchText}`;\r\n    try {\r\n      const { status, data } = await this.axiosInstance.get(\r\n        pictogSearchTextPath\r\n      );\r\n      if (status === 200) return data;\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async tawasolPictogramsSearch(locale, searchText) {\r\n    const pictogSearchTextPath = `${TAWASOL_BASE_PATH_API}symbol/${searchText}`;\r\n    try {\r\n      const { status, data } = await this.axiosInstance.get(\r\n        pictogSearchTextPath\r\n      );\r\n      if (status === 200) return data;\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async globalsymbolsPictogramsSearch(locale, searchText) {\r\n    let language = 'eng';\r\n    if (locale.length === 3) {\r\n      language = locale;\r\n    }\r\n    if (locale.length === 2) {\r\n      language = alpha2ToAlpha3T(locale);\r\n    }\r\n    const pictogSearchTextPath = `${GLOBALSYMBOLS_BASE_PATH_API}labels/search/?query=${searchText}&language=${language}&language_iso_format=639-3&limit=20`;\r\n    try {\r\n      const { status, data } = await this.axiosInstance.get(\r\n        pictogSearchTextPath\r\n      );\r\n      if (status === 200) return data;\r\n      return [];\r\n    } catch (err) {\r\n      return [];\r\n    }\r\n  }\r\n\r\n  async login(email, password) {\r\n    const { data } = await this.axiosInstance.post('/user/login', {\r\n      email,\r\n      password\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async forgot(email) {\r\n    const { data } = await this.axiosInstance.post('/user/forgot', {\r\n      email\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async storePassword(userid, password, url) {\r\n    const { data } = await this.axiosInstance.post('/user/store-password', {\r\n      userid: userid,\r\n      token: url,\r\n      password: password\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async oAuthLogin(type, query) {\r\n    const { data } = await this.axiosInstance.get(\r\n      `/login/${type}/callback${query}`\r\n    );\r\n    return data;\r\n  }\r\n\r\n  async getBoards({\r\n    page = 1,\r\n    limit = 10,\r\n    offset = 0,\r\n    sort = '-_id',\r\n    search = ''\r\n  } = {}) {\r\n    const query = getQueryParameters({ page, limit, offset, sort, search });\r\n    const url = `/board?${query}`;\r\n    const { data } = await this.axiosInstance.get(url);\r\n    return data;\r\n  }\r\n\r\n  async getPublicBoards({\r\n    page = 1,\r\n    limit = 10,\r\n    offset = 0,\r\n    sort = '-_id',\r\n    search = ''\r\n  } = {}) {\r\n    const query = getQueryParameters({ page, limit, offset, sort, search });\r\n    const url = `/board/public?${query}`;\r\n    const { data } = await this.axiosInstance.get(url);\r\n    return data;\r\n  }\r\n\r\n  async getMyBoards({\r\n    page = 1,\r\n    limit = 10,\r\n    offset = 0,\r\n    sort = '-_id',\r\n    search = ''\r\n  } = {}) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const { email } = getUserData();\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const query = getQueryParameters({ page, limit, offset, sort, search });\r\n    const url = `/board/byemail/${email}?${query}`;\r\n\r\n    const { data } = await this.axiosInstance.get(url, { headers });\r\n    return data;\r\n  }\r\n\r\n  async getCommunicators({\r\n    page = 1,\r\n    limit = 10,\r\n    offset = 0,\r\n    sort = '-_id',\r\n    search = ''\r\n  } = {}) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const { email } = getUserData();\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const query = getQueryParameters({ page, limit, offset, sort, search });\r\n    const url = `/communicator/byemail/${email}?${query}`;\r\n\r\n    const { data } = await this.axiosInstance.get(url, { headers });\r\n    return data;\r\n  }\r\n\r\n  async getBoard(id) {\r\n    const { data } = await this.axiosInstance.get(`/board/${id}`);\r\n    return data;\r\n  }\r\n\r\n  async getSettings() {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.get(`/settings`, { headers });\r\n    return data;\r\n  }\r\n\r\n  async updateSettings(newSettings = {}) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.post(`/settings`, newSettings, {\r\n      headers\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async updateUser(user) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.put(`/user/${user.id}`, user, {\r\n      headers\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async createBoard(board) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.post(`/board`, board, {\r\n      headers\r\n    });\r\n    return data;\r\n  }\r\n\r\n  async updateBoard(board) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.put(`/board/${board.id}`, board, {\r\n      headers\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async deleteBoard(boardId) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.delete(`/board/${boardId}`, {\r\n      headers\r\n    });\r\n\r\n    return data;\r\n  }\r\n\r\n  async uploadFromDataURL(dataURL, filename, checkExtension = false) {\r\n    const file = dataURLtoFile(dataURL, filename, checkExtension);\r\n\r\n    let url = null;\r\n    try {\r\n      url = await this.uploadFile(file, filename);\r\n    } catch (e) {}\r\n\r\n    return url;\r\n  }\r\n\r\n  async uploadFile(file, filename) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`,\r\n      'Content-Type': 'multipart/form-data'\r\n    };\r\n\r\n    const formData = new FormData();\r\n    formData.append('file', file, filename);\r\n    const response = await this.axiosInstance.post('media', formData, {\r\n      headers\r\n    });\r\n\r\n    return response.data.url;\r\n  }\r\n\r\n  async createCommunicator(communicator) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    let data = {};\r\n    let response = {};\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const communicatorToPost = { ...communicator };\r\n    delete communicatorToPost.id;\r\n    const { name, email } = getUserData();\r\n    communicatorToPost.email = email;\r\n    communicatorToPost.author = name;\r\n    response = await this.axiosInstance.post(\r\n      `/communicator`,\r\n      communicatorToPost,\r\n      { headers }\r\n    );\r\n    data = response.data.communicator;\r\n    return data;\r\n  }\r\n\r\n  async updateCommunicator(communicator) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n\r\n    let data = {};\r\n    let response = {};\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const isLocalCommunicator =\r\n      communicator.id && communicator.id === LOCAL_COMMUNICATOR_ID;\r\n\r\n    if (isLocalCommunicator) {\r\n      const communicatorToPost = { ...communicator };\r\n      delete communicatorToPost.id;\r\n      const { name, email } = getUserData();\r\n      communicatorToPost.email = email;\r\n      communicatorToPost.author = name;\r\n      response = await this.axiosInstance.post(\r\n        `/communicator`,\r\n        communicatorToPost,\r\n        { headers }\r\n      );\r\n      data = response.data.communicator;\r\n    } else {\r\n      response = await this.axiosInstance.put(\r\n        `/communicator/${communicator.id}`,\r\n        communicator,\r\n        { headers }\r\n      );\r\n      data = response.data;\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  async analyticsReport(report) {\r\n    const authToken = getAuthToken();\r\n    if (!(authToken && authToken.length)) {\r\n      throw new Error('Need to be authenticated to perform this request');\r\n    }\r\n    const headers = {\r\n      Authorization: `Bearer ${authToken}`\r\n    };\r\n\r\n    const { data } = await this.axiosInstance.post(\r\n      `/analytics/batchGet`,\r\n      report,\r\n      {\r\n        headers\r\n      }\r\n    );\r\n    return data;\r\n  }\r\n}\r\n\r\nconst API_INSTANCE = new API({});\r\n\r\nexport default API_INSTANCE;\r\n","import API from './api';\r\n\r\nexport default API;\r\n","import isUrl from 'is-url';\r\n\r\nimport {\r\n  IMPORT_BOARDS,\r\n  ADD_BOARDS,\r\n  CHANGE_BOARD,\r\n  SWITCH_BOARD,\r\n  PREVIOUS_BOARD,\r\n  TO_ROOT_BOARD,\r\n  DELETE_BOARD,\r\n  CREATE_BOARD,\r\n  UPDATE_BOARD,\r\n  CREATE_TILE,\r\n  DELETE_TILES,\r\n  EDIT_TILES,\r\n  FOCUS_TILE,\r\n  CLICK_SYMBOL,\r\n  CLICK_OUTPUT,\r\n  CHANGE_OUTPUT,\r\n  REPLACE_BOARD,\r\n  HISTORY_REMOVE_BOARD,\r\n  UNMARK_BOARD,\r\n  CREATE_API_BOARD_SUCCESS,\r\n  CREATE_API_BOARD_FAILURE,\r\n  CREATE_API_BOARD_STARTED,\r\n  UPDATE_API_BOARD_SUCCESS,\r\n  UPDATE_API_BOARD_FAILURE,\r\n  UPDATE_API_BOARD_STARTED,\r\n  DELETE_API_BOARD_SUCCESS,\r\n  DELETE_API_BOARD_FAILURE,\r\n  DELETE_API_BOARD_STARTED,\r\n  GET_API_MY_BOARDS_SUCCESS,\r\n  GET_API_MY_BOARDS_FAILURE,\r\n  GET_API_MY_BOARDS_STARTED,\r\n  DOWNLOAD_IMAGES_SUCCESS,\r\n  DOWNLOAD_IMAGES_FAILURE,\r\n  DOWNLOAD_IMAGES_STARTED,\r\n  DOWNLOAD_IMAGE_SUCCESS,\r\n  DOWNLOAD_IMAGE_FAILURE\r\n} from './Board.constants';\r\n\r\nimport API from '../../api';\r\n\r\nimport {\r\n  updateApiCommunicator,\r\n  createApiCommunicator,\r\n  replaceBoardCommunicator,\r\n  upsertCommunicator,\r\n  getApiMyCommunicators\r\n} from '../Communicator/Communicator.actions';\r\nimport { isAndroid, writeCvaFile } from '../../cordova-util';\r\n\r\nconst BOARDS_PAGE_LIMIT = 100;\r\n\r\nexport function importBoards(boards) {\r\n  return {\r\n    type: IMPORT_BOARDS,\r\n    boards\r\n  };\r\n}\r\n\r\nexport function addBoards(boards) {\r\n  return {\r\n    type: ADD_BOARDS,\r\n    boards\r\n  };\r\n}\r\n\r\nexport function replaceBoard(prev, current) {\r\n  return {\r\n    type: REPLACE_BOARD,\r\n    payload: { prev, current }\r\n  };\r\n}\r\n\r\nexport function createBoard(boardData) {\r\n  return {\r\n    type: CREATE_BOARD,\r\n    boardData\r\n  };\r\n}\r\n\r\nexport function updateBoard(boardData) {\r\n  return {\r\n    type: UPDATE_BOARD,\r\n    boardData\r\n  };\r\n}\r\nexport function deleteBoard(boardId) {\r\n  return {\r\n    type: DELETE_BOARD,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function switchBoard(boardId) {\r\n  return {\r\n    type: SWITCH_BOARD,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function changeBoard(boardId) {\r\n  return {\r\n    type: CHANGE_BOARD,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function previousBoard() {\r\n  return {\r\n    type: PREVIOUS_BOARD\r\n  };\r\n}\r\n\r\nexport function toRootBoard() {\r\n  return {\r\n    type: TO_ROOT_BOARD\r\n  };\r\n}\r\n\r\nexport function historyRemoveBoard(removedBoardId) {\r\n  return {\r\n    type: HISTORY_REMOVE_BOARD,\r\n    removedBoardId\r\n  };\r\n}\r\n\r\nexport function unmarkBoard(boardId) {\r\n  return {\r\n    type: UNMARK_BOARD,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function createTile(tile, boardId) {\r\n  return {\r\n    type: CREATE_TILE,\r\n    tile,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function deleteTiles(tiles, boardId) {\r\n  return {\r\n    type: DELETE_TILES,\r\n    tiles,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function editTiles(tiles, boardId) {\r\n  return {\r\n    type: EDIT_TILES,\r\n    tiles,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function focusTile(tileId, boardId) {\r\n  return {\r\n    type: FOCUS_TILE,\r\n    tileId,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function clickSymbol(symbolLabel) {\r\n  return {\r\n    type: CLICK_SYMBOL,\r\n    symbolLabel\r\n  };\r\n}\r\n\r\nexport function clickOutput(outputPhrase) {\r\n  return {\r\n    type: CLICK_OUTPUT,\r\n    outputPhrase\r\n  };\r\n}\r\n\r\nexport function changeOutput(output) {\r\n  return {\r\n    type: CHANGE_OUTPUT,\r\n    output\r\n  };\r\n}\r\n\r\nexport function getApiMyBoardsSuccess(boards) {\r\n  return {\r\n    type: GET_API_MY_BOARDS_SUCCESS,\r\n    boards\r\n  };\r\n}\r\n\r\nexport function getApiMyBoardsStarted() {\r\n  return {\r\n    type: GET_API_MY_BOARDS_STARTED\r\n  };\r\n}\r\n\r\nexport function getApiMyBoardsFailure(message) {\r\n  return {\r\n    type: GET_API_MY_BOARDS_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function createApiBoardSuccess(board, boardId) {\r\n  return {\r\n    type: CREATE_API_BOARD_SUCCESS,\r\n    board,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function createApiBoardStarted() {\r\n  return {\r\n    type: CREATE_API_BOARD_STARTED\r\n  };\r\n}\r\n\r\nexport function createApiBoardFailure(message) {\r\n  return {\r\n    type: CREATE_API_BOARD_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function updateApiBoardSuccess(board) {\r\n  return {\r\n    type: UPDATE_API_BOARD_SUCCESS,\r\n    board\r\n  };\r\n}\r\n\r\nexport function updateApiBoardStarted() {\r\n  return {\r\n    type: UPDATE_API_BOARD_STARTED\r\n  };\r\n}\r\n\r\nexport function updateApiBoardFailure(message) {\r\n  return {\r\n    type: UPDATE_API_BOARD_FAILURE,\r\n    message\r\n  };\r\n}\r\nexport function deleteApiBoardSuccess(board) {\r\n  return {\r\n    type: DELETE_API_BOARD_SUCCESS,\r\n    board\r\n  };\r\n}\r\n\r\nexport function deleteApiBoardStarted() {\r\n  return {\r\n    type: DELETE_API_BOARD_STARTED\r\n  };\r\n}\r\n\r\nexport function deleteApiBoardFailure(message) {\r\n  return {\r\n    type: DELETE_API_BOARD_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function downloadImagesSuccess() {\r\n  return {\r\n    type: DOWNLOAD_IMAGES_SUCCESS\r\n  };\r\n}\r\n\r\nexport function downloadImagesStarted() {\r\n  return {\r\n    type: DOWNLOAD_IMAGES_STARTED\r\n  };\r\n}\r\n\r\nexport function downloadImagesFailure(message) {\r\n  return {\r\n    type: DOWNLOAD_IMAGES_FAILURE,\r\n    message\r\n  };\r\n}\r\nexport function downloadImageSuccess(element) {\r\n  return {\r\n    type: DOWNLOAD_IMAGE_SUCCESS,\r\n    element\r\n  };\r\n}\r\n\r\nexport function downloadImageFailure(message) {\r\n  return {\r\n    type: DOWNLOAD_IMAGE_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\nexport function getApiMyBoards() {\r\n  return dispatch => {\r\n    dispatch(getApiMyBoardsStarted());\r\n    return API.getMyBoards({\r\n      limit: BOARDS_PAGE_LIMIT\r\n    })\r\n      .then(res => {\r\n        dispatch(getApiMyBoardsSuccess(res));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(getApiMyBoardsFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function createApiBoard(boardData, boardId) {\r\n  return dispatch => {\r\n    dispatch(createApiBoardStarted());\r\n    boardData = {\r\n      ...boardData,\r\n      isPublic: false\r\n    };\r\n    return API.createBoard(boardData)\r\n      .then(res => {\r\n        dispatch(createApiBoardSuccess(res, boardId));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(createApiBoardFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function updateApiBoard(boardData) {\r\n  return dispatch => {\r\n    dispatch(updateApiBoardStarted());\r\n    return API.updateBoard(boardData)\r\n      .then(res => {\r\n        dispatch(updateApiBoardSuccess(res));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(updateApiBoardFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function upsertApiBoard(boardData) {\r\n  return dispatch => {\r\n    if (boardData.id.length < 14) {\r\n      return dispatch(createApiBoard(boardData, boardData.id))\r\n        .then(res => {\r\n          return res;\r\n        })\r\n        .catch(e => {\r\n          throw new Error(e.message);\r\n        });\r\n    } else {\r\n      return dispatch(updateApiBoard(boardData));\r\n    }\r\n  };\r\n}\r\n\r\nexport function deleteApiBoard(boardId) {\r\n  return dispatch => {\r\n    dispatch(deleteApiBoardStarted());\r\n\r\n    return API.deleteBoard(boardId)\r\n      .then(res => {\r\n        dispatch(deleteApiBoardSuccess(res));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(deleteApiBoardFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\n/*\r\n * Thunk asynchronous functions\r\n */\r\nexport function getApiObjects() {\r\n  return dispatch => {\r\n    //get boards\r\n    return dispatch(getApiMyBoards())\r\n      .then(res => {\r\n        return dispatch(getApiMyCommunicators())\r\n          .then(res => {})\r\n          .catch(err => {\r\n            console.error(err.message);\r\n          });\r\n      })\r\n      .catch(err => {\r\n        console.error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function downloadImages() {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      dispatch(downloadImagesStarted());\r\n      const boards = getState().board.boards;\r\n      const images = getState().board.images;\r\n      for (let i = 0; i < boards.length; i++) {\r\n        if (\r\n          typeof boards[i] !== 'undefined' &&\r\n          typeof boards[i].caption !== 'undefined' &&\r\n          isUrl(boards[i].caption)\r\n        ) {\r\n          const img = images.find(image => image.id === boards[i].id);\r\n          if (!img) {\r\n            const element = await storeImage(\r\n              boards[i].caption,\r\n              boards[i].id,\r\n              'board'\r\n            );\r\n            if (element) dispatch(downloadImageSuccess(element));\r\n          }\r\n        }\r\n        for (let j = 0; j < boards[i].tiles.length; j++) {\r\n          if (\r\n            typeof boards[i].tiles[j] !== 'undefined' &&\r\n            typeof boards[i].tiles[j].image !== 'undefined' &&\r\n            isUrl(boards[i].tiles[j].image)\r\n          ) {\r\n            const img = images.find(\r\n              image => image.id === boards[i].tiles[j].id\r\n            );\r\n            if (!img) {\r\n              const element = await storeImage(\r\n                boards[i].tiles[j].image,\r\n                boards[i].tiles[j].id,\r\n                'tile'\r\n              );\r\n              if (element) dispatch(downloadImageSuccess(element));\r\n            }\r\n          }\r\n        }\r\n      }\r\n      dispatch(downloadImagesSuccess());\r\n    } catch (err) {\r\n      dispatch(downloadImagesFailure(err.message));\r\n    }\r\n  };\r\n}\r\n\r\nasync function storeImage(image, id, type) {\r\n  let element = null;\r\n  try {\r\n    let response = await fetch(image);\r\n    const blob = await response.blob();\r\n    const fileName = getFileNameFromUrl(image);\r\n    if (isAndroid()) {\r\n      const filePath = '/Android/data/com.unicef.cboard/files/' + fileName;\r\n      const fEntry = await writeCvaFile(filePath, blob);\r\n      element = {\r\n        id: id,\r\n        type: type,\r\n        url: image,\r\n        location: fEntry.nativeURL\r\n      };\r\n    }\r\n  } catch (err) {\r\n    console.log(err.message);\r\n  }\r\n  return element;\r\n}\r\n\r\nfunction getFileNameFromUrl(url) {\r\n  const parsed = new URL(url);\r\n  const filename = parsed.pathname.substring(\r\n    parsed.pathname.lastIndexOf('/') + 1\r\n  );\r\n  if (filename.lastIndexOf('.') !== -1) {\r\n    return filename;\r\n  } else {\r\n    return `${filename}.png`;\r\n  }\r\n}\r\n\r\nexport function updateApiObjectsNoChild(\r\n  parentBoard,\r\n  createCommunicator = false,\r\n  createParentBoard = false\r\n) {\r\n  return (dispatch, getState) => {\r\n    //create - update parent board\r\n    const action = createParentBoard ? createApiBoard : updateApiBoard;\r\n    return dispatch(action(parentBoard, parentBoard.id))\r\n      .then(res => {\r\n        const updatedParentBoardId = res.id;\r\n        //add new boards to the active communicator\r\n        if (parentBoard.id !== updatedParentBoardId) {\r\n          dispatch(\r\n            replaceBoardCommunicator(parentBoard.id, updatedParentBoardId)\r\n          );\r\n        }\r\n        //check if parent board is the root board of the communicator\r\n        const comm = getState().communicator.communicators.find(\r\n          communicator =>\r\n            communicator.id === getState().communicator.activeCommunicatorId\r\n        );\r\n        if (comm.rootBoard === parentBoard.id) {\r\n          comm.rootBoard = updatedParentBoardId;\r\n          comm.activeBoardId = updatedParentBoardId;\r\n          dispatch(upsertCommunicator(comm));\r\n        }\r\n        const caction = createCommunicator\r\n          ? createApiCommunicator\r\n          : updateApiCommunicator;\r\n        return dispatch(caction(comm, comm.id))\r\n          .then(() => {\r\n            dispatch(updateApiMarkedBoards());\r\n            return updatedParentBoardId;\r\n          })\r\n          .catch(e => {\r\n            throw new Error(e.message);\r\n          });\r\n      })\r\n      .catch(e => {\r\n        throw new Error(e.message);\r\n      });\r\n  };\r\n}\r\nexport function updateApiMarkedBoards() {\r\n  return (dispatch, getState) => {\r\n    const allBoards = [...getState().board.boards];\r\n    for (let i = 0; i < allBoards.length; i++) {\r\n      if (\r\n        allBoards[i].id.length > 14 &&\r\n        allBoards[i].hasOwnProperty('email') &&\r\n        allBoards[i].email === getState().app.userData.email &&\r\n        allBoards[i].hasOwnProperty('markToUpdate') &&\r\n        allBoards[i].markToUpdate\r\n      ) {\r\n        dispatch(updateApiBoard(allBoards[i]))\r\n          .then(() => {\r\n            dispatch(unmarkBoard(allBoards[i].id));\r\n            return;\r\n          })\r\n          .catch(e => {\r\n            throw new Error(e.message);\r\n          });\r\n      }\r\n    }\r\n    return;\r\n  };\r\n}\r\n\r\nexport function updateApiObjects(\r\n  childBoard,\r\n  parentBoard,\r\n  createCommunicator = false,\r\n  createParentBoard = false\r\n) {\r\n  return (dispatch, getState) => {\r\n    //create child board\r\n    return dispatch(createApiBoard(childBoard, childBoard.id))\r\n      .then(res => {\r\n        const updatedChildBoardId = res.id;\r\n        //create - update parent board\r\n        const action = createParentBoard ? createApiBoard : updateApiBoard;\r\n        return dispatch(action(parentBoard, parentBoard.id))\r\n          .then(res => {\r\n            const updatedParentBoardId = res.id;\r\n            //add new boards to the active communicator\r\n            dispatch(\r\n              replaceBoardCommunicator(childBoard.id, updatedChildBoardId)\r\n            );\r\n            if (parentBoard.id !== updatedParentBoardId) {\r\n              dispatch(\r\n                replaceBoardCommunicator(parentBoard.id, updatedParentBoardId)\r\n              );\r\n            }\r\n            //check if parent board is the root board of the communicator\r\n            const comm = getState().communicator.communicators.find(\r\n              communicator =>\r\n                communicator.id === getState().communicator.activeCommunicatorId\r\n            );\r\n            if (comm.rootBoard === parentBoard.id) {\r\n              comm.rootBoard = updatedParentBoardId;\r\n              comm.activeBoardId = updatedParentBoardId;\r\n              dispatch(upsertCommunicator(comm));\r\n            }\r\n            const caction = createCommunicator\r\n              ? createApiCommunicator\r\n              : updateApiCommunicator;\r\n            return dispatch(caction(comm, comm.id))\r\n              .then(() => {\r\n                dispatch(updateApiMarkedBoards());\r\n                return updatedParentBoardId;\r\n              })\r\n              .catch(e => {\r\n                throw new Error(e.message);\r\n              });\r\n          })\r\n          .catch(e => {\r\n            throw new Error(e.message);\r\n          });\r\n      })\r\n      .catch(e => {\r\n        throw new Error(e.message);\r\n      });\r\n  };\r\n}\r\n","export const REQUEST_VOICES = 'cboard/Speech/REQUEST_VOICES';\r\nexport const RECEIVE_VOICES = 'cboard/Speech/RECEIVE_VOICES';\r\nexport const CHANGE_VOICE = 'cboard/Speech/CHANGE_VOICE';\r\nexport const CHANGE_PITCH = 'cboard/Speech/CHANGE_PITCH';\r\nexport const CHANGE_RATE = 'cboard/Speech/CHANGE_RATE';\r\nexport const CHANGE_VOLUME = 'cboard/Speech/CHANGE_VOLUME';\r\nexport const START_SPEECH = 'cboard/Speech/START_SPEECH';\r\nexport const END_SPEECH = 'cboard/Speech/END_SPEECH';\r\nexport const CANCEL_SPEECH = 'cboard/Speech/CANCEL_SPEECH';\r\nexport const RECEIVE_TTS_ENGINES = 'cboard/Speech/RECEIVE_TTS_ENGINES';\r\nexport const RECEIVE_TTS_DEFAULT_ENGINE =\r\n  'cboard/Speech/RECEIVE_TTS_DEFAULT_ENGINE';\r\nexport const REQUEST_TTS_ENGINE = 'cboard/Speech/REQUEST_TTS_ENGINE';\r\nexport const RECEIVE_TTS_ENGINE = 'cboard/Speech/RECEIVE_TTS_ENGINE';\r\nexport const EMPTY_VOICES = 'empty voices';\r\n","export const IMPORT_COMMUNICATOR = 'cboard/Communicator/IMPORT_COMMUNICATOR';\r\nexport const CREATE_COMMUNICATOR = 'cboard/Communicator/CREATE_COMMUNICATOR';\r\nexport const EDIT_COMMUNICATOR = 'cboard/Communicator/EDIT_COMMUNICATOR';\r\nexport const DELETE_COMMUNICATOR = 'cboard/Communicator/DELETE_COMMUNICATOR';\r\nexport const CHANGE_COMMUNICATOR = 'cboard/Communicator/CHANGE_COMMUNICATOR';\r\nexport const ADD_BOARD_COMMUNICATOR =\r\n  'cboard/Communicator/ADD_BOARD_COMMUNICATOR';\r\nexport const DELETE_BOARD_COMMUNICATOR =\r\n  'cboard/Communicator/DELETE_BOARD_COMMUNICATOR';\r\nexport const REPLACE_BOARD_COMMUNICATOR =\r\n  'cboard/Communicator/REPLACE_BOARD_COMMUNICATOR';\r\nexport const CREATE_API_COMMUNICATOR_SUCCESS =\r\n  'cboard/Communicator/CREATE_API_COMMUNICATOR_SUCCESS';\r\nexport const CREATE_API_COMMUNICATOR_FAILURE =\r\n  'cboard/Communicator/CREATE_API_COMMUNICATOR_FAILURE';\r\nexport const CREATE_API_COMMUNICATOR_STARTED =\r\n  'cboard/Communicator/CREATE_API_COMMUNICATOR_STARTED';\r\nexport const UPDATE_API_COMMUNICATOR_SUCCESS =\r\n  'cboard/Communicator/UPDATE_API_COMMUNICATOR_SUCCESS';\r\nexport const UPDATE_API_COMMUNICATOR_FAILURE =\r\n  'cboard/Communicator/UPDATE_API_COMMUNICATOR_FAILURE';\r\nexport const UPDATE_API_COMMUNICATOR_STARTED =\r\n  'cboard/Communicator/UPDATE_API_COMMUNICATOR_STARTED';\r\nexport const GET_API_MY_COMMUNICATORS_SUCCESS =\r\n  'cboard/Communicator/GET_API_MY_COMMUNICATORS_SUCCESS';\r\nexport const GET_API_MY_COMMUNICATORS_FAILURE =\r\n  'cboard/Communicator/GET_API_MY_COMMUNICATORS_FAILURE';\r\nexport const GET_API_MY_COMMUNICATORS_STARTED =\r\n  'cboard/Communicator/GET_API_MY_COMMUNICATORS_STARTED';\r\n","// action types constants\r\nexport const FINISH_FIRST_VISIT = 'cboard/App/FINISH_FIRST_VISIT';\r\nexport const DISABLE_TOUR = 'cboard/App/DISABLE_TOUR';\r\nexport const ENABLE_ALL_TOURS = 'cboard/App/ENABLE_ALL_TOURS';\r\nexport const UPDATE_CONNECTIVITY = 'cboard/App/UPDATE_CONNECTIVITY';\r\nexport const UPDATE_DISPLAY_SETTINGS = 'cboard/App/UPDATE_DISPLAY_SETTINGS';\r\nexport const UPDATE_NAVIGATION_SETTINGS =\r\n  'cboard/App/UPDATE_NAVIGATION_SETTINGS';\r\nexport const UPDATE_USER_DATA = 'cboard/App/UPDATE_USER_DATA';\r\n// language constants\r\nexport const DEFAULT_LANG = 'en-US';\r\nexport const APP_LANGS = [\r\n  'ar-SA',\r\n  'be-BY',\r\n  'bn-BD',\r\n  'bg-BG',\r\n  'cs-CZ',\r\n  'da-DK',\r\n  'de-DE',\r\n  'el-GR',\r\n  'en-US',\r\n  'en-GB',\r\n  'es-ES',\r\n  'fi-FI',\r\n  'fr-FR',\r\n  'he-IL',\r\n  'hi-IN',\r\n  'hr-HR',\r\n  'hu-HU',\r\n  'id-ID',\r\n  'it-IT',\r\n  'ja-JP',\r\n  'km-KH',\r\n  'ko-KR',\r\n  'mk-MK',\r\n  'ne-NP',\r\n  'nl-NL',\r\n  'no-NO',\r\n  'pl-PL',\r\n  'pt-BR',\r\n  'pt-PT',\r\n  'ro-RO',\r\n  'ru-MD',\r\n  'ru-RU',\r\n  'si-LK',\r\n  'sk-SK',\r\n  'sr-ME',\r\n  'sr-SP',\r\n  'sr-RS',\r\n  'sv-SE',\r\n  'th-TH',\r\n  'tr-TR',\r\n  'pt-TL',\r\n  'uk-UA',\r\n  'vi-VN',\r\n  'zh-CN',\r\n  'zu-ZA' // for crowdin contextual translation\r\n];\r\n","export const DISPLAY_SIZE_STANDARD = 'Standard';\r\nexport const DISPLAY_SIZE_LARGE = 'Large';\r\nexport const DISPLAY_SIZE_EXTRALARGE = 'ExtraLarge';\r\n\r\n// Add label positioning options\r\nexport const LABEL_POSITION_ABOVE = 'Above';\r\nexport const LABEL_POSITION_BELOW = 'Below';\r\nexport const LABEL_POSITION_HIDDEN = 'Hidden';\r\n\r\nexport const DISPLAY_SIZE_GRID_COLS = {\r\n  [DISPLAY_SIZE_STANDARD]: {\r\n    lg: 6,\r\n    md: 6,\r\n    sm: 5,\r\n    xs: 4,\r\n    xxs: 3\r\n  },\r\n  [DISPLAY_SIZE_LARGE]: {\r\n    lg: 4,\r\n    md: 4,\r\n    sm: 3,\r\n    xs: 2,\r\n    xxs: 2\r\n  },\r\n  [DISPLAY_SIZE_EXTRALARGE]: {\r\n    lg: 3,\r\n    md: 3,\r\n    sm: 2,\r\n    xs: 1,\r\n    xxs: 1\r\n  }\r\n};\r\n","import {\r\n  IMPORT_COMMUNICATOR,\r\n  CREATE_COMMUNICATOR,\r\n  EDIT_COMMUNICATOR,\r\n  DELETE_COMMUNICATOR,\r\n  CHANGE_COMMUNICATOR,\r\n  ADD_BOARD_COMMUNICATOR,\r\n  DELETE_BOARD_COMMUNICATOR,\r\n  REPLACE_BOARD_COMMUNICATOR,\r\n  CREATE_API_COMMUNICATOR_SUCCESS,\r\n  CREATE_API_COMMUNICATOR_FAILURE,\r\n  CREATE_API_COMMUNICATOR_STARTED,\r\n  UPDATE_API_COMMUNICATOR_SUCCESS,\r\n  UPDATE_API_COMMUNICATOR_FAILURE,\r\n  UPDATE_API_COMMUNICATOR_STARTED,\r\n  GET_API_MY_COMMUNICATORS_SUCCESS,\r\n  GET_API_MY_COMMUNICATORS_FAILURE,\r\n  GET_API_MY_COMMUNICATORS_STARTED\r\n} from './Communicator.constants';\r\n\r\nimport API from '../../api';\r\n\r\nexport function importCommunicator(communicator) {\r\n  return {\r\n    type: IMPORT_COMMUNICATOR,\r\n    payload: communicator\r\n  };\r\n}\r\n\r\nexport function createCommunicator(communicator) {\r\n  return {\r\n    type: CREATE_COMMUNICATOR,\r\n    payload: communicator\r\n  };\r\n}\r\n\r\nexport function upsertCommunicator(communicator) {\r\n  return (dispatch, getState) => {\r\n    const {\r\n      communicator: { communicators }\r\n    } = getState();\r\n    const action =\r\n      communicators.findIndex(c => c.id === communicator.id) >= 0\r\n        ? editCommunicator\r\n        : createCommunicator;\r\n\r\n    dispatch(action(communicator));\r\n  };\r\n}\r\n\r\nexport function editCommunicator(communicator) {\r\n  return {\r\n    type: EDIT_COMMUNICATOR,\r\n    payload: communicator\r\n  };\r\n}\r\n\r\nexport function deleteCommunicator(id) {\r\n  return {\r\n    type: DELETE_COMMUNICATOR,\r\n    payload: id\r\n  };\r\n}\r\n\r\nexport function changeCommunicator(id) {\r\n  return {\r\n    type: CHANGE_COMMUNICATOR,\r\n    payload: id\r\n  };\r\n}\r\n\r\nexport function addBoardCommunicator(boardId) {\r\n  return {\r\n    type: ADD_BOARD_COMMUNICATOR,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function deleteBoardCommunicator(boardId) {\r\n  return {\r\n    type: DELETE_BOARD_COMMUNICATOR,\r\n    boardId\r\n  };\r\n}\r\n\r\nexport function replaceBoardCommunicator(prevBoardId, nextBoardId) {\r\n  return {\r\n    type: REPLACE_BOARD_COMMUNICATOR,\r\n    prevBoardId,\r\n    nextBoardId\r\n  };\r\n}\r\n\r\nexport function getApiMyCommunicatorsSuccess(communicators) {\r\n  return {\r\n    type: GET_API_MY_COMMUNICATORS_SUCCESS,\r\n    communicators\r\n  };\r\n}\r\n\r\nexport function getApiMyCommunicatorsStarted() {\r\n  return {\r\n    type: GET_API_MY_COMMUNICATORS_STARTED\r\n  };\r\n}\r\n\r\nexport function getApiMyCommunicatorsFailure(message) {\r\n  return {\r\n    type: GET_API_MY_COMMUNICATORS_FAILURE,\r\n    message\r\n  };\r\n}\r\nexport function createApiCommunicatorSuccess(communicator, communicatorId) {\r\n  return {\r\n    type: CREATE_API_COMMUNICATOR_SUCCESS,\r\n    communicator,\r\n    communicatorId\r\n  };\r\n}\r\n\r\nexport function createApiCommunicatorStarted() {\r\n  return {\r\n    type: CREATE_API_COMMUNICATOR_STARTED\r\n  };\r\n}\r\n\r\nexport function createApiCommunicatorFailure(message) {\r\n  return {\r\n    type: CREATE_API_COMMUNICATOR_FAILURE,\r\n    message\r\n  };\r\n}\r\nexport function updateApiCommunicatorSuccess(communicator) {\r\n  return {\r\n    type: UPDATE_API_COMMUNICATOR_SUCCESS,\r\n    communicator\r\n  };\r\n}\r\n\r\nexport function updateApiCommunicatorStarted() {\r\n  return {\r\n    type: UPDATE_API_COMMUNICATOR_STARTED\r\n  };\r\n}\r\n\r\nexport function updateApiCommunicatorFailure(message) {\r\n  return {\r\n    type: UPDATE_API_COMMUNICATOR_FAILURE,\r\n    message\r\n  };\r\n}\r\n\r\n/*\r\n * Thunk functions\r\n */\r\n\r\nexport function getApiMyCommunicators() {\r\n  return dispatch => {\r\n    dispatch(getApiMyCommunicatorsStarted());\r\n    return API.getCommunicators()\r\n      .then(res => {\r\n        dispatch(getApiMyCommunicatorsSuccess(res));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(getApiMyCommunicatorsFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function createApiCommunicator(communicatorData, communicatorId) {\r\n  return dispatch => {\r\n    dispatch(createApiCommunicatorStarted());\r\n    communicatorData = {\r\n      ...communicatorData,\r\n      isPublic: false\r\n    };\r\n    return API.createCommunicator(communicatorData)\r\n      .then(res => {\r\n        dispatch(createApiCommunicatorSuccess(res, communicatorId));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(createApiCommunicatorFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n\r\nexport function updateApiCommunicator(communicatorData) {\r\n  return dispatch => {\r\n    dispatch(updateApiCommunicatorStarted());\r\n    return API.updateCommunicator(communicatorData)\r\n      .then(res => {\r\n        dispatch(updateApiCommunicatorSuccess(res));\r\n        return res;\r\n      })\r\n      .catch(err => {\r\n        dispatch(updateApiCommunicatorFailure(err.message));\r\n        throw new Error(err.message);\r\n      });\r\n  };\r\n}\r\n","import {\r\n  REQUEST_VOICES,\r\n  RECEIVE_VOICES,\r\n  RECEIVE_TTS_ENGINES,\r\n  RECEIVE_TTS_DEFAULT_ENGINE,\r\n  REQUEST_TTS_ENGINE,\r\n  RECEIVE_TTS_ENGINE,\r\n  CHANGE_VOICE,\r\n  CHANGE_PITCH,\r\n  CHANGE_RATE,\r\n  START_SPEECH,\r\n  END_SPEECH,\r\n  CANCEL_SPEECH\r\n} from './SpeechProvider.constants';\r\n\r\nimport {\r\n  setLangs,\r\n  changeLang\r\n} from '../LanguageProvider/LanguageProvider.actions';\r\nimport {\r\n  getSupportedLangs,\r\n  getDefaultLang,\r\n  getVoiceURI,\r\n  filterLocalLangs\r\n} from '../../i18n';\r\nimport tts from './tts';\r\n\r\nexport function requestVoices() {\r\n  return {\r\n    type: REQUEST_VOICES\r\n  };\r\n}\r\n\r\nexport function receiveVoices(voices) {\r\n  return {\r\n    type: RECEIVE_VOICES,\r\n    voices\r\n  };\r\n}\r\n\r\nexport function requestTtsEngine() {\r\n  return {\r\n    type: REQUEST_TTS_ENGINE\r\n  };\r\n}\r\n\r\nexport function receiveTtsEngine(ttsEngineName) {\r\n  return {\r\n    type: RECEIVE_TTS_ENGINE,\r\n    ttsEngineName\r\n  };\r\n}\r\n\r\nexport function getTtsEngines() {\r\n  const ttsEngines = tts.getTtsEngines();\r\n  return {\r\n    type: RECEIVE_TTS_ENGINES,\r\n    ttsEngines\r\n  };\r\n}\r\n\r\nexport function setTtsEngine(ttsEngineName) {\r\n  return async dispatch => {\r\n    dispatch(requestTtsEngine());\r\n    try {\r\n      const voices = await tts.setTtsEngine(ttsEngineName);\r\n      dispatch(receiveTtsEngine(ttsEngineName));\r\n      if (!voices.length) {\r\n        throw new Error('TTS engine does not have a language.');\r\n      }\r\n    } catch (err) {\r\n      throw new Error('TTS engine selection error on setTtsEngine');\r\n    }\r\n  };\r\n}\r\n\r\nexport function updateLangSpeechStatus(voices) {\r\n  return async (dispatch, getState) => {\r\n    try {\r\n      // once we got the voices, we calculate what are the supported languages\r\n      const supportedLangs = getSupportedLangs(voices);\r\n      if (!supportedLangs.length) {\r\n        throw new Error('TTS engine does not have a supported language.');\r\n      }\r\n      const localLangs = filterLocalLangs(voices);\r\n      dispatch(setLangs(supportedLangs, localLangs));\r\n\r\n      // now we set the actual language based on the state\r\n      const language = getState().language.lang;\r\n      const lang = supportedLangs.includes(language)\r\n        ? language\r\n        : getDefaultLang(supportedLangs);\r\n      dispatch(changeLang(lang));\r\n\r\n      // last step is to change voice in case it is available\r\n      if (\r\n        getState().speech.options.lang.substring(0, 2) !== lang.substring(0, 2)\r\n      ) {\r\n        const uris = voices.map(v => {\r\n          return v.voiceURI;\r\n        });\r\n        let voiceURI = '';\r\n        if (uris.includes(voiceURI)) {\r\n          voiceURI = getState().speech.options.voiceURI;\r\n        } else {\r\n          voiceURI = getVoiceURI(lang, voices);\r\n        }\r\n        dispatch(changeVoice(voiceURI, lang));\r\n      }\r\n\r\n      return voices;\r\n    } catch (err) {\r\n      throw new Error(\r\n        'TTS engine does not have a supported language.' + err.message\r\n      );\r\n    }\r\n  };\r\n}\r\n\r\nexport function getTtsDefaultEngine() {\r\n  const ttsDefaultEngine = tts.getTtsDefaultEngine();\r\n  return {\r\n    type: RECEIVE_TTS_DEFAULT_ENGINE,\r\n    ttsDefaultEngine\r\n  };\r\n}\r\n\r\nexport function changeVoice(voiceURI, lang) {\r\n  return {\r\n    type: CHANGE_VOICE,\r\n    voiceURI,\r\n    lang\r\n  };\r\n}\r\n\r\nexport function changePitch(pitch) {\r\n  return {\r\n    type: CHANGE_PITCH,\r\n    pitch\r\n  };\r\n}\r\n\r\nexport function changeRate(rate) {\r\n  return {\r\n    type: CHANGE_RATE,\r\n    rate\r\n  };\r\n}\r\n\r\nexport function getVoices() {\r\n  return async dispatch => {\r\n    let voices = [];\r\n    dispatch(requestVoices());\r\n    try {\r\n      const pvoices = await tts.getVoices();\r\n      // some TTS engines do return invalid voices, so we filter them\r\n      const regex = new RegExp('^[a-zA-Z]{2,}-$', 'g');\r\n      const fvoices = pvoices.filter(voice => !regex.test(voice.lang));\r\n      voices = fvoices.map(\r\n        ({ voiceURI, lang, name, Locale, ShortName, DisplayName, Gender }) => {\r\n          let voice = {};\r\n          if (lang) {\r\n            voice.lang = lang;\r\n          } else if (Locale) {\r\n            voice.lang = Locale;\r\n          }\r\n          if (voiceURI) {\r\n            voice.voiceURI = voiceURI;\r\n            voice.voiceSource = 'local';\r\n          } else if (ShortName) {\r\n            voice.voiceURI = ShortName;\r\n            voice.voiceSource = 'cloud';\r\n          }\r\n          if (name) {\r\n            voice.name = name;\r\n          } else if (DisplayName) {\r\n            voice.name = `${DisplayName} (${voice.lang}) - ${Gender}`;\r\n          }\r\n          return voice;\r\n        }\r\n      );\r\n      dispatch(receiveVoices(voices));\r\n    } catch (err) {\r\n      console.error(err.message);\r\n      voices = [];\r\n    } finally {\r\n      return voices;\r\n    }\r\n  };\r\n}\r\n\r\nfunction startSpeech(message) {\r\n  return {\r\n    type: START_SPEECH,\r\n    isSpeaking: true,\r\n    text: message.trim()\r\n  };\r\n}\r\n\r\nfunction endSpeech() {\r\n  return {\r\n    type: END_SPEECH,\r\n    isSpeaking: false\r\n  };\r\n}\r\n\r\nexport function cancelSpeech() {\r\n  return dispatch => {\r\n    dispatch({\r\n      type: CANCEL_SPEECH,\r\n      isSpeaking: false\r\n    });\r\n    tts.cancel();\r\n  };\r\n}\r\n\r\nexport function speak(text, onend = () => {}) {\r\n  return (dispatch, getState) => {\r\n    const options = getState().speech.options;\r\n    dispatch(startSpeech(text));\r\n\r\n    tts.speak(text, {\r\n      ...options,\r\n      onend: event => {\r\n        onend();\r\n        dispatch(endSpeech());\r\n      }\r\n    });\r\n  };\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"DroppableCell_root__1y20A\",\"isActive\":\"DroppableCell_isActive__1ZV7y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"root\":\"Grid_root__1N00H\",\"grid\":\"Grid_grid__3evHu\"};","export const CBOARD_OBF_CONSTANTS = {\r\n  DATA_URL: 'http://app.cboard.io/api/v1/boards/',\r\n  URL: 'http://app.cboard.io/boards/',\r\n  LICENSE: {\r\n    type: 'CC-By',\r\n    copyright_notice_url: 'http://creativecommons.org/licenses/by',\r\n    source_url: 'https://github.com/cboard-org',\r\n    author_name: 'Cboard',\r\n    author_url: 'https://www.cboard.io',\r\n    author_email: 'support@cboard.io'\r\n  }\r\n};\r\n\r\nexport const CBOARD_ZIP_OPTIONS = {\r\n  type: 'blob',\r\n  compression: 'DEFLATE',\r\n  platform: 'UNIX'\r\n};\r\n\r\nexport const CBOARD_COLUMNS = 6;\r\nexport const CBOARD_ROWS = 4;\r\nexport const CBOARD_EXT_PREFIX = 'ext_cboard_';\r\nexport const CBOARD_EXT_PROPERTIES = ['labelKey', 'nameKey', 'hidden'];\r\nexport const NOT_FOUND_IMAGE =\r\n  'data:image/jpeg;base64,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';\r\nexport const EMPTY_IMAGE =\r\n  'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==';\r\n\r\nexport const EXPORT_CONFIG_BY_TYPE = {\r\n  cboard: {\r\n    filename: 'board.json',\r\n    callback: 'cboardExportAdapter'\r\n  },\r\n  openboard: {\r\n    filename: 'board.obz',\r\n    callback: 'openboardExportAdapter'\r\n  },\r\n  pdf: {\r\n    filename: 'board.pdf',\r\n    callback: 'pdfExportAdapter'\r\n  }\r\n};\r\n","import { isCordova } from './cordova-util';\r\n\r\nlet host = window.location.host || '';\r\nhost = host.startsWith('www.') ? host.slice(4) : host;\r\nconst DEV_API_URL = process.env.REACT_APP_DEV_API_URL || null;\r\nexport const ARASAAC_BASE_PATH_API = 'https://api.arasaac.org/api/';\r\nexport const GLOBALSYMBOLS_BASE_PATH_API = 'https://globalsymbols.com/api/v1/';\r\nexport const API_URL = isCordova()\r\n  ? 'https://api.app.cboard.io/'\r\n  : DEV_API_URL || `${window.location.protocol}//api.${host}`;\r\nexport const TAWASOL_BASE_PATH_API =\r\n  'https://madaportal.org/tawasol/wp-json/custom/v2/dea44ade76/';\r\nexport const TAWASOL_BASE_IMAGE_URL =\r\n  'https://www.madaportal.org/tawasol/wp-content/uploads/images/';\r\nexport const AZURE_INST_KEY =\r\n  process.env.REACT_APP_AZURE_INST_KEY ||\r\n  '874487ac-304c-4160-b8f3-a221541eab61';\r\nexport const AZURE_SPEECH_SUBSCR_KEY =\r\n  process.env.REACT_APP_AZURE_SPEECH_KEY || '910a3256e6aa4b4daf631cd0f550c995';\r\nexport const AZURE_SPEECH_SERVICE_REGION =\r\n  process.env.REACT_APP_AZURE_SPEECH_SERVICE_REGION || 'eastus';\r\nexport const AZURE_VOICES_BASE_PATH_API =\r\n  'https://' +\r\n  AZURE_SPEECH_SERVICE_REGION +\r\n  '.tts.speech.microsoft.com/cognitiveservices/voices/';\r\n","import {\r\n  FINISH_FIRST_VISIT,\r\n  UPDATE_DISPLAY_SETTINGS,\r\n  UPDATE_NAVIGATION_SETTINGS,\r\n  UPDATE_USER_DATA,\r\n  DISABLE_TOUR,\r\n  ENABLE_ALL_TOURS\r\n} from './App.constants';\r\n\r\nexport function updateDisplaySettings(payload = {}) {\r\n  return {\r\n    type: UPDATE_DISPLAY_SETTINGS,\r\n    payload\r\n  };\r\n}\r\n\r\nexport function updateNavigationSettings(payload = {}) {\r\n  return {\r\n    type: UPDATE_NAVIGATION_SETTINGS,\r\n    payload\r\n  };\r\n}\r\n\r\nexport function finishFirstVisit() {\r\n  return {\r\n    type: FINISH_FIRST_VISIT\r\n  };\r\n}\r\n\r\nexport function disableTour(payload = {}) {\r\n  return {\r\n    type: DISABLE_TOUR,\r\n    payload\r\n  };\r\n}\r\n\r\nexport function enableAllTours() {\r\n  return {\r\n    type: ENABLE_ALL_TOURS\r\n  };\r\n}\r\n\r\nexport function updateUserData(userData) {\r\n  return {\r\n    type: UPDATE_USER_DATA,\r\n    userData\r\n  };\r\n}\r\n","export const LOGIN_SUCCESS = 'cboard/Login/LOGIN_SUCCESS';\r\nexport const LOGOUT = 'cboard/Login/LOGOUT';\r\n","module.exports = __webpack_public_path__ + \"static/media/en-US.7a7d7e7d.md\";","module.exports = __webpack_public_path__ + \"static/media/en-US.b293d647.md\";"],"sourceRoot":""}